/*! For license information please see vendors~course-preview-udlite-app.443d3207d8a478ee808e.js.LICENSE.txt */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors~course-preview-udlite-app"],{"./node_modules/@mux/mux-data-shakaplayer/dist/shakaplayer-mux.js":function(e,t,n){!function(){var t,n;t=this,n=function(){return function(){var e={254:function(e,t,n){e.exports=n(721).default},721:function(e,t,n){"use strict";var i=n(48),r=n.n(i),a=n(153),o=n.n(a),s=n(961),u=n.n(s);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var c=u().log,d=u().utils.secondsToMs,h=u().utils.assign,f=u().utils.getComputedStyle,p=u().utils.extractHostname,g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().shaka;if("object"!==l(e)||void 0===e.constructor.version)return c.warn("[shakaPlayer-mux] You must provide a valid shakaPlayer to initShakaPlayerMux."),{emit:function(){c.warn("[shakaPlayer-mux] emit is a no-op because initShakaPlayerMux was not initialized correctly")},loadErrorHandler:function(){c.warn("[shakaPlayer-mux] loadErrorHandler is a no-op because initShakaPlayerMux was not initialized correctly")}};var i=function(t){return e.getMediaElement()&&e.getMediaElement()[t]},a=function(t){var n=e.getMediaElement();if(n)return parseInt(f(n,t))},s=function(){var e=i("preload");return"auto"===e||"metadata"===e};function g(){var t=o().fullscreenElement||o().webkitFullscreenElement||o().mozFullScreenElement||o().msFullscreenElement;return t?t===e.getMediaElement():void 0}var m={automaticErrorTracking:!0};(t=h(m,t)).data=h({player_software_name:"Shaka Player",player_software_version:e.constructor.version,player_mux_plugin_name:"shakaplayer-mux",player_mux_plugin_version:"5.10.0"},t.data);var v=u().utils.generateShortID();e.mux={},e.mux.emit=function(e,t){u().emit(v,e,t)},t.getPlayheadTime=function(){return d(i("currentTime"))},t.getStateData=function(){var t=e.getStats();return{player_is_paused:i("paused"),player_width:a("width"),player_height:a("height"),video_source_height:t.height,video_source_width:t.width,player_is_fullscreen:g(),player_autoplay_on:i("autoplay"),player_preload_on:s(),video_source_url:e.getAssetUri(),video_source_duration:d(i("duration")),view_dropped_frame_count:t.droppedFrames,video_poster_url:i("poster"),player_language_code:i("lang")}};var y=["pause","play","playing","seeking","seeked","timeupdate","stalled","waiting","ended"],b={},w={},T=!1,E=function(){T=!0;var t=e.getMediaElement();if(!t)return c.warn("[shakaPlayer-mux] Unable to getMediaElement() on shaka.Player instance when attempting to attachMediaElementEvents()");y.forEach((function(n){b[n]=function(){var i={};"timeupdate"===n&&(i.player_playhead_time=t.currentTime),e.mux.emit(n,i)},t.addEventListener(n,b[n],!1)}))};w.onstatechange=function(t){!T&&e.getMediaElement()&&E(),"load"===t.state&&e.mux.emit("playerready")};var x={video_source_bitrate:void 0,video_source_codec:void 0,video_source_fps:void 0},A=function(){var t,n,i=e.getVariantTracks(),r=i&&i.filter((function(e){return e.active})),a=r&&r.map((function(e){return e.bandwidth}));return{video_source_bitrate:a&&a.reduce((function(e,t){return e+t}),0),video_source_codec:null==r||null===(t=r[0])||void 0===t?void 0:t.videoCodec,video_source_fps:null==r||null===(n=r[0])||void 0===n?void 0:n.frameRate}},S=function(){var t=A();t&&JSON.stringify(t)!==JSON.stringify(x)&&(x=t,e.mux.emit("renditionchange",t))};w.adaptation=function(){S()},w.variantchanged=function(){S()},e.addEventListener("onstatechange",w.onstatechange),e.addEventListener("adaptation",w.adaptation),e.addEventListener("variantchanged",w.variantchanged);var I=function(e){var t,i;if(e.message)return e.message;var r=null===(t=n.util)||void 0===t||null===(i=t.Error)||void 0===i?void 0:i.Code;for(var a in r)if(r[a]===e.code)return a;return e.code},k=function(t){var n;2===(null==t?void 0:t.severity)&&e.mux.emit("error",{player_error_code:t.code,player_error_message:I(t),player_error_context:null===(n=t.data)||void 0===n?void 0:n.toString()})};w.error=function(e){if(t.automaticErrorTracking){var n=e.detail;k(n)}},e.addEventListener("error",w.error),e.mux.destroy=function(){Object.keys(w).forEach((function(t){e.removeEventListener(t,w[t]),delete w[t]})),Object.keys(b).forEach((function(t){var n=e.getMediaElement();n&&n.removeEventListener(t,b[t],!1),delete b[t]})),e.mux.emit("destroy")};var _={0:"manifest",1:"media"};e.getNetworkingEngine().registerResponseFilter((function(t,n){var i=u().utils.now();if(!n.fromCache){var r=_[t&&t.toString()];if(t){var a={request_bytes_loaded:n.data.byteLength,request_hostname:p(n.uri),request_url:n.uri,request_response_headers:n.headers,request_type:r,request_start:n.timeMs?i-n.timeMs:void 0,request_response_end:i};e.mux.emit("requestcompleted",a)}}})),u().init(v,t);var C={emit:e.mux.emit,loadErrorHandler:k};return C};g.utils=u().utils,t.default=g},153:function(e,t,n){var i,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},a=n(558);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},48:function(e,t,n){var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},961:function(e){var t;t=function(){return function(){var e={80:function(e,t,n){e.exports=n(728).default},728:function(e,t,n){"use strict";n.d(t,{default:function(){return Nt}});var i=n(48),r=n.n(i),a=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},o=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},s=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||o()),e.muxId):e},u=function(e){var t;e&&void 0!==e.nodeName?e=s(t=e):t=document.querySelector(e);var n=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,n]},l=n(640),c=n.n(l),d=c().methodFactory;c().methodFactory=function(e,t,n){var i=d(e,t,n);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);i.apply(void 0,e)}},c().setLevel(c().getLevel());var h=c();function f(){return"1"===(r().doNotTrack||r().navigator&&r().navigator.doNotTrack)}var p={now:function(){var e=r().performance,t=e&&e.timing,n=t&&t.navigationStart,i="number"==typeof n&&"function"==typeof e.now?n+e.now():Date.now();return Math.round(i)}},g=function(e){return m(e)[0]},m=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,n=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return n&&(t=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,t]},v=function(){var e=r().performance;return void 0!==(e&&e.timing)},y=function(){var e=r().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},b=function(){var e=r().performance,t=e&&e.timing;return t&&t.navigationStart};function w(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}var T=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],E=["x-cdn","content-type"].concat(T);function x(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var n=e.split(": "),i=n.shift();i&&(E.indexOf(i.toLowerCase())>=0||0===i.toLowerCase().indexOf("x-litix-"))&&(t[i]=n.join(": "))}})),t}function A(e){if(e){var t=T.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var S=function(e){var t={};for(var n in e){var i=e[n];-1!==i["DATA-ID"].search("io.litix.data.")&&(t[i["DATA-ID"].replace("io.litix.data.","")]=i.VALUE)}return t};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){if(!e)return{};var t=b(),n=e.loading,i=n?n.start:e.trequest,r=n?n.first:e.tfirst,a=n?n.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+i),responseStart:Math.round(t+r),responseEnd:Math.round(t+a)}},M=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return x(e.getAllResponseHeaders())};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var n=e.getRequests({state:"executed"});if(0===n.length)return{};var i,r=n[n.length-1],a=g(r.url),o=r.url,s=r.bytesLoaded,u=new Date(r.requestStartDate).getTime(),l=new Date(r.firstByteDate).getTime(),c=new Date(r.requestEndDate).getTime(),d=isNaN(r.duration)?0:r.duration,h="function"==typeof t.getMetricsFor?t.getMetricsFor(r.mediaType).HttpList:t.getDashMetrics().getHttpRequests(r.mediaType);return h.length>0&&(i=x(h[h.length-1]._responseHeaders||"")),{requestStart:u,requestResponseStart:l,requestResponseEnd:c,requestBytesLoaded:s,requestResponseHeaders:i,requestMediaDuration:d,requestHostname:a,requestUrl:o,requestId:i?A(i):void 0}},N=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=0,j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++U,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach((function(e,i){e._eventEmitterGuid===t._eventEmitterGuid&&n.splice(i,1)}))}},{key:"one",value:function(e,t,n){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++U;var r=function r(){i.off(e,r),t.apply(n||this,arguments)};r._eventEmitterGuid=t._eventEmitterGuid,this.on(e,r)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],r=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(t,i){(t=t.slice()).forEach((function(t){t.call(n,{type:e},i)}))};o(i,t),o(r,t),o(a,t)}}}],n&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),B=j;function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){n._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?n._stopPlaybackHeartbeatInterval():n._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==n._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,i){null!==n._playbackHeartbeatInterval&&(r().clearInterval(n._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),n._playbackHeartbeatInterval=null)}))}var t,n;return t=e,(n=[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=r().setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(r().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var H=function(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){n.viewErrored=!1})),t.on("error",(function(e,i){try{var r=t.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context});r?(t.data.player_error_code=r.player_error_code||i.player_error_code,t.data.player_error_message=r.player_error_message||i.player_error_message,t.data.player_error_context=r.player_error_context||i.player_error_context,n.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),n.viewErrored=!0}}))}));function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}var t,n;return t=e,(n=[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),w(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=p.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);t.on("playing",i),t.on("adplaying",i),t.on("seeked",i);var r=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",r),t.on("seeking",r),t.on("adplaying",(function(){n._isAdPlaying=!0})),t.on("adended",(function(){n._isAdPlaying=!1})),t.on("adpause",(function(){n._isAdPlaying=!1})),t.on("adbreakstart",(function(){n._isAdPlaying=!1})),t.on("adbreakend",(function(){n._isAdPlaying=!1})),t.on("adplay",(function(){n._isAdPlaying=!1})),t.on("viewinit",(function(){n._playbackTimeTrackerLastPlayheadPosition=-1,n._lastTime=p.now(),n._isAdPlaying=!1,n._callbackUpdatePlaybackTime=null}))}var t,n;return t=e,(n=[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=p.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&w(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t;var n=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",n),t.on("playbackheartbeatend",n),t.on("timeupdate",n),t.on("destroy",(function(){t.off("timeupdate",n)}))}var t,n;return t=e,(n=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var r=this.pm.getPlayheadTime();void 0!==r&&(this.pm.data.player_playhead_time=r,i(),this._updateMaxPlayheadPosition())}}}])&&W(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Q=3e5,$=function(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var n,i=function(e,t){r(t),n=void 0},r=function(e){if(n){var i=e.viewer_time-n;w(t.data,"view_rebuffer_duration",i),n=e.viewer_time,t.data.view_rebuffer_duration>Q&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Q,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return r(t)})),t.on("rebufferstart",(function(e,r){n||(w(t.data,"view_rebuffer_count",1),n=r.viewer_time,t.one("rebufferend",i))})),t.on("viewinit",(function(){n=void 0,t.off("rebufferend",i)}))}}));function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ee=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){n._cleanupRebufferTracker(null,{viewer_time:p.now()})})))}var t,n;return t=e,n=[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&i>0&&r-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+r-i}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}],n&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),te=ee;function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ie=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){var e=t.data,i=e.view_id;if(!e.view_program_changed){var r=function(e,r){var a=r.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?n.calculateTimeToFirstFrame(a||p.now(),i):"adplaying"!==e.type||void 0!==t.data.view_time_to_first_frame&&!n._inPrerollPosition()||n.calculateTimeToFirstFrame(a||p.now(),i)};t.one("playing",r),t.one("adplaying",r),t.one("viewend",(function(){t.off("playing",r),t.off("adplaying",r)}))}}))}var t,n;return t=e,(n=[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}])&&ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ae=function(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){n._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(n._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&n._lastPlayerWidth>=0&&n._lastSourceWidth>0&&n._lastPlayerHeight>=0&&n._lastSourceHeight>0){var e=t.data.player_playhead_time-n._lastPlayheadPosition;if(e<0)return void(n._lastPlayheadPosition=-1);var i=Math.min(n._lastPlayerWidth/n._lastSourceWidth,n._lastPlayerHeight/n._lastSourceHeight),r=Math.max(0,i-1),a=Math.max(0,1-i);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,r),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,a),w(t.data,"view_total_content_playback_time",e),w(t.data,"view_total_upscaling",r*e),w(t.data,"view_total_downscaling",a*e)}n._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){n._lastPlayheadPosition=t.data.player_playhead_time,n._lastPlayerWidth=t.data.player_width,n._lastPlayerHeight=t.data.player_height,n._lastSourceWidth=t.data.video_source_width,n._lastSourceHeight=t.data.video_source_height}))}))}));function oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var se=function(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSeeking=!1;var i=-1,r=function(){var e=p.now(),r=(t.data.viewer_time||e)-(i||e);w(t.data,"view_seek_duration",r),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,r),n.isSeeking=!1,i=-1};t.on("seeking",(function(e,a){Object.assign(t.data,a),n.isSeeking&&a.viewer_time-i<=2e3?i=a.viewer_time:(n.isSeeking&&r(),n.isSeeking=!0,i=a.viewer_time,w(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){r()})),t.on("viewend",(function(){n.isSeeking&&(r(),t.send("seeked")),n.isSeeking=!1,i=-1}))}));function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var de=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},he=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],fe=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){n.isAdBreak=!1,n._currentAdRequestNumber=0,n._currentAdResponseNumber=0,n._adRequests=[],n._adResponses=[],n._adHasPlayed=!1,n._wouldBeNewAdPlay=!0,n._prerollPlayTime=void 0})),he.forEach((function(e){return t.on(e,n._updateAdData.bind(n))}));var i=function(){n.isAdBreak=!1};t.on("adbreakstart",(function(){n.isAdBreak=!0})),t.on("play",i),t.on("playing",i),t.on("viewend",i),t.on("adrequest",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdRequestNumber++},i),de(n._adRequests,i),w(t.data,"view_ad_request_count"),n.inPrerollPosition()&&(t.data.view_preroll_requested=!0,n._adHasPlayed||w(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,i){i=Object.assign({ad_request_id:"generatedAdRequestId"+n._currentAdResponseNumber++},i),de(n._adResponses,i);var r=n.findAdRequest(i.ad_request_id);r&&w(t.data,"view_ad_request_time",Math.max(0,i.viewer_time-r.viewer_time))})),t.on("adplay",(function(e,i){n._adHasPlayed=!0,n._wouldBeNewAdPlay&&(n._wouldBeNewAdPlay=!1,w(t.data,"view_ad_played_count")),n.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,n._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,i.viewer_time-n._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,i.viewer_time-t.data.view_start)),n._prerollPlayTime=i.viewer_time)})),t.on("adplaying",(function(e,i){n.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==n._prerollPlayTime&&(t.data.view_preroll_load_time=i.viewer_time-n._prerollPlayTime,t.data.view_startup_preroll_load_time=i.viewer_time-n._prerollPlayTime)})),t.on("adclicked",(function(e,i){n._wouldBeNewAdPlay||w(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,i){n._wouldBeNewAdPlay||w(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){n._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){n._wouldBeNewAdPlay=!0}))}var t,n;return t=e,(n=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=ue(m(t.ad_tag_url),2),i=n[0],r=n[1];this.pm.data.view_preroll_ad_tag_domain=r,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=ue(m(t.ad_asset_url),2),o=a[0],s=a[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}])&&ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ge=function(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(){t.disableRebufferTracking||n&&(w(t.data,"view_waiting_rebuffer_duration",p.now()-n),n=!1,r().clearInterval(i))},o=!1,s=function(){o=!1,a()};t.on("waiting",(function(){o&&(t.disableRebufferTracking||(w(t.data,"view_waiting_rebuffer_count",1),n=p.now(),i=r().setInterval((function(){if(n){var e=p.now();w(t.data,"view_waiting_rebuffer_duration",e-n),n=e}}),250)))})),t.on("playing",(function(){a(),o=!0})),t.on("pause",s),t.on("seeking",s)}));function me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(){n.lastWallClockTime=p.now(),t.on("before*",r)},r=function(e){var i=p.now(),r=n.lastWallClockTime;n.lastWallClockTime=i,i-r>3e4&&(t.emit("devicesleep",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicewake"))};t.one("playbackheartbeat",i),t.on("playbackheartbeatend",(function(){t.off("before*",r),t.one("playbackheartbeat",i)}))})),ye=n(375),be=n(655),we=n.n(be),Te="muxData",Ee=function(){var e;try{e=ye.parse(we().get(Te)||"")}catch(t){e={}}return e},xe=function(e){try{we().set(Te,ye.stringify(e),{expires:365})}catch(e){}},Ae=function(){var e=Ee();return e.mux_viewer_id=e.mux_viewer_id||a(),e.msn=e.msn||Math.random(),xe(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function Se(e,t){var n=t.beaconCollectionDomain,i=t.beaconDomain;if(n)return"https://"+n;var r=i||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+r:"https://img.litix.io/a.gif"}var Ie=function(){var e;switch(ke()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},ke=function(){var e=r().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};Ie.getConnectionFromAPI=ke;var _e=Ie,Ce=De({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),Me=De({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function De(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Re(e){var t={},n={};return Object.keys(e).forEach((function(i){var r=!1;if(e.hasOwnProperty(i)&&void 0!==e[i]){var a=i.split("_"),o=a[0],s=Ce[o];s||(h.info("Data key word `"+a[0]+"` not expected in "+i),s=o+"_"),a.splice(1).forEach((function(e){"url"===e&&(r=!0),Me[e]?s+=Me[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(h.info("Data key word `"+e+"` not expected in "+i),s+="_"+e+"_")})),r?n[s]=e[i]:t[s]=e[i]}})),Object.assign(t,n)}var Le={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Pe=["hb","requestcompleted","requestfailed","requestcanceled"],Ne="https://img.litix.io",Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||Ne,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Le,t)};Oe.prototype.queueEvent=function(e,t){var n=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},Oe.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},Oe.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),r().clearTimeout(this._sendTimeout)},Oe.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],Re({mux_view_message:"event queue truncated"}));var n=this._createPayload(t);je(this._beaconUrl,n,!0,(function(){}))},Oe.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var n=this._createPayload(t),i=p.now();je(this._beaconUrl,n,!1,(function(n,r){r?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,h.info("Error sending beacon: "+r)):e._failureCount=0,e._roundTripTime=p.now()-i,e._postInFlight=!1}))}},Oe.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},Oe.prototype._startBeaconSending=function(){var e=this;r().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=r().setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},Oe.prototype._createPayload=function(e){var t,n,i,r=this,a={transmission_timestamp:Math.round(p.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var o=function(){t=JSON.stringify({metadata:a,events:n||e}),i=t.length/1024},s=function(){return i<=r._options.maxPayloadKBSize};return o(),s()||(h.info("Payload size is too big ("+i+" kb). Removing unnecessary events."),n=e.filter((function(e){return-1===Pe.indexOf(e.e)})),o()),s()||(h.info("Payload size still too big ("+i+" kb). Cropping fields.."),n.forEach((function(e){for(var t in e){var n=e[t];"string"==typeof n&&n.length>51200&&(e[t]=n.substring(0,51200))}})),o()),t};var Ue=function(e){return e.length<=57344},je=function(e,t,n,i){if(n&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))i();else if(r().fetch)r().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:Ue(t)}).then((function(e){return i(null,e.ok?null:"Error")})).catch((function(e){return i(null,e)}));else{if(r().XMLHttpRequest){var a=new(r().XMLHttpRequest);return a.onreadystatechange=function(){if(4===a.readyState)return i(null,200!==a.status?"error":void 0)},a.open("POST",e),a.setRequestHeader("Content-Type","text/plain"),void a.send(t)}i()}},Be=Oe;function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],We=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Ye=["ad_id","ad_creative_id","ad_universal_id"],Je=["viewstart","error","ended","viewend"],Qe=function(){function e(t,n){var i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qe(this,e),Ke(this,"previousBeaconData",null),Ke(this,"lastEventTime",0),Ke(this,"rateLimited",!1),this.mux=t,this.envKey=n,this.options=b,this.eventQueue=new Be(Se(this.envKey,this.options)),this.sampleRate=null!==(i=this.options.sampleRate)&&void 0!==i?i:1,this.disableCookies=null!==(a=this.options.disableCookies)&&void 0!==a&&a,this.respectDoNotTrack=null!==(o=this.options.respectDoNotTrack)&&void 0!==o&&o,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(s=this.options.platform)||void 0===s?void 0:s.name,viewer_application_version:null===(u=this.options.platform)||void 0===u?void 0:u.version,viewer_application_engine:null===(l=this.options.platform)||void 0===l?void 0:l.layout,viewer_device_name:null===(c=this.options.platform)||void 0===c?void 0:c.product,viewer_device_category:"",viewer_device_manufacturer:null===(d=this.options.platform)||void 0===d?void 0:d.manufacturer,viewer_os_family:null===(h=this.options.platform)||void 0===h||null===(f=h.os)||void 0===f?void 0:f.family,viewer_os_architecture:null===(p=this.options.platform)||void 0===p||null===(g=p.os)||void 0===g?void 0:g.architecture,viewer_os_version:null===(m=this.options.platform)||void 0===m||null===(v=m.os)||void 0===v?void 0:v.version,viewer_connection_type:_e(),page_url:null===r()||void 0===r()||null===(y=r().location)||void 0===y?void 0:y.href},this.viewerData=this.disableCookies?{}:Ae()}var t,n;return t=e,(n=[{key:"send",value:function(e,t){var n;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&f())return h.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==He(t))return h.error("A data object was expected in send() but was not provided");var i,r,o=this.disableCookies?{}:(i=Ee(),r=p.now(),i.session_start&&(i.sst=i.session_start,delete i.session_start),i.session_id&&(i.sid=i.session_id,delete i.session_id),i.session_expires&&(i.sex=i.session_expires,delete i.session_expires),(!i.sex||i.sex<r)&&(i.sid=a(),i.sst=r),i.sex=r+15e5,xe(i),{session_id:i.sid,session_start:i.sst,session_expires:i.sex}),s=Ge(Ge(Ge(Ge(Ge({},this.pageLevelData),t),o),this.viewerData),{},{event:e,env_key:this.envKey});s.user_id&&(s.viewer_user_id=s.user_id,delete s.user_id);var u=(null!==(n=s.mux_sample_number)&&void 0!==n?n:0)>=this.sampleRate,l=Re(this._deduplicateBeaconData(e,s));if(this.lastEventTime=this.mux.utils.now(),u)return h.info("Not sending event due to sample rate restriction",e,s,l);if(this.envKey||h.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,s,l),!this.rateLimited)if(h.info("Sending event",e,s,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):Je.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return s.event="eventrateexceeded",l=Re(s),this.eventQueue.queueEvent(s.event,l),h.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,i={},r=t.view_id;if("-1"===r||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=Ge({},t),r&&(this.previousBeaconData=i),r&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.entries(t).forEach((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=r[0],s=r[1];n.previousBeaconData&&(s!==n.previousBeaconData[o]||Xe.indexOf(o)>-1||n.objectHasChanged(a,o,s,n.previousBeaconData[o])||n.eventRequiresKey(e,o))&&(i[o]=s,n.previousBeaconData[o]=s)}))}return i}},{key:"objectHasChanged",value:function(e,t,n,i){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===He(n)&&"object"===He(i)&&Object.keys(n||{}).length===Object.keys(i||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(!Ye.includes(t)||!We.includes(e))}}])&&ze(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ze=function(e,t,n){return t&&$e(e.prototype,t),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=0,i=0,r=0,a=0,o=0,s=0,u=0;t.on("requestcompleted",(function(e,s){var u,l,c=s.request_start,d=s.request_response_start,h=s.request_response_end,f=s.request_bytes_loaded;if(a++,d?(u=d-(null!=c?c:0),l=(null!=h?h:0)-d):l=(null!=h?h:0)-(null!=c?c:0),l>0&&f&&f>0){var p=f/l*8e3;o++,i+=f,r+=l,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,p),t.data.view_average_request_throughput=i/r*8e3,t.data.view_request_count=a,u>0&&(n+=u,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,u),t.data.view_average_request_latency=n/o)}})),t.on("requestfailed",(function(e,n){a++,s++,t.data.view_request_count=a,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,n){a++,u++,t.data.view_request_count=a,t.data.view_request_canceled_count=u}))}));function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt=function(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("before*",(function(e,i){var r=i.viewer_time,a=p.now(),o=n._lastEventTime;if(n._lastEventTime=a,o&&a-o>36e5){var s=Object.keys(t.data).reduce((function(e,n){return 0===n.indexOf("video_")?Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,t.data[n])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:r},s)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:r}),"playing"!==e.type&&t.emit("playing",{viewer_time:r}))}}))}));function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function ot(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return st(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}var lt=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(r,e);var t,n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ut(e);if(t){var r=ut(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ot(this,n)}}(r);function r(e,t,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(o=i.call(this)).DOM_CONTENT_LOADED_EVENT_END=y(),o.NAVIGATION_START=b(),o.mux=e,o.id=t,(n=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},n)).data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),h.setLevel(n.debug?"debug":"warn"),o.getPlayheadTime=n.getPlayheadTime,o.getStateData=n.getStateData||function(){return{}},o.getAdData=n.getAdData||function(){},o.minimumRebufferDuration=n.minimumRebufferDuration,o.sustainedRebufferThreshold=n.sustainedRebufferThreshold,o.playbackHeartbeatTime=n.playbackHeartbeatTime,o.disableRebufferTracking=n.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,o.errorTranslator=n.errorTranslator,o.playbackEventDispatcher=new Qe(e,n.data.env_key,n),o.data={player_instance_id:a(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain?n.beaconCollectionDomain:n.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1,o.oldEmit=o.emit,o.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var s=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(st(o));o.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)}));var u=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(st(o));if(o.on("videochange",(function(e,t){u(t)})),o.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),u(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),o.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),o.on("destroy",o.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var l=function(){var e=void 0!==o.data.view_start;o.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",l,!1);var c=function(e){e.persisted||o.destroy()};window.addEventListener("pagehide",c,!1),o.on("destroy",(function(){window.removeEventListener("visibilitychange",l),window.removeEventListener("pagehide",c)}))}return o.on("playerready",(function(e,t){Object.assign(this.data,t)})),lt.forEach((function(e){o.on(e,(function(t,n){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,n),this._sanitizeData()})),o.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),o.on("viewend",(function(e,t){Object.assign(o.data,t)})),o.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),o.longResumeTracker=new tt(st(o)),o.errorTracker=new H(st(o)),new ve(st(o)),o.seekingTracker=new se(st(o)),o.playheadTime=new Y(st(o)),o.playbackHeartbeat=new V(st(o)),new ae(st(o)),o.watchTimeTracker=new z(st(o)),new X(st(o)),o.adTracker=new fe(st(o)),new te(st(o)),new $(st(o)),new ie(st(o)),new ge(st(o)),new Ze(st(o)),n.hlsjs&&o.addHLSJS(n),n.dashjs&&o.addDashJS(n),o.emit("viewinit",n.data),o}return t=r,n=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(m(t.video_source_url),2),i=n[0],r=n[1];t.video_source_domain=r,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var n=parseInt(e.data[t],10);e.data[t]=isNaN(n)?void 0:n})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var n=e.data[t].toLowerCase();0!==n.indexOf("data:")&&0!==n.indexOf("blob:")||(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(e,t){var n=this;Object.keys(this.data).forEach((function(e){0===e.indexOf("video_")&&delete n.data[e]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=a(),n=function(){t===e.data.view_id&&w(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,n){var i=arguments.length>4?arguments[4]:void 0,r=e.log,a=e.utils.secondsToMs,o=function(e){var t,n=parseInt(i.version);return 1===n&&null!==e.programDateTime&&(t=e.programDateTime),0===n&&null!==e.pdt&&(t=e.pdt),t};if(v()){var s=function(n,i){return e.emit(t,n,i)},u=function(e,t){var n=t.levels,i=t.audioTracks,r=t.url,a=t.stats,o=t.networkDetails,u=t.sessionData,l={},c={};n.forEach((function(e,t){l[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),i.forEach((function(e,t){c[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var d=C(a),h=d.bytesLoaded,f=d.requestStart,p=d.responseStart,m=d.responseEnd;s("requestcompleted",k(k({},S(u)),{},{request_event_type:e,request_bytes_loaded:h,request_start:f,request_response_start:p,request_response_end:m,request_type:"manifest",request_hostname:g(r),request_response_headers:M(o),request_rendition_lists:{media:l,audio:c,video:{}}}))};n.on(i.Events.MANIFEST_LOADED,u);var l=function(e,t){var n=t.details,i=t.level,r=t.networkDetails,u=t.stats,l=C(u),c=l.bytesLoaded,d=l.requestStart,h=l.responseStart,f=l.responseEnd,p=n.fragments[n.fragments.length-1],m=o(p)+a(p.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:d,request_response_start:h,request_response_end:f,request_current_level:i,request_type:"manifest",request_hostname:g(n.url),request_response_headers:M(r),video_holdback:n.holdBack&&a(n.holdBack),video_part_holdback:n.partHoldBack&&a(n.partHoldBack),video_part_target_duration:n.partTarget&&a(n.partTarget),video_target_duration:n.targetduration&&a(n.targetduration),video_source_is_live:n.live,player_manifest_newest_program_time:isNaN(m)?void 0:m})};n.on(i.Events.LEVEL_LOADED,l);var c=function(e,t){var n=t.details,i=t.networkDetails,r=t.stats,a=C(r),o=a.bytesLoaded,u=a.requestStart,l=a.responseStart,c=a.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:u,request_response_start:l,request_response_end:c,request_type:"manifest",request_hostname:g(n.url),request_response_headers:M(i)})};n.on(i.Events.AUDIO_TRACK_LOADED,c);var d=function(e,t){var i=t.stats,r=t.networkDetails,a=t.frag;i=i||a.stats;var o=C(i),u=o.bytesLoaded,l=o.requestStart,c=o.responseStart,d=o.responseEnd,h=r?M(r):void 0,f={request_event_type:e,request_bytes_loaded:u,request_start:l,request_response_start:c,request_response_end:d,request_hostname:r?g(r.responseURL):void 0,request_id:h?A(h):void 0,request_response_headers:h,request_media_duration:a.duration,request_url:null==r?void 0:r.responseURL};"main"===a.type?(f.request_type="media",f.request_current_level=a.level,f.request_video_width=(n.levels[a.level]||{}).width,f.request_video_height=(n.levels[a.level]||{}).height,f.request_labeled_bitrate=(n.levels[a.level]||{}).bitrate):f.request_type=a.type,s("requestcompleted",f)};n.on(i.Events.FRAG_LOADED,d);var h=function(e,t){var n=t.frag,i=n.start,r={currentFragmentPDT:o(n),currentFragmentStart:a(i)};s("fragmentchange",r)};n.on(i.Events.FRAG_CHANGED,h);var f=function(e,t){var n=t.type,r=t.details,a=t.response,o=t.fatal,u=t.frag,l=t.networkDetails,c=(null==u?void 0:u.url)||t.url||"",d=l?M(l):void 0;if(r!==i.ErrorDetails.MANIFEST_LOAD_ERROR&&r!==i.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&r!==i.ErrorDetails.FRAG_LOAD_ERROR&&r!==i.ErrorDetails.FRAG_LOAD_TIMEOUT&&r!==i.ErrorDetails.LEVEL_LOAD_ERROR&&r!==i.ErrorDetails.LEVEL_LOAD_TIMEOUT&&r!==i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&r!==i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&r!==i.ErrorDetails.SUBTITLE_LOAD_ERROR&&r!==i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&r!==i.ErrorDetails.KEY_LOAD_ERROR&&r!==i.ErrorDetails.KEY_LOAD_TIMEOUT||s("requestfailed",{request_error:r,request_url:c,request_hostname:g(c),request_id:d?A(d):void 0,request_type:r===i.ErrorDetails.FRAG_LOAD_ERROR||r===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":r===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||r===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":r===i.ErrorDetails.SUBTITLE_LOAD_ERROR||r===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":r===i.ErrorDetails.KEY_LOAD_ERROR||r===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==a?void 0:a.code,request_error_text:null==a?void 0:a.text}),o){var h,f="".concat(c?"url: ".concat(c,"\n"):"")+"".concat(a&&(a.code||a.text)?"response: ".concat(a.code,", ").concat(a.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(h=t.err)||void 0===h?void 0:h.message,"\n"):"");s("error",{player_error_code:n,player_error_message:r,player_error_context:f})}};n.on(i.Events.ERROR,f);var p=function(e,t){var n=t.frag,i=n&&n._url||"";s("requestcanceled",{request_event_type:e,request_url:i,request_type:"media",request_hostname:g(i)})};n.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var m=function(e,t){var i=t.level,a=n.levels[i];if(a&&a.attrs&&a.attrs.BANDWIDTH){var o,u=a.attrs.BANDWIDTH,l=parseFloat(a.attrs["FRAME-RATE"]);isNaN(l)||(o=l),u?s("renditionchange",{video_source_fps:o,video_source_bitrate:u,video_source_width:a.width,video_source_height:a.height,video_source_rendition_name:a.name,video_source_codec:null==a?void 0:a.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};n.on(i.Events.LEVEL_SWITCHED,m),n._stopMuxMonitor=function(){n.off(i.Events.MANIFEST_LOADED,u),n.off(i.Events.LEVEL_LOADED,l),n.off(i.Events.AUDIO_TRACK_LOADED,c),n.off(i.Events.FRAG_LOADED,d),n.off(i.Events.FRAG_CHANGED,h),n.off(i.Events.ERROR,f),n.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),n.off(i.Events.LEVEL_SWITCHED,m),n.off(i.Events.DESTROYING,n._stopMuxMonitor),delete n._stopMuxMonitor},n.on(i.Events.DESTROYING,n._stopMuxMonitor)}else r.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,n){var i=e.log;if(n&&n.on){var r=function(n,i){return e.emit(t,n,i)},a=function(e){var t=e.type,n=(e.data||{}).url;r("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:g(n),request_url:n})};n.on("manifestLoaded",a);var o={},s=function(e){var t=e.type,i=e.fragmentModel,a=(e.chunk||{}).mediaInfo||{},s=a.type,u=a.bitrateList,l={};(u=u||[]).forEach((function(e,t){l[t]={},l[t].width=e.width,l[t].height=e.height,l[t].bitrate=e.bandwidth,l[t].attrs={}})),"video"===s?o.video=l:"audio"===s?o.audio=l:o.media=l;var c=P(i,n),d=c.requestStart,h=c.requestResponseStart,f=c.requestResponseEnd,p=c.requestResponseHeaders,g=c.requestMediaDuration,m=c.requestHostname,v=c.requestUrl,y=c.requestId;r("requestcompleted",{request_event_type:t,request_start:d,request_response_start:h,request_response_end:f,request_bytes_loaded:-1,request_type:s+"_init",request_response_headers:p,request_hostname:m,request_id:y,request_url:v,request_media_duration:g,request_rendition_lists:o})};n.on("initFragmentLoaded",s);var u=function(e){var t=e.type,i=e.fragmentModel,a=e.chunk||{},o=a.mediaInfo,s=a.start,u=(o||{}).type,l=P(i,n),c=l.requestStart,d=l.requestResponseStart,h=l.requestResponseEnd,f=l.requestBytesLoaded,p=l.requestResponseHeaders,g=l.requestMediaDuration,m=l.requestHostname,v=l.requestUrl,y=l.requestId,b=function(e,t){var n=t.getQualityFor(e),i=t.getCurrentTrackFor(e).bitrateList;return i?{currentLevel:n,renditionWidth:i[n].width||null,renditionHeight:i[n].height||null,renditionBitrate:i[n].bandwidth}:{}}(u,n),w=b.currentLevel,T=b.renditionWidth,E=b.renditionHeight,x=b.renditionBitrate;r("requestcompleted",{request_event_type:t,request_start:c,request_response_start:d,request_response_end:h,request_bytes_loaded:f,request_type:u,request_response_headers:p,request_hostname:m,request_id:y,request_url:v,request_media_start_time:s,request_media_duration:g,request_current_level:w,request_labeled_bitrate:x,request_video_width:T,request_video_height:E})};n.on("mediaFragmentLoaded",u);var l={video:void 0,audio:void 0,totalBitrate:void 0},c=function(e,t,a){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=n.getBitrateInfoListFor(o).find((function(t){return t.qualityIndex===e.newQuality}));if(s&&"number"==typeof s.bitrate){l[o]=R(R({},s),{},{codec:n.getCurrentTrackFor(o).codec});var u=function(){if(l.video&&"number"==typeof l.video.bitrate){if(l.video.width&&l.video.height){var e=l.video.bitrate;return l.audio&&"number"==typeof l.audio.bitrate&&(e+=l.audio.bitrate),e!==l.totalBitrate?(l.totalBitrate=e,{video_source_bitrate:e,video_source_height:l.video.height,video_source_width:l.video.width,video_source_codec:N(l.video.codec)}):void 0}i.warn("have bitrate info for video but missing width/height")}}();u&&r("renditionchange",u)}else i.warn("missing bitrate info for ".concat(o))}}else i.warn("missing evt.newQuality in qualityChangeRendered event",e)};n.on("qualityChangeRendered",c);var d=function(e){var t=e.request,n=e.mediaType;r("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:n,request_hostname:g(t.url)})};n.on("fragmentLoadingAbandoned",d);var h=function(e){var t,n,i=e.error,a=(null==i||null===(t=i.data)||void 0===t?void 0:t.request)||{},o=(null==i||null===(n=i.data)||void 0===n?void 0:n.response)||{};27===(null==i?void 0:i.code)&&r("requestfailed",{request_error:a.type+"_"+a.action,request_url:a.url,request_hostname:g(a.url),request_type:a.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=a&&a.url?"url: ".concat(a.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");r("error",{player_error_code:null==i?void 0:i.code,player_error_message:null==i?void 0:i.message,player_error_context:s})};n.on("error",h),n._stopMuxMonitor=function(){n.off("manifestLoaded",a),n.off("initFragmentLoaded",s),n.off("mediaFragmentLoaded",u),n.off("qualityChangeRendered",c),n.off("error",h),n.off("fragmentLoadingAbandoned",d),delete n._stopMuxMonitor}}else i.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],n&&rt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(B),dt=ct,ht=n(153),ft=n.n(ht);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var vt,yt=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],bt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};r()&&r().WeakMap&&(vt=new WeakMap);var wt=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};wt.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},wt.prototype.processLine=function(e){var t=e.indexOf(":"),n=kt(e,t),i=n[0],r=2===n.length?xt(n[1]):void 0;if("#"!==i[0])this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case"#EXT-X-TARGETDURATION":if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break;case"#EXT-X-PART-INF":Tt(this.manifest,n),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":Tt(this.manifest,n),this.setHoldBack();break;case"#EXTINF":0===r?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break;case"#EXT-X-PROGRAM-DATE-TIME":var a=r,o=new Date(a);this.manifest.dateTimeString||(this.manifest.dateTimeString=a,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=a,this.currentUri.dateTimeObject=o;break;case"#EXT-X-VERSION":Tt(this.manifest,n);break;case"#EXT-X-SESSION-DATA":var s=_t(n[1]),u=S(s);Object.assign(this.manifest.sessionData,u)}},wt.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="holdBack",a="partHoldBack",o=n&&3*n,s=i&&2*i;n&&!t.hasOwnProperty(r)&&(t[r]=o),o&&t[r]<o&&(t[r]=o),i&&!t.hasOwnProperty(a)&&(t[a]=3*i),i&&t[a]<s&&(t[a]=s)}};var Tt=function(e,t){var n,i=Et(t[0].replace("#EXT-X-",""));It(t[1])?(n={},n=Object.assign(St(t[1]),n)):n=xt(t[1]),e[i]=n},Et=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},xt=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},At=function(e){var t={},n=e.split("=");return n.length>1&&(t[Et(n[0])]=xt(n[1])),t},St=function(e){for(var t=e.split(","),n={},i=0;t.length>i;i++){var r=t[i],a=At(r);n=Object.assign(a,n)}return n},It=function(e){return e.indexOf("=")>-1},kt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},_t=function(e){var t={};if(e){var n=e.search(",");return[e.slice(0,n),e.slice(n+1)].forEach((function(e,n){for(var i=e.replace(/['"]+/g,"").split("="),r=0;r<i.length;r++)"DATA-ID"===i[r]&&(t["DATA-ID"]=i[1-r]),"VALUE"===i[r]&&(t.VALUE=i[1-r])})),{data:t}}},Ct=wt,Mt={safeCall:function(e,t,n,i){var r=i;if(e&&"function"==typeof e[t])try{r=e[t].apply(e,n)}catch(e){h.info("safeCall error",e)}return r},safeIncrement:w,getComputedStyle:function(e,t){var n;if(e&&t&&r()&&"function"==typeof r().getComputedStyle)return vt&&vt.has(e)&&(n=vt.get(e)),n||(n=r().getComputedStyle(e,null),vt&&vt.set(e,n)),n.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:x,cdnHeadersToRequestId:A,extractHostnameAndDomain:m,extractHostname:g,manifestParser:Ct,generateShortID:o,generateUUID:a,now:p.now};function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Rt={},Lt=function e(t){var n=arguments;"string"==typeof t?e.hasOwnProperty(t)?r().setTimeout((function(){n=Array.prototype.splice.call(n,1),e[t].apply(null,n)}),0):h.warn("`"+t+"` is an unknown task"):"function"==typeof t?r().setTimeout((function(){t(e)}),0):h.warn("`"+t+"` is invalid.")},Pt={loaded:p.now(),NAME:"mux-embed",VERSION:"4.27.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,n){var i=gt(u(t),3),r=i[0],a=i[1],o=i[2],s=e.log,l=e.utils.getComputedStyle,c=e.utils.secondsToMs;if(!r)return s.error("No element was found with the `"+a+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+a+"` was not a media element.");r.mux&&(r.mux.destroy(),delete r.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(n=Object.assign({automaticErrorTracking:!0},n)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},n.data),n.getPlayheadTime=function(){return c(r.currentTime)},n.getStateData=function(){var e,t,i=this.hlsjs&&this.hlsjs.url,a=this.dashjs&&pt("function"===this.dashjs.getSource)&&this.dashjs.getSource(),o={player_is_paused:r.paused,player_playhead_time:c(r.currentTime),player_width:parseInt(l(r,"width")),player_height:parseInt(l(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:ft()&&!!(ft().fullscreenElement||ft().webkitFullscreenElement||ft().mozFullScreenElement||ft().msFullscreenElement),video_poster_url:r.poster,video_source_url:i||a||r.currentSrc,video_source_duration:c(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:null===(e=r)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},s=n.getPlayheadTime();if(r.getStartDate&&s>0){var u=r.getStartDate();if(u&&"function"==typeof u.getTime&&u.getTime()){var d=u.getTime();if(o.player_program_time=d+s,r.seekable.length>0){var h=d+r.seekable.end(r.seekable.length-1);o.player_live_edge_program_time=h}}}return o},r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(t,n){e.emit(a,t,n)};var d=function(){s.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach((function(e){r.removeEventListener(e,r.mux.listeners[e],!1)})),delete r.mux.listeners,r.mux.destroy=d,r.mux.swapElement=d,r.mux.emit=d,r.mux.addHLSJS=d,r.mux.addDashJS=d,r.mux.removeHLSJS=d,r.mux.removeDashJS=d,r.mux.deleted=!0,e.emit(a,"destroy")},r.mux.swapElement=function(t){var n=gt(u(t),3),i=n[0],a=n[1],o=n[2];return i?"video"!==o&&"audio"!==o?e.log.error("The element of `"+a+"` was not a media element."):(i.muxId=r.muxId,delete r.muxId,i.mux=i.mux||{},i.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(i.mux.listeners).forEach((function(e){r.removeEventListener(e,i.mux.listeners[e],!1),i.addEventListener(e,i.mux.listeners[e],!1)})),i.mux.swapElement=r.mux.swapElement,i.mux.destroy=r.mux.destroy,delete r.mux,void(r=i)):e.log.error("No element was found with the `"+a+"` query selector.")},r.mux.addHLSJS=function(t){e.addHLSJS(a,t)},r.mux.addDashJS=function(t){e.addDashJS(a,t)},r.mux.removeHLSJS=function(){e.removeHLSJS(a)},r.mux.removeDashJS=function(){e.removeDashJS(a)},e.init(a,n),e.emit(a,"playerready"),r.paused||(e.emit(a,"play"),r.readyState>2&&e.emit(a,"playing")),r.mux.listeners={},yt.forEach((function(t){("error"!==t||n.automaticErrorTracking)&&(r.mux.listeners[t]=function(){var n={};if("error"===t){if(!r.error)return;if(1===r.error.code)return;n.player_error_code=r.error.code,n.player_error_message=bt[r.error.code]||r.error.message}e.emit(a,t,n)},r.addEventListener(t,r.mux.listeners[t],!1))}))}(Lt,e,t)},destroyMonitor:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(u(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():h.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var n=s(e);Rt[n]?Rt[n].addHLSJS(t):h.error("A monitor for `"+n+"` has not been initialized.")},addDashJS:function(e,t){var n=s(e);Rt[n]?Rt[n].addDashJS(t):h.error("A monitor for `"+n+"` has not been initialized.")},removeHLSJS:function(e){var t=s(e);Rt[t]?Rt[t].removeHLSJS():h.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=s(e);Rt[t]?Rt[t].removeDashJS():h.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){f()&&t&&t.respectDoNotTrack&&h.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=s(e);Rt[n]=new dt(Lt,n,t)},emit:function(e,t,n){var i=s(e);Rt[i]?(Rt[i].emit(t,n),"destroy"===t&&delete Rt[i]):h.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:f,log:h,utils:Mt,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Lt,Pt),void 0!==r()&&"function"==typeof r().addEventListener&&r().addEventListener("pagehide",(function(e){e.persisted||(Lt.WINDOW_UNLOADING=!0)}),!1);var Nt=Lt},655:function(e,t,n){var i,r;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}!function(o){var s=!1;if(void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r),s=!0,"object"===a(t)&&(e.exports=o(),s=!0),!s){var u=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=u,l}}}((function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t};return function t(n){function i(t,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var d=u[c].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var f=d[0].replace(l,decodeURIComponent);if(h=n.read?n.read(h,f):n(h,f)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===f){o=h;break}t||(o[f]=h)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},153:function(e,t,n){var i,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},a=n(558);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},48:function(e,t,n){var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},640:function(e,t,n){var i,r;!function(a,o){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?r(console,i):void 0!==console.log?r(console,"log"):e)}function s(t,n){for(var r=0;r<i.length;r++){var a=i[r];this[a]=r<t?e:this.methodFactory(a,t,n)}this.log=this.debug}function u(e,n,i){return function(){typeof console!==t&&(s.call(this,n,i),this[e].apply(this,arguments))}}function l(e,t,n){return o(e)||u.apply(this,arguments)}function c(e,n,r){var a,o=this;n=null==n?"WARN":n;var u="loglevel";function c(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(e){}}}function d(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(u)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||l,o.getLevel=function(){return a},o.setLevel=function(n,i){if("string"==typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(a=n,!1!==i&&c(n),s.call(o,n,e),typeof console===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){n=e,d()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(n,!1),function(){if(typeof window!==t&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var h=d();null==h&&(h=n),o.setLevel(h,!1)}var d=new c,h={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new c(e,d.getLevel(),d.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=f),d},d.getLoggers=function(){return h},d.default=d,d},void 0===(r=i.call(t,n,t,e))||(e.exports=r)}()},375:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var i,a,o=[];for(a in"string"!=typeof t&&(t="?"),e)if(n.call(e,a)){if((i=e[a])||null!=i&&!isNaN(i)||(i=""),a=r(a),i=r(i),null===a||null===i)continue;o.push(a+"="+i)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var a=i(t[1]),o=i(t[2]);null===a||null===o||a in r||(r[a]=o)}return r}},558:function(){}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(80)}()},e.exports=t()},558:function(){}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(254)}()},true?e.exports=n():undefined}()},"./node_modules/shaka-player/dist/shaka-player.compiled.js":function(e,t,n){(function(e){(function(){var n=typeof window!="undefined"?window:e;var i={};(function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(e==Array.prototype||e==Object.prototype)return e;e[t]=n.value;return e};function o(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var s=o(this);function u(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1];i=n[e];t=t(i);t!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}u("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(e||"")+"_"+r++,e)}function n(e,t){this.g=e;a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}));u("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=s[t[n]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));function l(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function d(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var h="function"==typeof Object.create?Object.create:function(e){function t(){}t.prototype=e;return new t},f;if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var p;e:{var g={a:!0},m={};try{m.__proto__=g;p=m.a;break e}catch(e){}p=!1}f=p?function(e,t){e.__proto__=t;if(e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var v=f;function y(e,t){e.prototype=h(t.prototype);e.prototype.constructor=e;if(v)v(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.hi=t.prototype}function b(){this.o=!1;this.l=null;this.h=void 0;this.g=1;this.j=this.m=0;this.u=this.i=null}function w(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}b.prototype.s=function(e){this.h=e};function T(e,t){e.i={hf:t,qf:!0};e.g=e.m||e.j}b.prototype.return=function(e){this.i={return:e};this.g=this.j};function E(e,t,n){e.g=n;return{value:t}}b.prototype.B=function(e){this.g=e};function x(e){e.g=0}function A(e,t,n){e.m=t;void 0!=n&&(e.j=n)}function S(e){e.m=0;e.j=2}function I(e,t,n){e.g=t;e.m=n||0}function k(e,t){e.m=t||0;t=e.i.hf;e.i=null;return t}function _(e){e.u=[e.i];e.m=0;e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.qf?e.g=e.m||e.j:void 0!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function M(e){this.g=new b;this.h=e}function D(e,t){w(e.g);var n=e.g.l;if(n)return R(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.g.return);e.g.return(t);return L(e)}function R(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,T(e.g,t),L(e)}e.g.l=null;i.call(e.g,a);return L(e)}function L(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,T(e.g,t)}e.g.o=!1;if(e.g.i){t=e.g.i;e.g.i=null;if(t.qf)throw t.hf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(e){this.next=function(t){w(e.g);e.g.l?t=R(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=L(e));return t};this.throw=function(t){w(e.g);e.g.l?t=R(e,e.g.l["throw"],t,e.g.s):(T(e.g,t),t=L(e));return t};this.return=function(t){return D(e,t)};this[Symbol.iterator]=function(){return this}}function N(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){function a(e){e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(a,r)}a(e.next())}))}function O(e){return N(new P(new M(e)))}function U(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}u("Promise",(function(e){function t(e){this.h=0;this.i=void 0;this.g=[];this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=s.setTimeout;n.prototype.i=function(e){r(e,0)};n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null};n.prototype.j=function(e){this.i((function(){throw e}))};t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}};t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}};t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){this.l(e);return}"function"==typeof t?this.K(t,e):this.m(e)};t.prototype.l=function(e){this.s(2,e)};t.prototype.m=function(e){this.s(1,e)};t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e;this.i=t;2===this.h&&this.G();this.u()};t.prototype.G=function(){var e=this;r((function(){if(e.A()){var t=s.console;"undefined"!==typeof t&&t.error(e.i)}}),1)};t.prototype.A=function(){if(this.o)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;if("undefined"===typeof n)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.i;return n(e)};t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;t.prototype.H=function(e){var t=this.j();e.hd(t.resolve,t.reject)};t.prototype.K=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}};t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e;a=t}));this.hd(i(e,r),i(n,a));return o};t.prototype.catch=function(e){return this.then(void 0,e)};t.prototype.hd=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n);this.o=!0};t.resolve=i;t.reject=function(e){return new t((function(t,n){n(e)}))};t.race=function(e){return new t((function(t,n){for(var r=c(e),a=r.next();!a.done;a=r.next())i(a.value).hd(t,n)}))};t.all=function(e){var n=c(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n;s--;0==s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).hd(a(o.length-1),t),r=n.next()}while(!r.done)}))};return t}));function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}u("WeakMap",(function(e){function t(e){this.g=(u+=Math.random()+1).toString();if(e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!j(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){if(e instanceof n)return e;Object.isExtensible(e)&&r(e);return t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);if(2!=i.get(t)||3!=i.get(n))return!1;i.delete(t);i.set(n,4);return!i.has(t)&&4==i.get(n)}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze");o("preventExtensions");o("seal");var u=0;t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");r(e);if(!j(e,s))throw Error("WeakMap key fail: "+e);e[s][this.g]=t;return this};t.prototype.get=function(e){return i(e)&&j(e,s)?e[s][this.g]:void 0};t.prototype.has=function(e){return i(e)&&j(e,s)&&j(e[s],this.g)};t.prototype.delete=function(e){return i(e)&&j(e,s)&&j(e[s],this.g)?delete e[s][this.g]:!1};return t}));u("Map",(function(e){function t(){var e={};return e.ib=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.ib;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&j(e.h,n))for(e=0;e<i.length;e++){var r=i[e];if(t!==t&&r.key!==r.key||t===r.key)return{id:n,list:i,index:e,entry:r}}return{id:n,list:i,index:-1,entry:void 0}}function r(e){this.h={};this.g=t();this.size=0;if(e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();if(r.done||r.value[0]!=t||"s"!=r.value[1])return!1;r=i.next();return r.done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done?!1:!0}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){e=0===e?0:e;var n=i(this,e);n.list||(n.list=this.h[n.id]=[]);n.entry?n.entry.value=t:(n.entry={next:this.g,ib:this.g.ib,head:this.g,key:e,value:t},n.list.push(n.entry),this.g.ib.next=n.entry,this.g.ib=n.entry,this.size++);return this};r.prototype.delete=function(e){e=i(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.ib.next=e.entry.next,e.entry.next.ib=e.entry.ib,e.entry.head=null,this.size--,!0):!1};r.prototype.clear=function(){this.h={};this.g=this.g.ib=t();this.size=0};r.prototype.has=function(e){return!!i(this,e).entry};r.prototype.get=function(e){return(e=i(this,e).entry)&&e.value};r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))};r.prototype.keys=function(){return n(this,(function(e){return e.key}))};r.prototype.values=function(){return n(this,(function(e){return e.value}))};r.prototype.forEach=function(e,t){for(var n=this.entries(),i;!(i=n.next()).done;)i=i.value,e.call(t,i[1],i[0],this)};r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r}));u("Set",(function(e){function t(e){this.g=new Map;if(e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();if(r.done||r.value[0]!=t||r.value[1]!=t)return!1;r=i.next();return r.done||r.value[0]==t||4!=r.value[0].x||r.value[1]!=r.value[0]?!1:i.next().done}catch(e){return!1}}())return e;t.prototype.add=function(e){e=0===e?0:e;this.g.set(e,e);this.size=this.g.size;return this};t.prototype.delete=function(e){e=this.g.delete(e);this.size=this.g.size;return e};t.prototype.clear=function(){this.g.clear();this.size=0};t.prototype.has=function(e){return this.g.has(e)};t.prototype.entries=function(){return this.g.entries()};t.prototype.values=function(){return this.g.values()};t.prototype.keys=t.prototype.values;t.prototype[Symbol.iterator]=t.prototype.values;t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))};return t}));function B(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{nf:r,v:a}}return{nf:-1,v:void 0}}u("Array.prototype.findIndex",(function(e){return e?e:function(e,t){return B(this,e,t).nf}}));u("Object.is",(function(e){return e?e:function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}));u("Array.prototype.includes",(function(e){return e?e:function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;t=t||0;for(0>t&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}));function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}u("String.prototype.includes",(function(e){return e?e:function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}));u("Array.prototype.find",(function(e){return e?e:function(e,t){return B(this,e,t).v}}));u("String.prototype.startsWith",(function(e){return e?e:function(e,t){var n=F(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(t|0,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}}));function V(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}i=!0;return{done:!0,value:void 0}}};r[Symbol.iterator]=function(){return r};return r}u("Array.prototype.keys",(function(e){return e?e:function(){return V(this,(function(e){return e}))}}));var G="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)j(i,r)&&(e[r]=i[r])}return e};u("Object.assign",(function(e){return e||G}));u("Array.from",(function(e){return e?e:function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}}));u("Array.prototype.values",(function(e){return e?e:function(){return V(this,(function(e,t){return t}))}}));u("Promise.prototype.finally",(function(e){return e?e:function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));u("Array.prototype.entries",(function(e){return e?e:function(){return V(this,(function(e,t){return[e,t]}))}}));u("String.prototype.repeat",(function(e){return e?e:function(e){var t=F(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)if(e&1&&(n+=t),e>>>=1)t+=t;return n}}));u("Number.isNaN",(function(e){return e?e:function(e){return"number"===typeof e&&isNaN(e)}}));u("Number.isFinite",(function(e){return e?e:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}}));u("Object.values",(function(e){return e?e:function(e){var t=[],n;for(n in e)j(e,n)&&t.push(e[n]);return t}}));u("Math.log2",(function(e){return e?e:function(e){return Math.log(e)/Math.LN2}}));u("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}));u("Math.trunc",(function(e){return e?e:function(e){e=Number(e);if(isNaN(e)||Infinity===e||-Infinity===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}));u("Object.entries",(function(e){return e?e:function(e){var t=[],n;for(n in e)j(e,n)&&t.push([n,e[n]]);return t}}));var H=this||self;function q(e,t){e=e.split(".");var n=H;e[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||void 0===t?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}var z={};function K(e){this.g=Math.exp(Math.log(.5)/e);this.i=this.h=0}K.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h;isNaN(t)||(this.h=t,this.i+=e)};function X(e){return e.h/(1-Math.pow(e.g,e.i))}function W(){this.h=new K(2);this.j=new K(5);this.g=0;this.i=128e3;this.l=16e3}W.prototype.configure=function(e){this.i=e.minTotalBytes;this.l=e.minBytes;this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife);this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)};W.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3;this.g+=t;this.h.sample(e,n);this.j.sample(e,n)}};W.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(X(this.h),X(this.j))};function Y(){}function J(){}function Q(){}function $(e){var t=U.apply(1,arguments);ie.has(e)||(ie.add(e),Q.apply(Y,d(t)))}function Z(){}function ee(){}function te(){}function ne(){}var ie=new Set;e.console&&(Q=function(){return console.warn.apply(console,d(U.apply(0,arguments)))},J=function(){console.error.apply(console,d(U.apply(0,arguments)))});function re(e){if(ae.has(e))return ae.get(e);var t=MediaSource.isTypeSupported(e);ae.set(e,t);return t}var ae=new Map;function oe(){}oe.prototype.extract=function(){};oe.prototype.decode=function(){return[]};oe.prototype.clear=function(){};function se(){}se.prototype.init=function(){};se.prototype.parse=function(){return[]};function ue(){}function le(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ce(e)==ce(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=he(e);t=he(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function ce(e){return e instanceof ArrayBuffer?e:e.buffer}function de(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function he(e,t,n){n=void 0===n?Infinity:n;return pe(e,void 0===t?0:t,n,Uint8Array)}function fe(e,t,n){n=void 0===n?Infinity:n;return pe(e,void 0===t?0:t,n,DataView)}function pe(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;t=Math.max(0,Math.min((e.byteOffset||0)+t,r));return new i(ce(e),t,Math.min(t+Math.max(n,0),r)-t)}q("shaka.util.BufferUtils",ue);ue.toDataView=fe;ue.toUint8=he;ue.toArrayBuffer=de;ue.equal=le;function ge(){}ge.prototype.init=function(){};ge.prototype.j=function(){};ge.prototype.i=function(){};q("shaka.media.IClosedCaptionParser",ge);function me(e){this.h=new se;if(e=ve[e.toLowerCase()])this.h=e();this.g=new oe;if(e=ye)this.g=e()}me.prototype.init=function(e){this.h.init(e)};me.prototype.j=function(e){e=this.h.parse(e);e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=he(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()};me.prototype.i=function(){this.g.clear()};q("shaka.media.ClosedCaptionParser",me);me.findDecoder=function(){return ye};me.unregisterDecoder=function(){ye=null};me.registerDecoder=function(e){ye=e};me.findParser=function(e){return ve[e]};me.unregisterParser=function(e){delete ve[e]};me.registerParser=function(e,t){ve[e]=t};var ve={},ye=null;function be(e,t){return"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)?!0:e===t}function we(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function Te(e,t,n){n||(n=be);if(e.length!=t.length)return!1;t=t.slice();var i={};e=c(e);for(var r=e.next();!r.done;i={Sd:i.Sd},r=e.next()){i.Sd=r.value;r=t.findIndex(function(e){return function(t){return n(e.Sd,t)}}(i));if(-1==r)return!1;t[r]=t[t.length-1];t.pop()}return 0==t.length}function Ee(e,t,n){n||(n=be);if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function xe(e,t,n){this.startTime=e;this.endTime=t;this.payload=n;this.region=new Fe;this.position=null;this.positionAlign=Se;this.size=0;this.textAlign=Ie;this.direction=Me;this.writingMode=De;this.lineInterpretation=Re;this.line=null;this.lineHeight="";this.lineAlign=Le;this.displayAlign=_e;this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=Ue;this.fontStyle=je;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=[];this.textStrokeWidth=this.textStrokeColor=this.textShadow="";this.wrapLine=!0;this.id="";this.nestedCues=[];this.lineBreak=this.isContainer=!1;this.cellResolution={bg:32,rows:15}}xe.prototype.clone=function(){var e=new xe(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Ae(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!Ee(e.nestedCues,t.nestedCues,Ae))return!1}else if("region"==n||"cellResolution"==n)for(var i in e[n]){if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Ee(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}q("shaka.text.Cue",xe);xe.equal=Ae;xe.prototype.clone=xe.prototype.clone;var Se="auto";xe.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Se};var Ie="center",ke={LEFT:"left",RIGHT:"right",CENTER:Ie,START:"start",END:"end"};xe.textAlign=ke;var _e="after",Ce={BEFORE:"before",CENTER:"center",AFTER:_e};xe.displayAlign=Ce;var Me="ltr";xe.direction={HORIZONTAL_LEFT_TO_RIGHT:Me,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var De="horizontal-tb";xe.writingMode={HORIZONTAL_TOP_TO_BOTTOM:De,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Re=0;xe.lineInterpretation={LINE_NUMBER:Re,PERCENTAGE:1};var Le="start",Pe={CENTER:"center",START:Le,END:"end"};xe.lineAlign=Pe;var Ne={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};xe.defaultTextColor=Ne;var Oe={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};xe.defaultTextBackgroundColor=Oe;var Ue=400;xe.fontWeight={NORMAL:Ue,BOLD:700};var je="normal",Be={NORMAL:je,ITALIC:"italic",OBLIQUE:"oblique"};xe.fontStyle=Be;xe.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Fe(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ve;this.scroll=Ge}q("shaka.text.CueRegion",Fe);var Ve=1;Fe.units={PX:0,PERCENTAGE:Ve,LINES:2};var Ge="";Fe.scrollMode={NONE:Ge,UP:"up"};function He(){}He.prototype.destroy=function(){};function qe(e,t,n){Ke[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,Ld:t}}function ze(e,t){for(var n=e.toLowerCase().split(";")[0],i=c([Je,Ye,We,Xe]),r=i.next();!r.done;r=i.next())if(r=Ke[n+"-"+r.value]){var a=r.Ld(),o=a.isSupported(e,t);a.destroy();if(o)return r.Ld}return null}q("shaka.transmuxer.TransmuxerEngine",He);He.findTransmuxer=ze;He.unregisterTransmuxer=function(e,t){delete Ke[e.toLowerCase().split(";")[0]+"-"+t]};He.registerTransmuxer=qe;He.prototype.destroy=He.prototype.destroy;var Ke={},Xe=1,We=2,Ye=3,Je=4;He.PluginPriority={FALLBACK:Xe,PREFERRED_SECONDARY:We,PREFERRED:Ye,APPLICATION:Je};var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function $e(e){var t;e instanceof $e?(Ze(this,e.Ma),this.Mb=e.Mb,this.Ra=e.Ra,et(this,e.cc),this.ta=e.ta,tt(this,e.g.clone()),this.xb=e.xb):e&&(t=String(e).match(Qe))?(Ze(this,t[1]||"",!0),this.Mb=nt(t[2]||""),this.Ra=nt(t[3]||"",!0),et(this,t[4]),this.ta=nt(t[5]||"",!0),tt(this,t[6]||"",!0),this.xb=nt(t[7]||"")):this.g=new ct(null)}i=$e.prototype;i.Ma="";i.Mb="";i.Ra="";i.cc=null;i.ta="";i.xb="";i.toString=function(){var e=[],t=this.Ma;t&&e.push(it(t,at,!0),":");if(t=this.Ra){e.push("//");var n=this.Mb;n&&e.push(it(n,at,!0),"@");e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));t=this.cc;null!=t&&e.push(":",String(t))}if(t=this.ta)this.Ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(it(t,"/"==t.charAt(0)?st:ot,!0));(t=this.g.toString())&&e.push("?",t);(t=this.xb)&&e.push("#",it(t,lt));return e.join("")};i.resolve=function(e){var t=this.clone();"data"===t.Ma&&(t=new $e);var n=!!e.Ma;n?Ze(t,e.Ma):n=!!e.Mb;n?t.Mb=e.Mb:n=!!e.Ra;n?t.Ra=e.Ra:n=null!=e.cc;var i=e.ta;if(n)et(t,e.cc);else if(n=!!e.ta){if("/"!=i.charAt(0))if(this.Ra&&!this.ta)i="/"+i;else{var r=t.ta.lastIndexOf("/");-1!=r&&(i=t.ta.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0);i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}n?t.ta=i:n=""!==e.g.toString();n?tt(t,e.g.clone()):n=!!e.xb;n&&(t.xb=e.xb);return t};i.clone=function(){return new $e(this)};function Ze(e,t,n){e.Ma=n?nt(t,!0):t;e.Ma&&(e.Ma=e.Ma.replace(/:$/,""))}function et(e,t){if(t){t=Number(t);if(isNaN(t)||0>t)throw Error("Bad port number "+t);e.cc=t}else e.cc=null}function tt(e,t,n){t instanceof ct?e.g=t:(n||(t=it(t,ut)),e.g=new ct(t))}function nt(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function it(e,t,n){return null!=e?(e=encodeURI(e).replace(t,rt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function rt(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var at=/[#\/\?@]/g,ot=/[#\?:]/g,st=/[#\?]/g,ut=/[#\?@]/g,lt=/#/g;function ct(e){this.g=e||null}function dt(e){if(!e.pa&&(e.pa={},e.Dc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," "));r=r||"";e.add(a,decodeURIComponent(r.replace(/\+/g," ")))}}i=ct.prototype;i.pa=null;i.Dc=null;i.add=function(e,t){dt(this);this.g=null;var n=this.pa.hasOwnProperty(e)?this.pa[e]:null;n||(this.pa[e]=n=[]);n.push(t);this.Dc++;return this};i.set=function(e,t){dt(this);this.g=null;this.pa.hasOwnProperty(e)?this.pa[e]=[t]:this.add(e,t);return this};i.toString=function(){if(this.g)return this.g;if(!this.pa)return"";var e=[],t;for(t in this.pa)for(var n=encodeURIComponent(t),i=this.pa[t],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r]));e.push(a)}return this.g=e.join("&")};i.clone=function(){var e=new ct;e.g=this.g;if(this.pa){var t={},n;for(n in this.pa)t[n]=this.pa[n].concat();e.pa=t;e.Dc=this.Dc}return e};function ht(e,t,n){var i=U.apply(3,arguments);this.severity=e;this.category=t;this.code=n;this.data=i;this.handled=!1;this.message="Shaka Error "+this.code;if(ft)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}ht.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};q("shaka.util.Error",ht);var ft=!0;ht.Severity={RECOVERABLE:1,CRITICAL:2};ht.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};ht.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function pt(e,t){return e.concat(t)}function gt(){}function mt(e){return null!=e}function vt(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length)return e=new $e(e[0]),t=new $e(t[0]),[e.resolve(t).toString()];var n=t.map((function(e){return new $e(e)}));return e.map((function(e){var t=new $e(e);return n.map((function(e){return t.resolve(e).toString()}))})).reduce(pt,[])}function yt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function bt(e,t){if(1==t.length)return t[0];e=wt(e,t);if(null!=e)return e;throw new ht(2,4,4025,t)}function wt(e,t){for(var n=c(xt[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=c(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==Tt?"":null}var Tt="text",Et={va:"video",pb:"audio",ca:Tt,wc:"image",rh:"application"},xt={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function At(){}function St(e,t){var n=e;t&&!Dt.includes(e)&&(n+='; codecs="'+t+'"');return n}function It(e,t){t&&(e+='; codecs="'+t+'"');return e}function kt(e,t,n){var i=St(e,t);t=It(e,t);ze(t)?(e=ze(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?i.replace("video","audio"):i;return n}function _t(e){var t=Mt(e);e=t[0];t=t[1].toLowerCase();switch(!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Ct(e){e=e.split(/ *; */);e.shift();return(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Mt(e){e=e.split(".");var t=e[0];e.shift();return[t,e.join(".")]}q("shaka.util.MimeUtils",At);At.getFullTypeWithAllCodecs=It;At.getFullType=St;(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Dt=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Rt(e){this.i=null;this.j=e;this.u=!1;this.l=this.s=0;this.m=Infinity;this.h=this.g=null;this.A="";this.o=new Map}function Lt(e){return Bt[e]?!0:"application/cea-608"==e||"application/cea-708"==e?!!ye:!1}Rt.prototype.destroy=function(){this.j=this.i=null;this.o.clear();return Promise.resolve()};function Pt(e,t,n,i){var r,a,o,s;return O((function(u){if(1==u.g)return E(u,Promise.resolve(),2);if(!e.i||!e.j)return u.return();if(null==n||null==i)return e.i.parseInit(he(t)),u.return();r=e.u?n:e.s;a={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:r};o=e.i.parseMedia(he(t),a);s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m}));e.j.append(s);null==e.g&&(e.g=Math.max(n,e.l));e.h=Math.min(i,e.m);x(u)}))}Rt.prototype.remove=function(e,t){var n=this;return O((function(i){if(1==i.g)return E(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e));x(i)}))};function Nt(e,t,n){e.l=t;e.m=n}function Ot(e,t,n){e.A=t;if(t=e.o.get(t))for(var i=c(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.j.append(r)}function Ut(e,t,n){t.startTime+=n;t.endTime+=n;t=c(t.nestedCues);for(var i=t.next();!i.done;i=t.next())Ut(e,i.value,n)}function jt(e,t,n,i,r){var a=n+" "+i,o=new Map;t=c(t);for(var s=t.next();!s.done;s=t.next()){var u=s.value;s=u.stream;u=u.cue;o.has(s)||o.set(s,new Map);o.get(s).has(a)||o.get(s).set(a,[]);Ut(e,u,r);u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.A&&e.j.append([u]))}r=c(o.keys());for(a=r.next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),t=c(o.get(a).keys()),s=t.next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l));e.h=Math.max(e.h,Math.min(i,e.m))}q("shaka.text.TextEngine",Rt);Rt.prototype.destroy=Rt.prototype.destroy;Rt.findParser=function(e){return Bt[e]};Rt.unregisterParser=function(e){delete Bt[e]};Rt.registerParser=function(e,t){Bt[e]=t};var Bt={};function Ft(){}function Vt(e,t){e=qt(e);t=qt(t);return e.split("-")[0]==t.split("-")[0]}function Gt(e,t){e=qt(e);t=qt(t);e=e.split("-");t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function Ht(e,t){e=qt(e);t=qt(t);e=e.split("-");t=t.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function qt(e){var t=e.split("-x-"),n=t[0].split("-");e=n[0]||"";n=n[1]||"";t=t[1]?"x-"+t[1]:"";e=e.toLowerCase();e=Yt.get(e)||e;n=n.toUpperCase();return(n?e+"-"+n:e)+(t?"-"+t:"")}function zt(e,t){e=qt(e);t=qt(t);return t==e?4:Gt(t,e)?3:Ht(t,e)?2:Gt(e,t)?1:0}function Kt(e){var t=e.indexOf("-");e=0<=t?e.substring(0,t):e;e=e.toLowerCase();return e=Yt.get(e)||e}function Xt(e){return e.language?qt(e.language):e.audio&&e.audio.language?qt(e.audio.language):e.video&&e.video.language?qt(e.video.language):"und"}function Wt(e,t){e=qt(e);var n=new Set,i=c(t);for(t=i.next();!t.done;t=i.next())n.add(qt(t.value));i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,Gt(t,e))return t;i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,Ht(t,e))return t;n=c(n);for(t=n.next();!t.done;t=n.next())if(t=t.value,Gt(e,t))return t;return null}q("shaka.util.LanguageUtils",Ft);Ft.findClosestLocale=Wt;Ft.getLocaleForVariant=Xt;Ft.getLocaleForText=function(e){return qt(e.language||"und")};Ft.getBase=Kt;Ft.relatedness=zt;Ft.areSiblings=function(e,t){var n=Kt(e),i=Kt(t);return e!=n&&t!=i&&n==i};Ft.normalize=qt;Ft.isSiblingOf=Ht;Ft.isParentOf=Gt;Ft.areLanguageCompatible=Vt;Ft.areLocaleCompatible=function(e,t){e=qt(e);t=qt(t);return e==t};var Yt=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Jt(){this.g={}}i=Jt.prototype;i.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]};i.get=function(e){return(e=this.g[e])?e.slice():null};i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])};i.forEach=function(e){for(var t in this.g)e(t,this.g[t])};i.size=function(){return Object.keys(this.g).length};i.keys=function(){return Object.keys(this.g)};function Qt(e){this.h=e;this.g=null}Qt.prototype.S=function(t){var n=this;this.stop();var i=!0,r=null;this.g=function(){e.clearTimeout(r);i=!1};r=e.setTimeout((function(){i&&n.h()}),1e3*t);return this};Qt.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function $t(e){this.h=e;this.g=null}$t.prototype.ic=function(){this.stop();this.h();return this};$t.prototype.S=function(e){var t=this;this.stop();this.g=new Qt((function(){t.h()})).S(e);return this};$t.prototype.Ca=function(e){var t=this;this.stop();this.g=new Qt((function(){t.g.S(e);t.h()})).S(e);return this};$t.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)};q("shaka.util.Timer",$t);$t.prototype.stop=$t.prototype.stop;$t.prototype.tickEvery=$t.prototype.Ca;$t.prototype.tickAfter=$t.prototype.S;$t.prototype.tickNow=$t.prototype.ic;function Zt(){return e.MediaSource&&MediaSource.isTypeSupported?!0:!1}function en(e){return""!=cn().canPlayType(e)}function tn(){return navigator.userAgent.match(/Edge?\//)?!0:!1}function nn(){return ln("Xbox One")}function rn(){return ln("Tizen")}function an(){return ln("Web0S")&&ln("Chrome/38.0.2125.122 Safari/537.36")}function on(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!rn()&&!ln("PC=EOS")&&!ln("VirginMedia")&&!ln("SOPOpenBrowser")&&!sn()&&!ln("AFT")}function sn(){return ln("PlayStation 4")}function un(){if(!on())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function ln(e){return(navigator.userAgent||"").includes(e)}function cn(){if(hn)return hn;dn||(dn=new $t((function(){hn=null})));(hn=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(hn=document.createElement("video"));dn.S(1);return hn}var dn=null,hn=null;function fn(){}function pn(e,t,n,i,r){var a=e.variants;if(t.length||n.length)a=vn(a,t,n);a=Kn(a,i);t=gn(a);t=mn(t);var o=yn(t,r);e.variants=e.variants.filter((function(e){return Tn(e)==o?!0:!1}))}function gn(e){var t=new Jt;e=c(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=Tn(n);t.push(i,n)}return t}function mn(e){var t=0,n=new Map,i=e.size();e.forEach((function(e,r){r=c(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var o=a.video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1);n.has(o)||n.set(o,new Jt);var s=n.get(o);s.push(e,a);s.size()===i&&(t=Math.max(t,o))}}}));return t?n.get(t):e}function vn(e,t,n){var i={};t=c(t);for(var r=t.next();!r.done;i={Xd:i.Xd},r=t.next())if(i.Xd=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Xd)}}(i)),r.length){e=r;break}i={};n=c(n);for(t=n.next();!t.done;i={Rd:i.Rd},t=n.next())if(i.Rd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Rd)}}(i)),t.length){e=t;break}return e}function yn(e,t){t=c(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n==Zn||n==ei){if(e=bn(e,n),1==e.size())return e.keys()[0]}else if(n==ti)break;return wn(e)}function bn(e,t){var n=0,i=new Jt;e.forEach((function(e,r){for(var a=0,o=0,s=c(r),u=s.next();!u.done;u=s.next())u=u.value,u.decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);a/=o;a>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)}));return i}function wn(e){var t="",n=Infinity;e.forEach((function(e,i){var r=0,a=0;i=c(i);for(var o=i.next();!o.done;o=i.next())r+=o.value.bandwidth||0,++a;r/=a;r<n&&(t=e,n=r)}));return t}function Tn(e){var t="";e.video&&(t=_t(e.video.codecs));var n="";e.audio&&(n=_t(e.audio.codecs));return t+"-"+n}function En(e,t,n){e.variants=e.variants.filter((function(e){return xn(e,t,n)}))}function xn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth)?!1:!0}function An(e,t){return O((function(n){if(1==n.g)return E(n,Sn(t,0<t.offlineSessionIds.length),2);Rn(e,t);Ln(t);return E(n,Pn(t),0)}))}function Sn(e,t){return O((function(n){if(1==n.g)return E(n,_n(e.variants,t,!1,[]),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=Dn(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");n=bt("video",i);n=Dn(n);i=bt("audio",i);i=Mn(i);var r=kt(t.mimeType,i,"audio");if(!re(r))return!1;n=[n,i].join()}i=kt(t.mimeType,n,"video");if(!re(i))return!1;t.codecs=n}if(n=e.audio){i=Mn(n.codecs);r=kt(n.mimeType,i,"audio");if(!re(r))return!1;n.codecs=i}if(nn()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3.")))return ee(Yn(e)),!1;(t=e.decodingInfos.some((function(e){return e.supported})))||ee(Yn(e));return t}));x(n)}))}function In(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=c(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=JSON.stringify(r);r=e[r];r instanceof Object?(r=In(r),n.push(i+":"+r)):(r=JSON.stringify(r),n.push(i+":"+r))}return"{"+n.join(",")+"}"}function kn(e,t){var n,i,r;return O((function(a){switch(a.g){case 1:n=In(t);A(a,2);i=Qn;if(i[n]){e.decodingInfos.push(i[n]);a.B(4);break}return E(a,navigator.mediaCapabilities.decodingInfo(t),5);case 5:r=a.h,i[n]=r,e.decodingInfos.push(r);case 4:I(a,0);break;case 2:k(a),JSON.stringify(t),x(a)}}))}function _n(e,t,n,i){var r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T;return O((function(x){switch(x.g){case 1:if(r=e.some((function(e){return e.decodingInfos.length})))return x.return();a={};o=c(i);s=o.next();case 2:if(s.done){x.B(4);break}a.Td=s.value;u=!1;l=c(e);d=l.next();case 5:if(d.done){x.B(7);break}h=d.value;f=Cn(h,t,n).filter(function(e){return function(t){return(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.Td}}(a));p=c(f);g=p.next();case 8:if(g.done){x.B(10);break}m=g.value;return E(x,kn(h,m),9);case 9:g=p.next();x.B(8);break;case 10:h.decodingInfos.length&&(u=!0);d=l.next();x.B(5);break;case 7:if(u)return x.return();a={Td:a.Td};s=o.next();x.B(2);break;case 4:v=c(e),d=v.next();case 12:if(d.done){x.B(0);break}y=d.value;b=Cn(y,t,n).filter((function(e){e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem;return!e||!i.includes(e)}));w=c(b);g=w.next();case 15:if(g.done){d=v.next();x.B(12);break}T=g.value;return E(x,kn(y,T),16);case 16:g=w.next(),x.B(15)}}))}function Cn(e,t,n){var i=e.audio,r=e.video;n={type:n?"file":"media-source"};if(r){var a=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");a=bt("video",o);a=Dn(a);o=bt("audio",o);o=Mn(o);o=kt(r.mimeType,o,"audio");n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}a=Dn(a);a=kt(r.mimeType,a,"video");n.video={contentType:a,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1};if(r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}i&&(a=Mn(i.codecs),a=kt(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]);if(!o.length)return[n];e=[];a=new Map;o=c(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]);a.get(u.keySystem).push(u)}o=t?"required":"optional";t=t?["persistent-license"]:["temporary"];u=c(a.keys());for(var l=u.next();!l.done;l=u.next()){var d=l.value;l=Object.assign({},n);var h=a.get(d);d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t};h=c(h);for(s=h.next();!s.done;s=h.next()){s=s.value;if(s.initData&&s.initData.length){for(var f=new Set,p=c(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required");s.persistentStateRequired&&(d.persistentState="required");s.sessionType&&(d.sessionTypes=[s.sessionType]);i&&(""!=s.audioRobustness?d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}:d.audio||(d.audio={}));r&&(""!=s.videoRobustness?d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness}:d.video||(d.video={}))}l.keySystemConfiguration=d;e.push(l)}return e}function Mn(e){return"fLaC"===e?"flac":"Opus"===e?"opus":rn()?"ac-3"==e.toLowerCase()?"ec-3":e:e}function Dn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Rn(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;t=t.video;return n&&e&&e.audio&&!On(n,e.audio)||t&&e&&e.video&&!On(t,e.video)?!1:!0}))}function Ln(e){e.textStreams=e.textStreams.filter((function(e){e=St(e.mimeType,e.codecs);return Lt(e)}))}function Pn(e){var t,n,i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:t=[],n=c(e.imageStreams),i=n.next();case 2:if(i.done){l.B(4);break}r=i.value;a=r.mimeType;if(ni.has(a)){l.B(5);break}o=ii.get(a);if(!o){ni.set(a,!1);l.B(5);break}return E(l,Nn(o),7);case 7:s=l.h,ni.set(a,s);case 5:(u=ni.get(a))&&t.push(r);i=n.next();l.B(2);break;case 4:e.imageStreams=t,x(l)}}))}function Nn(e){return new Promise((function(t){var n=new Image;n.src=e;"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}function On(e,t){return e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0]?!1:!0}function Un(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o);a&&s.push(a);var u=[];n&&u.push(n.mimeType);t&&u.push(t.mimeType);u=u[0]||null;var l=[];t&&l.push(t.kind);n&&l.push(n.kind);l=l[0]||null;var d=new Set;if(t)for(var h=c(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(h=c(n.roles),f=h.next();!f.done;f=h.next())d.add(f.value);e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null};n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null);t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage);return e}function jn(e){return{id:e.id,active:!1,type:Tt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Bn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;i&&(r=i.tilesLayout||r);r&&null!=t&&(t/=Number(r.split("x")[0]));r&&null!=n&&(n/=Number(r.split("x")[1]));return{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Fn(e){e.__shaka_id||(e.__shaka_id=$n++);return e.__shaka_id}function Vn(e){var t=Hn(e);t.active="disabled"!=e.mode;t.type="text";t.originalTextId=e.id;"captions"==e.kind&&(t.mimeType="application/cea-608");"subtitles"==e.kind&&(t.mimeType="text/vtt");e.kind&&(t.roles=[e.kind]);"forced"==e.kind&&(t.forced=!0);return t}function Gn(e){var t=Hn(e);t.active=e.enabled;t.type="variant";t.originalAudioId=e.id;"main"==e.kind&&(t.primary=!0);e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label);return t}function Hn(e){var t=e.language;return{id:Fn(e),active:!1,type:"",bandwidth:0,language:qt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function qn(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function zn(e){return e.filter((function(e){return qn(e)}))}function Kn(e,t){var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map;n=c(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.audio.channelsCount;i.has(a)||i.set(a,[]);i.get(a).push(r)}n=Array.from(i.keys());if(0==n.length)return e;e=n.filter((function(e){return e<=t}));return e.length?i.get(Math.max.apply(Math,d(e))):i.get(Math.min.apply(Math,d(n)))}function Xn(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var o=r.length?r[0].language:"";r=r.filter((function(e){return e.language==o}));if(t){var s=Wt(qt(t),e.map((function(e){return e.language})));s&&(r=e.filter((function(e){return qt(e.language)==s})))}r=r.filter((function(e){return e.forced==i}));if(n){if(e=Wn(r,n),e.length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;e=r.map((function(e){return e.roles})).reduce(pt,[]);return e.length?Wn(r,e[0]):r}function Wn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Yn(e){var t=[];e.audio&&t.push(Jn(e.audio));e.video&&t.push(Jn(e.video));return t.join(", ")}function Jn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}q("shaka.util.StreamUtils",fn);fn.meetsRestrictions=xn;var Qn={},$n=0,Zn="smooth",ei="powerEfficient",ti="bandwidth",ni=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ii=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ri(){var e=this;this.l=null;this.o=!1;this.i=new W;this.u=null;navigator.connection&&navigator.connection.addEventListener&&(this.u=function(){if(e.o&&e.g.useNetworkInformation){e.i=new W;e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.u));this.m=[];this.A=1;this.F=!1;this.h=this.j=this.g=this.s=null;this.D=new $t((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}))}i=ri.prototype;i.stop=function(){this.l=null;this.o=!1;this.m=[];this.A=1;this.j=this.s=null;this.h&&(this.h.disconnect(),this.h=null);this.D.stop()};i.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.u),this.u=null);this.D=null};i.init=function(e){this.l=e};i.chooseVariant=function(){var t=Infinity,n=Infinity;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width);this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientHeight*n,n*=this.j.clientWidth);t=oi(this.g.restrictions,this.m,t,n);n=this.i.getBandwidthEstimate(ai(this));this.m.length&&!t.length&&(t=oi(null,this.m,Infinity,Infinity),t=[t[0]]);for(var i=t[0]||null,r=0;r<t.length;r++){for(var a=t[r],o=isNaN(this.A)?1:Math.abs(this.A),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:Infinity},l=r+1;l<t.length;l++)if(a.bandwidth!=t[l].bandwidth){u=t[l];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget;n>=s&&n<=o&&i.bandwidth!=a.bandwidth&&(i=a)}this.s=Date.now();return i};i.enable=function(){this.o=!0};i.disable=function(){this.o=!1};i.segmentDownloaded=function(e,t){this.i.sample(e,t);if(null!=this.s&&this.o)e:{if(!this.F){e=this.i;if(!(e.g>=e.i))break e;this.F=!0}else if(Date.now()-this.s<1e3*this.g.switchInterval)break e;e=this.chooseVariant();this.i.getBandwidthEstimate(ai(this));e&&this.l(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch)}};i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(ai(this))};i.setVariants=function(e){this.m=e};i.playbackRateChanged=function(e){this.A=e};i.setMediaElement=function(t){var n=this;this.j=t;this.h&&(this.h.disconnect(),this.h=null);this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.S(si)})),this.h.observe(this.j))};i.configure=function(e){this.g=e;this.i&&this.g&&this.i.configure(this.g.advanced)};function ai(e){var t=e.g.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink);return t}function oi(e,t,n,i){e&&(t=t.filter((function(t){return xn(t,e,{width:i,height:n})})));return t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}q("shaka.abr.SimpleAbrManager",ri);ri.prototype.configure=ri.prototype.configure;ri.prototype.setMediaElement=ri.prototype.setMediaElement;ri.prototype.playbackRateChanged=ri.prototype.playbackRateChanged;ri.prototype.setVariants=ri.prototype.setVariants;ri.prototype.getBandwidthEstimate=ri.prototype.getBandwidthEstimate;ri.prototype.segmentDownloaded=ri.prototype.segmentDownloaded;ri.prototype.disable=ri.prototype.disable;ri.prototype.enable=ri.prototype.enable;ri.prototype.chooseVariant=ri.prototype.chooseVariant;ri.prototype.init=ri.prototype.init;ri.prototype.release=ri.prototype.release;ri.prototype.stop=ri.prototype.stop;var si=1;function ui(e,t){this.g=e;this.h=t}ui.prototype.toString=function(){return"v"+this.g+"."+this.h};function li(e,t){var n=new ui(5,0),i=hi,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function ci(e,t,n,i){Q([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function di(e,t,n,i){J([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}var hi=null;q("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function fi(e,t){this.h=e;this.g=new Set([e]);t=t||[];e=c(t);for(t=e.next();!t.done;t=e.next())this.add(t.value)}fi.prototype.add=function(e){return pi(this.h,e)?(this.g.add(e),!0):!1};function pi(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&gi(n,i)&&mi(n.roles,i.roles))}!n&&(n=e.video&&t.video)&&(e=e.video,t=t.video,n=!(gi(e,t)&&mi(e.roles,t.roles)));return n?!1:!0}fi.prototype.values=function(){return this.g.values()};function gi(e,t){if(e.mimeType!=t.mimeType)return!1;e=e.codecs.split(",").map((function(e){return Mt(e)[0]}));t=t.codecs.split(",").map((function(e){return Mt(e)[0]}));if(e.length!=t.length)return!1;e.sort();t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function mi(e,t){e=new Set(e);t=new Set(t);e.delete("main");t.delete("main");if(e.size!=t.size)return!1;e=c(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function vi(e){this.g=e;this.h=new yi(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","")}vi.prototype.create=function(e){var t=this,n=e.filter((function(e){return pi(t.g,e)}));return n.length?new fi(n[0],n):this.h.create(e)};function yi(e,t,n,i,r){this.j=e;this.l=t;this.g=n;this.h=i;this.i=void 0===r?"":r}yi.prototype.create=function(e){var t=[];t=bi(e,this.j);var n=e.filter((function(e){return e.primary}));t=t.length?t:n.length?n:e;e=wi(t,this.l);e.length&&(t=e);this.h&&(e=Ei(t,this.h),e.length&&(t=e));this.g&&(e=Kn(t,this.g),e.length&&(t=e));this.i&&(e=Ti(t,this.i),e.length&&(t=e));e=new fi(t[0]);t=c(t);for(n=t.next();!n.done;n=t.next())n=n.value,pi(e.h,n)&&e.add(n);return e};function bi(e,t){t=qt(t);var n=Wt(t,e.map((function(e){return Xt(e)})));return n?e.filter((function(e){return n==Xt(e)})):[]}function wi(e,t){return e.filter((function(e){return e.audio?t?e.audio.roles.includes(t):0==e.audio.roles.length:!1}))}function Ti(e,t){return e.filter((function(e){return e.audio&&e.audio.label?e.audio.label.toLowerCase()==t.toLowerCase():!1}))}function Ei(t,n){"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");return t.filter((function(e){return e.video&&e.video.hdr&&e.video.hdr!=n?!1:!0}))}function xi(){this.g=Ii;this.h=(new Map).set(Ii,2).set(Si,1)}function Ai(e,t,n){e.h.set(Ii,n).set(Si,t)}var Si=0,Ii=1;function ki(e,t){var n=Ci();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts;this.j=null==e.baseDelay?n.baseDelay:e.baseDelay;this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor;this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor;this.g=0;this.h=this.j;if(this.i=void 0===t?!1:t)this.g=1}function _i(e){var t,n;return O((function(i){if(1==i.g){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new ht(2,7,1010);t=e.g;e.g++;if(0==t)return i.return();n=e.h*(1+(2*Math.random()-1)*e.o);return E(i,new Promise((function(e){new $t(e).S(n/1e3)})),2)}e.h*=e.m;x(i)}))}function Ci(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Mi(){var e,t,n=new Promise((function(n,i){e=n;t=i}));n.resolve=e;n.reject=t;return n}Mi.prototype.resolve=function(){};Mi.prototype.reject=function(){};function Di(e,t){this.promise=e;this.i=t;this.g=!1}function Ri(e){return new Di(Promise.reject(e),(function(){return Promise.resolve()}))}function Li(){var e=Promise.reject(new ht(2,7,7001));e.catch((function(){}));return new Di(e,(function(){return Promise.resolve()}))}function Pi(e){return new Di(Promise.resolve(e),(function(){return Promise.resolve()}))}function Ni(e){return new Di(e,(function(){return e.catch((function(){}))}))}Di.prototype.abort=function(){this.g=!0;return this.i()};function Oi(e){return new Di(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}Di.prototype.finally=function(e){this.promise.then((function(){return e(!0)}),(function(){return e(!1)}));return this};Di.prototype.ea=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var u=n?e:t;u?i=Ui(u,s,a):(n?a.resolve:a.reject)(s)}}}function i(){a.reject(o);return r.abort()}var r=this,a=new Mi,o=new ht(2,7,7001);this.promise.then(n(!0),n(!1));return new Di(a,(function(){return i()}))};function Ui(e,t,n){try{var i=e(t);if(i&&i.promise&&i.abort)return n.resolve(i.promise),function(){return i.abort()};n.resolve(i);return function(){return Promise.resolve(i).then((function(){}),(function(){}))}}catch(e){return n.reject(e),function(){return Promise.resolve()}}}q("shaka.util.AbortableOperation",Di);Di.prototype.chain=Di.prototype.ea;Di.prototype["finally"]=Di.prototype.finally;Di.all=Oi;Di.prototype.abort=Di.prototype.abort;Di.notAbortable=Ni;Di.completed=Pi;Di.aborted=Li;Di.failed=Ri;function ji(t,n){if(n)if(n instanceof Map)for(var i=c(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now();this.type=t;this.isTrusted=!1;this.target=this.currentTarget=null;this.g=!1}function Bi(e){var t=new ji(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}ji.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};ji.prototype.stopImmediatePropagation=function(){this.g=!0};ji.prototype.stopPropagation=function(){};q("shaka.util.FakeEvent",ji);var Fi={th:"abrstatuschanged",uh:"adaptation",vh:"buffering",wh:"downloadfailed",xh:"downloadheadersreceived",yh:"drmsessionupdate",Ah:"emsg",Mh:"prft",Error:"error",Bh:"expirationupdated",Ch:"gapjumped",Fh:"loaded",Gh:"loading",Ih:"manifestparsed",Jh:"mediaqualitychanged",Metadata:"metadata",Kh:"onstatechange",Lh:"onstateidle",Nh:"ratechange",Ph:"segmentappended",Qh:"sessiondata",Rh:"stalldetected",Sh:"streaming",Th:"textchanged",Uh:"texttrackvisibility",Vh:"timelineregionadded",Wh:"timelineregionenter",Xh:"timelineregionexit",Yh:"trackschanged",$h:"unloading",bi:"variantchanged"};function Vi(){this.aa=new Jt;this.yd=this}Vi.prototype.addEventListener=function(e,t){this.aa&&this.aa.push(e,t)};Vi.prototype.removeEventListener=function(e,t){this.aa&&this.aa.remove(e,t)};Vi.prototype.dispatchEvent=function(e){if(!this.aa)return!0;var t=this.aa.get(e.type)||[],n=this.aa.get("All");n&&(t=t.concat(n));t=c(t);for(n=t.next();!n.done;n=t.next()){n=n.value;e.target=this.yd;e.currentTarget=this.yd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented};Vi.prototype.release=function(){this.aa=null};function Gi(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var i=e.constructor==Array;if(e.constructor!=Object&&!i)return null;n.add(e);var r=i?[]:{},a;for(a in e)r[a]=t(e[a]);i&&(r.length=e.length);return r}}var n=new Set;return t(e)}function Hi(e){var t={},n;for(n in e)t[n]=e[n];return t}function qi(){this.g=[]}function zi(e,t){e.g.push(t.finally((function(){we(e.g,t)})))}qi.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch((function(){})),e.push(n.abort());this.g=[];return Promise.all(e)};function Ki(e,t,n,i){Vi.call(this);this.i=!1;this.m=new qi;this.g=new Set;this.h=new Set;this.l=e||null;this.j=t||null;this.s=n||null;this.u=i||null;this.o=!1}y(Ki,Vi);i=Ki.prototype;i.Me=function(e){this.o=e};function Xi(e,t,n,i){n=n||tr;var r=nr[e];if(!r||n>=r.priority)nr[e]={priority:n,Ld:t,Wg:void 0===i?!1:i}}i.Xg=function(e){this.g.add(e)};i.nh=function(e){this.g.delete(e)};i.Zf=function(){this.g.clear()};i.Yg=function(e){this.h.add(e)};i.oh=function(e){this.h.delete(e)};i.$f=function(){this.h.clear()};function Wi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}i.destroy=function(){this.i=!0;this.g.clear();this.h.clear();Vi.prototype.release.call(this);return this.m.destroy()};i.request=function(e,t,n){var i=this,r=new $i;if(this.i){var a=Promise.reject(new ht(2,7,7001));a.catch((function(){}));return new Zi(a,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET";t.headers=t.headers||{};t.retryParameters=t.retryParameters?Gi(t.retryParameters):Ci();t.uris=Gi(t.uris);a=Yi(this,e,t,n);var o=a.ea((function(){return Ji(i,e,t,new ki(t.retryParameters,!1),0,null,r)})),s=o.ea((function(t){return Qi(i,e,t,n)})),u=Date.now(),l=0;a.promise.then((function(){l=Date.now()-u}),(function(){}));var c=0;o.promise.then((function(){c=Date.now()}),(function(){}));var d=s.ea((function(n){var r=Date.now()-c,a=n.response;a.timeMs+=l;a.timeMs+=r;n.Ig||!i.l||a.fromCache||"HEAD"==t.method||e!=er||i.l(a.timeMs,a.data.byteLength);return a}),(function(e){e&&(e.severity=2);throw e}));a=new Zi(d.promise,(function(){return d.abort()}),r);zi(this.m,a);return a};function Yi(e,t,n,i){function r(e){a=a.ea((function(){n.body&&(n.body=de(n.body));return e(t,n,i)}))}var a=Pi(void 0);e.u&&r(e.u);e=c(e.g);for(var o=e.next();!o.done;o=e.next())r(o.value);return a.ea(void 0,(function(e){if(e instanceof ht&&7001==e.code)throw e;throw new ht(2,1,1006,e)}))}function Ji(e,t,n,i,r,a,o){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var s=new $e(n.uris[r]),u=s.Ma,l=!1;u||(u=location.protocol,u=u.slice(0,-1),Ze(s,u),n.uris[r]=s.toString());u=u.toLowerCase();var c=(u=nr[u])?u.Ld:null;if(!c)return Ri(new ht(2,1,1e3,s));var d=u.Wg,h=null,f=null,p=!1,g=!1,m;return Ni(_i(i)).ea((function(){if(e.i)return Li();m=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){h&&h.stop();f&&f.S(s/1e3);e.l&&t==er&&(e.l(n,i),l=!0,o.g=r)}),(function(i){e.j&&e.j(i,n,t);g=!0}));if(!d)return i;var a=n.retryParameters.connectionTimeout;a&&(h=new $t((function(){p=!0;i.abort()})),h.S(a/1e3));var s=n.retryParameters.stallTimeout;s&&(f=new $t((function(){p=!0;i.abort()})));return i})).ea((function(i){h&&h.stop();f&&f.stop();void 0==i.timeMs&&(i.timeMs=Date.now()-m);var r={response:i,Ig:l};!g&&e.j&&e.j(i.headers,n,t);return r}),(function(s){h&&h.stop();f&&f.stop();if(e.s){var u=null,l=0;s instanceof ht&&(u=s,1001==s.code&&(l=s.data[1]));e.s(n,u,l,p)}if(e.i)return Li();p&&(s=new ht(1,1,1003,n.uris[r],t));if(s instanceof ht){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return u=(new Map).set("error",s),u=new ji("retry",u),e.dispatchEvent(u),r=(r+1)%n.uris.length,Ji(e,t,n,i,r,s,o)}throw s}))}function Qi(e,t,n,i){var r=Pi(void 0),a={};e=c(e.h);for(var o=e.next();!o.done;a={Vd:a.Vd},o=e.next())a.Vd=o.value,r=r.ea(function(e){return function(){var r=n.response;r.data&&(r.data=de(r.data));return e.Vd(t,r,i)}}(a));return r.ea((function(){return n}),(function(e){var t=2;if(e instanceof ht){if(7001==e.code)throw e;t=e.severity}throw new ht(t,1,1007,e)}))}q("shaka.net.NetworkingEngine",Ki);Ki.prototype.request=Ki.prototype.request;Ki.prototype.destroy=Ki.prototype.destroy;Ki.makeRequest=Wi;Ki.defaultRetryParameters=function(){return Ci()};Ki.prototype.clearAllResponseFilters=Ki.prototype.$f;Ki.prototype.unregisterResponseFilter=Ki.prototype.oh;Ki.prototype.registerResponseFilter=Ki.prototype.Yg;Ki.prototype.clearAllRequestFilters=Ki.prototype.Zf;Ki.prototype.unregisterRequestFilter=Ki.prototype.nh;Ki.prototype.registerRequestFilter=Ki.prototype.Xg;Ki.unregisterScheme=function(e){delete nr[e]};Ki.registerScheme=Xi;Ki.prototype.setForceHTTPS=Ki.prototype.Me;function $i(){this.g=0}Ki.NumBytesRemainingClass=$i;function Zi(e,t,n){Di.call(this,e,t);this.h=n}y(Zi,Di);Ki.PendingRequest=Zi;var er=1;Ki.RequestType={MANIFEST:0,SEGMENT:er,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};Ki.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var tr=3;Ki.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:tr};var nr={};function ir(e){this.g=!1;this.h=new Mi;this.i=e}ir.prototype.destroy=function(){var e=this;if(this.g)return this.h;this.g=!0;return this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()}))};function rr(e,t){if(e.g){if(t instanceof ht&&7003==t.code)throw t;throw new ht(2,7,7003,t)}}function ar(){this.g=new Jt}i=ar.prototype;i.release=function(){this.sb();this.g=null};i.C=function(e,t,n,i){this.g&&(e=new or(e,t,n,i),this.g.push(t,e))};i.ja=function(e,t,n,i){function r(i){a.Xc(e,t,r);n(i)}var a=this;this.C(e,t,r,i)};i.Xc=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=c(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Xc(),this.g.remove(t,r))}};i.sb=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,d(e.g[n]));e=c(t);for(t=e.next();!t.done;t=e.next())t.value.Xc();this.g.g={}}};q("shaka.util.EventManager",ar);ar.prototype.removeAll=ar.prototype.sb;ar.prototype.unlisten=ar.prototype.Xc;ar.prototype.listenOnce=ar.prototype.ja;ar.prototype.listen=ar.prototype.C;ar.prototype.release=ar.prototype.release;function or(e,t,n,i){this.target=e;this.type=t;this.listener=n;this.g=sr(e,i);this.target.addEventListener(t,n,this.g)}or.prototype.Xc=function(){this.target.removeEventListener(this.type,this.listener,this.g);this.listener=this.target=null;this.g=!1};function sr(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);Object.keys(t).filter((function(e){return!n.has(e)}));return ur(e)?t:t.capture||!1}function ur(e){var t=lr;if(void 0==t){t=!1;try{var n={},i={get:function(){t=!0;return!1}};Object.defineProperty(n,"passive",i);Object.defineProperty(n,"capture",i);i=function(){};e.addEventListener("test",i,n);e.removeEventListener("test",i,n)}catch(e){t=!1}lr=t}return t||!1}var lr=void 0;function cr(e,t){var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function dr(e,t){e=c(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function hr(e){this.h=e;this.g=void 0}hr.prototype.value=function(){void 0==this.g&&(this.g=this.h());return this.g};function fr(e){for(var t=new Map,n=c(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function pr(e){var t={};e.forEach((function(e,n){t[n]=e}));return t}function gr(e,t){if(e||t){if(e&&!t||t&&!e)return!1}else return!0;if(e.size!=t.size)return!1;e=c(e);for(var n=e.next();!n.done;n=e.next()){var i=c(n.value);n=i.next().value;i=i.next().value;if(!t.has(n))return!1;n=t.get(n);if(n!=i||void 0==n)return!1}return!0}function mr(){}function vr(t){if(!t)return"";t=he(t);239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3));if(e.TextDecoder&&!sn())return t=(new TextDecoder).decode(t),t.includes("")&&J('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;0==(t[i]&128)?r=t[i]:t.length>=i+2&&192==(t[i]&224)&&128==(t[i+1]&192)?(r=(t[i]&31)<<6|t[i+1]&63,i+=1):t.length>=i+3&&224==(t[i]&240)&&128==(t[i+1]&192)&&128==(t[i+2]&192)?(r=(t[i]&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=2):t.length>=i+4&&240==(t[i]&241)&&128==(t[i+1]&192)&&128==(t[i+2]&192)&&128==(t[i+3]&192)&&(r=(t[i]&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=3);if(65535>=r)n+=String.fromCharCode(r);else{r-=65536;var a=r&1023;n+=String.fromCharCode(55296+(r>>10));n+=String.fromCharCode(56320+a)}}return n}function yr(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ht(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=fe(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Er.value()(i)}function br(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=he(e);if(239==n[0]&&187==n[1]&&191==n[2])return vr(n);if(254==n[0]&&255==n[1])return yr(n.subarray(2),!1);if(255==n[0]&&254==n[1])return yr(n.subarray(2),!0);if(0==n[0]&&0==n[2])return yr(e,!1);if(0==n[1]&&0==n[3])return yr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return vr(e);throw new ht(2,2,2003)}function wr(t){if(e.TextEncoder&&!sn()){var n=new TextEncoder;return de(n.encode(t))}t=encodeURIComponent(t);t=unescape(t);n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return de(n)}function Tr(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}q("shaka.util.StringUtils",mr);mr.resetFromCharCode=function(){Er.g=void 0};mr.toUTF16=Tr;mr.toUTF8=wr;mr.fromBytesAutoDetect=br;mr.fromUTF16=yr;mr.fromUTF8=vr;var Er=new hr((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={nb:65536};0<t.nb;t={nb:t.nb},t.nb/=2)if(e(t.nb))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.nb)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.nb));return n}}(t);return null}));function xr(e,t){this.h=fe(e);this.i=t==Sr;this.g=0}i=xr.prototype;i.ha=function(){return this.g<this.h.byteLength};i.fa=function(){return this.g};i.getLength=function(){return this.h.byteLength};i.qa=function(){try{var e=this.h.getUint8(this.g);this.g+=1;return e}catch(e){throw Ar()}};i.Ia=function(){try{var e=this.h.getUint16(this.g,this.i);this.g+=2;return e}catch(e){throw Ar()}};i.J=function(){try{var e=this.h.getUint32(this.g,this.i);this.g+=4;return e}catch(e){throw Ar()}};i.yf=function(){try{var e=this.h.getInt32(this.g,this.i);this.g+=4;return e}catch(e){throw Ar()}};i.dc=function(){try{if(this.i){var e=this.h.getUint32(this.g,!0);var t=this.h.getUint32(this.g+4,!0)}else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw Ar()}if(2097151<t)throw new ht(2,3,3001);this.g+=8;return t*Math.pow(2,32)+e};i.jb=function(e){if(this.g+e>this.h.byteLength)throw Ar();var t=he(this.h,this.g,e);this.g+=e;return t};i.skip=function(e){if(this.g+e>this.h.byteLength)throw Ar();this.g+=e};i.eh=function(e){if(this.g<e)throw Ar();this.g-=e};i.seek=function(e){if(0>e||e>this.h.byteLength)throw Ar();this.g=e};i.Sc=function(){for(var e=this.g;this.ha()&&0!=this.h.getUint8(this.g);)this.g+=1;e=he(this.h,e,this.g-e);this.g+=1;return vr(e)};function Ar(){return new ht(2,3,3e3)}q("shaka.util.DataViewReader",xr);xr.prototype.readTerminatedString=xr.prototype.Sc;xr.prototype.seek=xr.prototype.seek;xr.prototype.rewind=xr.prototype.eh;xr.prototype.skip=xr.prototype.skip;xr.prototype.readBytes=xr.prototype.jb;xr.prototype.readUint64=xr.prototype.dc;xr.prototype.readInt32=xr.prototype.yf;xr.prototype.readUint32=xr.prototype.J;xr.prototype.readUint16=xr.prototype.Ia;xr.prototype.readUint8=xr.prototype.qa;xr.prototype.getLength=xr.prototype.getLength;xr.prototype.getPosition=xr.prototype.fa;xr.prototype.hasMoreData=xr.prototype.ha;var Sr=1;xr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Sr};function Ir(){this.i=[];this.h=[];this.g=!1}i=Ir.prototype;i.box=function(e,t){e=Dr(e);this.i[e]=Pr;this.h[e]=t;return this};i.M=function(e,t){e=Dr(e);this.i[e]=Nr;this.h[e]=t;return this};i.stop=function(){this.g=!0};i.parse=function(e,t,n){e=new xr(e,0);for(this.g=!1;e.ha()&&!this.g;)this.Qc(0,e,t,n)};i.Qc=function(e,t,n,i){var r=t.fa();if(i&&r+8>t.getLength())this.g=!0;else{var a=t.J(),o=t.J(),s=Rr(o),u=!1;switch(a){case 0:a=t.getLength()-r;break;case 1:if(i&&t.fa()+8>t.getLength()){this.g=!0;return}a=t.dc();u=!0}var l=this.h[o];if(l){var c=null,d=null;if(this.i[o]==Nr){if(i&&t.fa()+4>t.getLength()){this.g=!0;return}d=t.J();c=d>>>24;d&=16777215}o=r+a;n&&o>t.getLength()&&(o=t.getLength());i&&o>t.getLength()?this.g=!0:(i=o-t.fa(),t=0<i?t.jb(i):new Uint8Array(0),t=new xr(t,0),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t,size:a,start:r+e,has64BitSize:u}))}else t.skip(Math.min(r+a-t.fa(),t.getLength()-t.fa()))}};function kr(e){for(var t=Lr(e);e.reader.ha()&&!e.parser.g;)e.parser.Qc(e.start+t,e.reader,e.partialOkay)}function _r(e){for(var t=Lr(e),n=e.reader.J(),i=0;i<n&&(e.parser.Qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Cr(e){var t=Lr(e);for(e.reader.skip(78);e.reader.ha()&&!e.parser.g;)e.parser.Qc(e.start+t,e.reader,e.partialOkay)}function Mr(e){return function(t){e(t.reader.jb(t.reader.getLength()-t.reader.fa()))}}function Dr(e){var t=0;e=c(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Rr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Lr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}q("shaka.util.Mp4Parser",Ir);Ir.headerSize=Lr;Ir.typeToString=Rr;Ir.allData=Mr;Ir.visualSampleEntry=Cr;Ir.sampleDescription=_r;Ir.children=kr;Ir.prototype.parseNext=Ir.prototype.Qc;Ir.prototype.parse=Ir.prototype.parse;Ir.prototype.stop=Ir.prototype.stop;Ir.prototype.fullBox=Ir.prototype.M;Ir.prototype.box=Ir.prototype.box;var Pr=0,Nr=1;function Or(){}function Ur(e){e=he(e);e=Er.value()(e);return btoa(e)}function jr(e,t){t=void 0==t?!0:t;e=Ur(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")}function Br(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Fr(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Vr(e){var t=he(e);e="";t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function Gr(){for(var e=U.apply(0,arguments),t=0,n=c(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;t=new Uint8Array(t);n=0;e=c(e);for(i=e.next();!i.done;i=e.next())i=i.value,t.set(he(i),n),n+=i.byteLength;return t}q("shaka.util.Uint8ArrayUtils",Or);Or.concat=Gr;Or.toHex=Vr;Or.fromHex=Fr;Or.fromBase64=Br;Or.toBase64=jr;Or.toStandardBase64=Ur;function Hr(e){var t=this;this.g=[];this.h=[];this.data=[];(new Ir).box("moov",kr).box("moof",kr).M("pssh",(function(e){if(!(1<e.version)){var n=he(e.reader.h,-12,e.size);t.data.push(n);t.g.push(Vr(e.reader.jb(16)));if(0<e.version){n=e.reader.J();for(var i=0;i<n;i++){var r=Vr(e.reader.jb(16));t.h.push(r)}}}})).parse(e)}function qr(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var o=new Uint8Array(a),s=fe(o),u=0;s.setUint32(u,a);u+=4;s.setUint32(u,1886614376);u+=4;1>i?s.setUint32(u,0):s.setUint32(u,16777216);u+=4;o.set(t,u);u+=t.length;if(0<i)for(s.setUint32(u,n.size),u+=4,t=c(n),n=t.next();!n.done;n=t.next())n=Fr(n.value),o.set(n,u),u+=n.length;s.setUint32(u,r);o.set(e,u+4);return o}function zr(e,t){e=Xr(e,t);return 1!=e.length?null:e[0]}function Kr(e,t,n){e=Yr(e,t,n);return 1!=e.length?null:e[0]}function Xr(e,t){var n=[];e=c(e.childNodes);for(var i=e.next();!i.done;i=e.next())i=i.value,i instanceof Element&&i.tagName==t&&n.push(i);return n}function Wr(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}function Yr(e,t,n){var i=[];e=c(e.childNodes);for(var r=e.next();!r.done;r=e.next())r=r.value,r instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function Jr(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Qr(e,t,n){t=c(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function $r(e){return Array.from(e.childNodes).every(Zr)?e.textContent.trim():null}function Zr(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function ea(e,t,n,i){i=void 0===i?null:i;var r=null;e=e.getAttribute(t);null!=e&&(r=n(e));return null==r?i:r}function ta(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");e=Date.parse(e);return isNaN(e)?null:e/1e3}function na(e){if(!e)return null;e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!e)return null;e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null);return isFinite(e)?e:null}function ia(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;e=Number(t[1]);if(!isFinite(e))return null;t=Number(t[2]);return isFinite(t)?{start:e,end:t}:null}function ra(e){e=Number(e);return 0===e%1?e:null}function aa(e){e=Number(e);return 0===e%1&&0<e?e:null}function oa(e){e=Number(e);return 0===e%1&&0<=e?e:null}function sa(e){e=Number(e);return isNaN(e)?null:e}function ua(e){return e?"true"===e.toLowerCase():!1}function la(e){var t;var n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ca(e,t){var n=new DOMParser,i=ha.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}n=e.documentElement;if(!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function da(e,t){try{var n=br(e);return ca(n,t)}catch(e){return null}}var ha=new hr((function(){if("undefined"!==typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function fa(e,t){var n=this;t=void 0===t?1:t;this.D=e;this.G=new Set;this.m=this.s=null;this.ma=this.$=!1;this.H=0;this.g=null;this.A=new ar;this.i=new Map;this.u=new Map;this.l=new Mi;this.h=null;this.o=function(t){2==t.severity&&n.l.reject(t);e.onError(t)};this.U=new Map;this.aa=new Map;this.X=new $t((function(){return Ua(n)}));this.N=!1;this.L=[];this.P=!1;this.ba=new $t((function(){qa(n)})).Ca(t);this.l.catch((function(){}));this.j=new ir((function(){return pa(n)}));this.Y=!1;this.K=this.F=null}i=fa.prototype;i.destroy=function(){return this.j.destroy()};function pa(e){return O((function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.l.reject(),e.ba.stop(),e.ba=null,e.X.stop(),e.X=null,E(t,Fa(e),2);case 2:if(!e.m){t.B(3);break}A(t,4);return E(t,e.m.setMediaKeys(null),6);case 6:I(t,5);break;case 4:k(t);case 5:e.m=null;case 3:e.g=null,e.G.clear(),e.s=null,e.u=new Map,e.h=null,e.o=function(){},e.D=null,e.Y=!1,e.F=null,x(t)}}))}i.configure=function(e){this.h=e};function ga(e,t,n){e.ma=!0;e.u=new Map;e.N=n;return ya(e,t)}function ma(e,t,n){e.u=new Map;n=c(n);for(var i=n.next();!i.done;i=n.next())e.u.set(i.value,{initData:null,initDataType:null});n=c(e.h.persistentSessionsMetadata);for(i=n.next();!i.done;i=n.next())i=i.value,e.u.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});e.N=0<e.u.size;return ya(e,t)}function va(e,t,n,i,r,a){var o=new Map;r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t};r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}];o.set(t,r);return ka(e,o,[])}function ya(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return O((function(w){if(1==w.g){if(n=Ma(e))for(i=c(t),r=i.next();!r.done;r=i.next())a=r.value,a.video&&(a.video.drmInfos=[n]),a.audio&&(a.audio.drmInfos=[n]);o=t.some((function(e){return e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length?!0:!1}));o||(s=fr(e.h.servers),Xa(t,s));u=new Set;l=c(t);for(r=l.next();!r.done;r=l.next())for(d=r.value,h=Ha(d),f=c(h),p=f.next();!p.done;p=f.next())g=p.value,u.add(g);m=c(u);for(p=m.next();!p.done;p=m.next())v=p.value,Ya(v,fr(e.h.servers),fr(e.h.advanced||{}),e.h.keySystemsMapping);return E(w,_n(t,e.N,e.Y,e.h.preferredKeySystems),2)}y=o||Object.keys(e.h.servers).length;if(!y)return e.$=!0,w.return(Promise.resolve());b=ka(e,void 0,t);return w.return(o?b:b.catch((function(){})))}))}function ba(e){var t;return O((function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.F){n.B(2);break}return E(n,e.F,3);case 3:return rr(e.j),n.return();case 2:return A(n,4),e.F=e.m.setMediaKeys(e.s),E(n,e.F,6);case 6:I(n,5);break;case 4:t=k(n),e.o(new ht(2,6,6003,t.message));case 5:rr(e.j),x(n)}}))}function wa(e,t){return O((function(n){if(1==n.g)return E(n,ba(e),2);Aa(e,t.initDataType,he(t.initData));x(n)}))}i.yc=function(e){var t=this;return O((function(n){if(1==n.g){if(!t.s)return t.A.ja(e,"encrypted",(function(){t.o(new ht(2,6,6010))})),n.return();t.m=e;t.A.ja(t.m,"play",(function(){for(var e=c(t.L),n=e.next();!n.done;n=e.next())Na(t,n.value);t.P=!0;t.L=[]}));"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.C(t.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Fa(t)}));t.K=t.g?t.g.initData.find((function(e){return 0<e.initData.length}))||null:null;return t.K||"com.apple.fps"!==t.g.keySystem||t.u.size?E(n,ba(t),2):n.B(2)}xa(t).catch((function(){}));t.K||t.u.size||t.h.parseInbandPsshEnabled||t.A.C(t.m,"encrypted",(function(e){return wa(t,e)}));x(n)}))};function Ta(e){var t,n,i,r,a;return O((function(o){switch(o.g){case 1:if(!e.s||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.B(2);break}t=Wi([e.g.serverCertificateUri],e.h.retryParameters);A(o,3);n=e.D.Ib.request(5,t);return E(o,n.promise,5);case 5:i=o.h;e.g.serverCertificate=he(i.data);I(o,4);break;case 3:throw r=k(o),new ht(2,6,6017,r);case 4:if(e.j.g)return o.return();case 2:if(!e.g.serverCertificate||!e.g.serverCertificate.length)return o.return();A(o,6);return E(o,e.s.setServerCertificate(e.g.serverCertificate),8);case 8:I(o,0);break;case 6:throw a=k(o),new ht(2,6,6004,a.message)}}))}function Ea(e,t){var n,i,r;return O((function(a){if(1==a.g)return E(a,La(e,t,{initData:null,initDataType:null}),2);if(3!=a.g){n=a.h;if(!n)return a.return();i=[];if(r=e.i.get(n))r.Wa=new Mi,i.push(r.Wa);i.push(n.remove());return E(a,Promise.all(i),3)}e.i.delete(n);x(a)}))}function xa(e){var t,n,i,r,a;return O((function(o){if(1==o.g){if(!e.u.size)return o.B(2);e.u.forEach((function(t,n){La(e,n,t)}));return E(o,e.l,3)}if(2!=o.g){t=e.g&&e.g.keyIds||new Set([]);if(0<t.size&&Ka(e))return o.return(e.l);e.l=new Mi;e.l.catch((function(){}))}n=(e.g?e.g.initData:[])||[];i=c(n);for(r=i.next();!r.done;r=i.next())a=r.value,Aa(e,a.initDataType,a.initData);n.length||e.l.resolve();return o.return(e.l)}))}function Aa(e,t,n){if(n.length){var i=e.i.values();i=c(i);for(var r=i.next();!r.done;r=i.next())if(le(n,r.value.initData)&&!ln("Tizen 2"))return;0<e.i.size&&za(e)&&(e.l.resolve(),e.l=new Mi,e.l.catch((function(){})));Pa(e,t,n,e.g.sessionType)}}function Sa(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Ia(e){e=e.i.keys();e=cr(e,(function(e){return e.sessionId}));return Array.from(e)}i.ce=function(){var e=this,t=this.i.keys();t=cr(t,(function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}));return Array.from(t)};i.Ic=function(){var e=Infinity,t=this.i.keys();t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};i.pd=function(){return pr(this.aa)};function ka(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:i=new Map;if(n.length){r=_a(e,n,i);b.B(2);break}return E(b,Ca(e,t),3);case 3:r=b.h;case 2:a=r;if(!a)throw new ht(2,6,6001);rr(e.j);A(b,4);e.G.clear();o=a.getConfiguration();s=o.audioCapabilities||[];u=o.videoCapabilities||[];l=c(s);for(d=l.next();!d.done;d=l.next())h=d.value,e.G.add(h.contentType.toLowerCase());f=c(u);for(d=f.next();!d.done;d=f.next())p=d.value,e.G.add(p.contentType.toLowerCase());if(n.length){var w=a.keySystem;var T=i.get(a.keySystem);var x=[],S=[],_=[],C=[],M=new Set;Wa(T,x,_,S,C,M);var D=e.N?"persistent-license":"temporary";w={keySystem:w,licenseServerUri:x[0],distinctiveIdentifierRequired:T[0].distinctiveIdentifierRequired,persistentStateRequired:T[0].persistentStateRequired,sessionType:T[0].sessionType||D,audioRobustness:T[0].audioRobustness||"",videoRobustness:T[0].videoRobustness||"",serverCertificate:_[0],serverCertificateUri:S[0],initData:C,keyIds:M};T=c(T);for(x=T.next();!x.done;x=T.next())x=x.value,x.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(w.persistentStateRequired=x.persistentStateRequired);T=w}else T=a.keySystem,w=t.get(a.keySystem),x=[],S=[],_=[],C=[],M=new Set,Wa(w.drmInfos,x,_,S,C,M),T={keySystem:T,licenseServerUri:x[0],distinctiveIdentifierRequired:"required"==w.distinctiveIdentifier,persistentStateRequired:"required"==w.persistentState,sessionType:w.sessionTypes[0]||"temporary",audioRobustness:(w.audioCapabilities?w.audioCapabilities[0].robustness:"")||"",videoRobustness:(w.videoCapabilities?w.videoCapabilities[0].robustness:"")||"",serverCertificate:_[0],serverCertificateUri:S[0],initData:C,keyIds:M};e.g=T;if(!e.g.licenseServerUri)throw new ht(2,6,6012,e.g.keySystem);return E(b,a.createMediaKeys(),6);case 6:g=b.h;rr(e.j);e.s=g;if(!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.s)){b.B(7);break}A(b,8);return E(b,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:m=b.h;if("usable"!=m)throw new ht(2,6,6018);rr(e.j);I(b,7,4);break;case 8:v=k(b,4);if(v instanceof ht)throw v;throw new ht(2,6,6019,v.message);case 7:return e.$=!0,E(b,Ta(e),11);case 11:rr(e.j);I(b,0);break;case 4:y=k(b);rr(e.j,y);e.g=null;e.G.clear();if(y instanceof ht)throw y;throw new ht(2,6,6002,y.message)}}))}function _a(e,t,n){for(var i=c(t),r=i.next();!r.done;r=i.next()){var a=c(Ha(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new ht(2,6,6e3);i={};e=c(e.h.preferredKeySystems);for(r=e.next();!r.done;i={Ud:i.Ud},r=e.next())for(i.Ud=r.value,a=c(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Ud}}(i)))return r.keySystemAccess;e=c([!0,!1]);for(r=e.next();!r.done;r=e.next())for(i=r.value,a=c(t),r=a.next();!r.done;r=a.next()){var o=c(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){r=n.get(s.keySystemAccess.keySystem);var u=c(r);for(r=u.next();!r.done;r=u.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}function Ca(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v;return O((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new ht(2,6,6e3);i=c(t.values());for(r=i.next();!r.done;r=i.next())a=r.value,0==a.audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=c(e.h.preferredKeySystems);s=o.next();case 2:if(s.done){y.B(4);break}u=s.value;if(!t.has(u)){y.B(3);break}l=t.get(u);A(y,6);return E(y,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=y.h,y.return(n);case 6:k(y);case 7:rr(e.j);case 3:s=o.next();y.B(2);break;case 4:d=c([!0,!1]),h=d.next();case 9:if(h.done){y.B(11);break}f=h.value;p=c(t.keys());s=p.next();case 12:if(s.done){h=d.next();y.B(9);break}g=s.value;m=t.get(g);v=m.drmInfos.some((function(e){return!!e.licenseServerUri}));if(v!=f){y.B(13);break}A(y,15);return E(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y.return(n);case 15:k(y);case 16:rr(e.j);case 13:s=p.next();y.B(12);break;case 11:return y.return(n)}}))}function Ma(t){t=fr(t.h.clearKeys);if(0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=t;22!=r.length&&(r=jr(Fr(t),!1));t=e;22!=t.length&&(t=jr(Fr(e),!1));e={kty:"oct",kid:r,k:t};n.push(e);i.push(e.kid)}));t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});r=[{initData:he(wr(r)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}function Da(e){za(e)&&e.l.resolve()}function Ra(e,t){new $t((function(){t.loaded=!0;Da(e)})).S(Qa)}function La(e,t,n){var i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:try{i=e.s.createSession("persistent-license")}catch(t){return r=new ht(2,6,6005,t.message),e.o(r),c.return(Promise.reject(r))}e.A.C(i,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Na(e,t)}));e.A.C(i,"keystatuseschange",(function(t){return Oa(e,t)}));a={initData:n.initData,initDataType:n.initDataType,loaded:!1,xe:Infinity,Wa:null,type:"persistent-license"};e.i.set(i,a);A(c,2);return E(c,i.load(t),4);case 4:return o=c.h,rr(e.j),o||(e.i.delete(i),s=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ht(s,6,6013)),a.loaded=!0),Ra(e,a),Da(e),c.return(i);case 2:u=k(c),rr(e.j,u),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ht(l,6,6005,u.message)),a.loaded=!0,Da(e);case 3:return c.return(Promise.resolve())}}))}function Pa(e,t,n,i){try{var r=e.s.createSession(i)}catch(t){e.o(new ht(2,6,6005,t.message));return}e.A.C(r,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Na(e,t)}));e.A.C(r,"keystatuseschange",(function(t){return Oa(e,t)}));e.i.set(r,{initData:n,initDataType:t,loaded:!1,xe:Infinity,Wa:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){t=n;n instanceof ht||(t=new ht(2,6,6016,n));e.o(t);return}e.h.logLicenseExchange&&jr(n);r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32));i="0x"+i.toString(16)}e.o(new ht(2,6,6006,t.message,t,i))}}))}function Na(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g;O((function(m){switch(m.g){case 1:n=t.target;e.h.logLicenseExchange&&jr(t.message);i=e.i.get(n);r=e.g.licenseServerUri;a=e.h.advanced[e.g.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer);o=Wi([r],e.h.retryParameters);o.body=t.message;o.method="POST";o.licenseRequestType=t.messageType;o.sessionId=n.sessionId;o.drmInfo=e.g;i&&(o.initData=i.initData,o.initDataType=i.initDataType);if(Sa(e.g.keySystem)){var v=yr(o.body,!0,!0);if(v.includes("PlayReadyKeyMessage")){v=ca(v,"PlayReadyKeyMessage");for(var y=c(v.getElementsByTagName("HttpHeader")),b=y.next();!b.done;b=y.next())b=b.value,o.headers[b.getElementsByTagName("name")[0].textContent]=b.getElementsByTagName("value")[0].textContent;o.body=Br(v.getElementsByTagName("Challenge")[0].textContent)}else o.headers["Content-Type"]="text/xml; charset=utf-8"}s=Date.now();A(m,2);l=e.D.Ib.request(2,o);return E(m,l.promise,4);case 4:u=m.h;I(m,3);break;case 2:return d=k(m),h=new ht(2,6,6007,d),e.o(h),i&&i.Wa&&i.Wa.reject(h),m.return();case 3:if(e.j.g)return m.return();e.H+=(Date.now()-s)/1e3;e.h.logLicenseExchange&&jr(u.data);A(m,5);return E(m,n.update(u.data),7);case 7:I(m,6);break;case 5:return f=k(m),p=new ht(2,6,6008,f.message),e.o(p),i&&i.Wa&&i.Wa.reject(p),m.return();case 6:if(e.j.g)return m.return();g=new ji("drmsessionupdate");e.D.onEvent(g);i&&(i.Wa&&i.Wa.resolve(),Ra(e,i));x(m)}}))}function Oa(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach((function(t,r){if("string"==typeof r){var a=r;r=t;t=a}if(Sa(e.g.keySystem)&&16==r.byteLength&&(tn()||sn())){a=fe(r);var o=a.getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1);a.setUint16(4,s,!1);a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0);"expired"==t&&(i=!0);r=Vr(r).slice(0,32);e.U.set(r,t)}));var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Wa&&(e.i.delete(t),t.close().catch((function(){})));za(e)&&(e.l.resolve(),e.X.S($a))}function Ua(e){var t=e.U,n=e.aa;n.clear();t.forEach((function(e,t){return n.set(t,e)}));t=Array.from(n.values());t.length&&t.every((function(e){return"expired"==e}))&&e.o(new ht(2,6,6014));e.D.Jd(pr(n))}function ja(){var e,t,n,i,r,a,o,s;return O((function(u){return 1==u.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},r=[i,n],a=new Map,o=function(e){var t,n,i;return O((function(o){switch(o.g){case 1:A(o,2);if("org.w3.clearkey"===e&&un())throw Error("Unsupported keySystem");return E(o,navigator.requestMediaKeySystemAccess(e,r),4);case 4:return t=o.h,i=(n=t.getConfiguration().sessionTypes)?n.includes("persistent-license"):!1,ln("Tizen 3")&&(i=!1),a.set(e,{persistentState:i}),E(o,t.createMediaKeys(),5);case 5:I(o,0);break;case 2:k(o),a.set(e,null),x(o)}}))},s=e.map((function(e){return o(e)})),E(u,Promise.all(s),2)):u.return(pr(a))}))}function Ba(e){var t;return O((function(n){if(1==n.g)return t=new Promise((function(e,t){new $t(t).S(Ja)})),A(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(2!=n.g)return I(n,0);k(n);x(n)}))}function Fa(e){var t;return O((function(n){t=Array.from(e.i.entries());e.i.clear();return E(n,Promise.all(t.map((function(t){t=c(t);var n=t.next().value,i=t.next().value;return O((function(t){if(1==t.g)return A(t,2),e.ma||e.u.has(n.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?E(t,Ba(n),5):E(t,n.remove(),5);if(2!=t.g)return I(t,0);k(t);x(t)}))}))),0)}))}function Va(e,t){return e.length&&t.length&&e!==t?0<Ga(e,t).length:!0}function Ga(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r={},a=c(t),o=a.next();!o.done;r={La:r.La},o=a.next())if(o=o.value,i.keySystem==o.keySystem){r.La=[];r.La=r.La.concat(i.initData||[]);r.La=r.La.concat(o.initData||[]);r.La=r.La.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.La.findIndex((function(e){return e.keyId===t.keyId}))}}(r));a=i.keyIds&&o.keyIds?new Set([].concat(d(i.keyIds),d(o.keyIds))):i.keyIds||o.keyIds;n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r.La,keyIds:a});break}}return n}function Ha(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function qa(e){e.i.forEach((function(t,n){var i=t.xe,r=n.expiration;isNaN(r)&&(r=Infinity);r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.xe=r)}))}function za(e){e=e.i.values();return dr(e,(function(e){return e.loaded}))}function Ka(e){for(var t=c(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.U.get(n.value))return!1;return!0}function Xa(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));e=c(e);for(t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Wa(e,t,n,i,r,a){var o={};e=c(e);for(var s=e.next();!s.done;o={ra:o.ra},s=e.next()){o.ra=s.value;t.includes(o.ra.licenseServerUri)||t.push(o.ra.licenseServerUri);i.includes(o.ra.serverCertificateUri)||i.push(o.ra.serverCertificateUri);o.ra.serverCertificate&&(n.some(function(e){return function(t){return le(t,e.ra.serverCertificate)}}(o))||n.push(o.ra.serverCertificate));if(o.ra.initData){s={};for(var u=c(o.ra.initData),l=u.next();!l.done;s={ad:s.ad},l=u.next())s.ad=l.value,r.some(function(e){return function(t){var n=e.ad;return t.keyId&&t.keyId==n.keyId?!0:t.initDataType==n.initDataType&&le(t.initData,n.initData)}}(s))||r.push(s.ad)}if(o.ra.keyIds)for(s=c(o.ra.keyIds),u=s.next();!u.done;u=s.next())a.add(u.value)}}function Ya(t,n,i,r){var a=t.keySystem;if(a&&("org.w3.clearkey"!=a||!t.licenseServerUri)){n.size&&(n=n.get(a)||"",t.licenseServerUri=n);t.keyIds||(t.keyIds=new Set);if(i=i.get(a))t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri);r[a]&&(t.keySystem=r[a]);e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready")}}var Ja=1,Qa=5,$a=.5,Za=new hr((function(){return de(new Uint8Array([0]))}));function eo(){}function to(e,t,n,i){var r,a,o,s;return O((function(u){if(1==u.g){if(i&&(r=ro[i.toLowerCase()]))return u.return(r);if(a=io(e))if(o=ao[a])return u.return(o);return i?u.B(2):E(u,no(e,t,n),3)}if(2!=u.g&&(i=u.h)&&(s=ro[i]))return u.return(s);throw new ht(2,4,4e3,e)}))}function no(e,t,n){var i,r,a;return O((function(o){if(1==o.g)return i=Wi([e],n),i.method="HEAD",E(o,t.request(0,i).promise,2);r=o.h;a=r.headers["content-type"];return o.return(a?a.toLowerCase().split(";").shift():"")}))}function io(e){e=new $e(e).ta.split("/").pop().split(".");return 1==e.length?"":e.pop().toLowerCase()}q("shaka.media.ManifestParser",eo);eo.unregisterParserByMime=function(e){delete ro[e]};eo.registerParserByMime=function(e,t){ro[e]=t};eo.registerParserByExtension=function(e,t){ao[e]=t};eo.AccessibilityPurpose={ai:"visually impaired",Dh:"hard of hearing"};var ro={},ao={};function oo(e){function t(){i=!0}function n(e){a.push(e);kr(e)}e=he(e);var i=!1,r,a=[],o=[];(new Ir).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).M("stsd",(function(e){r=e;a.push(e);_r(e)})).M("encv",t).M("enca",t).M("hev1",(function(e){o.push({box:e,Jb:1701733238})})).M("hvc1",(function(e){o.push({box:e,Jb:1701733238})})).M("avc1",(function(e){o.push({box:e,Jb:1701733238})})).M("avc3",(function(e){o.push({box:e,Jb:1701733238})})).M("ac-3",(function(e){o.push({box:e,Jb:1701733217})})).M("ec-3",(function(e){o.push({box:e,Jb:1701733217})})).M("mp4a",(function(e){o.push({box:e,Jb:1701733217})})).parse(e);if(i)return e;if(0==o.length||!r)throw ne(Vr(e)),new ht(2,3,3019);o.reverse();for(var s=c(o),u=s.next();!u.done;u=s.next())u=u.value,e=so(e,r,u.box,a,u.Jb);return e}function so(e,t,n,i,r){var a=lo.value(),o=e.subarray(n.start,n.start+n.size),s=fe(o),u=new Uint8Array(n.size+a.byteLength);u.set(o,0);o=fe(u);o.setUint32(4,r);u.set(a,n.size);r=s.getUint32(4);o.setUint32(n.size+16,r);uo(u,0,u.byteLength);r=new Uint8Array(e.byteLength+u.byteLength);n=nn()?n.start:n.start+n.size;a=e.subarray(n);r.set(e.subarray(0,n));r.set(u,n);r.set(a,n+u.byteLength);e=c(i);for(i=e.next();!i.done;i=e.next())i=i.value,uo(r,i.start,i.size+u.byteLength);u=fe(r,t.start);t=Lr(t);e=u.getUint32(t);u.setUint32(t,e+1);return r}function uo(e,t,n){e=fe(e,t);t=e.getUint32(0);0!=t&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var lo=new hr((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function co(e,t,n,i,r,a,o){this.wa=e;this.Ba=t;this.ia=n;this.re=void 0===i?null:i;this.timescale=void 0===r?null:r;this.g=void 0===a?null:a;this.s=void 0===o?null:o}co.prototype.Kc=function(){return this.Ba};co.prototype.Hc=function(){return this.ia};function ho(e,t){return e&&t?e.Kc()==t.Kc()&&e.Hc()==t.Hc()&&Ee(e.wa(),t.wa())&&le(e.g,t.g):e==t}q("shaka.media.InitSegmentReference",co);co.prototype.getEndByte=co.prototype.Hc;co.prototype.getStartByte=co.prototype.Kc;function fo(e,t,n,i,r,a,o,s,u,l,c,d,h,f,p){l=void 0===l?[]:l;f=void 0===f?po:f;this.startTime=e;this.j=this.endTime=t;this.F=n;this.Ba=i;this.ia=r;this.h=a;this.timestampOffset=o;this.appendWindowStart=s;this.appendWindowEnd=u;this.i=l;this.tilesLayout=void 0===c?"":c;this.D=void 0===d?null:d;this.g=void 0===h?null:h;this.status=f;this.m=!1;this.u=!0;this.o=!1;this.s=void 0===p?null:p;this.A=null;this.l=0}i=fo.prototype;i.wa=function(){return this.F()};i.getStartTime=function(){return this.startTime};i.lg=function(){return this.endTime};i.Kc=function(){return this.Ba};i.Hc=function(){return this.ia};i.Dg=function(){return this.tilesLayout};i.Cg=function(){return this.D};i.Db=function(){return this.status};i.Pg=function(){this.status=go};i.qe=function(){this.m=!0};i.Ng=function(){return this.m};i.uf=function(){this.u=!1};i.Mg=function(){return this.u};i.tf=function(){this.o=!0};i.Jg=function(){return this.o};i.If=function(e){this.A=e};i.Ag=function(){return this.A};i.offset=function(e){this.startTime+=e;this.endTime+=e;this.j+=e;for(var t=c(this.i),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e};i.Pe=function(e){null==this.g?J("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))};q("shaka.media.SegmentReference",fo);fo.prototype.syncAgainst=fo.prototype.Pe;fo.prototype.offset=fo.prototype.offset;fo.prototype.getThumbnailSprite=fo.prototype.Ag;fo.prototype.setThumbnailSprite=fo.prototype.If;fo.prototype.hasByterangeOptimization=fo.prototype.Jg;fo.prototype.markAsByterangeOptimization=fo.prototype.tf;fo.prototype.isIndependent=fo.prototype.Mg;fo.prototype.markAsNonIndependent=fo.prototype.uf;fo.prototype.isPreload=fo.prototype.Ng;fo.prototype.markAsPreload=fo.prototype.qe;fo.prototype.markAsUnavailable=fo.prototype.Pg;fo.prototype.getStatus=fo.prototype.Db;fo.prototype.getTileDuration=fo.prototype.Cg;fo.prototype.getTilesLayout=fo.prototype.Dg;fo.prototype.getEndByte=fo.prototype.Hc;fo.prototype.getStartByte=fo.prototype.Kc;fo.prototype.getEndTime=fo.prototype.lg;fo.prototype.getStartTime=fo.prototype.getStartTime;fo.prototype.getUris=fo.prototype.wa;var po=0,go=1;fo.Status={sh:po,Zh:go,Hh:2};function mo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function vo(e,t){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function yo(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=c(wo(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start;r=r.end;r>t&&(n+=r-Math.max(i,t))}return n}function bo(e,t,n){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;e=wo(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}));return 0<=e?e:null}function wo(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function To(){}function Eo(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function xo(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function Ao(e,t){var n=(e[t]&127)<<21;n|=(e[t+1]&127)<<14;n|=(e[t+2]&127)<<7;return n|=e[t+3]&127}function So(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=vr(he(e.data,1,n));e=vr(he(e.data,2+n)).replace(/\0*$/,"");t.description=i;t.data=e;return t}if("WXXX"===e.type){if(2>e.size||3!==e.data[0])return null;n=e.data.subarray(1).indexOf(0);if(-1===n)return null;i=vr(he(e.data,1,n));e=vr(he(e.data,2+n)).replace(/\0*$/,"");t.description=i;t.data=e;return t}if("PRIV"===e.type){if(2>e.size)return null;i=e.data.indexOf(0);if(-1===i)return null;i=vr(he(e.data,0,i));t.description=i;"com.apple.streaming.transportStreamTimestamp"==i?(i=e.data.subarray(i.length+1),e=i[3]&1,i=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7],i/=45,e&&(i+=47721858.84),t.data=i):(e=de(e.data.subarray(i.length+1)),t.data=e);return t}if("T"===e.type[0]){if(2>e.size||3!==e.data[0])return null;e=vr(e.data.subarray(1)).replace(/\0*$/,"");t.data=e;return t}return"W"===e.type[0]?(e=vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=de(e.data),t):null}function Io(e){for(var t=0,n=[];Eo(e,t);){var i=Ao(e,t+6);e[t+5]>>6&1&&(t+=10);t+=10;for(i=t+i;t+10<i;){var r=e.subarray(t),a=Ao(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)};(a=So(r))&&n.push(a);t+=r.size+10}xo(e,t)&&(t+=10)}return n}function ko(e,t){for(var n=t=void 0===t?0:t,i=0;Eo(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Ao(e,t+6),xo(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}q("shaka.util.Id3Utils",To);To.getID3Data=ko;To.getID3Frames=Io;function _o(e,t){var n=null,i=null,r=null,a=e.J();t&1&&(r=e.dc());t&2&&e.skip(4);t&8&&(n=e.J());t&16&&(i=e.J());return{trackId:a,ff:n,eg:i,ci:r}}function Co(e,t){return 1==t?(t=e.J(),e=e.J(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.J()}}function Mo(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));t=e.J();e.skip(4);e=e.Ia();return{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Do(e,t,n){var i=e.J(),r=[],a=null;n&1&&(a=e.J());n&4&&e.skip(4);for(var o=0;o<i;o++){var s={Ie:null,sampleSize:null,Md:null};n&256&&(s.Ie=e.J());n&512&&(s.sampleSize=e.J());n&1024&&e.skip(4);n&2048&&(s.Md=0==t?e.J():e.yf());r.push(s)}return{gi:i,Af:r,dg:a}}function Ro(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.J();1==t?e.skip(8):e.skip(4);e.skip(4);e.skip(8);e.skip(2);e.skip(2);e.skip(2);e.skip(2);e.skip(36);t=e.Ia()+e.Ia()/16;e=e.Ia()+e.Ia()/16;return{trackId:n,width:t,height:e}}function Lo(e){var t="mp4a";e.skip(11);t+="."+this.g(e.qa());t+="."+this.g(e.qa()>>>2&63).replace(/^0/,"");return{oa:t}}function Po(e,t){e.skip(87);return{oa:t+"."+this.g(e.qa())+this.g(e.qa())+this.g(e.qa())}}function No(e){e=e.J();return{oa:Rr(e)}}function Oo(e){this.j=e;this.i=e.byteLength;this.g=this.h=0}function Uo(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);0!==i&&(n.set(e.j.subarray(t,t+i)),e.h=new xr(n,0).J(),e.g=8*i,e.i-=i)}function jo(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n;e.g-=n;Uo(e)}e.h<<=t;e.g-=t}function Bo(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;e.g-=n;0<e.g?e.h<<=n:0<e.i&&Uo(e);n=t-n;return 0<n?i<<n|Bo(e,n):i}function Fo(e){var t;for(t=0;t<e.g;++t)if(0!==(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;Uo(e);return t+Fo(e)}function Vo(e){jo(e,1+Fo(e))}function Go(e){var t=Fo(e);return Bo(e,t+1)-1}function Ho(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=Go(e),i=(n+(1&i?1+i>>>1:-1*(i>>>1))+256)%256),n=0===i?n:i}function qo(e){Bo(e,8);Go(e);return Go(e)}q("shaka.util.ExpGolomb",Oo);function zo(){this.s=null;this.u=!1;this.j=this.A=null;this.i=[];this.l=this.m=null;this.g=[];this.o=null;this.h=[]}i=zo.prototype;i.clearData=function(){this.i=[];this.g=[];this.h=[]};i.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Wo(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71==e[r]){var a=!!(e[r+1]&64),o=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var s=r+5+e[r+4];if(s==r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1);this.s=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.s:a&&(s+=e[s]+1);a=e;o={audio:-1,video:-1,xd:-1,audioCodec:"",videoCodec:""};var u=s+3+((a[s+1]&15)<<8|a[s+2])-4;for(s+=12+((a[s+10]&15)<<8|a[s+11]);s<u;){var l=(a[s+1]&31)<<8|a[s+2],c=(a[s+3]&15)<<8|a[s+4];switch(a[s]){case 6:if(-1==o.audio&&0<c)for(var d=s+5,h=c;2<h;){switch(a[d]){case 106:o.audio=l;o.audioCodec="ac3";break;case 122:o.audio=l,o.audioCodec="ec3"}var f=a[d+1]+2;d+=f;h-=f}break;case 15:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 21:-1==o.xd&&(o.xd=l);break;case 27:-1==o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1==o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1==o.video&&(o.video=l,o.videoCodec="hvc");break;case 129:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:-1==o.audio&&(o.audio=l,o.audioCodec="ec3")}s+=c+5}a=o;-1!=a.video&&(this.A=a.video,this.j=a.videoCodec);-1!=a.audio&&(this.m=a.audio,this.l=a.audioCodec);-1!=a.xd&&(this.o=a.xd);i&&!this.u&&(i=!1,r=t-188);this.u=!0;break;case this.A:s=e.subarray(s,r+188);a?this.i.push(s):this.i.length&&(a=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Gr(a,s));break;case this.m:s=e.subarray(s,r+188);a?this.g.push(s):this.g.length&&(a=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Gr(a,s));break;case this.o:s=e.subarray(s,r+188);a?this.h.push(s):this.h.length&&(a=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Gr(a,s));break;default:i=!0}}return this};function Ko(e){if(1!==(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),Ae:e[4]<<8|e[5],pts:null,dts:null};if(t.Ae&&t.Ae>e.byteLength-6)return null;var n=e[7];n&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,n&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2));n=e[8]+9;if(e.byteLength<=n)return null;t.data=e.subarray(n);return t}i.Be=function(e,t){for(var n=e.pts?e.pts/9e4:null,i=e.data,r=i.byteLength,a=0,o=[],s=-1,u=0,l=!1,c,d=0;d<r;++d){var h=i[d];if(h)if(2<=a&&1==h&&l){e=d-(3<a?3:a);if(0==e)break;c.data=Gr(c.data,i.subarray(0,e));c.ab=Gr(c.ab,i.subarray(0,e));break}else{if(2<=a&&1==h){0<=s&&(a=d-((3<a?3:a)+1),o.push({data:i.subarray(s+1,a+1),ab:i.subarray(s,a+1),type:u,time:n}));if(d>=r-1)return o;d++;s=d;u=i[d]&31}a=0}else a++;d>=r-1&&0<=s&&0<=a&&(l?(c.data=Gr(c.data,i),c.ab=Gr(c.ab,i)):(l=!0,c={data:i.subarray(s+1,r),ab:i.subarray(s,r),type:u,time:n},t&&0==e.Ae&&(i=t.data,r=i.byteLength,d=-1)))}c&&o.push(c);return o};i.getMetadata=function(){for(var e=[],t=c(this.h),n=t.next();!n.done;n=t.next())(n=Ko(n.value))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Io(n.data),dts:n.dts,pts:n.pts});return e};i.yb=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=Ko(n.value))&&e.push(n);return e};i.td=function(){for(var e=[],t=c(this.i),n=t.next();!n.done;n=t.next()){n=n.value;var i=Ko(n);i&&null!=i.pts&&null!=i.dts?e.push(i):e.length&&(n=i?i.data:n)&&(i=e.pop(),i.data=Gr(i.data,n),e.push(i))}return e};i.getStartTime=function(){for(var e=null,t=c(this.yb()),n=t.next();!n.done;n=t.next()){var i=n.value;i&&null!=i.pts&&(i=Math.min(i.dts,i.pts)/9e4,null==e||e>i)&&(e=i)}t=null;i=c(this.td());for(n=i.next();!n.done;n=i.next())(n=n.value)&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==t||t>n)&&(t=n);return{audio:e,video:t}};i.nd=function(){return{audio:this.l,video:this.j}};i.ge=function(){var e=[];if("avc"!=this.j)return e;for(var t=this.td(),n=0;n<t.length;n++){var i=t[n],r=void 0;n+1<t.length&&(r=t[n+1]);e.push.apply(e,d(this.Be(i,r)))}return e};i.Gg=function(){li("TsParser","Please use getVideoInfo function instead.");var e=this.fe();return{height:e.height,width:e.width}};i.fe=function(){var e={height:null,width:null,oa:null},t=this.ge();if(!t.length)return e;t=t.find((function(e){return 7==e.type}));if(!t)return e;t=new Oo(t.data);var n=Bo(t,8),i=Bo(t,8),r=Bo(t,8);Vo(t);if(Yo.includes(n)){var a=Go(t);3===a&&jo(t,1);Vo(t);Vo(t);jo(t,1);if(1===Bo(t,1)){a=3!==a?8:12;for(var o=0;o<a;o++)1===Bo(t,1)&&(6>o?Ho(t,16):Ho(t,64))}}Vo(t);a=Go(t);if(0===a)Go(t);else if(1===a)for(jo(t,1),Vo(t),Vo(t),a=Go(t),o=0;o<a;o++)Vo(t);Vo(t);jo(t,1);a=Go(t);o=Go(t);var s=Bo(t,1);0===s&&jo(t,1);jo(t,1);var u=0,l=0,c=0,d=0;1===Bo(t,1)&&(u=Go(t),l=Go(t),c=Go(t),d=Go(t));e.height=String((2-s)*(o+1)*16-2*c-2*d);e.width=String(16*(a+1)-2*u-2*l);e.oa="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2);return e};function Xo(e){return 0>Wo(e)?!1:!0}function Wo(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}q("shaka.util.TsParser",zo);zo.syncOffset=Wo;zo.probe=Xo;zo.prototype.getVideoInfo=zo.prototype.fe;zo.prototype.getVideoResolution=zo.prototype.Gg;zo.prototype.getVideoNalus=zo.prototype.ge;zo.prototype.getCodecs=zo.prototype.nd;zo.prototype.getStartTime=zo.prototype.getStartTime;zo.prototype.getVideoData=zo.prototype.td;zo.prototype.getAudioData=zo.prototype.yb;zo.prototype.getMetadata=zo.prototype.getMetadata;zo.prototype.parseAvcNalus=zo.prototype.Be;zo.prototype.parse=zo.prototype.parse;zo.prototype.clearData=zo.prototype.clearData;zo.Timescale=9e4;var Yo=[100,110,122,244,44,83,86,118,128,138,139,134];function Jo(e,t,n){this.g=null;this.i=-1;this.j=e;this.h=t;this.l=n;"undefined"===typeof libDPIModule&&Q("Could not Find LCEVC Library dependencies on this page");"undefined"===typeof LcevcDil?Q("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Q(LcevcDil.SupportObject.SupportError);"undefined"!==typeof LcevcDil&&"undefined"!==typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}Jo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Qo(e,t){var n=$o;switch(t.mimeType){case"video/webm":n=Zo;break;case"video/mp4":n=es}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}q("shaka.lcevc.Dil",Jo);Jo.prototype.release=Jo.prototype.release;var $o=0,Zo=1,es=2;function ts(e,t,n,i){var r=this;this.l=e;this.D=null;this.u=t;this.h={};this.H={};this.Y={};this.g=null;this.P=!1;this.aa=n||function(){};this.L=i||null;this.j={};this.A=new ar;this.m={};this.F=null;this.G=new Mi;this.U="";this.i=ns(this,this.G);this.o=!1;this.K=new ir((function(){return is(r)}));this.s=!1;this.N="UNKNOWN";this.X=this.$=!1;this.ba=new Mi}function ns(e,t){var n=new MediaSource;e.A.ja(n,"sourceopen",(function(){URL.revokeObjectURL(e.U);t.resolve()}));e.U=Ms(n);e.l.src=e.U;return n}i=ts.prototype;i.destroy=function(){return this.K.destroy()};function is(e){var t,n,i,r,a,o,s,u;return O((function(l){if(1==l.g){t=[];for(n in e.j)for(i=e.j[n],r=i[0],e.j[n]=i.slice(0,1),r&&t.push(r.p.catch(gt)),a=c(i.slice(1)),o=a.next();!o.done;o=a.next())s=o.value,s.p.reject(new ht(2,7,7003,void 0));e.g&&t.push(e.g.destroy());e.u&&t.push(e.u.destroy());for(u in e.m)t.push(e.m[u].destroy());return E(l,Promise.all(t),2)}e.A&&(e.A.release(),e.A=null);e.l&&(e.l.removeAttribute("src"),e.l.load(),e.l=null);e.D=null;e.i=null;e.g=null;e.u=null;e.h={};e.m={};e.F=null;e.j={};e.L=null;x(l)}))}i.init=function(e,t,n,i){t=void 0===t?!1:t;n=void 0===n?"UNKNOWN":n;i=void 0===i?!1:i;var r=this,a,o,s,u;return O((function(l){if(1==l.g)return E(l,r.G,2);r.s=t;r.N=n;r.$=i;r.X=!r.s&&"HLS"==r.N&&!r.$;a=c(e.keys());for(o=a.next();!o.done;o=a.next())s=o.value,u=e.get(s),rs(r,s,u),r.j[s]=[];x(l)}))};function rs(e,t,n){var i=St(n.mimeType,n.codecs);if(t==Tt)as(e,i,e.s,n.external);else{var r=e.D.forceTransmux;if(!re(i)||!e.s&&Dt.includes(i))r=!0;var a=It(n.mimeType,n.codecs);r&&(r=ze(a))&&(i=r(),e.m[t]=i,i=i.convertCodecs(t,a));a=i+e.D.sourceBufferExtraFeatures;rr(e.K);try{var o=e.i.addSourceBuffer(a)}catch(t){throw new ht(2,3,3015,t,"The mediaSource_ status was"+e.i.readyState+"expected 'open'")}e.s&&(o.mode=Ds);e.A.C(o,"error",(function(){e.j[t][0].p.reject(new ht(2,3,3014,e.l.error?e.l.error.code:0))}));e.A.C(o,"updateend",(function(){return ws(e,t)}));e.h[t]=o;e.H[t]=i;e.Y[t]=!!n.drmInfos.length}}i.configure=function(e){this.D=e};function as(e,t,n,i){e.g||(e.g=new Rt(e.u));var r=e.g;i=i||e.P;e=e.N;"application/cea-608"==t||"application/cea-708"==t?r.i=null:(r.i=(0,Bt[t])(),r.i.setSequenceMode?r.i.setSequenceMode(n):Q('Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Q('Text parsers should have a "setManifestType" method!'),r.u=i)}function os(e){return e.o?!1:e.i?"ended"==e.i.readyState:!0}function ss(e,t){e.o?e=null:t==Tt?e=e.g.g:(e=cs(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null);return e}function us(e,t){return e.o?null:t==Tt?e.g.h:mo(cs(e,t))}function ls(e,t,n){if(e.o)return 0;if(t==Tt)return e=e.g,null==e.h||e.h<n?0:e.h-Math.max(n,e.g);e=cs(e,t);return yo(e,n)}i.bb=function(){var e={total:this.o?[]:wo(this.l.buffered),audio:this.o?[]:wo(cs(this,"audio")),video:this.o?[]:wo(cs(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e};function cs(e,t){try{return e.h[t].buffered}catch(e){return null}}function ds(e,t,n,i,r,a){var o=null,s=he(n);if(Dt.includes(r))a=Io(s),a.length&&i&&((t=a.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&t.data&&(o=Math.round(t.data)/1e3),e.aa([{cueTime:i.startTime,data:s,frames:a,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(r.includes("/mp4")&&i&&0==i.timestampOffset&&i.h&&i.h.timescale){var u=i.h.timescale;if(!isNaN(u)){var l=0,c=!1;(new Ir).box("moof",kr).box("traf",kr).M("tfdt",(function(e){l=Co(e.reader,e.version).baseMediaDecodeTime/u;c=!0;e.parser.stop()})).parse(n,!0);c&&(o=l)}}else r.includes("/mp4")||r.includes("/webm")||!Xo(s)||(s=(new zo).parse(s),t=s.getStartTime()[t],null!=t&&(o=t),s=s.getMetadata(),s.length&&e.aa(s,a,i?i.endTime:null));return o}function hs(e,t,n,i,r,a,o,s){o=void 0===o?!1:o;s=void 0===s?!1:s;var u,l,c,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:u=Et;if(t!=u.ca){b.B(2);break}if(!e.s){b.B(3);break}return E(b,e.ba,4);case 4:l=b.h,e.g.s=l;case 3:return E(b,Pt(e.g,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return b.return();case 2:c=e.h[t].timestampOffset;d=e.H[t];e.m[t]&&(d=e.m[t].getOrginalMimeType());if(i&&(h=ds(e,t,n,i,d,c),null!=h)){f=i.startTime-h;p=Math.abs(c-f);if(.1<=p||o||s)c=f,e.X&&(Ts(e,t,(function(){return ys(e,t)})),Ts(e,t,(function(){return bs(e,t,c)})));g=t==u.va||!(u.va in e.h);e.s&&g&&e.ba.resolve(c)}a&&t==u.va&&(e.g||as(e,"application/cea-608",e.s,!1),e.F||(m=d.split(";",1)[0],e.F=new me(m)),i?(v=e.F.j(n),v.length&&jt(e.g,v,i.startTime,i.endTime,c)):e.F.init(n));if(!e.m[t]){b.B(6);break}return E(b,e.m[t].transmux(n,r,i,e.i.duration,t),7);case 7:n=b.h;case 6:return n=Ss(e,n,i?i.startTime:null,t),i&&e.s&&t!=u.ca&&(o||s)&&(y=i.startTime,Ts(e,t,(function(){return ys(e,t)})),Ts(e,t,(function(){return bs(e,t,y)}))),E(b,Ts(e,t,(function(){var i=n;if("video"==t&&e.L){var r=e.L;r.g&&r.g.appendBuffer(i,"video",r.i)}e.h[t].appendBuffer(i)})),8);case 8:x(b)}}))}function fs(e,t){var n=us(e,"video")||0;Ot(e.g,t,n)}function ps(e){e.g&&Ot(e.g,"",0)}i.remove=function(e,t,n){var i=this,r;return O((function(a){r=Et;return e==r.ca?E(a,i.g.remove(t,n),0):E(a,Ts(i,e,(function(){n<=t?ws(i,e):i.h[e].remove(t,n)})),0)}))};function gs(e,t){var n;return O((function(i){n=Et;return t==n.ca?e.g?E(i,e.g.remove(0,Infinity),0):i.return():E(i,Ts(e,t,(function(){var n=e.i.duration;0>=n?ws(e,t):e.h[t].remove(0,n)})),0)}))}i.flush=function(e){var t=this,n;return O((function(i){n=Et;return e==n.ca?i.return():E(i,Ts(t,e,(function(){t.l.currentTime-=.001;ws(t,e)})),0)}))};function ms(e,t,n,i,r,a,o,s){var u,l,c;return O((function(d){if(1==d.g){u=Et;if(t==u.ca)return a||(e.g.s=n),Nt(e.g,i,r),d.return();l=[];return E(d,Cs(e,t,o,s),2)}(c=d.h)||l.push(Ts(e,t,(function(){return ys(e,t)})));a||l.push(Ts(e,t,(function(){return bs(e,t,n)})));l.push(Ts(e,t,(function(){e.h[t].appendWindowStart=0;e.h[t].appendWindowEnd=r;e.h[t].appendWindowStart=i;ws(e,t)})));return E(d,Promise.all(l),0)}))}function vs(e,t,n){var i;return O((function(r){i=Et;if(t==i.ca)return r.return();Ts(e,t,(function(){return ys(e,t)}));return E(r,Ts(e,t,(function(){return bs(e,t,n)})),0)}))}i.endOfStream=function(e){var t=this;return O((function(n){return E(n,Es(t,(function(){os(t)||"closed"===t.i.readyState||(e?t.i.endOfStream(e):t.i.endOfStream())})),0)}))};i.Aa=function(e){var t=this;return O((function(n){return E(n,Es(t,(function(){if(e<t.i.duration)for(var n in t.h){var i={start:function(){},p:new Mi};t.j[n].unshift(i)}t.i.duration=e})),0)}))};i.getDuration=function(){return this.i.duration};function ys(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort();e.h[t].appendWindowStart=n;e.h[t].appendWindowEnd=i;ws(e,t)}function bs(e,t,n){0>n&&(n+=.001);e.h[t].timestampOffset=n;ws(e,t)}function ws(e,t){if(!e.o){var n=e.j[t][0];n&&(n.p.resolve(),xs(e,t))}}function Ts(e,t,n){rr(e.K);n={start:n,p:new Mi};e.j[t].push(n);1==e.j[t].length&&As(e,t);return n.p}function Es(e,t){var n,i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:rr(e.K);n=[];i={};for(r in e.h)i.rc=new Mi,a={start:function(e){return function(){return e.rc.resolve()}}(i),p:i.rc},e.j[r].push(a),n.push(i.rc),1==e.j[r].length&&a.start(),i={rc:i.rc};A(l,2);return E(l,Promise.all(n),4);case 4:I(l,3);break;case 2:throw o=k(l),o;case 3:return A(l,5,6),E(l,t(),6);case 6:_(l);for(s in e.h)xs(e,s);C(l,0);break;case 5:throw u=k(l),new ht(2,3,3015,u,e.l.error||"No error in the media element")}}))}function xs(e,t){e.j[t].shift();As(e,t)}function As(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new ht(2,3,3017,t)):n.p.reject(new ht(2,3,3015,i,e.l.error||"No error in the media element")),xs(e,t)}}function Ss(e,t,n,i){var r=e.Y[i];e.D.insertFakeEncryptionInInit&&null==n&&r&&(rn()||nn())&&"mp4"==e.H[i].split(";")[0].split("/")[1]&&(t=oo(t));return t}function Is(t,n,i,r){return Ts(t,n,(function(){n!==Tt&&(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType&&(t.m[n]&&t.m[n].destroy(),r&&(t.m[n]=r),t.h[n].changeType(i+t.D.sourceBufferExtraFeatures),t.H[n]=i),ws(t,n))}))}function ks(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x;return O((function(A){switch(A.g){case 1:e.o=!0;n=e.l.currentTime;S(A);e.A.sb();i=[];for(r in e.m)i.push(e.m[r].destroy());for(a in e.j)for(o=e.j[a],s=o[0],e.j[a]=o.slice(0,1),s&&i.push(s.p.catch(gt)),u=c(o.slice(1)),l=u.next();!l.done;l=u.next())d=l.value,d.p.reject(new ht(2,7,7003,void 0));for(h in e.h){f=e.h[h];try{e.i.removeSourceBuffer(f)}catch(e){}}return E(A,Promise.all(i),4);case 4:return e.m={},e.j={},e.h={},p=e.i.duration,e.G=new Mi,e.i=ns(e,e.G),E(A,e.G,5);case 5:e.i.duration=p;g=new Mi;m=e.i.sourceBuffers;v=t.size;y=0;e.A.C(m,"addsourcebuffer",(function(){y++;y===v&&g.resolve()}));b=c(t.keys());for(w=b.next();!w.done;w=b.next())T=w.value,x=t.get(T),rs(e,T,x);e.l.currentTime=n;return E(A,g,2);case 2:_(A),e.o=!1,C(A,0)}}))}function _s(e,t){return Es(e,(function(){return ks(e,t)}))}function Cs(t,n,i,r){var a,o,s,u,l,c,d,h,f;return O((function(p){if(1==p.g){a=Mt(Ct(t.H[n]))[0];o=t.H[n].split(";")[0];u=St(i.mimeType,i.codecs);l=t.D.forceTransmux;if(!re(u)||!t.s&&Dt.includes(u))l=!0;c=It(i.mimeType,i.codecs);l&&(d=ze(c))&&(s=d(),u=s.convertCodecs(n,c));h=Mt(Ct(u))[0];f=u.split(";")[0];if(a===h&&o===f)return p.return(!1);if(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType)return E(p,Is(t,n,u,s),3);s&&s.destroy();return E(p,_s(t,r),3)}return p.return(!0)}))}var Ms=e.URL.createObjectURL,Ds="sequence";function Rs(e,t,n){this.i=e;this.m=t;this.s=this.j=Infinity;this.g=1;this.h=this.l=null;this.o=0;this.D=!0;this.F=0;this.u=void 0===n?!0:n;this.G=0;this.A=!1}i=Rs.prototype;i.getDuration=function(){return this.j};i.sg=function(){return this.g};i.Hf=function(e){this.i=e};i.Aa=function(e){this.j=e};i.xg=function(){return this.i};i.Ff=function(e){this.o=e};i.fc=function(e){this.D=e};i.Nd=function(e){this.s=e};i.Gf=function(e){this.m=e};i.kg=function(){return this.m};i.xf=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.Gd(e[0].start+t);this.g=e.reduce((function(e,t){return Math.max(e,t.end-t.start)}),this.g);this.h=Math.max(this.h,n);null!=this.i&&this.u&&!this.A&&(this.i=(Date.now()+this.o)/1e3-this.h-this.g)}};i.Pc=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.o)/1e3;e=c(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime));this.Gd(t);this.h=Math.max(this.h,n);null!=this.i&&this.u&&!this.A&&(this.i=i-this.h-this.g)}};i.Dd=function(){this.A=!0};i.Gd=function(e){this.l=null==this.l?e:Math.min(this.l,e)};i.ve=function(e){this.g=Math.max(this.g,e)};i.offset=function(e){null!=this.l&&(this.l+=e);null!=this.h&&(this.h+=e)};i.T=function(){return Infinity==this.j&&!this.D};i.Gb=function(){return Infinity!=this.j&&!this.D};i.eb=function(){return Math.max(this.F,this.Cb()-this.s)};i.Jf=function(e){this.F=e};i.Cb=function(){return this.T()||this.Gb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j};i.Jc=function(e){var t=Math.max(this.l,this.F);return Infinity==this.s?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Cb()-this.s+e,this.cb()))};i.Yb=function(){return this.Jc(0)};i.cb=function(){return Math.max(0,this.Cb()-(this.T()||this.Gb()?this.m:0))};i.Of=function(){return null==this.i||null!=this.h&&this.u?!1:!0};i.Ef=function(e){this.G=e};q("shaka.media.PresentationTimeline",Rs);Rs.prototype.setAvailabilityTimeOffset=Rs.prototype.Ef;Rs.prototype.usingPresentationStartTime=Rs.prototype.Of;Rs.prototype.getSeekRangeEnd=Rs.prototype.cb;Rs.prototype.getSeekRangeStart=Rs.prototype.Yb;Rs.prototype.getSafeSeekRangeStart=Rs.prototype.Jc;Rs.prototype.getSegmentAvailabilityEnd=Rs.prototype.Cb;Rs.prototype.setUserSeekStart=Rs.prototype.Jf;Rs.prototype.getSegmentAvailabilityStart=Rs.prototype.eb;Rs.prototype.isInProgress=Rs.prototype.Gb;Rs.prototype.isLive=Rs.prototype.T;Rs.prototype.offset=Rs.prototype.offset;Rs.prototype.notifyMaxSegmentDuration=Rs.prototype.ve;Rs.prototype.notifyMinSegmentStartTime=Rs.prototype.Gd;Rs.prototype.lockStartTime=Rs.prototype.Dd;Rs.prototype.notifySegments=Rs.prototype.Pc;Rs.prototype.notifyTimeRange=Rs.prototype.xf;Rs.prototype.getDelay=Rs.prototype.kg;Rs.prototype.setDelay=Rs.prototype.Gf;Rs.prototype.setSegmentAvailabilityDuration=Rs.prototype.Nd;Rs.prototype.setStatic=Rs.prototype.fc;Rs.prototype.setClockOffset=Rs.prototype.Ff;Rs.prototype.getPresentationStartTime=Rs.prototype.xg;Rs.prototype.setDuration=Rs.prototype.Aa;Rs.prototype.setPresentationStartTime=Rs.prototype.Hf;Rs.prototype.getMaxSegmentDuration=Rs.prototype.sg;Rs.prototype.getDuration=Rs.prototype.getDuration;function Ls(e,t,n){this.l=n;this.j=e;this.s=Os(e);this.g=e.g.currentTime;this.m=Date.now()/1e3;this.h=!1;this.o=0;this.u=t;this.i=function(){}}Ls.prototype.release=function(){this.l=this.j=null;this.i=function(){}};function Ps(e,t){e.i=t}function Ns(e){this.g=e}function Os(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;e=c(wo(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Us(e,t,n,i,r){var a=this;this.u=r;this.g=e;this.A=t;this.s=n;this.l=new ar;this.j=!1;this.F=e.readyState;this.D=this.i=0;this.h=i;this.o=!1;this.l.C(e,"waiting",(function(){return js(a)}));this.m=new $t((function(){js(a)})).Ca(this.s.gapJumpTimerTime)}Us.prototype.release=function(){this.l&&(this.l.release(),this.l=null);null!=this.m&&(this.m.stop(),this.m=null);this.h&&(this.h.release(),this.h=null);this.g=this.A=this.u=null};Us.prototype.ye=function(){this.o=!0;js(this)};function js(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.j,i=Os(n),r=n.g.currentTime,a=Date.now()/1e3;if(t.g!=r||t.s!=i)t.m=a,t.g=r,t.s=i,t.h=!1;r=a-t.m;if(i=r>=t.u&&i&&!t.h)t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new ji("stalldetected"));t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=bo(n,t,e.s.gapDetectionThreshold),null==i||0==i&&!e.o||(r=n.start(i),r>=e.A.cb()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,t==e.i&&(e.i=r),e.D++,e.u(new ji("gapjumped")))))}}}function Bs(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Fs.value().get(t),n.ja(e,t,i))}var Fs=new hr((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Vs(e,t,n,i){var r=this;this.g=e;this.m=t;this.s=n;this.l=null;this.j=function(){null==r.l&&(r.l=i());return r.l};this.o=!1;this.h=new ar;this.i=new Ks(e);Bs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){qs(r,r.j())}))}Vs.prototype.release=function(){this.h&&(this.h.release(),this.h=null);null!=this.i&&(this.i.release(),this.i=null);this.m=function(){};this.g=null};function Gs(e){return e.o?e.g.currentTime:e.j()}function Hs(e,t){0<e.g.readyState?Xs(e.i,t):Bs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){qs(e,e.j())}))}function qs(e,t){.001>Math.abs(e.g.currentTime-t)?zs(e):(e.h.ja(e.g,"seeking",(function(){zs(e)})),Xs(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function zs(e){e.o=!0;e.h.C(e.g,"seeking",(function(){return e.m()}));e.s(e.g.currentTime)}function Ks(e){var t=this;this.h=e;this.m=10;this.l=this.j=this.i=0;this.g=new $t((function(){0>=t.i?t.g.stop():t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}Ks.prototype.release=function(){this.g&&(this.g.stop(),this.g=null);this.h=null};function Xs(e,t){e.j=e.h.currentTime;e.l=t;e.i=e.m;e.h.currentTime=t;e.g.Ca(.1)}function Ws(e){this.g=e;this.j=!1;this.h=null;this.i=new ar}i=Ws.prototype;i.Yd=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.ja(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Bs(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){e()}))};i.release=function(){this.i&&(this.i.release(),this.i=null);this.g=null};i.Zd=function(e){this.h=this.j?this.h:e};i.fd=function(){return(this.j?this.g.currentTime:this.h)||0};i.Xe=function(){return 0};i.We=function(){return 0};i.wf=function(){};function Ys(e,t,n,i,r,a){var o=this;this.i=e;this.g=t.presentationTimeline;this.A=t.minBufferTime||0;this.l=n;this.u=r;this.s=null;this.o=Zs(e,n,a);this.j=new Us(e,t.presentationTimeline,n,this.o,a);this.h=new Vs(e,(function(){e:{var e=o.j;e.j=!0;e.o=!1;var t=Gs(o.h);e=Qs(o,t);if(.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.s||o.s<t-1)){o.s=t;Hs(o.h,e);e=void 0;break e}o.u();e=void 0}return e}),(function(e){var t=o.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)}),(function(){var e=i;null==e?e=Infinity>o.g.getDuration()?o.g.Yb():o.g.cb():0>e&&(e=o.g.cb()+e);return Js(o,$s(o,e))}));this.m=new $t((function(){if(0!=o.i.readyState&&!o.i.paused){var e=Gs(o.h),t=o.g.Yb(),n=o.g.cb();3>n-t&&(t=n-3);e<t&&(e=Qs(o,e),o.i.currentTime=e)}}))}i=Ys.prototype;i.Yd=function(){this.m.Ca(.25)};i.release=function(){this.h&&(this.h.release(),this.h=null);this.j&&(this.j.release(),this.j=null);this.m&&(this.m.stop(),this.m=null);this.i=this.h=this.g=this.l=null;this.u=function(){}};i.Zd=function(e){Hs(this.h,e)};i.fd=function(){var e=Gs(this.h);return 0<this.i.readyState&&!this.i.paused?$s(this,e):e};i.Xe=function(){return this.o?this.o.o:0};i.We=function(){return this.j.D};i.wf=function(){this.j.ye()};function Js(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Qs(e,t){var n=Math.max(e.A,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Yb(),a=e.g.cb(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.Jc(n),u=e.g.Jc(i);n=e.g.Jc(n+i);return t>=o?Js(e,t):t>a?a:t<r?vo(e.i.buffered,u)?u:n:t>=s||vo(e.i.buffered,t)?t:n}function $s(e,t){var n=e.g.Yb();if(t<n)return n;e=e.g.cb();return t>e?e:t}function Zs(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;t=new Ls(new Ns(e),t.stallThreshold,n);Ps(t,(function(){i?e.currentTime+=i:(e.pause(),e.play())}));return t}function eu(e){this.g=e;this.l=null;this.i=0;this.m=!1}i=eu.prototype;i.Bb=function(){return this.g.length};i.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)};i.Qg=function(){this.m=!0};function tu(e,t){e=c(e.g);for(var n=e.next();!n.done;n=e.next())t(n.value)}i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null};i.get=function(e){if(0==this.g.length)return null;e-=this.i;return 0>e||e>=this.g.length?null:this.g[e]};i.offset=function(e){if(!this.m)for(var t=c(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)};i.Fd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t}));this.g.push.apply(this.g,d(e))}};i.Oc=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}));this.Fd(e);this.Sa(t)};i.Sa=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e}));this.i+=t-this.g.length}};i.Vb=function(e,t,n){n=void 0===n?!1:n;if(!this.m){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=t)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=e)this.g.shift(),n||this.i++;else break;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new fo(e.startTime,t,e.F,e.Ba,e.ia,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.D,e.g,e.status,e.s),this.g[this.g.length-1].l=e.l)}};i.Pd=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new $t((function(){var e=t();e?n.g.push.apply(n.g,d(e)):(n.l.stop(),n.l=null)})),this.l.Ca(e))};eu.prototype[Symbol.iterator]=function(){return this.zb(0)};eu.prototype.zb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var a=n.i[r];if(e>=a.startTime&&e<a.endTime){for(;r&&!a.u;)r--,a=n.i[r];if(!a.u)return J("No independent partial segment found!"),null;t++;i=r-1;break}}return new iu(this,t,i)};function nu(e,t,n){return new eu([new fo(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}q("shaka.media.SegmentIndex",eu);eu.forSingleSegment=nu;eu.prototype.getIteratorForTime=eu.prototype.zb;eu.prototype.updateEvery=eu.prototype.Pd;eu.prototype.fit=eu.prototype.Vb;eu.prototype.evict=eu.prototype.Sa;eu.prototype.mergeAndEvict=eu.prototype.Oc;eu.prototype.offset=eu.prototype.offset;eu.prototype.get=eu.prototype.get;eu.prototype.find=eu.prototype.find;eu.prototype.markImmutable=eu.prototype.Qg;eu.prototype.release=eu.prototype.release;function iu(e,t,n){this.i=e;this.g=t;this.h=n}iu.prototype.cg=function(){return this.g};iu.prototype.current=function(){var e=this.i.get(this.g);e&&0<e.i.length&&e.wa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g));return e&&0<e.i.length?e.i[this.h]:e};iu.prototype.next=function(){var e=this.i.get(this.g);e&&0<e.i.length?(this.h++,e.wa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0);e=this.current();return{value:e,done:!e}};q("shaka.media.SegmentIterator",iu);iu.prototype.next=iu.prototype.next;iu.prototype.current=iu.prototype.current;iu.prototype.currentPosition=iu.prototype.cg;function ru(){eu.call(this,[]);this.h=[]}y(ru,eu);i=ru.prototype;i.clone=function(){var e=new ru;e.h=this.h.slice();return e};i.release=function(){for(var e=c(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]};i.find=function(e){for(var t=0,n=c(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(null!=r)return r+t;t+=i.i+i.Bb()}return null};i.get=function(e){for(var t=0,n=c(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;t+=i.i+i.Bb()}return null};i.offset=function(){};i.Fd=function(){};i.Sa=function(){};i.Oc=function(){};i.Vb=function(){};i.Pd=function(){};q("shaka.media.MetaSegmentIndex",ru);ru.prototype.updateEvery=ru.prototype.Pd;ru.prototype.fit=ru.prototype.Vb;ru.prototype.mergeAndEvict=ru.prototype.Oc;ru.prototype.evict=ru.prototype.Sa;ru.prototype.merge=ru.prototype.Fd;ru.prototype.offset=ru.prototype.offset;ru.prototype.get=ru.prototype.get;ru.prototype.find=ru.prototype.find;ru.prototype.release=ru.prototype.release;function au(e){var t=this;this.g=e;this.j=!1;this.i=this.g.sd();this.h=new $t((function(){t.g.vf(.25*t.i)}))}au.prototype.release=function(){this.h&&(this.h.stop(),this.h=null);this.g=null};au.prototype.set=function(e){this.i=e;ou(this)};au.prototype.od=function(){return this.g.od()};function ou(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.sd()!=t&&e.g.Oe(t);return}catch(e){}e.h.Ca(.25);0!=e.g.sd()&&e.g.Oe(0)}function su(e){var t=this;this.h=e;this.g=new Set;this.i=new $t((function(){uu(t,!1)})).Ca(.25)}su.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function uu(e,t){for(var n=c(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function lu(e){Vi.call(this);this.g=new Map;this.h=e}y(lu,Vi);lu.prototype.release=function(){this.g.clear();Vi.prototype.release.call(this)};function cu(e,t){var n=e.g.get(t);n||(n={Rc:[],df:null,contentType:t},e.g.set(t,n));return n}function du(e,t,n){var i=cu(e,t.contentType);hu(e,i);e={re:t,position:n};i=i.Rc;t=i.findIndex((function(e){return e.position>=n}));0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}lu.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{var i=n.Rc;for(var r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.re;break e}}i=null}if(r=i)r=n.df,r=!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width);if(r)e:{r=e;a=i.contentType;if((a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(r>=a[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.df=i,JSON.stringify(i),n=new ji("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function hu(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.Rc;t.Rc=r.filter((function(e,t){return e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i?!1:!0}))}else t.Rc=[]}function fu(e){Vi.call(this);var t=this;this.g=new Set;this.i=e;this.h=new $t((function(){for(var e=t.i(),n=c(t.g),i=n.next();!i.done;i=n.next())i=i.value,i.endTime<e.start&&(t.g.delete(i),i=new ji("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}y(fu,Vi);fu.prototype.release=function(){this.g.clear();this.h.stop();Vi.prototype.release.call(this)};function pu(e,t){Vi.call(this);var n=this;this.i=e;this.l=t;this.g=new Map;this.m=[{Ob:null,Nb:vu,Fb:function(e,t){return gu(n,"enter",e,t)}},{Ob:mu,Nb:vu,Fb:function(e,t){return gu(n,"enter",e,t)}},{Ob:yu,Nb:vu,Fb:function(e,t){return gu(n,"enter",e,t)}},{Ob:vu,Nb:mu,Fb:function(e,t){return gu(n,"exit",e,t)}},{Ob:vu,Nb:yu,Fb:function(e,t){return gu(n,"exit",e,t)}},{Ob:mu,Nb:yu,Fb:function(e,t){return gu(n,"skip",e,t)}},{Ob:yu,Nb:mu,Fb:function(e,t){return gu(n,"skip",e,t)}}];this.h=new ar;this.h.C(this.i,"regionremove",(function(e){n.g.delete(e.region)}))}y(pu,Vi);pu.prototype.release=function(){this.i=null;this.g.clear();this.h.release();this.h=null;Vi.prototype.release.call(this)};pu.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=c(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?mu:e>i.endTime?yu:vu;this.g.set(i,a);for(var o=c(this.m),s=o.next();!s.done;s=o.next())s=s.value,s.Ob==r&&s.Nb==a&&s.Fb(i,t)}}};function gu(e,t,n,i){t=new ji(t,new Map([["region",n],["seeking",i]]));e.dispatchEvent(t)}var mu=1,vu=2,yu=3;function bu(e,t,n){this.j=e;this.h=t;this.i=0;this.l=n;this.g=new Map}function wu(e,t){if(e.h.segmentIndex){var n=e.h.segmentIndex.zb(Math.max(t.startTime,e.i));if(n)for(;e.g.size<e.j&&null!=t;){var i=!0;t.m&&null!=t.ia&&(i=!1);2==t.Db()&&(i=!1);i&&!e.g.has(t)&&(i=new Au(e.l),Su(i,t,e.h),e.g.set(t,i));e.i=t.startTime;t=n.next().value}}}function Tu(e){if(0!==e.g.size){for(var t=c(e.g.keys()),n=t.next();!n.done;n=t.next())(n=n.value)&&xu(e,n);e.i=0}}function Eu(e,t){t&&t!==e.h&&(Tu(e),e.h=t)}function xu(e,t){var n=e.g.get(t);e.g.delete(t);n&&n.abort()}function Au(e){this.i=e;this.g=this.h=null}function Su(e,t,n){e.g=e.i(t,n,(function(t){return O((function(n){return e.h?E(n,e.h(t),0):n.B(0)}))}))}Au.prototype.abort=function(){this.g&&this.g.abort()};function Iu(e,t,n,i,r){e=Wi(e,i,r);if(0!=t||null!=n)e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-";return e}function ku(e,t){var n=this;this.g=t;this.m=e;this.i=null;this.u=1;this.o=this.j=null;this.F=0;this.D=!1;this.h=new Map;this.A=!1;this.G=null;this.s=!1;this.l=new ir((function(){return _u(n)}))}i=ku.prototype;i.destroy=function(){return this.l.destroy()};function _u(e){var t,n,i,r;return O((function(a){if(1==a.g){t=[];n=c(e.h.values());for(i=n.next();!i.done;i=n.next())r=i.value,tl(r),t.push(nl(r));return E(a,Promise.all(t),2)}e.h.clear();e.g=null;e.m=null;e.i=null;x(a)}))}i.configure=function(e){this.i=e;this.G=new ki({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=c(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=this.h.get(n.value),n.za){var i=n.za,r=e.segmentPrefetchLimit;i.j=r;for(var a=Array.from(i.g.keys());a.length>r;){var o=a.pop();o&&xu(i,o)}0<e.segmentPrefetchLimit||(n.za=null)}else 0<e.segmentPrefetchLimit&&(n.za=Bu(this,n.stream))};i.start=function(){var e=this;return O((function(t){if(1==t.g)return E(t,Uu(e),2);rr(e.l);e.A=!0;x(t)}))};function Cu(e,t){var n,i,r,a,o,s,u;O((function(l){switch(l.g){case 1:return n=Et,e.F++,i=e.F,A(l,2),E(l,gs(e.g.R,n.ca),4);case 4:I(l,3);break;case 2:if(r=k(l),e.g)e.g.onError(r);case 3:a=St(t.mimeType,t.codecs),as(e.g.R,a,e.m.sequenceMode,t.external),o=e.g.R.u,(s=o.isTextVisible()||e.i.alwaysStreamText)&&e.F==i&&(u=ju(e,t),e.h.set(n.ca,u),el(e,u,0)),x(l)}}))}function Mu(e){var t=e.h.get(Tt);t&&(tl(t),nl(t).catch((function(){})),e.h.delete(Tt));e.o=null}function Du(e,t){var n=e.h.get("video");if(n){var i=n.stream;if(i)if(t)(t=i.trickModeVideo)&&!n.Lb&&(Pu(e,t,!1,0,!1),n.Lb=i);else if(i=n.Lb)n.Lb=null,Pu(e,i,!0,0,!1)}}function Ru(e,t,n,i,r,a){n=void 0===n?!1:n;i=void 0===i?0:i;r=void 0===r?!1:r;a=void 0===a?!1:a;e.j=t;e.A&&(t.video&&Pu(e,t.video,n,i,r,a),t.audio&&Pu(e,t.audio,n,i,r,a))}function Lu(e,t){O((function(n){if(1==n.g)return e.o=t,e.A?t.segmentIndex?n.B(2):E(n,t.createSegmentIndex(),2):n.return();Pu(e,t,!0,0,!1);x(n)}))}function Pu(e,t,n,i,r,a){var o=e.h.get(t.type);o||t.type!=Tt?o&&(o.Lb&&(t.trickModeVideo?(o.Lb=t,t=t.trickModeVideo):o.Lb=null),o.stream!=t||r)&&(o.za&&Eu(o.za,t),t.type==Tt&&(r=St(t.mimeType,t.codecs),as(e.g.R,r,e.m.sequenceMode,t.external)),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.W=null,o.Ye=!!a,n&&(o.Bc?o.Qd=!0:o.ua?(o.vb=!0,o.ld=i,o.Qd=!0):(tl(o),Zu(e,o,!0,i).catch((function(t){if(e.g)e.g.onError(t)})))),Nu(e,o).catch((function(t){if(e.g)e.g.onError(t)}))):Cu(e,t)}function Nu(e,t){var n,i;return O((function(r){if(1==r.g){if(!t.ya)return r.return();n=t.stream;i=t.ya;return n.segmentIndex?r.B(2):E(r,n.createSegmentIndex(),2)}if(t.ya!=i||t.stream!=n)return r.return();var a=e.g.rd();var o=us(e.g.R,t.type),s=t.stream.segmentIndex.find(t.sa?t.sa.endTime:a),u=null==s?null:t.stream.segmentIndex.get(s);s=u?u.ia?u.ia-u.Ba:null:null;u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8);s?((u=u.h)&&(s+=(u.ia?u.ia-u.Ba:null)||0),u=e.g.getBandwidthEstimate(),a=8*s/u<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ya.h.g>s?!0:!1):a=!1;a&&t.ya.abort();x(r)}))}i.Uc=function(){if(this.g)for(var e=this.g.rd(),t=c(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r=null;n.W&&(r=n.W.current());if(!r||r.startTime>e||r.endTime<e)n.W=null;r=this.g.R;r.o?r=!1:i==Tt?(r=r.g,r=null==r.g||null==r.h?!1:e>=r.g&&e<r.h):(r=cs(r,i),r=vo(r,e));r||((null!=us(this.g.R,i)||n.ua)&&Ou(this,n),n.ya&&(n.ya.abort(),n.ya=null),i===Tt&&(i=this.g.R,i.F&&i.F.i()),n.Uc=!0)}};function Ou(e,t){t.Bc||t.vb||(t.ua?(t.vb=!0,t.ld=0):null==ss(e.g.R,t.type)?null==t.Xa&&el(e,t,0):(tl(t),Zu(e,t,!1,0).catch((function(t){if(e.g)e.g.onError(t)}))))}function Uu(e){var t,n,i,r,a,o,s,u,l;return O((function(d){if(1==d.g){t=Et;if(!e.j)throw new ht(2,5,5006);n=new Map;i=new Set;e.j.audio&&(n.set(t.pb,e.j.audio),i.add(e.j.audio));e.j.video&&(n.set(t.va,e.j.video),i.add(e.j.video));e.o&&(n.set(t.ca,e.o),i.add(e.o));r=e.g.R;return E(d,r.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}rr(e.l);e.updateDuration();a=c(n.keys());for(o=a.next();!o.done;o=a.next())s=o.value,u=n.get(s),e.h.has(s)||(l=ju(e,u),e.h.set(s,l),el(e,l,0));x(d)}))}function ju(e,t){return{stream:t,type:t.type,W:null,za:Bu(e,t),sa:null,$b:null,ne:null,le:null,ke:null,Lb:null,endOfStream:!1,ua:!1,Xa:null,vb:!1,ld:0,Qd:!1,Bc:!1,Uc:!0,ue:!1,Fe:!1,Mc:!1,ya:null}}function Bu(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.i.segmentPrefetchLimit?new bu(e.i.segmentPrefetchLimit,t,(function(t,n,i){return $u(e,t,n,i)})):null}i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();Infinity>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))};function Fu(e,t){var n,i,r,a,o;return O((function(s){switch(s.g){case 1:rr(e.l);if(t.ua||null==t.Xa||t.Bc)return s.return();t.Xa=null;if(!t.vb){s.B(2);break}return E(s,Zu(e,t,t.Qd,t.ld),3);case 3:return s.return();case 2:if(t.stream.segmentIndex){s.B(4);break}n=t.stream;return E(s,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.ua||t.Xa||el(e,t,0),s.return();case 4:A(s,6);i=Vu(e,t);null!=i&&(el(e,t,i),t.Mc=!1);I(s,7);break;case 6:return r=k(s),E(s,il(e,t,r),8);case 8:return s.return();case 7:a=Array.from(e.h.values());if(!e.A||!a.every((function(e){return e.endOfStream}))){s.B(0);break}return E(s,e.g.R.endOfStream(),10);case 10:rr(e.l),o=e.g.R.getDuration(),0!=o&&o<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Aa(o),x(s)}}))}function Vu(e,t){if(Ju(t))return fs(e.g.R,t.stream.originalId||""),null;t.type==Tt&&ps(e.g.R);var n=e.g.rd(),i=t.sa?t.sa.endTime:n,r=ls(e.g.R,t.type,n),a=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.u,o=e.m.presentationTimeline.getDuration()-i,s=us(e.g.R,t.type);if(1e-6>o&&s)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(Tt))&&Ju(e)&&(e.endOfStream=!0),null;t.endOfStream=!1;if(r>=a)return e.i.updateIntervalSeconds/2;r=Gu(e,t,n,s);if(!r)return e.i.updateIntervalSeconds;a=Infinity;o=Array.from(e.h.values());o=c(o);for(s=o.next();!s.done;s=o.next())s=s.value,Ju(s)||s.W&&!s.W.current()||(a=Math.min(a,s.sa?s.sa.endTime:n));if(i>=a+e.m.presentationTimeline.g)return e.i.updateIntervalSeconds;t.za&&t.W&&wu(t.za,r);Hu(e,t,n,r).catch((function(){}));return null}function Gu(e,t,n,i){if(t.W)return t.W.current();if(t.sa||i)return n=t.sa?t.sa.endTime:i,t.ue=!0,t.W=t.stream.segmentIndex.zb(n),t.W&&t.W.next().value;e=e.i.inaccurateManifestTolerance;i=Math.max(n-e,0);var r=null;e&&(t.W=t.stream.segmentIndex.zb(i),r=t.W&&t.W.next().value);r||(t.W=t.stream.segmentIndex.zb(n),r=t.W&&t.W.next().value);return r}function Hu(t,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:a=Et;o=n.stream;s=n.W;n.ua=!0;A(w,2);if(2==r.Db())throw new ht(1,1,1011);return E(w,Xu(t,n,r),4);case 4:rr(t.l);if(t.s)return w.return();u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType;l=e.ReadableStream;if(t.i.lowLatencyMode&&l&&u&&("HLS"!=t.m.type||r.o))return h=new Uint8Array(0),p=f=!1,g=function(e){var a,s,u;return O((function(l){if(f)return l.return();p=!0;rr(t.l);if(t.s)return l.return();h=zu(h,e);a=!1;s=0;(new Ir).box("mdat",(function(e){s=e.size+e.start;a=!0})).parse(h,!1,!0);if(!a)return l.B(0);u=h.subarray(0,s);h=h.subarray(s);return E(l,Wu(t,n,i,o,r,u),0)}))},E(w,Qu(t,n,r,g),9);c=Qu(t,n,r);return E(w,c,7);case 7:d=w.h;rr(t.l);if(t.s)return w.return();rr(t.l);return n.vb?(n.ua=!1,el(t,n,0),w.return()):E(w,Wu(t,n,i,o,r,d),6);case 9:m=w.h;if(p){w.B(6);break}f=!0;rr(t.l);return t.s?w.return():n.vb?(n.ua=!1,el(t,n,0),w.return()):E(w,Wu(t,n,i,o,r,m),6);case 6:rr(t.l);if(t.s)return w.return();n.sa=r;s.next();n.ua=!1;n.Fe=!1;v=t.g.R.bb();y=v[n.type];te(JSON.stringify(y));n.vb||t.g.ye(r.startTime,r.endTime,n.type);el(t,n,0);I(w,0);break;case 2:b=k(w);rr(t.l,b);if(t.s)return w.return();n.ua=!1;if(7001==b.code)n.ua=!1,tl(n),el(t,n,0),w.B(0);else if(n.type==a.ca&&t.i.ignoreTextStreamFailures)t.h.delete(a.ca),w.B(0);else if(3017==b.code)Ku(t,n,b),w.B(0);else return n.Mc=!0,b.severity=2,E(w,il(t,n,b),0)}}))}function qu(t,n,i){var r,a,o,s;return O((function(u){if(1==u.g)return r=n,r.cryptoKey?u.B(2):E(u,r.fetchKey(),3);a=r.iv;if(!a)for(a=he(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i.g,s=a.byteLength-1;0<=s;s--)a[s]=o&255,o>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))}))}function zu(e,t){var n=new Uint8Array(e.length+t.length);n.set(e);n.set(t,e.length);return n}function Ku(e,t,n){if(!Array.from(e.h.values()).some((function(e){return e!=t&&e.Fe}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else if(4<i)e.u-=.04;else{t.Mc=!0;e.s=!0;e.g.onError(n);return}t.Fe=!0}el(e,t,4)}function Xu(e,t,n){var i,r,a,o,s,u,l,c,d,h,f,p,g;return O((function(m){i=Et;r=[];a=Math.max(0,n.appendWindowStart-.1);o=n.appendWindowEnd+.01;s=Mt(t.stream.codecs)[0];u=t.stream.mimeType.split(";")[0];l=n.timestampOffset;if(l!=t.ne||a!=t.le||o!=t.ke||s!=t.Cd||u!=t.me){if(t.Cd&&s!=t.Cd||t.me&&u!=t.me)if(t.type===i.va){if(c=e.h.get(i.pb))c.$b=null,nl(c)}else t.type===i.pb&&(d=e.h.get(i.va))&&(d.$b=null,nl(d));h=function(){var n,r,c;return O((function(d){if(1==d.g)return n=new Map,e.j.audio&&n.set(i.pb,e.j.audio),e.j.video&&n.set(i.va,e.j.video),A(d,2),t.le=a,t.ke=o,t.Cd=s,t.me=u,t.ne=l,r=e.m.sequenceMode||"HLS"==e.m.type,E(d,ms(e.g.R,t.type,l,a,o,r,t.stream,n),4);if(2!=d.g)return I(d,0);c=k(d);t.le=null;t.ke=null;t.Cd=null;t.ne=null;throw c}))};r.push(h())}!ho(n.h,t.$b)&&(t.$b=n.h)&&(f=Qu(e,t,n.h,void 0,!0),p=function(){var r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return A(c,2),E(c,f,4);case 4:return r=c.h,rr(e.l),a=null,o=new Map,s=new Ir,s.box("moov",kr).box("trak",kr).box("mdia",kr).M("mdhd",(function(e){a=Mo(e.reader,e.version).timescale})).box("hdlr",(function(e){e=e.reader;e.skip(8);e=e.jb(4);var t=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);switch(t){case"soun":o.set(i.pb,a);break;case"vide":o.set(i.va,a)}a=null})).parse(r),o.has(t.type)?n.h.timescale=o.get(t.type):null!=a&&(n.h.timescale=a),u=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(c,e.g.Ze(t.type,r),5);case 5:return E(c,hs(e.g.R,t.type,r,null,t.stream,u),6);case 6:I(c,0);break;case 2:throw l=k(c),t.$b=null,l}}))},e.g.Tg(n.startTime,n.h),r.push(p()));e.m.sequenceMode&&(g=t.sa?t.sa.l:null,n.l!=g||t.ue)&&(t.ue=!1,r.push(vs(e.g.R,t.type,n.startTime)));return E(m,Promise.all(r),0)}))}function Wu(e,t,n,i,r,a){var o,s,u,l,c,d;return O((function(h){switch(h.g){case 1:o=i.closedCaptions&&0<i.closedCaptions.size;u=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes;l=e.i.parsePrftBox&&!e.D;if(u||l)s=new Ir;u&&s.M("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version){var a=t.reader.Sc();var o=t.reader.Sc();var s=t.reader.J();var u=t.reader.J();var l=t.reader.J();var c=t.reader.J();var d=r.startTime+u/s}else s=t.reader.J(),d=t.reader.dc()/s+r.timestampOffset,u=d-r.startTime,l=t.reader.J(),c=t.reader.J(),a=t.reader.Sc(),o=t.reader.Sc();t=t.reader.jb(t.reader.getLength()-t.reader.fa());if(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)"urn:mpeg:dash:event:2012"==a?e.g.Ug():(n=(new Map).set("detail",{startTime:d,endTime:d+l/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}),n=new ji("emsg",n),n.cancelable=!0,e.g.onEvent(n),n.defaultPrevented||"https://aomedia.org/emsg/ID3"!=a&&"https://developer.apple.com/streaming/emsg-id3"!=a||(a=Io(t),a.length&&r&&e.g.Vg([{cueTime:r.startTime,data:t,frames:a,dts:r.startTime,pts:r.startTime}],0,r.endTime)))}));l&&s.M("prft",(function(t){if(!e.D&&r.h.timescale){var n=t.reader,i=t.version;n.J();t=n.J();var a=n.J();t=1e3*t+a/Math.pow(2,32)*1e3;0===i?n=n.J():(i=n.J(),n=n.J(),n=i*Math.pow(2,32)+n);t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime();n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/r.h.timescale*1e3)});n=new ji("prft",n);e.g.onEvent(n);e.D=!0}}));(u||l)&&s.parse(a);return E(h,Yu(e,t,n),2);case 2:return rr(e.l),c=t.Uc,t.Uc=!1,d=t.Ye,t.Ye=!1,E(h,e.g.Ze(t.type,a),3);case 3:return E(h,hs(e.g.R,t.type,a,r,i,o,c,d),4);case 4:rr(e.l),x(h)}}))}function Yu(e,t,n){var i,r,a,o;return O((function(s){if(1==s.g){i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g);r=ss(e.g.R,t.type);if(null==r)return s.return();a=n-r;o=a-i;return.01>=o?s.return():E(s,e.g.R.remove(t.type,r,r+o),2)}rr(e.l);x(s)}))}function Ju(e){return e&&e.type==Tt&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Qu(e,t,n,i,r){var a,o,s,u,l;return O((function(c){switch(c.g){case 1:if(n instanceof co&&(a=n.g))return c.return(a);o=null;if(t.za&&n instanceof fo){var d=t.za;if(d.g.has(n)){var h=d.g.get(n);i&&(h.h=i);d.g.delete(n);o=h.g}else o=null}o||(o=$u(e,n,t.stream,i,r));t.ya=o;return E(c,o.promise,2);case 2:s=c.h;t.ya=null;u=s.data;if(!n.s){c.B(3);break}l=t.W;return E(c,qu(u,n.s,l),4);case 4:u=c.h;case 3:return c.return(u)}}))}function $u(e,t,n,i,r){r=r?0:1;var a=t instanceof fo?t:void 0;t=Iu(t.wa(),t.Ba,t.ia,e.i.retryParameters,i);return e.g.Ib.request(er,t,{type:r,stream:n,segment:a})}function Zu(e,t,n,i){var r,a;return O((function(o){if(1==o.g)return t.vb=!1,t.Qd=!1,t.ld=0,t.Bc=!0,t.sa=null,t.$b=null,t.W=null,t.za&&Tu(t.za),i?(r=e.g.rd(),a=e.g.R.getDuration(),E(o,e.g.R.remove(t.type,r+i,a),3)):E(o,gs(e.g.R,t.type),4);if(3!=o.g)return rr(e.l),n?E(o,e.g.R.flush(t.type),3):o.B(3);rr(e.l);t.Bc=!1;t.endOfStream=!1;t.ua||t.Xa||el(e,t,0);x(o)}))}function el(e,t,n){var i=t.type;if(i!=Tt||e.h.has(i))t.Xa=new Qt((function(){var n;return O((function(i){if(1==i.g)return A(i,2),E(i,Fu(e,t),4);if(2!=i.g)return I(i,0);n=k(i);if(e.g)e.g.onError(n);x(i)}))})).S(n)}function tl(e){null!=e.Xa&&(e.Xa.stop(),e.Xa=null)}function nl(e){return O((function(t){return e.ya?E(t,e.ya.abort(),0):t.B(0)}))}function il(e,t,n){var i;return O((function(r){if(1==r.g)return E(r,_i(e.G),2);rr(e.l);i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime;1===n.category&&0<i&&(n.handled=e.g.ae(t.stream,i),n.handled&&(n.severity=1));e.g.onError(n);n.handled||e.i.failureCallback(n);x(r)}))}function rl(e,t){var n=Dd(),i=this;this.j=t;this.i=e;this.l=n;this.o=null;this.m=[];this.h=this.g=null;this.u=Promise.resolve().then((function(){return sl(i)}));this.s=new ir((function(){return al(i)}))}rl.prototype.destroy=function(){return this.s.destroy()};function al(e){var t,n,i;return O((function(r){if(1==r.g)return e.h&&e.h.abort(),ll(e),E(r,e.u,2);e.g&&e.g.Va.Kb();t=c(e.m);for(n=t.next();!n.done;n=t.next())i=n.value,i.Va.Kb();e.g=null;e.m=[];e.j=null;x(r)}))}function ol(e,t){var n={bc:function(){},Id:function(){},Kb:function(){},onError:function(){},Kd:function(){},fi:function(){}};e.m.push({create:t,Va:n});e.h&&e.h.abort();ll(e);return n}function sl(e){return O((function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.Eb)var n=!1;else{e.g&&(e.g.Va.Kb(),e.g=null);n=e.m.shift();var i=n.create(e.l);i?(n.Va.bc(),e.g={node:i.node,payload:i.payload,Eb:i.Eb,Va:n.Va}):n.Va.Kd();n=!0}n?n=Promise.resolve():e.g?n=ul(e):(e.j.Sg(e.i),e.o=new Mi,n=e.o);t=E(t,n,1)}return t}))}function ul(e){var t,n;return O((function(i){switch(i.g){case 1:return e.i=e.j.ug(e.i,e.l,e.g.node,e.g.payload),A(i,2),e.h=e.j.fg(e.i,e.l,e.g.payload),E(i,e.h.promise,4);case 4:e.h=null;e.i==e.g.node&&(e.g.Va.Id(),e.g=null);I(i,0);break;case 2:t=k(i);if(7001==t.code)e.g.Va.Kb();else e.g.Va.onError(t);e.g=null;e.h=null;n=e;return E(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,x(i)}}))}function ll(e){e.o&&(e.o.resolve(),e.o=null)}function cl(e){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(cl).join("");var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");n&&t.push(["b"]);i&&t.push(["i"]);r&&t.push(["u"]);n="";(i=dl(e.color))&&(n+="."+i);(i=dl(e.backgroundColor))&&(n+=".bg_"+i);n&&t.push(["c",n]);return t.reduceRight((function(e,t){var n=c(t);t=n.next().value;n=n.next().value;return"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"}),e.payload)}function dl(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function hl(e,t){e=c(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.isContainer)hl(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[];i.payload=cl(n);t.push(i)}return t}function fl(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())n=n.value,n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack"));this.g.mode="hidden"}i=fl.prototype;i.remove=function(e,t){if(!this.g)return!1;gl(this.g,(function(n){return n.startTime<t&&n.endTime>e}));return!0};i.append=function(e){var t=hl(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=c(t);for(var r=t.next();!r.done;i={Pb:i.Pb},r=t.next())i.Pb=r.value,e.some(function(e){return function(t){return t.startTime==e.Pb.startTime&&t.endTime==e.Pb.endTime&&t.text==e.Pb.payload?!0:!1}}(i))||(r=pl(i.Pb))&&n.push(r);e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}));e=c(e);for(i=e.next();!i.done;i=e.next())this.g.addCue(i.value)};i.destroy=function(){this.g&&(gl(this.g,(function(){return!0})),this.g.mode="disabled");this.g=null;return Promise.resolve()};i.isTextVisible=function(){return"showing"==this.g.mode};i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function pl(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign;t.positionAlign=e.positionAlign;e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}"center"==e.textAlign&&"center"!=t.align&&(t.align="middle");"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl");1==e.lineInterpretation&&(t.snapToLines=!1);null!=e.line&&(t.line=e.line);null!=e.position&&(t.position=e.position);return t}function gl(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=c(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}q("shaka.text.SimpleTextDisplayer",fl);fl.prototype.setTextVisibility=fl.prototype.setTextVisibility;fl.prototype.isTextVisible=fl.prototype.isTextVisible;fl.prototype.destroy=fl.prototype.destroy;fl.prototype.append=fl.prototype.append;fl.prototype.remove=fl.prototype.remove;function ml(){}function vl(e){for(;e.firstChild;)e.removeChild(e.firstChild)}q("shaka.util.Dom",ml);ml.removeAllChildren=vl;function yl(t,n){var i=this;this.j=!1;this.i=[];this.A=t;this.m=n;this.g=document.createElement("div");this.g.classList.add("shaka-text-container");this.g.style.textAlign="center";this.g.style.display="flex";this.g.style.flexDirection="column";this.g.style.alignItems="center";this.g.style.justifyContent="flex-end";this.m.appendChild(this.g);this.u=new $t((function(){Tl(i)})).Ca(.25);this.h=new Map;this.s=new ar;this.s.C(document,"fullscreenchange",(function(){Tl(i,!0)}));this.l=null;"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Tl(i,!0)})),this.l.observe(this.g));this.o=new Map}i=yl.prototype;i.append=function(e){var t=[].concat(d(this.i)),n={};e=c(e);for(var i=e.next();!i.done;n={$c:n.$c},i=e.next())n.$c=i.value,t.some(function(e){return function(t){return Ae(t,e.$c)}}(n))||this.i.push(n.$c);Tl(this)};i.destroy=function(){this.m.removeChild(this.g);this.g=null;this.j=!1;this.i=[];this.u&&this.u.stop();this.h.clear();this.s&&(this.s.release(),this.s=null);this.l&&(this.l.disconnect(),this.l=null)};i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t}));Tl(this,n>this.i.length);return!0};i.isTextVisible=function(){return this.j};i.setTextVisibility=function(e){this.j=e};function bl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function wl(e,t,n,i,r){var a=!1,o=[],s=[];t=c(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;r.push(u);var l=e.h.get(u),d=u.startTime<=i&&u.endTime>i,h=l?l.Pf:null;l&&(o.push(l.$d),l.Tc&&o.push(l.Tc),d||(a=!0,e.h.delete(u),l=null));d&&(s.push(u),l?bl(e,h)||(a=!0):(El(e,u,r),l=e.h.get(u),h=l.Pf,a=!0));0<u.nestedCues.length&&h&&wl(e,u.nestedCues,h,i,r);r.pop()}if(a){i=c(o);for(r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}));s=c(s);for(u=s.next();!u.done;u=s.next())i=e.h.get(u.value),i.Tc?(n.appendChild(i.Tc),i.Tc.appendChild(i.$d)):n.appendChild(i.$d)}}function Tl(e,t){if(e.g){var n=e.A.currentTime;if(!e.j||(void 0===t?0:t)){t=c(e.o.values());for(var i=t.next();!i.done;i=t.next())vl(i.value);vl(e.g);e.h.clear();e.o.clear()}if(e.j){t=new Map;i=c(e.h.keys());for(var r=i.next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));wl(e,e.i,e.g,n,[])}}}function El(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br");i=!i&&0<t.nestedCues.length;var a=document.createElement(r);"br"!=r&&Al(e,a,t,n,i);n=null;if(t.region&&t.region.id)if(n=t.region,r=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==Ve?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Ve?"%":"px"),e.o.has(r))n=e.o.get(r);else{var o=document.createElement("span"),s=n.heightUnits==Ve?"%":"px",u=n.widthUnits==Ve?"%":"px",l=n.viewportAnchorUnits==Ve?"%":"px";o.id="shaka-text-region---"+r;o.classList.add("shaka-text-region");o.style.height=n.height+s;o.style.width=n.width+u;o.style.position="absolute";o.style.top=n.viewportAnchorY+l;o.style.left=n.viewportAnchorX+l;o.style.display="flex";o.style.flexDirection="column";o.style.alignItems="center";o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end";e.o.set(r,o);n=o}r=a;i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",a.appendChild(r));e.h.set(t,{$d:a,Pf:r,Tc:n})}function xl(e){var t=e.direction,n=e.positionAlign;e=e.textAlign;return n!==Se?n:"left"===e||"start"===e&&t===Me||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Me?"line-right":"center"}function Al(e,t,n,i,r){var a=t.style,o=0==n.nestedCues.length,s=1<i.length;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,(function(e){return"".repeat(e.length)}));a.webkitTextStrokeColor=n.textStrokeColor;a.webkitTextStrokeWidth=n.textStrokeWidth;a.color=n.color;a.direction=n.direction;a.opacity=n.opacity;a.paddingLeft=Sl(n.linePadding,n,e.m);a.paddingRight=Sl(n.linePadding,n,e.m);a.textShadow=n.textShadow;if(n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border);r||((t=Il(i,(function(e){return e.backgroundColor})))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"));u&&(l.textContent=u)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end");o||(a.margin="0");a.fontFamily=n.fontFamily;a.fontWeight=n.fontWeight.toString();a.fontStyle=n.fontStyle;a.letterSpacing=n.letterSpacing;a.fontSize=Sl(n.fontSize,n,e.m);null!=n.line&&(e=n.lineInterpretation,0==n.line&&e==Re&&(e=1),1==e&&(a.position="absolute",n.writingMode==De?(a.width="100%",n.lineAlign==Le?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==Le?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==Le?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))));a.lineHeight=n.lineHeight;null!=n.position&&(n.writingMode==De?a.paddingLeft=n.position:a.paddingTop=n.position);e=xl(n);"line-left"==e?a.cssFloat="left":"line-right"==e&&(a.cssFloat="right");a.textAlign=n.textAlign;a.textDecoration=n.textDecoration.join(" ");a.writingMode=n.writingMode;"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode);n.size&&(n.writingMode==De?a.width=n.size+"%":a.height=n.size+"%")}function Sl(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function Il(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}q("shaka.text.UITextDisplayer",yl);yl.prototype.setTextVisibility=yl.prototype.setTextVisibility;yl.prototype.isTextVisible=yl.prototype.isTextVisible;yl.prototype.remove=yl.prototype.remove;yl.prototype.destroy=yl.prototype.destroy;yl.prototype.append=yl.prototype.append;function kl(e,t){function n(e){for(var n=e,i=c(t),r=i.next();!r.done;r=i.next())r=r.value,r.end&&r.start<e&&(n+=r.end-r.start);e=Math.floor(n/3600);i=Math.floor(n/60%60);r=Math.floor(n%60);n=Math.floor(1e3*n%1e3);return(10>e?"0":"")+e+":"+(10>i?"0":"")+i+":"+(10>r?"0":"")+r+"."+(100>n?10>n?"00":"0":"")+n}var i=hl(e,[]);e="WEBVTT\n\n";i=c(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Ie:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}q("shaka.text.WebVttGenerator",(function(){}));function _l(e,t){this.h=e;this.g=t;this.j="";this.o=void 0;this.i=!1;this.m=!0;this.l=!1}_l.prototype.configure=function(e){this.g=e};function Cl(e,t,n){try{if(!e.g.enabled)return t;var i=Ml(e);e:{switch(n.toLowerCase()){case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":var r=Vl;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":r=jl;break e}r=void 0}i.ot=r;i.su=!0;var a=Nl(i);return Ul(t,a)}catch(e){return $("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function Ml(t){t.j||(t.j=t.g.sessionId||e.crypto.randomUUID());return{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Dl(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,Ml(e));n.pr=e.h.qd();var r=n.ot===Fl||n.ot===Vl;e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1);null==n.su&&(n.su=e.m);if(i)e=Ol(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=Nl(n);a&&(t.uris=t.uris.map((function(e){return Ul(e,a)})))}}}function Rl(e){if(0===e.type)return Gl;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Vl:Fl;if("audio"==t)return Bl;if("text"==t)return"application/mp4"===e.mimeType?ql:Hl}}function Ll(e,t){t=e.h.bb()[t];if(!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}function Pl(e,t){var n=e.h.rb();if(!n.length)return NaN;e=n[0];n=c(n);for(var i=n.next();!i.done;i=n.next())i=i.value,"variant"===i.type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Fl:return e.videoBandwidth||NaN;case Bl:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Nl(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=c(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(i(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var l=a[s];l&&(u=l(u));l=typeof u;var d=void 0;d="string"===l&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u;r.push(d)}}return r.join(",")}function Ol(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=c(t);for(var o=t.next();!o.done;o=t.next())o=o.value,r[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=Nl(r[e]))&&(n["CMCD-"+i[e]]=a);return n}function Ul(e,t){if(!t||e.includes("offline:"))return e;e=new $e(e);e.g.set("CMCD",t);return e.toString()}var jl="m",Bl="a",Fl="v",Vl="av",Gl="i",Hl="c",ql="tt";q("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Oh:"s",OTHER:"o"});function zl(){}function Kl(e,t,n,i,r){var a=r in i,o=!0,s;for(s in t){var u=r+"."+s,l=a?i[r]:n[s];a||s in n?void 0===t[s]?void 0===l||a?delete e[s]:e[s]=Gi(l):l.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=Gi(l)),u=Kl(e[s],t[s],l,i,u),o=o&&u):typeof t[s]!=typeof l||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=l.constructor?(J("Invalid config, wrong type for "+u),o=!1):("function"==typeof n[s]&&n[s].length!=t[s].length&&Q("Unexpected number of arguments for "+u),e[s]=t[s]):(J("Invalid config, unrecognized key "+u),o=!1)}return o}function Xl(e,t){for(var n={},i=n,r=0,a=0;;){r=e.indexOf(".",r);if(0>r)break;if(0==r||"\\"!=e[r-1])a=e.substring(a,r).replace(/\\\./g,"."),i[a]={},i=i[a],a=r+1;r+=1}i[e.substring(a).replace(/\\\./g,".")]=t;return n}function Wl(e,t){return e&&t}q("shaka.util.ConfigUtils",zl);zl.convertToConfigObject=Xl;zl.mergeConfigObjects=Kl;function Yl(){}function Jl(e){e=br(e);return new $e(e).Ra}function Ql(e,t,n){function i(e){fe(a).setUint32(o,e.byteLength,!0);o+=4;a.set(he(e),o);o+=e.byteLength}if(!n||!n.byteLength)throw new ht(2,6,6015);var r;"string"==typeof t?r=Tr(t,!0):r=t;e=br(e);e=Tr(e,!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;i(e);i(r);i(n);return a}function $l(e,t,n){if("skd"!==t)return e;t=n.serverCertificate;n=br(e).split("skd://").pop();return Ql(e,n,t)}function Zl(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}q("shaka.util.FairPlayUtils",Yl);Yl.commonFairPlayResponse=function(e,t){if(2===e){try{var n=vr(t.data)}catch(e){return}e=!1;n=n.trim();"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0);i.CkcMessage&&(n=i.CkcMessage,e=!0);i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=de(Br(n)))}};Yl.expressplayFairPlayRequest=function(e,t){Zl(e,t)};Yl.conaxFairPlayRequest=function(e,t){Zl(e,t)};Yl.ezdrmFairPlayRequest=function(e,t){Zl(e,t)};Yl.verimatrixFairPlayRequest=function(e,t){2===e&&(e=he(t.body),e=jr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=wr("spc="+e))};Yl.expressplayInitDataTransform=function(e,t,n){return $l(e,t,n)};Yl.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate;i=br(t).split("skd://").pop().split("?").shift();i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=new Uint16Array(r);for(var a=0,o=i.length;a<o;a++)r[a]=i.charCodeAt(a);return Ql(t,r,n)};Yl.ezdrmInitDataTransform=function(e,t,n){if("skd"!==t)return e;t=n.serverCertificate;n=br(e).split(";").pop();return Ql(e,n,t)};Yl.verimatrixInitDataTransform=function(e,t,n){return $l(e,t,n)};Yl.initDataTransform=Ql;Yl.defaultGetContentId=Jl;Yl.isFairPlaySupported=function(){var e;return O((function(t){if(1==t.g)return e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4);if(2!=t.g)return t.return(!0);k(t);return t.return(!1)}))};function ec(){}function tc(){var t=Infinity;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:Ci(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,i){e.shakaMediaKeysPolyfill&&"skd"==n&&(n=i.serverCertificate,i=Jl(t),t=Ql(t,i,n));return t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:nn(),minHdcpVersion:""},i={retryParameters:Ci(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return Wl([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:ln("Tizen 3")||ln("Tizen 2")||an()||sn()?!1:!0,ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(e){return Wl([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},r={retryParameters:Ci(),failureCallback:function(e){return Wl([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};if(ln("Web0S")||rn()||ln("CrKey"))r.stallSkip=0;var a={trackSelectionCallback:function(e){return O((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return O((function(n){if(1==n.g)return navigator.storage&&navigator.storage.estimate?E(n,navigator.storage.estimate(),3):n.return(!0);t=n.h;return n.return(t.usage+e<.95*t.quota)}))},progressCallback:function(e,t){return Wl([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:n,manifest:i,streaming:r,mediaSource:{sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:a,abrFactory:function(){return new ri},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:t,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};a.trackSelectionCallback=function(e){return O((function(t){return t.return(ic(e,o.preferredAudioLanguage))}))};return o}function nc(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Kl(e,t,n||tc(),i,"")}function ic(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Wt(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return qt(e.language)==r})));0==i.length&&(i=n.filter((function(e){return e.primary})));0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height})));t=[];i.length&&(n=Math.floor(i.length/2),i.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(i[n]));e=c(e);for(i=e.next();!i.done;i=e.next())i=i.value,i.type!=Tt&&"image"!=i.type||t.push(i);return t}q("shaka.util.PlayerConfiguration",ec);ec.mergeConfigObjects=nc;ec.createDefault=tc;function rc(){this.g=null;this.h=[]}function ac(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp;e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function oc(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);e=c(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function sc(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=c(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));e.g&&n.push(t(e.g));return n}function uc(){this.i=this.h=null;this.g=[]}function lc(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function cc(){this.u=this.A=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.N=this.P=this.H=this.K=this.L=this.l=this.o=NaN;this.g=new rc;this.h=new uc}function dc(t,n){Vi.call(this);var i=this;this.l=Pd;this.md=this.h=null;this.$=!1;this.zd=new ar;this.xc=new ar;this.o=new ar;this.jc=this.i=this.Bd=this.K=this.j=this.ma=this.L=this.Nf=this.U=this.Na=this.N=this.ud=this.H=this.Sb=this.A=this.G=this.m=this.F=null;this.Fc=!1;this.pe=this.s=null;this.De=1e9;this.g=Yc(this);this.Ce={width:Infinity,height:Infinity};this.u=null;this.Ya=new yi(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel);this.Qb=this.g.preferredTextLanguage;this.Ec=this.g.preferredTextRole;this.Ac=this.g.preferForcedSubs;this.zc=[];this.Gc=null;n&&n(this);this.U=Bc(this);this.F=Lc(this);this.F.Me(this.g.streaming.forceHTTPS);this.D=null;Fd&&(this.D=Fd());this.zd.C(e,"online",(function(){vd(i);i.Ge()}));this.P={name:"detach"};this.X={name:"attach"};this.ba={name:"unload"};this.He={name:"manifest-parser"};this.ze={name:"manifest"};this.Rb={name:"media-source"};this.te={name:"drm-engine"};this.Y={name:"load"};this.Qe={name:"src-equals-drm-engine"};this.Tb={name:"src-equals"};var r=new Map;r.set(this.X,(function(e,t){return Ni(mc(i,e,t))}));r.set(this.P,(function(e){e.mediaElement&&(i.xc.sb(),e.mediaElement=null);i.D&&i.D.release();i.h=null;e=Promise.resolve();return Ni(e)}));r.set(this.ba,(function(e){return Ni(vc(i,e))}));r.set(this.Rb,(function(e){e=yc(i,e);return Ni(e)}));r.set(this.He,(function(e,t){e=bc(i,e,t);return Ni(e)}));r.set(this.ze,(function(e){return wc(i,e)}));r.set(this.te,(function(e){e=Tc(i,e);return Ni(e)}));r.set(this.Y,(function(e,t){return Ni(Ec(i,e,t))}));r.set(this.Qe,(function(e,t){e=xc(i,e,t);return Ni(e)}));r.set(this.Tb,(function(e,t){return Ac(i,e,t)}));this.Oa=new rl(this.P,{ug:function(e,t,n,r){var a=null;e==i.P&&(a=n==i.P?i.P:i.X);e==i.X&&(a=n==i.P||t.mediaElement!=r.mediaElement?i.P:n==i.X?i.X:n==i.Rb||n==i.Y?i.Rb:n==i.Tb?i.Qe:null);e==i.Rb&&(a=n==i.Y&&t.mediaElement==r.mediaElement?i.He:i.ba);e==i.He&&(a=Md(i.Y,i.ze,i.ba,n,t,r));e==i.ze&&(a=Md(i.Y,i.te,i.ba,n,t,r));e==i.te&&(a=Md(i.Y,i.Y,i.ba,n,t,r));e==i.Qe&&(a=n==i.Tb&&t.mediaElement==r.mediaElement?i.Tb:i.ba);if(e==i.Y||e==i.Tb)a=i.ba;e==i.ba&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.X:i.P);return a},fg:function(e,t,n){i.dispatchEvent(pc("onstatechange",(new Map).set("state",e.name)));return r.get(e)(t,n)},handleError:function(e){return O((function(t){return 1==t.g?E(t,vc(i,e),2):t.return(e.mediaElement?i.X:i.P)}))},Sg:function(e){i.dispatchEvent(pc("onstateidle",(new Map).set("state",e.name)))}});this.wd=new $t((function(){return sd(i)}));t&&this.yc(t,!0)}y(dc,Vi);function hc(e){null!=e.L&&(e.L.release(),e.L=null)}function fc(e,t){if(t.lcevc.enabled){var n=e.rb();n&&n[0]&&n[0].videoMimeType==Vd.ts&&(tn()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Q("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled."));hc(e);null==e.L&&(e.L=new Jo(e.h,e.Nf,t.lcevc),e.G&&(e.G.L=e.L))}else hc(e)}function pc(e,t){return new ji(e,t)}i=dc.prototype;i.destroy=function(){var e=this,t;return O((function(n){switch(n.g){case 1:if(e.l==Ld)return n.return();hc(e);e.l=Ld;t=ol(e.Oa,(function(){return{node:e.P,payload:Dd(),Eb:!1}}));return E(n,new Promise((function(e){t.bc=function(){};t.Id=function(){e()};t.Kb=function(){e()};t.onError=function(){e()};t.Kd=function(){e()}})),2);case 2:return E(n,e.Oa.destroy(),3);case 3:e.zd&&(e.zd.release(),e.zd=null);e.xc&&(e.xc.release(),e.xc=null);e.o&&(e.o.release(),e.o=null);e.pe=null;e.g=null;e.u=null;e.md=null;e.U=null;if(!e.F){n.B(4);break}return E(n,e.F.destroy(),5);case 5:e.F=null;case 4:e.s&&(e.s.release(),e.s=null),Vi.prototype.release.call(e),x(n)}}))};i.yc=function(e,t){t=void 0===t?!0:t;if(this.l==Ld)return Promise.reject(Cd());var n=Dd();n.mediaElement=e;Zt()||(t=!1);var i=t?this.Rb:this.X;e=ol(this.Oa,(function(){return{node:i,payload:n,Eb:!1}}));e.bc=function(){};return Rd(e)};i.Vf=function(e){this.Nf=e};i.detach=function(){var e=this;if(this.l==Ld)return Promise.reject(Cd());var t=ol(this.Oa,(function(){return{node:e.P,payload:Dd(),Eb:!1}}));t.bc=function(){};return Rd(t)};i.Te=function(e){var t=this;e=void 0===e?!0:e;if(this.l==Ld)return Promise.reject(Cd());this.Fc=!1;Zt()||(e=!1);hc(this);var n=Dd(),i=ol(this.Oa,(function(i){var r=i.mediaElement&&e?t.Rb:i.mediaElement?t.X:t.P;n.mediaElement=i.mediaElement;return{node:r,payload:n,Eb:!1}}));i.bc=function(){};return Rd(i)};i.qh=function(e){this.Gc=e};i.load=function(e,t,n){var i=this;this.Gc=null;this.Fc=!1;if(this.l==Ld)return Promise.reject(Cd());this.dispatchEvent(pc("loading"));var r=Dd();r.uri=e;r.Od=Date.now()/1e3;n&&(r.mimeType=n);void 0!==t&&(r.startTime=t);var a=gc(this,r)?this.Tb:this.Y,o=ol(this.Oa,(function(e){if(null==e.mediaElement)return null;r.mediaElement=e.mediaElement;return{node:a,payload:r,Eb:!0}}));this.u=new cc;o.bc=function(){};return new Promise((function(e,t){o.Kd=function(){return t(new ht(2,7,7002))};o.Id=function(){e();i.dispatchEvent(pc("loaded"))};o.Kb=function(){return t(Cd())};o.onError=function(e){return t(e)}}))};function gc(e,t){if(!Zt())return!0;var n=t.mimeType,i=t.uri||"";n||(n=io(i),n=Vd[n]);if(n){if(""==(t.mediaElement||cn()).canPlayType(n))return!1;if(!Zt()||!(n in ro||io(i)in ao)||("application/x-mpegurl"===n||"application/vnd.apple.mpegurl"===n)&&e.g.streaming.preferNativeHls)return!0;if(on())return e.g.streaming.useNativeHlsOnSafari}return!1}function mc(e,t,n){null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.xc.C(t.mediaElement,"error",(function(){var t=wd(e);t&&yd(e,t)})));e.h=t.mediaElement;return Promise.resolve()}function vc(e,t){var n,i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:return e.l!=Ld&&(e.l=Pd),n=e.zc.map((function(e){return e()})),e.zc=[],E(h,Promise.all(n),2);case 2:e.dispatchEvent(pc("unloading"));t.mimeType=null;t.startTime=null;t.uri=null;e.Na&&(e.Na.release(),e.Na=null);t.mediaElement&&e.o.sb();e.wd.stop();e.Sb&&(e.Sb.release(),e.Sb=null);e.ud&&(e.ud.stop(),e.ud=null);if(!e.K){h.B(3);break}return E(h,e.K.stop(),4);case 4:e.K=null,e.Bd=null;case 3:if(!e.s){h.B(5);break}return E(h,e.s.stop(),5);case 5:if(!e.j){h.B(7);break}return E(h,e.j.destroy(),8);case 8:e.j=null;case 7:e.H&&(e.H.release(),e.H=null);e.A&&(e.A.release(),e.A=null);if(!e.G){h.B(9);break}return E(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.D)e.D.onAssetUnload();if(!t.mediaElement||!t.mediaElement.src){h.B(11);break}return E(h,new Promise((function(e){return new $t(e).S(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.B(13);break}return E(h,e.m.destroy(),14);case 14:e.m=null;case 13:e.jc=null;e.N=null;if(e.i){i=c(e.i.variants);for(r=i.next();!r.done;r=i.next())for(a=r.value,o=c([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();l=c(e.i.textStreams);for(s=l.next();!s.done;s=l.next())d=s.value,d.segmentIndex&&d.segmentIndex.release()}e.i=null;e.u=new cc;e.we=null;nd(e);x(h)}}))}function yc(e,t){var n,i,r,a,o;return O((function(s){if(1==s.g)return n=e.g.textDisplayFactory,i=n(),e.we=n,r=jc(t.mediaElement,i,(function(t,n,i){_c(e,t,n,i)}),e.L),r.configure(e.g.mediaSource),a=e.g.manifest,o=a.segmentRelativeVttTiming,r.P=o,E(s,r.G,2);e.G=r;x(s)}))}function bc(e,t,n){var i,r,a,o;return O((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.F,e.jc=i,a=e,E(s,to(i,r,e.g.manifest.retryParameters,t.mimeType),2);a.Bd=s.h;e.K=e.Bd();o=Gi(e.g.manifest);n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0);e.K.configure(o);x(s)}))}function wc(e,t){var n=t.uri;t=e.F;e.Na=new fu((function(){return e.ec()}));e.Na.addEventListener("regionadd",(function(t){t=t.region;bd(e,"timelineregionadded",t);if(e.D)e.D.onDashTimedMetadata(t)}));e.ma=null;e.g.streaming.observeQualityChanges&&(e.ma=new lu((function(){return e.bb()})),e.ma.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position;n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t);e.dispatchEvent(pc("mediaqualitychanged",n))})));var i={networkingEngine:t,filter:function(t){return Qc(e,t)},makeTextStreamsForClosedCaptions:function(t){return Jc(e,t)},onTimelineRegionAdded:function(t){var n=e.Na;e:{var i=c(n.g);for(var r=i.next();!r.done;r=i.next())if(r=r.value,r.schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new ji("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return yd(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.s&&ed(e,n.keySystem,t)}},r=Date.now()/1e3;return new Di(function(){var t,a,o,s;return O((function(u){if(1==u.g)return t=e,E(u,e.K.start(n,i),2);t.i=u.h;a=pc("manifestparsed");e.dispatchEvent(a);if(0==e.i.variants.length)throw new ht(2,4,4036);Dc(e.i);o=Date.now()/1e3;s=o-r;e.u.F=s;x(u)}))}(),(function(){return e.K.stop()}))}function Tc(e,t){var n,i;return O((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=Rc(e,{Ib:e.F,onError:function(t){yd(e,t)},Jd:function(t){Td(e,t)},onExpirationUpdated:function(t,n){Ed(e,t,n)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&i&&(i=!1,e.u.j=Date.now()/1e3-n,e.L&&(t=e.L,t.g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.g.drm),E(r,ma(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?E(r,e.m.yc(t.mediaElement),3):E(r,Qc(e,e.i),0)}))}function Ec(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T;return O((function(A){switch(A.g){case 1:t.startTime=n.startTime;null!=e.Gc&&(t.startTime=e.Gc,e.Gc=null);i=t.mediaElement;r=t.uri;e.jc=r;e.H=new au({sd:function(){return i.playbackRate},od:function(){return i.defaultPlaybackRate},Oe:function(e){i.playbackRate=e},vf:function(e){i.currentTime+=e}});a=function(){return rd(e)};o=function(){return id(e)};e.o.C(i,"playing",a);e.o.C(i,"pause",a);e.o.C(i,"ended",a);e.o.C(i,"ratechange",o);fc(e,e.g);s=e.g.abrFactory;e.s&&e.pe==s||(e.pe=s,e.s=s(),"function"!=typeof e.s.setMediaElement&&(li("AbrManager","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),e.s.configure(e.g.abr));e.Ya=new yi(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel);e.Qb=e.g.preferredTextLanguage;e.Ec=e.g.preferredTextRole;e.Ac=e.g.preferForcedSubs;xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.s.init((function(t,n,i){e.j&&t!=e.j.j&&ld(e,t,!0,void 0===n?!1:n,void 0===i?0:i)}));e.s.setMediaElement(i);pn(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes);e.j=Fc(e);e.j.configure(e.g.streaming);e.l=Nd;i.textTracks&&e.o.C(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":Mc(e,t)}}));e.dispatchEvent(pc("streaming"));u=null;(l=e.j.j)||(u=od(e)?e.s.chooseVariant():null);d=[];h=l||u;f=c([h.video,h.audio]);for(p=f.next();!p.done;p=f.next())(g=p.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){A.B(2);break}return E(A,Promise.all(d),2);case 2:xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.A=Pc(e,t.startTime);e.Sb=Nc(e,t.Od);m=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal);Oc(e,m);if(l){A.B(4);break}ld(e,u,!0,!1,0);if(!e.g.streaming.startAtSegmentBoundary){A.B(4);break}v=e.A.fd();return E(A,td(u,v),6);case 6:y=A.h,e.A.Zd(y);case 4:return e.A.Yd(),b=e.Zb().find((function(e){return e.active})),b||((w=Xn(e.i.textStreams,e.Qb,e.Ec,e.Ac)[0]||null)&&lc(e.u.h,w,!0),u&&(w?(u.audio&&dd(e,u.audio,w)&&(e.$=!0),e.$&&e.G.u.setTextVisibility(!0),gd(e)):e.$=!1),w&&(e.g.streaming.alwaysStreamText||e.je())&&Lu(e.j,w)),E(A,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),md(e)),Rn(e.j?e.j.j:null,e.i),Sd(e.i),hd(e),od(e),e.i.variants.some((function(e){return e.primary})),e.T()&&(e.g.streaming.liveSync||e.i.serviceDescription)&&(T=function(){return ad(e)},e.o.C(i,"timeupdate",T)),e.Fc=!0,e.o.ja(i,"loadedmetadata",(function(){e.u.m=Date.now()/1e3-n.Od})),x(A)}}))}function xc(e,t,n){var i,r,a,o,s,u,l;return O((function(c){return 1==c.g?(i=Et,r=Date.now()/1e3,a=!0,e.m=Rc(e,{Ib:e.F,onError:function(t){yd(e,t)},Jd:function(t){Td(e,t)},onExpirationUpdated:function(t,n){Ed(e,t,n)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&a&&(a=!1,e.u.j=Date.now()/1e3-r)}}),e.m.configure(e.g.drm),o=n.uri||"",s=io(o),u=Vd[s],"application/x-mpegurl"==u&&on()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?Ct(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Y=!0,E(c,ma(e.m,[l],[]),2)):E(c,e.m.yc(t.mediaElement),0)}))}function Ac(e,t,n){function i(){return rd(e)}t.uri=n.uri;t.startTime=n.startTime;e.jc=t.uri;var r=t.mediaElement;e.A=new Ws(r);var a=!1;e.zc.push((function(){a=!0}));null!=t.startTime&&e.A.Zd(t.startTime);e.H=new au({sd:function(){return r.playbackRate},od:function(){return r.defaultPlaybackRate},Oe:function(e){r.playbackRate=e},vf:function(e){r.currentTime+=e}});Oc(e,e.g.streaming.rebufferingGoal);e.o.C(r,"playing",i);e.o.C(r,"pause",i);e.o.C(r,"ended",i);e.o.C(r,"ratechange",(function(){return id(e)}));"none"!=r.preload&&e.o.ja(r,"loadedmetadata",(function(){e.u.m=Date.now()/1e3-n.Od}));r.audioTracks&&(e.o.C(r.audioTracks,"addtrack",(function(){return hd(e)})),e.o.C(r.audioTracks,"removetrack",(function(){return hd(e)})),e.o.C(r.audioTracks,"change",(function(){return hd(e)})));r.textTracks&&(e.o.C(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":kc(e,t);break;case"chapters":Mc(e,t);break;default:hd(e)}})),e.o.C(r.textTracks,"removetrack",(function(){return hd(e)})),e.o.C(r.textTracks,"change",(function(){return hd(e)})));var o=io(t.uri);r.src=Cl(e.U,t.uri,Vd[o]);(rn()||ln("Web0S"))&&r.load();e.l=Od;e.dispatchEvent(pc("streaming"));var s=new Mi;Bs(r,HTMLMediaElement.HAVE_METADATA,e.o,(function(){e.A.Yd();s.resolve()}));Bs(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,(function(){var t;return O((function(n){if(1==n.g)return Sc(e),t=Gc(e),t.find((function(e){return"disabled"!=e.mode}))?(0<t.length&&(e.$=!0),n.B(2)):E(n,new Promise((function(t){e.o.ja(r.textTracks,"change",t);new $t(t).S(1)})),2);if(a)return n.return();Ic(e);x(n)}))}));r.error?s.reject(wd(e)):"none"==r.preload&&(Q('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve());e.o.ja(r,"error",(function(){s.reject(wd(e))}));return new Di(s,(function(){s.reject(new ht(2,7,7001));return Promise.resolve()})).ea((function(){e.T()&&e.g.streaming.liveSync&&e.o.C(r,"timeupdate",(function(){return ad(e)}));e.Fc=!0}))}function Sc(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Bf(t,e.g.preferredVariantRole)}function Ic(e){var t=e.g.preferredTextLanguage;""!=t&&e.Cf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function kc(e,t){if("metadata"==t.kind){t.mode="hidden";e.o.C(t,"cuechange",(function(){if(t.activeCues)for(var n=c(t.activeCues),i=n.next();!i.done;i=n.next())if(i=i.value,Cc(e,i.startTime,i.endTime,i.type,i.value),e.D)e.D.onCueMetadataChange(i.value)}));var n=new $t((function(){var t=Hc(e);t=c(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"})).ic().S(.5);e.zc.push((function(){n.stop()}))}}function _c(e,t,n,i){t=c(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&r.cueTime&&r.frames){var a=r.cueTime+n,o=i;o&&a>o&&(o=a);for(var s=c(r.frames),u=s.next();!u.done;u=s.next())Cc(e,a,o,"org.id3",u.value);if(e.D)e.D.onHlsTimedMetadata(r,a)}}function Cc(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r);e.dispatchEvent(pc("metadata",t))}function Mc(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new $t((function(){t.mode="hidden"})).ic().S(.5);e.zc.push((function(){n.stop()}))}}function Dc(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function Rc(e,t){return new fa(t,e.g.drm.updateExpirationTime)}function Lc(e){return new Ki((function(t,n){e.s&&e.s.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i);e.dispatchEvent(pc("downloadheadersreceived",t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r);e.dispatchEvent(pc("downloadfailed",t))}),(function(t,n,i){var r=e.U;i=void 0===i?{}:i;if(r.g.enabled)if("HEAD"===n.method)Dl(r,n);else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var a="d";break e;case 3:case 2:a="h";break e;case 5:a="s";break e}a=void 0}r.o=a}Dl(r,n,{ot:jl,su:!r.i})}}catch(e){$("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case er:t=i;try{if(r.g.enabled){var o=t.segment;a=0;o&&(a=o.endTime-o.startTime);var s={d:1e3*a,st:r.h.T()?"l":"v"};s.ot=Rl(t);var u=s.ot===Fl||s.ot===Bl||s.ot===Vl||s.ot===ql,l=t.stream;l&&(u&&(s.bl=Ll(r,l.type)),l.bandwidth&&(s.br=l.bandwidth/1e3));u&&s.ot!==ql&&(s.tb=Pl(r,s.ot)/1e3);Dl(r,n,s)}}catch(e){$("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Dl(r,n,{ot:"k"});break;case 4:Dl(r,n,{ot:"o"})}}))}function Pc(e,t){return new Ys(e.h,e.i,e.g.streaming,t,(function(){e.Sb&&uu(e.Sb,!0);e.j&&e.j.Uc();e.N&&Uc(e)}),(function(t){return e.dispatchEvent(t)}))}function Nc(e,t){t=new pu(e.Na,e.T()||0<t);t.addEventListener("enter",(function(t){bd(e,"timelineregionenter",t.region)}));t.addEventListener("exit",(function(t){bd(e,"timelineregionexit",t.region)}));t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(bd(e,"timelineregionenter",n),bd(e,"timelineregionexit",n))}));var n=new su(e.h);n.g.add(t);e.ma&&n.g.add(e.ma);return n}function Oc(e,t){e.N=new xi;e.N.g=Si;Ai(e.N,t,Math.min(.5,t/2));nd(e);e.ud=new $t((function(){Uc(e)})).Ca(.25)}function Uc(e){switch(e.l){case Od:if(e.h.ended)var t=!0;else{var n=mo(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case Nd:e:if(e.h.ended||os(e.G))t=!0;else{if(e.i.presentationTimeline.T()){n=e.i.presentationTimeline.Cb();var i=mo(e.h.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=yo(e.h.buffered,e.h.currentTime);n=e.N;var r=t,a=n.h.get(n.g);t=n.g;i=r||i>=a?Ii:Si;n.g=i;t!=i&&nd(e)}function jc(e,t,n,i){return new ts(e,t,n,i)}function Bc(e){return new _l({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},bb:function(){return e.bb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},qd:function(){return e.qd()},Ab:function(){return e.Ab()},rb:function(){return e.rb()},T:function(){return e.T()}},e.g.cmcd)}function Fc(e){return new ku(e.i,{rd:function(){return e.A?e.A.fd():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},R:e.G,Ib:e.F,onError:function(t){return yd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Ug:function(){e.K&&e.K.update&&e.K.update()},ye:function(t,n,i){e.A&&e.A.wf();Uc(e);t=(new Map).set("start",t).set("end",n).set("contentType",i);e.dispatchEvent(pc("segmentappended",t))},Tg:function(t,n){(n=n.re)&&e.ma&&du(e.ma,n,t)},Ze:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&!i.K&&["audio","video"].includes(t)){n=new Hr(he(n));var r=0,a=c(n.data);for(t=a.next();!t.done;t=a.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{r=new Uint8Array(r);a=0;n=c(n.data);for(t=n.next();!t.done;t=n.next())t=t.value,r.set(t,a),a+=t.length;Aa(i,"cenc",r);i=i.l}}else i=Promise.resolve();return i},Vg:function(t,n,i){_c(e,t,n,i)},ae:function(t,n){return e.ae(t,n)}})}i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Xl(e,t));e.streaming&&"forceTransmuxTS"in e.streaming&&(li("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS);e.streaming&&"forceTransmux"in e.streaming&&(li("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux);e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var n=nc(this.g,e,Yc(this));Vc(this);return n};function Vc(e){if(e.K){var t=Gi(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0);e.K.configure(t)}e.m&&e.m.configure(e.g.drm);if(e.j){e.j.configure(e.g.streaming);try{Zc(e,e.i)}catch(t){yd(e,t)}e.s&&od(e);t=e.j.j;!t||t.allowedByApplication&&t.allowedByKeySystem||ud(e)}e.F&&e.F.Me(e.g.streaming.forceHTTPS);if(e.G&&(e.G.configure(e.g.mediaSource),e.G.P=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.we!=t)){var n=t(),i=e.G,r=i.u;i.u=n;r&&(n.setTextVisibility(r.isTextVisible()),r.destroy());i.g&&(i.g.j=n);e.we=t;e.j&&(t=e.j,(n=t.h.get(Tt))&&Pu(t,n.stream,!0,0,!0))}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),md(e));e.N&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Ai(e.N,t,Math.min(.5,t/2)));e.i&&xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.D&&e.D.configure(e.g.ads);e.U&&e.U.configure(e.g.cmcd)}i.getConfiguration=function(){var e=Yc(this);nc(e,this.g,Yc(this));return e};i.ig=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;t=Math.min(this.h.currentTime+t,this.ec().end);if(e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0};i.dh=function(){for(var e in this.g)delete this.g[e];nc(this.g,Yc(this),Yc(this));Vc(this)};i.og=function(){return this.l};i.rg=function(){return this.i?this.i.type:null};i.tg=function(){return this.h};i.Ab=function(){return this.F};i.de=function(){return this.jc};i.kf=function(){return this.D?this.D:null};i.T=function(){return this.i?this.i.presentationTimeline.T():this.h&&this.h.src?Infinity==this.h.duration:!1};i.Gb=function(){return this.i?this.i.presentationTimeline.Gb():!1};i.Kg=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight:!1};i.ec=function(){if(!this.Fc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Yb(),end:e.cb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}};i.Hg=function(){this.T()&&(this.h.currentTime=this.ec().end)};i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""};i.drmInfo=function(){return this.m?this.m.g:null};i.Ic=function(){return this.m?this.m.Ic():Infinity};i.ce=function(){return this.m?this.m.ce():[]};i.pd=function(){return this.m?this.m.pd():{}};i.he=function(){return this.N?this.N.g==Si:!1};i.qd=function(){return this.h?this.H?this.H.i:1:0};i.Mf=function(e){0==e?Q("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.H.set(e),this.l==Nd&&(this.s.playbackRateChanged(e),Du(this.j,1<Math.abs(e))))};i.$e=function(){var e=this.H.od();this.l==Od&&this.H.set(e);this.l==Nd&&(this.H.set(e),this.s.playbackRateChanged(e),Du(this.j,!1))};i.rb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=c(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,qn(r)){var a=Un(r);a.active=r==e;a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0);a.active&&n++;t.push(a)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map((function(e){return Gn(e)})):[]};i.Zb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=c(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=jn(i);r.active=i==e;t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Gc(this).map((function(e){return Vn(e)})):[]};i.ng=function(){return this.i?this.i.imageStreams.map((function(e){return Bn(e)})):[]};i.Bg=function(e,t){var n=this,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,w,T,x;return O((function(A){if(1==A.g)return n.i?(i=n.i.imageStreams.find((function(t){return t.id==e})))?i.segmentIndex?A.B(3):E(A,i.createSegmentIndex(),3):A.return(null):A.B(2);if(2!=A.g){r=i.segmentIndex.find(t);if(null==r)return A.return(null);a=i.segmentIndex.get(r);o=a.tilesLayout||i.tilesLayout;s=/(\d+)x(\d+)/.exec(o);if(!s)return A.return(null);u=i.width||0;l=i.height||0;c=parseInt(s[1],10);d=parseInt(s[2],10);h=u/c;f=l/d;p=c*d;g=a.j-a.startTime;m=a.D||g/p;v=a.startTime;b=y=0;1<p&&(w=Math.floor((t-a.startTime)/m),v=a.startTime+w*m,y=w%c*h,b=Math.floor(w/c)*f);T=!1;if(x=a.A)T=!0,f=x.height,y=x.positionX,b=x.positionY,h=x.width;return A.return({imageHeight:l,imageWidth:u,height:f,positionX:y,positionY:b,startTime:v,duration:m,uris:a.wa(),width:h,sprite:T})}return A.return(null)}))};i.Df=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(lc(this.u.h,t,!1),Lu(this.j,t),pd(this),this.Qb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Gc(this);t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Fn(n)==e.id?n.mode=this.$?"showing":"hidden":n.mode="disabled";pd(this)}};i.Ke=function(e,t,n){t=void 0===t?!1:t;n=void 0===n?0:n;if(this.i&&this.j){this.g.abr.enabled&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&qn(i)&&(ld(this,i,!1,t,n),this.Ya=new vi(i),od(this))}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=c(t),n=t.next();!n.done;n=t.next())if(n=n.value,Fn(n)==e.id){cd(this,n);break}};i.hg=function(){return _d(this.rb())};i.zg=function(){return _d(this.Zb())};i.gg=function(){return Array.from(kd(this.rb()))};i.yg=function(){return Array.from(kd(this.Zb()))};i.Bf=function(e,t,n,i){n=void 0===n?0:n;i=void 0===i?0:i;if(this.i&&this.A){this.Ya=new yi(e,t||"",n,"","");e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):Infinity:0};t=this.j.j;var r=this.Ya.create(this.i.variants);n=null;r=c(r.values());for(var a=r.next();!a.done;a=r.next())if(a=a.value,!n||e(n,t)>e(a,t))n=a;n?(e=Un(n),this.Ke(e,!0,i)):ud(this)}else this.h&&this.h.audioTracks&&(i=Xn(this.rb(),e,t||"",!1)[0])&&this.Ke(i)};i.Cf=function(e,t,n){n=void 0===n?!1:n;if(this.i&&this.A){if(this.Qb=e,this.Ec=t||"",this.Ac=n,(e=Xn(this.i.textStreams,this.Qb,this.Ec,this.Ac)[0]||null)&&e!=this.j.o&&(lc(this.u.h,e,!1),this.g.streaming.alwaysStreamText||this.je()))Lu(this.j,e),pd(this)}else(e=Xn(this.Zb(),e,t||"",n)[0])&&this.Df(e)};i.gh=function(e,t,n){t=void 0===t?!0:t;n=void 0===n?0:n;if(this.i&&this.A){for(var i=null,r=c(this.i.variants),a=r.next();!a.done;a=r.next())if(a=a.value,a.audio.label==e){i=a;break}null!=i&&(this.Ya=new yi(i.language,"",0,"",e),ud(this,t,n))}else if(this.h&&this.h.audioTracks){n=Array.from(this.h.audioTracks);t=null;n=c(n);for(i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&cd(this,t)}};i.je=function(){var e=this.$;return this.G?this.G.u.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Gc(this).some((function(e){return"showing"==e.mode})):e};i.lf=function(){return this.h&&this.h.src&&this.h.textTracks?qc(this).map((function(e){return Vn(e)})):[]};i.jg=function(e){var t=qt(e),n=qc(this).filter((function(e){return qt(e.language)==t}));if(!n||!n.length)return[];e=[];var i=new Set;n=c(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=c(r.cues);for(var a=r.next();!a.done;a=r.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text);o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime};i.has(a)||(e.push(o),i.add(a))}}return e};function Gc(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Hc(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"==e.kind}))}function qc(e){return Array.from(e.h.textTracks).filter((function(e){return"chapters"==e.kind}))}i.lh=function(e){e=!!e;if(this.$!=e){this.$=e;if(this.l==Nd)this.G.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||(e=Xn(this.i.textStreams,this.Qb,this.Ec,this.Ac),0<e.length&&(Lu(this.j,e[0]),pd(this))):Mu(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Gc(this);t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}gd(this)}};i.wg=function(){if(!this.T())return null;var e=this.Oa.l,t=0;if(this.A)t=this.A.fd();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null};i.mf=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null};i.bb=function(){if(this.l==Nd)return this.G.bb();var e={total:[],audio:[],video:[],text:[]};this.l==Od&&(e.total=wo(this.h.buffered));return e};i.getStats=function(){if(this.l!=Nd&&this.l!=Od)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};rd(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.u;t=Math.round(100*t);n.i=isNaN(n.i)?t:Math.max(n.i,t)}this.A&&(this.u.N=this.A.We(),this.u.P=this.A.Xe());if(e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality();t=this.u;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames);t.K=i;this.u.H=Number(n.corruptedVideoFrames)}this.m?(n=this.m,n=n.H?n.H:NaN):n=NaN;this.u.s=n;if(this.l==Nd){if(n=this.j.j)this.u.A=(this.H?this.H.i:1)*n.bandwidth;n&&n.video&&(t=this.u,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i);this.T()&&(n=this.mf().valueOf()+1e3*this.ec().end,this.u.D=(Date.now()-n)/1e3);this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g);n=this.s.getBandwidthEstimate();this.u.u=n}this.l==Od&&(n=this.u,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.u;e=r.o;n=r.l;t=r.A;i=r.K;var a=r.L,o=r.H,s=r.P,u=r.N,l=r.u,d=r.i,h=r.m,f=r.F,p=r.j,g=oc(r.g,"playing"),m=oc(r.g,"paused"),v=oc(r.g,"buffering"),y=r.s,b=r.D,w=r.G,T=sc(r.g),E=[];r=c(r.h.g);for(var x=r.next();!x.done;x=r.next())x=x.value,E.push({timestamp:x.timestamp,id:x.id,type:x.type,fromAdaptation:x.fromAdaptation,bandwidth:x.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:w,stateHistory:T,switchHistory:E}};i.Sf=function(e,t,n,i,r,a,o){o=void 0===o?!1:o;var s=this,u,l,c,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:if(s.l!=Nd&&s.l!=Od)throw new ht(1,7,7004);if(i){b.B(2);break}return E(b,zc(s,e),3);case 3:i=b.h;case 2:u=[];if(s.D)try{u=s.D.getServerSideCuePoints()}catch(e){}if(s.l!=Od){b.B(4);break}o&&(n="forced");return E(b,Kc(s,e,t,n,i,a||"",u),5);case 5:l=s.Zb();if(c=l.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return hd(s),b.return(c);throw new ht(1,2,2012);case 4:d=Et;h=s.i.presentationTimeline.getDuration();if(Infinity==h)throw new ht(1,4,4033);if(!u.length){b.B(6);break}return E(b,Xc(s,e,s.F,s.g.streaming.retryParameters),7);case 7:f=b.h,p=Wc(s,f,i,u),g=new Blob([p],{type:"text/vtt"}),e=Ms(g),i="text/vtt";case 6:m={id:s.De++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:nu(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:d.ca,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0};v=St(m.mimeType,m.codecs);y=Lt(v);if(!y)throw new ht(2,2,2014,i);s.i.textStreams.push(m);hd(s);return b.return(jn(m))}}))};i.Tf=function(e,t){var n=this,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:if(n.l!=Nd&&n.l!=Od)throw new ht(1,7,7004);if(n.l==Od)throw new ht(1,2,2016);if(t){w.B(2);break}return E(w,zc(n,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new ht(1,2,2017,e);i=Et;r=n.i.presentationTimeline.getDuration();if(Infinity==r)throw new ht(1,4,4045);return E(w,Xc(n,e,n.F,n.g.streaming.retryParameters),4);case 4:a=w.h;o=Bt[t];if(!o)throw new ht(2,2,2014,t);s=o();u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0};l=he(a);d=s.parseMedia(l,u);h=[];f={};p=c(d);for(g=p.next();!g.done;f={nc:f.nc},g=p.next())m=g.value,f.nc=vt([e],[m.payload])[0],v=new fo(m.startTime,m.endTime,function(e){return function(){return[e.nc]}}(f),0,null,null,0,0,Infinity),f.nc.includes("#xywh")&&(y=f.nc.split("#xywh=")[1].split(","),4===y.length&&v.If({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),h.push(v);b={id:n.De++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new eu(h),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.wc,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0};n.i.imageStreams.push(b);hd(n);return w.return(Bn(b))}}))};i.Rf=function(e,t,n){var i=this,r,a,o,s;return O((function(u){switch(u.g){case 1:if(i.l!=Nd&&i.l!=Od)throw new ht(1,7,7004);if(n){u.B(2);break}return E(u,zc(i,e),3);case 3:n=u.h;case 2:r=[];if(i.D)try{r=i.D.getServerSideCuePoints()}catch(e){}return E(u,Kc(i,e,t,"chapters",n,"",r),4);case 4:a=u.h;o=i.lf();s=o.find((function(e){return e.language==t}));if(!s){u.B(5);break}return E(u,new Promise((function(e,t){i.o.ja(a,"load",e);i.o.ja(a,"error",(function(){t(new ht(1,2,2015))}))})),6);case 6:return u.return(s);case 5:throw new ht(1,2,2012)}}))};function zc(e,t){var n,i;return O((function(r){switch(r.g){case 1:n=io(t);if(i=Gd[n])return r.return(i);A(r,2);return E(r,no(t,e.F,e.g.streaming.retryParameters),4);case 4:i=r.h;I(r,3);break;case 2:k(r);case 3:if(i)return r.return(i);throw new ht(1,2,2011,n)}}))}function Kc(e,t,n,i,r,a,o){var s,u,l,c;return O((function(d){if(1==d.g)return"text/vtt"!=r||o.length?E(d,Xc(e,t,e.F,e.g.streaming.retryParameters),3):d.B(2);2!=d.g&&(s=d.h,u=Wc(e,s,r,o),l=new Blob([u],{type:"text/vtt"}),t=Ms(l),r="text/vtt");c=document.createElement("track");var h=e.U,f=t;try{if(h.g.enabled){var p=Ml(h);p.ot=Hl;p.su=!0;var g=Nl(p);var m=Ul(f,g)}else m=f}catch(e){$("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),m=f}c.src=m;c.label=a;c.kind=i;c.srclang=n;e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous");e.h.appendChild(c);return d.return(c)}))}function Xc(e,t,n,i){var r,a,o;return O((function(s){if(1==s.g){r=er;a=Wi([t],i);a.method="GET";var u=e.U;try{u.g.enabled&&Dl(u,a,{ot:Hl,su:!0})}catch(e){$("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return E(s,n.request(r,a).promise,2)}o=s.h;return s.return(o.data)}))}function Wc(e,t,n,i){var r=Bt[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=he(t),t=n.parseMedia(t,e),kl(t,i);throw new ht(2,2,2014,n)}i.Ne=function(e,t){this.Ce.width=e;this.Ce.height=t};i.Ge=function(e){if(this.l==Nd){var t=this.j;e=void 0===e?.1:e;if(t.l.g)t=!1;else if(t.s)t=!1;else{for(var n=c(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.Mc||i.ua||i.Xa||(i.Mc=!1,el(t,i,e));t=!0}}else t=!1;return t};i.pg=function(){Q("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.i};i.qg=function(){return this.Bd};function Yc(e){var t=tc();t.streaming.failureCallback=function(t){if(e.T()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1);null!=n&&(t.severity=1,e.Ge(n))}};t.textDisplayFactory=function(){return e.md?new yl(e.h,e.md):new fl(e.h)};return t}i.Kf=function(e){this.md=e};function Jc(e,t){for(var n=new Set,i=c(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,"application/cea-608"!=r.mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);i=c(t.variants);for(r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=c(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new ru,l=r.closedCaptions.get(o);s={id:e.De++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:Tt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1};t.textStreams.push(s);n.add(o)}}function Qc(e,t){return O((function(n){if(1==n.g)return E(n,$c(e,t),2);Zc(e,t);x(n)}))}function $c(e,t){var n;return O((function(i){if(1==i.g)return n=e.j?e.j.j:null,E(i,An(n,t),2);Sd(t);x(i)}))}function Zc(e,t){if(e.l!=Ld){for(var n=e.g.restrictions,i=e.Ce,r=!1,a=c(t.variants),o=a.next();!o.done;o=a.next()){o=o.value;var s=o.allowedByApplication;o.allowedByApplication=xn(o,n,i);s!=o.allowedByApplication&&(r=!0)}r&&e.j&&hd(e);if((n=e.m?e.m.g:null)&&e.m.s)for(i=c(t.variants),r=i.next();!r.done;r=i.next())r=r.value,ed(e,n.keySystem,r.video),ed(e,n.keySystem,r.audio);Ad(e,t)}}function ed(e,t,n){if(n){n=c(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=c(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,Aa(e.m,r.initDataType,r.initData)}}}function td(e,t){var n,i,r,a,o;return O((function(s){if(1==s.g)return n=e.audio,i=e.video,r=function(e,t){var n,i,r;return O((function(a){if(1==a.g)return e?E(a,e.createSegmentIndex(),2):a.return(null);i=(n=e.segmentIndex.zb(t))?n.next().value:null;if(!i)return a.return(null);r=i.startTime;return a.return(r)}))},E(s,r(n,t),2);if(3!=s.g)return a=s.h,E(s,r(i,t),3);o=s.h;return null!=o&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}function nd(e){var t=e.he();if(e.u&&e.N&&e.A){var n=e.H;n.j=t;ou(n);e.U&&(n=e.U,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t);rd(e)}t=(new Map).set("buffering",t);e.dispatchEvent(pc("buffering",t))}function id(e){var t=e.h.playbackRate;0!=t&&(e.H&&e.H.set(t),t=pc("ratechange"),e.dispatchEvent(t))}function rd(e){if(e.u&&e.N){var t=e.u.g;e.N.g==Si?ac(t,"buffering"):e.h.paused?ac(t,"paused"):e.h.ended?ac(t,"ended"):ac(t,"playing")}}function ad(e){if(e.T()){var t=e.ec();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync){var n=e.g.streaming.liveSyncMaxLatency;var i=e.g.streaming.liveSyncPlaybackRate}else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,i=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var r=e.h.playbackRate,a=t.end-e.h.currentTime,o=0;if(e.l==Od){var s=e.h.buffered;0<s.length&&(o=s.end(s.length-1),o=Math.max(i,o-t.end))}n&&i&&a-o>n?r!=i&&e.Mf(i):1!==r&&0!==r&&e.$e()}}}function od(e){try{Ad(e,e.i)}catch(t){return yd(e,t),!1}var t=zn(e.i.variants);t=e.Ya.create(t);e.s.setVariants(Array.from(t.values()));return!0}function sd(e){function t(e){var t="";e.video&&(t+="video:"+e.video.id);e.audio&&(t=t+(t?"&":"")+("audio:"+e.audio.id));return t}for(var n=Date.now()/1e3,i=!1,r=c(e.i.variants),a=r.next();!a.done;a=r.next())a=a.value,0<a.disabledUntilTime&&a.disabledUntilTime<=n&&(a.disabledUntilTime=0,i=!0,ne("Re-enabled variant with "+t(a)));e.i.variants.every((function(e){return 0===e.disabledUntilTime}))&&e.wd.stop();i&&ud(e,!0,void 0,!1,!1)}function ud(e,t,n,i,r){t=void 0===t?!0:t;n=void 0===n?0:n;i=void 0===i?!1:i;r=void 0===r?!0:r;var a;(a=od(e)?e.s.chooseVariant():null)&&ld(e,a,r,t,n,i)}function ld(e,t,n,i,r,a){a=void 0===a?!1:a;var o=e.j.j;if(t==o)i&&Ru(e.j,t,i,r,!0);else{var s=e.u.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}));Ru(e.j,t,i,r,a,n);i=null;o&&(i=Un(o));t=Un(t);n?(n=(new Map).set("oldTrack",i).set("newTrack",t),e.L&&Qo(e.L,t),n=pc("adaptation",n),Id(e,n)):fd(e,i,t)}}function cd(e,t){var n=Array.from(e.h.audioTracks).find((function(e){return e.enabled}));t.enabled=!0;t.id!==n.id&&(n.enabled=!1);n=Gn(n);t=Gn(t);fd(e,n,t)}function dd(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var i=qt(e.g.preferredTextLanguage);n=qt(n.language);if(2==e.g.autoShowText)return Vt(n,i);if(3==e.g.autoShowText)return e=qt(t.language),Vt(n,i)&&!Vt(e,n);Q("Invalid autoShowText setting!");return!1}function hd(e){var t=pc("trackschanged");Id(e,t)}function fd(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n);e.L&&Qo(e.L,n);n=pc("variantchanged",t);Id(e,n)}function pd(e){var t=pc("textchanged");Id(e,t)}function gd(e){var t=pc("texttrackvisibility");Id(e,t)}function md(e){e.g.abr.enabled||vd(e);var t=(new Map).set("newStatus",e.g.abr.enabled);Id(e,pc("abrstatuschanged",t))}function vd(e,t){t=void 0===t?!0:t;if(e.l==Nd){e.wd.stop();for(var n=c(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&od(e)}}i.ae=function(e,t){if(!this.g.abr.enabled||this.l===Ld||!navigator.onLine)return!1;if(this.i.variants.some((function(t){return(t=t[e.type])&&t.id!==e.id?"audio"==e.type?e.language===t.language:!0:!1}))){for(var n=c(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var r=i[e.type];r&&r.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}this.wd.Ca(1);t=this.bb().video.reduce((function(e,t){return e+t.end-t.start}),0);ud(this,!0,t,!0,!1);return!0}return!1};function yd(e,t){if(e.l!=Ld){2===t.severity&&vd(e,!1);var n=pc("error",(new Map).set("detail",t));e.dispatchEvent(n);n.defaultPrevented&&(t.handled=!0)}}function bd(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement});e.dispatchEvent(pc(t,n))}function wd(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16));return new ht(2,3,3016,t,n,e.h.error.message)}function Td(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length){n=c(e.i.variants);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=[];a.audio&&o.push(a.audio);a.video&&o.push(a.video);o=c(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;s=a.allowedByKeySystem;if(u.keyIds.size){a.allowedByKeySystem=!0;u=c(u.keyIds);for(var l=u.next();!l.done;l=u.next())l=l.value,l=t[i?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!jd.includes(l)}s!=a.allowedByKeySystem&&(r=!0)}}}if(!r||od(e))(t=e.j.j)&&!t.allowedByKeySystem&&ud(e),r&&hd(e)}}function Ed(e,t,n){if(e.K&&e.K.onExpirationUpdated)e.K.onExpirationUpdated(t,n);t=pc("expirationupdated");e.dispatchEvent(t)}function xd(e,t,n){0<t&&(e.T()||e.Jf(t));t=e.getDuration();n<t&&(e.T()||e.Aa(n))}function Ad(e,t){e=e.m?e.m.pd():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var i=!1,r=!1,a=new Set,o=new Set;t=c(t.variants);for(var s=t.next();!s.done;s=t.next()){s=s.value;var u=[];s.audio&&u.push(s.audio);s.video&&u.push(s.video);u=c(u);for(var l=u.next();!l.done;l=u.next())if(l=l.value,l.keyIds.size){l=c(l.keyIds);for(var d=l.next();!d.done;d=l.next()){d=d.value;var h=e[n?"00":d];h?jd.includes(h)&&o.add(h):a.add(d)}}s.allowedByApplication?s.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)},new ht(2,4,4012,e)}function Sd(e){if(!e.variants.some(qn))throw new ht(2,4,4032)}function Id(e,t){O((function(n){if(1==n.g)return E(n,Promise.resolve(),2);e.l!=Ld&&e.dispatchEvent(t);x(n)}))}function kd(e){var t=new Set;e=c(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(qt(n.language)):t.add("und");return t}function _d(e){var t=new Map,n=new Map;e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",a=[];i.language&&(r=qt(i.language));"variant"==i.type?a=i.audioRoles:a=i.roles;a&&a.length||(a=[""]);t.has(r)||t.set(r,new Set);a=c(a);for(var o=a.next();!o.done;o=a.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var s=[];t.forEach((function(e,t){e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i));s.push({language:t,role:i,label:r})}}));return s}function Cd(){return new ht(2,7,7e3)}function Md(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Dd(){return{mediaElement:null,mimeType:null,startTime:null,Od:NaN,uri:null}}function Rd(e){return new Promise((function(t,n){e.Kb=function(){return n(Cd())};e.Id=function(){return t()};e.onError=function(e){return n(e)};e.Kd=function(){return n(Cd())}}))}q("shaka.Player",dc);dc.prototype.setVideoContainer=dc.prototype.Kf;dc.prototype.getManifestParserFactory=dc.prototype.qg;dc.prototype.getManifest=dc.prototype.pg;dc.prototype.retryStreaming=dc.prototype.Ge;dc.prototype.setMaxHardwareResolution=dc.prototype.Ne;dc.prototype.addChaptersTrack=dc.prototype.Rf;dc.prototype.addThumbnailsTrack=dc.prototype.Tf;dc.prototype.addTextTrackAsync=dc.prototype.Sf;dc.prototype.getStats=dc.prototype.getStats;dc.prototype.getBufferedInfo=dc.prototype.bb;dc.prototype.getPresentationStartTimeAsDate=dc.prototype.mf;dc.prototype.getPlayheadTimeAsDate=dc.prototype.wg;dc.prototype.setTextTrackVisibility=dc.prototype.lh;dc.prototype.getChapters=dc.prototype.jg;dc.prototype.getChaptersTracks=dc.prototype.lf;dc.prototype.isTextTrackVisible=dc.prototype.je;dc.prototype.selectVariantsByLabel=dc.prototype.gh;dc.prototype.selectTextLanguage=dc.prototype.Cf;dc.prototype.selectAudioLanguage=dc.prototype.Bf;dc.prototype.getTextLanguages=dc.prototype.yg;dc.prototype.getAudioLanguages=dc.prototype.gg;dc.prototype.getTextLanguagesAndRoles=dc.prototype.zg;dc.prototype.getAudioLanguagesAndRoles=dc.prototype.hg;dc.prototype.selectVariantTrack=dc.prototype.Ke;dc.prototype.selectTextTrack=dc.prototype.Df;dc.prototype.getThumbnails=dc.prototype.Bg;dc.prototype.getImageTracks=dc.prototype.ng;dc.prototype.getTextTracks=dc.prototype.Zb;dc.prototype.getVariantTracks=dc.prototype.rb;dc.prototype.cancelTrickPlay=dc.prototype.$e;dc.prototype.trickPlay=dc.prototype.Mf;dc.prototype.getPlaybackRate=dc.prototype.qd;dc.prototype.isBuffering=dc.prototype.he;dc.prototype.getKeyStatuses=dc.prototype.pd;dc.prototype.getActiveSessionsMetadata=dc.prototype.ce;dc.prototype.getExpiration=dc.prototype.Ic;dc.prototype.drmInfo=dc.prototype.drmInfo;dc.prototype.keySystem=dc.prototype.keySystem;dc.prototype.goToLive=dc.prototype.Hg;dc.prototype.seekRange=dc.prototype.ec;dc.prototype.isAudioOnly=dc.prototype.Kg;dc.prototype.isInProgress=dc.prototype.Gb;dc.prototype.isLive=dc.prototype.T;dc.prototype.getAdManager=dc.prototype.kf;dc.prototype.getAssetUri=dc.prototype.de;dc.prototype.getNetworkingEngine=dc.prototype.Ab;dc.prototype.getMediaElement=dc.prototype.tg;dc.prototype.getManifestType=dc.prototype.rg;dc.prototype.getLoadMode=dc.prototype.og;dc.prototype.resetConfiguration=dc.prototype.dh;dc.prototype.getBufferFullness=dc.prototype.ig;dc.prototype.getConfiguration=dc.prototype.getConfiguration;dc.prototype.configure=dc.prototype.configure;dc.prototype.load=dc.prototype.load;dc.prototype.updateStartTime=dc.prototype.qh;dc.prototype.unload=dc.prototype.Te;dc.prototype.detach=dc.prototype.detach;dc.prototype.attachCanvas=dc.prototype.Vf;dc.prototype.attach=dc.prototype.yc;dc.probeSupport=function(e){e=void 0===e?!0:e;var t,n,i,r,a,o;return O((function(s){if(1==s.g)return t={},e?E(s,ja(),3):s.B(2);2!=s.g&&(t=s.h);var u={};if(Zt()){for(var l in ro)u[l]=!0;for(var h in ao)u[h]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};h=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var f=h.next();!f.done;f=h.next())f=f.value,u[f]=Zt()?!!ro[f]:en(f);for(var p in l)u[p]=Zt()?!!ao[p]:en(l[p]);n=u;p='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(d(Dt));u={};p=c(p);for(l=p.next();!l.done;l=p.next())l=l.value,u[l]=Zt()?Lt(l)?!0:re(l)||(ze(l)?!0:!1):en(l),h=l.split(";")[0],u[h]=u[h]||u[l];i=u;r={manifest:n,media:i,drm:t};a=Bd;for(o in a)r[o]=a[o]();return s.return(r)}))};dc.isBrowserSupported=function(){e.Promise||Q("A Promise implementation or polyfill is required");if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||ln("Trident/"))return!1;var t=un();return t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)?!1:Zt()?!0:en("application/x-mpegurl")};dc.setAdManagerFactory=function(e){Fd=e};dc.registerSupportPlugin=function(e,t){Bd[e]=t};dc.prototype.destroy=dc.prototype.destroy;var Ld=0,Pd=1,Nd=2,Od=3;dc.LoadMode={DESTROYED:Ld,NOT_LOADED:Pd,MEDIA_SOURCE:Nd,SRC_EQUALS:Od};dc.version="v4.4.3";var Ud=["4","4"];hi=new function(e){this.g=e;this.i=ci;this.h=di}(new ui(Number(Ud[0]),Number(Ud[1])));var jd=["output-restricted","internal-error"],Bd={},Fd=null,Vd={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Gd={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Hd(){this.h=[];this.j=this.i=this.g=0}function qd(e,t,n){var i=this;this.g=e;this.h=t;this.m=n;this.i=!1;this.l=this.h.getVolume();this.j=new ar;this.j.C(this.h,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0}));this.j.C(this.h,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}i=qd.prototype;i.getDuration=function(){return this.g.getDuration()};i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()};i.getRemainingTime=function(){return this.h.getRemainingTime()};i.isPaused=function(){return this.i};i.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()};i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};i.canSkipNow=function(){return this.h.getAdSkippableState()};i.skip=function(){return this.h.skip()};i.pause=function(){return this.h.pause()};i.play=function(){return this.h.resume()};i.getVolume=function(){return this.h.getVolume()};i.setVolume=function(e){return this.h.setVolume(e)};i.isMuted=function(){return 0==this.h.getVolume()};i.isLinear=function(){return this.g.isLinear()};i.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen);this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)};i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};i.getTitle=function(){return this.g.getTitle()};i.getDescription=function(){return this.g.getDescription()};i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()};i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};i.getAdId=function(){return this.g.getAdId()};i.getCreativeAdId=function(){return this.g.getCreativeAdId()};i.getAdvertiserName=function(){return this.g.getAdvertiserName()};i.getMediaUrl=function(){return this.g.getMediaUrl()};i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};i.release=function(){this.h=this.g=null};q("shaka.ads.ClientSideAd",qd);qd.prototype.release=qd.prototype.release;qd.prototype.getPodIndex=qd.prototype.getPodIndex;qd.prototype.getTimeOffset=qd.prototype.getTimeOffset;qd.prototype.getMediaUrl=qd.prototype.getMediaUrl;qd.prototype.getAdvertiserName=qd.prototype.getAdvertiserName;qd.prototype.getCreativeAdId=qd.prototype.getCreativeAdId;qd.prototype.getAdId=qd.prototype.getAdId;qd.prototype.getVastMediaWidth=qd.prototype.getVastMediaWidth;qd.prototype.getVastMediaHeight=qd.prototype.getVastMediaHeight;qd.prototype.getVastMediaBitrate=qd.prototype.getVastMediaBitrate;qd.prototype.getDescription=qd.prototype.getDescription;qd.prototype.getTitle=qd.prototype.getTitle;qd.prototype.getPositionInSequence=qd.prototype.getPositionInSequence;qd.prototype.getSequenceLength=qd.prototype.getSequenceLength;qd.prototype.setMuted=qd.prototype.setMuted;qd.prototype.resize=qd.prototype.resize;qd.prototype.isLinear=qd.prototype.isLinear;qd.prototype.isMuted=qd.prototype.isMuted;qd.prototype.setVolume=qd.prototype.setVolume;qd.prototype.getVolume=qd.prototype.getVolume;qd.prototype.play=qd.prototype.play;qd.prototype.pause=qd.prototype.pause;qd.prototype.skip=qd.prototype.skip;qd.prototype.canSkipNow=qd.prototype.canSkipNow;qd.prototype.getTimeUntilSkippable=qd.prototype.getTimeUntilSkippable;qd.prototype.isSkippable=qd.prototype.isSkippable;qd.prototype.isPaused=qd.prototype.isPaused;qd.prototype.getRemainingTime=qd.prototype.getRemainingTime;qd.prototype.getMinSuggestedDuration=qd.prototype.getMinSuggestedDuration;qd.prototype.getDuration=qd.prototype.getDuration;function zd(e,t,n,i,r){var a=this;this.o=e;this.i=t;this.A=!1;this.s=this.D=null;this.F=NaN;this.m=r;this.j=null;this.h=new ar;google.ima.settings.setLocale(n);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);e=new google.ima.AdDisplayContainer(this.o,this.i);e.initialize();this.l=new google.ima.AdsLoader(e);this.l.getSettings().setPlayerType("shaka-player");this.l.getSettings().setPlayerVersion("v4.4.3");this.g=null;this.u=i||new google.ima.AdsRenderingSettings;this.h.C(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){Xd(a,e)}));this.h.C(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){Kd(a,e)}));this.h.C(this.i,"ended",(function(){a.l.contentComplete()}));this.h.ja(this.i,"play",(function(){a.A=!0}))}zd.prototype.configure=function(e){this.D=e};zd.prototype.stop=function(){this.g&&this.g.stop();this.o&&vl(this.o)};zd.prototype.release=function(){this.stop();this.s&&this.s.disconnect();this.h&&this.h.release();this.g&&this.g.destroy();this.l.destroy()};function Kd(e,t){t.getError();t=(new Map).set("originalEvent",t);e.m(new ji("ad-error",t));Qd(e,null);e.m(new ji("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Xd(t,n){t.m(new ji("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.F)));if(t.D.customPlayheadTracker){var i={currentTime:t.i.currentTime};t.g=n.getAdsManager(i,t.u);t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume);t.h.C(t.i,"timeupdate",(function(){t.i.duration&&(i.currentTime=t.i.currentTime)}));t.h.C(t.i,"volumechange",(function(){t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume)}))}else t.g=n.getAdsManager(t.i,t.u);t.m(new ji("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[];r=c(r);for(var a=r.next();!a.done;a=r.next())n.push({start:a.value,end:null});t.m(new ji("ad-cue-points-changed",(new Map).set("cuepoints",n)))}Yd(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,Wd(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Wd(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Wd(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,Wd(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.A?t.g.start():t.h.ja(t.i,"play",(function(){t.A=!0;t.g.start()}))}catch(e){Qd(t,null)}}function Wd(e){if(document.fullscreenEnabled)return!!document.fullscreenElement;e=e.i;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1}function Yd(e){function t(t,n){t=(new Map).set("originalEvent",t);e.m(new ji(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Kd(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){Jd(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){Jd(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")}));e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")}));e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")}));e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")}));e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){Qd(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){Qd(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")}));e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")}));e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}));e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}));e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")}));e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")}));e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")}));e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")}));e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")}));e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")}));e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")}));e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}function Jd(e,t){var n=t.getAd();n?(e.j=new qd(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new ji("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):Q("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Qd(e,t){e.m(new ji("ad-stopped",(new Map).set("originalEvent",t)));e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function $d(e,t){this.g=e;this.i=null;this.h=t}i=$d.prototype;i.getDuration=function(){return this.i?this.i.duration:-1};i.getMinSuggestedDuration=function(){return this.getDuration()};i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1};i.isPaused=function(){return this.h.paused};i.isSkippable=function(){return this.g.isSkippable()};i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};i.skip=function(){this.h.currentTime+=this.getRemainingTime()};i.pause=function(){return this.h.pause()};i.play=function(){return this.h.play()};i.getVolume=function(){return this.h.volume};i.setVolume=function(e){this.h.volume=e};i.isMuted=function(){return this.h.muted};i.isLinear=function(){return!0};i.resize=function(){};i.setMuted=function(e){this.h.muted=e};i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};i.getTitle=function(){return this.g.getTitle()};i.getDescription=function(){return this.g.getDescription()};i.getVastMediaBitrate=function(){return 0};i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};i.getAdId=function(){return this.g.getAdId()};i.getCreativeAdId=function(){return this.g.getCreativeAdId()};i.getAdvertiserName=function(){return this.g.getAdvertiserName()};i.getMediaUrl=function(){return null};i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};i.release=function(){this.h=this.i=this.g=null};q("shaka.ads.ServerSideAd",$d);$d.prototype.release=$d.prototype.release;$d.prototype.getPodIndex=$d.prototype.getPodIndex;$d.prototype.getTimeOffset=$d.prototype.getTimeOffset;$d.prototype.getMediaUrl=$d.prototype.getMediaUrl;$d.prototype.getAdvertiserName=$d.prototype.getAdvertiserName;$d.prototype.getCreativeAdId=$d.prototype.getCreativeAdId;$d.prototype.getAdId=$d.prototype.getAdId;$d.prototype.getVastMediaWidth=$d.prototype.getVastMediaWidth;$d.prototype.getVastMediaHeight=$d.prototype.getVastMediaHeight;$d.prototype.getVastMediaBitrate=$d.prototype.getVastMediaBitrate;$d.prototype.getDescription=$d.prototype.getDescription;$d.prototype.getTitle=$d.prototype.getTitle;$d.prototype.getPositionInSequence=$d.prototype.getPositionInSequence;$d.prototype.getSequenceLength=$d.prototype.getSequenceLength;$d.prototype.setMuted=$d.prototype.setMuted;$d.prototype.resize=$d.prototype.resize;$d.prototype.isLinear=$d.prototype.isLinear;$d.prototype.isMuted=$d.prototype.isMuted;$d.prototype.setVolume=$d.prototype.setVolume;$d.prototype.getVolume=$d.prototype.getVolume;$d.prototype.play=$d.prototype.play;$d.prototype.pause=$d.prototype.pause;$d.prototype.skip=$d.prototype.skip;$d.prototype.canSkipNow=$d.prototype.canSkipNow;$d.prototype.getTimeUntilSkippable=$d.prototype.getTimeUntilSkippable;$d.prototype.isSkippable=$d.prototype.isSkippable;$d.prototype.isPaused=$d.prototype.isPaused;$d.prototype.getRemainingTime=$d.prototype.getRemainingTime;$d.prototype.getMinSuggestedDuration=$d.prototype.getMinSuggestedDuration;$d.prototype.getDuration=$d.prototype.getDuration;function Zd(e,t,n,i){var r=this;this.s=e;this.l=t;this.j=null;this.G=NaN;this.i=i;this.F=!1;this.u=this.m=this.o=null;this.A="";this.D=[];this.h=new ar;e=new google.ima.dai.api.UiSettings;e.setLocale(n);this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e);this.i(new ji("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g)));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){eh(r,e)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.A.length?r.j.resolve(r.A):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");r.j=null}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd();r.m=new $d(e,r.l);r.u&&(r.m.i=r.u);r.i(new ji("ad-started",(new Map).set("ad",r.m)));r.s.setAttribute("ad-active","true")}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData;r.m&&(r.m.i=r.u)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new ji("ad-first-quartile"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new ji("ad-midpoint"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new ji("ad-third-quartile"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new ji("ad-complete"));r.i(new ji("ad-stopped"));r.s.removeAttribute("ad-active");r.m=null}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new ji("ad-skipped"));r.i(new ji("ad-stopped"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];t=c(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e;r.i(new ji("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}Zd.prototype.configure=function(){};Zd.prototype.stop=function(){this.A="";this.o=null;this.D=[]};Zd.prototype.release=function(){this.stop();this.h&&this.h.release()};Zd.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data;this.g.onTimedMetadata(t)}};function eh(e,t){e.i(new ji("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G)));t=t.getStreamData().url;e.j.resolve(t);e.j=null;e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}function th(){Vi.call(this);this.g=this.h=null;this.i=new Hd;this.l=navigator.language;this.j=null}y(th,Vi);i=th.prototype;i.setLocale=function(e){this.l=e};i.configure=function(e){this.j=e;this.h&&this.h.configure(this.j);this.g&&this.g.configure(this.j)};i.initClientSide=function(t,n,i){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new ht(2,10,1e4);this.h&&this.h.release();this.h=new zd(t,n,this.l,i,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.i.h.push(e.loadTime);break;case"ad-started":r.i.g++;break;case"ad-complete":r.i.i++;break;case"ad-skipped":r.i.j++}r.dispatchEvent(e)}));this.h.configure(this.j)};i.release=function(){this.h&&(this.h.release(),this.h=null);this.g&&(this.g.release(),this.g=null);Vi.prototype.release.call(this)};i.onAssetUnload=function(){this.h&&this.h.stop();this.g&&this.g.stop();this.dispatchEvent(new ji("ad-stopped"));this.i=new Hd};i.requestClientSideAds=function(e){if(!this.h)throw new ht(1,10,10001);var t=this.h;t.g&&t.g.destroy();t.l&&t.l.contentComplete();t.F=Date.now()/1e3;t.l.requestAds(e)};i.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new ht(1,10,10001);var t=this.h;t.u=e;t.g&&t.g.updateAdsRenderingSettings(t.u)};i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new ht(2,10,10002);this.g&&this.g.release();this.g=new Zd(t,n,this.l,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.i.h.push(e.loadTime);break;case"ad-started":i.i.g++;break;case"ad-complete":i.i.i++;break;case"ad-skipped":i.i.j++}i.dispatchEvent(e)}));this.g.configure(this.j)};i.requestServerSideStream=function(e,t){t=void 0===t?"":t;if(!this.g)throw new ht(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.adTagParameters.mpt="shaka-player";e.adTagParameters.mpv="v4.4.3";n=this.g;n.j?e=Promise.reject(new ht(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new Mi,n.g.requestStream(e),n.A=t||"",n.G=Date.now()/1e3,e=n.j);return e};i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ht(1,10,10003);(e.mpt||e.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.mpt="Shaka Player";e.mpv="v4.4.3";this.g.g.replaceAdTagParameters(e)};i.getServerSideCuePoints=function(){if(!this.g)throw new ht(1,10,10003);return this.g.D};i.getStats=function(){var e=this.i;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}};i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}};i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)};i.onCueMetadataChange=function(e){if(this.g)this.g.onCueMetadataChange(e)};q("shaka.ads.AdManager",th);th.prototype.onCueMetadataChange=th.prototype.onCueMetadataChange;th.prototype.onHlsTimedMetadata=th.prototype.onHlsTimedMetadata;th.prototype.onDashTimedMetadata=th.prototype.onDashTimedMetadata;th.prototype.getStats=th.prototype.getStats;th.prototype.getServerSideCuePoints=th.prototype.getServerSideCuePoints;th.prototype.replaceServerSideAdTagParameters=th.prototype.replaceServerSideAdTagParameters;th.prototype.requestServerSideStream=th.prototype.requestServerSideStream;th.prototype.initServerSide=th.prototype.initServerSide;th.prototype.updateClientSideAdsRenderingSettings=th.prototype.updateClientSideAdsRenderingSettings;th.prototype.requestClientSideAds=th.prototype.requestClientSideAds;th.prototype.onAssetUnload=th.prototype.onAssetUnload;th.prototype.release=th.prototype.release;th.prototype.initClientSide=th.prototype.initClientSide;th.prototype.configure=th.prototype.configure;th.prototype.setLocale=th.prototype.setLocale;th.ADS_LOADED="ads-loaded";th.AD_STARTED="ad-started";th.AD_FIRST_QUARTILE="ad-first-quartile";th.AD_MIDPOINT="ad-midpoint";th.AD_THIRD_QUARTILE="ad-third-quartile";th.AD_COMPLETE="ad-complete";th.AD_STOPPED="ad-stopped";th.AD_SKIPPED="ad-skipped";th.AD_VOLUME_CHANGED="ad-volume-changed";th.AD_MUTED="ad-muted";th.AD_PAUSED="ad-paused";th.AD_RESUMED="ad-resumed";th.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";th.CUEPOINTS_CHANGED="ad-cue-points-changed";th.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";th.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";th.AD_CLICKED="ad-clicked";th.AD_PROGRESS="ad-progress";th.AD_BUFFERING="ad-buffering";th.AD_IMPRESSION="ad-impression";th.AD_DURATION_CHANGED="ad-duration-changed";th.AD_CLOSED="ad-closed";th.AD_LOADED="ad-loaded";th.ALL_ADS_COMPLETED="all-ads-completed";th.AD_LINEAR_CHANGED="ad-linear-changed";th.AD_METADATA="ad-metadata";th.AD_RECOVERABLE_ERROR="ad-recoverable-error";th.AD_ERROR="ad-error";th.AD_BREAK_READY="ad-break-ready";th.AD_INTERACTION="ad-interaction";Fd=function(){return new th};function nh(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ji){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);e=c(Object.getOwnPropertyNames(t));for(n=e.next();!n.done;n=e.next())i.add(n.value);e={};i=c(i);for(n=i.next();!n.done;n=i.next())n=n.value,e[n]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){i={__type__:"TimeRanges",length:t.length,start:[],end:[]};t=c(wo(t));for(n=t.next();!n.done;n=t.next())n=n.value,e=n.end,i.start.push(n.start),i.end.push(e);t=i}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function ih(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-Infinity;else if("Infinity"==t)n=Infinity;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=rh(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents;t=Error(e.message);for(n in e)t[n]=e[n];n=t}else n=t;return n}))}function rh(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var ah="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),oh="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),sh=["loop","playbackRate"],uh=["pause","play"],lh={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},ch={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},dh={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},hh=[["getConfiguration","configure"]],fh=[["isTextTrackVisible","setTextTrackVisibility"]],ph="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),gh=["attach","attachCanvas","detach","load","unload"];function mh(e,t,n,i,r,a,o){var s=this;this.G=e;this.N=o;this.j=new $t(t);this.P=n;this.u=!1;this.s=i;this.F=r;this.K=a;this.h=this.m=!1;this.L="";this.o=null;this.A=function(){return Eh(s)};this.D=function(e,t){e=ih(t);switch(e.type){case"event":var n=e.targetName,i=Bi(e.event);s.s(n,i);break;case"update":n=e.update;for(i in n){e=s.g[i]||{};for(var r in n[i])e[r]=n[i][r]}s.u&&(s.P(),s.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,e=s.i[i],delete s.i[i],e)if(r){i=new ht(r.severity,r.category,r.code);for(n in r)i[n]=r[n];e.reject(i)}else e.resolve()}};this.g={video:{},player:{}};this.H=0;this.i={};this.l=null;Ch.add(this)}i=mh.prototype;i.destroy=function(){Ch.delete(this);xh(this);kh&&Th(this);this.j&&(this.j.stop(),this.j=null);this.F=this.s=null;this.h=this.m=!1;this.D=this.A=this.l=this.i=this.g=this.o=null;return Promise.resolve()};i.xa=function(){return this.h};i.Ee=function(){return this.L};i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0;this.j.ic();var t=new chrome.cast.SessionRequest(this.G,[],null,this.N,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=c(Ch),n=t.next();!n.done;n=t.next())wh(n.value,e)}),(function(e){for(var t=c(Ch),n=t.next();!n.done;n=t.next())n=n.value,Ih="available"==e,n.j.ic()}),"origin_scoped");chrome.cast.initialize(t,(function(){}),(function(){}));Ih&&this.j.S(Sh);(t=kh)&&t.status!=chrome.cast.SessionStatus.STOPPED?wh(this,t):kh=null}else e.__onGCastApiAvailable!==Mh&&(_h=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Mh)};i.Le=function(e){this.o=e;this.h&&Ah(this,{type:"appData",appData:this.o})};i.cast=function(e){var t=this;return O((function(n){if(!t.m)throw new ht(1,8,8e3);if(!Ih)throw new ht(1,8,8001);if(t.h)throw new ht(1,8,8002);t.l=new Mi;chrome.cast.requestSession((function(n){return yh(t,e,n)}),(function(e){return bh(t,e)}));return E(n,t.l,0)}))};function vh(e){if(e.h){var t=e.K();chrome.cast.requestSession((function(n){return yh(e,t,n)}),(function(t){return bh(e,t)}))}}i.Wb=function(){if(this.h){xh(this);if(kh){Th(this);try{kh.stop((function(){}),(function(){}))}catch(e){}kh=null}Eh(this)}};i.get=function(e,t){var n=this;if("video"==e){if(uh.includes(t))return function(){return n.zf.apply(n,[e,t].concat(d(U.apply(0,arguments))))}}else if("player"==e){if(dh[t]&&!this.get("player","isLive")())return function(){};if(ph.includes(t))return function(){return n.zf.apply(n,[e,t].concat(d(U.apply(0,arguments))))};if(gh.includes(t))return function(){return n.$g.apply(n,[e,t].concat(d(U.apply(0,arguments))))};if(lh[t]||ch[t])return function(){return n.g[e][t]}}return this.g[e][t]};i.set=function(e,t,n){this.g[e][t]=n;Ah(this,{type:"set",targetName:e,property:t,value:n})};function yh(e,t,n){kh=n;n.addUpdateListener(e.A);n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D);Eh(e);Ah(e,{type:"init",initState:t,appData:e.o});e.l.resolve()}function bh(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new ht(2,8,n,t))}i.zf=function(e,t){Ah(this,{type:"call",targetName:e,methodName:t,args:U.apply(2,arguments)})};i.$g=function(e,t){var n=U.apply(2,arguments),i=new Mi,r=this.H.toString();this.H++;this.i[r]=i;try{Ah(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};function wh(e,t){var n=e.K();e.l=new Mi;e.u=!0;yh(e,n,t)}function Th(e){var t=kh;t.removeUpdateListener(e.A);t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Eh(e){var t=kh?"connected"==kh.status:!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};xh(e)}e.h=t;e.L=t?kh.receiver.friendlyName:"";e.j.ic()}function xh(e){for(var t in e.i){var n=e.i[t];delete e.i[t];n.reject(new ht(1,7,7e3))}}function Ah(e,t){t=nh(t);var n=kh;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Z)}catch(i){throw t=new ht(2,8,8005,i),n=new ji("error",(new Map).set("detail",t)),e.s("player",n),e.Wb(),t}}var Sh=.02,Ih=!1,kh=null,_h=null,Ch=new Set;function Mh(t){_h?e.__onGCastApiAvailable=_h:delete e.__onGCastApiAvailable;_h=null;if(t)for(var n=c(Ch),i=n.next();!i.done;i=n.next())i.value.init();"function"===typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Dh(e,t,n,i){i=void 0===i?!1:i;Vi.call(this);var r=this;this.i=e;this.h=t;this.m=this.o=this.j=this.s=this.l=null;this.D=n;this.A=i;this.u=new Map;this.g=new mh(n,(function(){return Oh(r)}),(function(){return Uh(r)}),(function(e,t){return Vh(r,e,t)}),(function(){return jh(r)}),(function(){return Nh(r)}),i);Rh(this)}y(Dh,Vi);i=Dh.prototype;i.destroy=function(e){e&&this.g.Wb();this.m&&(this.m.release(),this.m=null);e=[];this.h&&(e.push(this.h.destroy()),this.h=null);this.g&&(e.push(this.g.destroy()),this.g=null);this.s=this.l=this.i=null;Vi.prototype.release.call(this);return Promise.all(e)};i.Fg=function(){return this.l};i.vg=function(){return this.s};i.Xf=function(){return this.g.m&&Ih};i.xa=function(){return this.g.xa()};i.Ee=function(){return this.g.Ee()};i.cast=function(){var e=this,t;return O((function(n){return 1==n.g?(t=Nh(e),E(n,e.g.cast(t),2)):e.h?E(n,e.h.Te(),0):n.return()}))};i.Le=function(e){this.g.Le(e)};i.mh=function(){vh(this.g)};i.Wb=function(){this.g.Wb()};i.Yf=function(e,t){t=void 0===t?!1:t;var n=this;return O((function(i){if(1==i.g){if(e==n.D&&t==n.A)return i.return();n.D=e;n.A=t;n.g.Wb();return E(i,n.g.destroy(),2)}n.g=null;n.g=new mh(e,(function(){return Oh(n)}),(function(){return Uh(n)}),(function(e,t){return Vh(n,e,t)}),(function(){return jh(n)}),(function(){return Nh(n)}),t);n.g.init();x(i)}))};function Rh(e){e.g.init();e.m=new ar;for(var t=c(ah),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,(function(t){e.g.xa()||(t=Bi(t),e.j.dispatchEvent(t))}));for(var i in Fi)e.m.C(e.h,Fi[i],(function(t){e.g.xa()||e.o.dispatchEvent(t)}));e.l={};t={};for(var r in e.i)t.oc=r,Object.defineProperty(e.l,t.oc,{configurable:!1,enumerable:!0,get:function(t){return function(){return Bh(e,t.oc)}}(t),set:function(t){return function(n){var i=t.oc;e.g.xa()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={oc:t.oc};e.s={};Ph(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return Fh(e,t)}})}));Lh(e);e.j=new Vi;e.j.yd=e.l;e.o=new Vi;e.o.yd=e.s}function Lh(e){var t=new Map;Ph(e,(function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.u.set(n,i):e.u.set(i,n)):t.set(i,n)}))}function Ph(e,t){function n(e){return"constructor"==e||"function"!=typeof i[e]?!1:!r.has(e)}var i=e.h,r=new Set,a;for(a in i)n(a)&&(r.add(a),t(a,i[a]));e=Object.getPrototypeOf(i);for(a=Object.getPrototypeOf({});e&&e!=a;){for(var o=c(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())s=s.value,n(s)&&(r.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function Nh(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.de(),startTime:null};e.i.pause();for(var n=c(sh),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];e.i.ended||(t.startTime=e.i.currentTime);n=c(hh);for(i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1];r=e.h[r[0]]();t.player[i]=r}n=c(fh);for(i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Oh(e){var t=new ji("caststatuschanged");e.dispatchEvent(t)}function Uh(e){var t=new ji(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function jh(e){for(var t=c(hh),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1];i=e.g.get("player",i[0])();e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended");t=Promise.resolve();var a=e.i.autoplay;i=null;n||(i=e.g.get("video","currentTime"));r&&(e.i.autoplay=!1,t=e.h.load(r,i));var o={};n=c(sh);for(i=n.next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=c(sh),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];t=c(fh);for(n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1];i=e.g.get("player",i[0])();e.h[n](i)}e.i.autoplay=a;r&&e.i.play()}}),(function(t){t=(new Map).set("detail",t);t=new ji("error",t);e.h.dispatchEvent(t)}))}function Bh(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.xa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.xa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function Fh(e,t){e.u.has(t)&&(t=e.u.get(t));if("addEventListener"==t)return function(t,n,i){return e.o.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.o.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Ab()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.kf()};if("setVideoContainer"==t)return function(t){return e.h.Kf(t)};if(e.g.xa()){if("getManifest"==t||"drmInfo"==t)return function(){Q(t+"() does not work while casting!");return null};if("attach"==t||"detach"==t)return function(){Q(t+"() does not work while casting!");return Promise.resolve()}}return e.g.xa()&&0==Object.keys(e.g.g.video).length&&(lh[t]||ch[t])||!e.g.xa()?e.h[t].bind(e.h):e.g.get("player",t)}function Vh(e,t,n){e.g.xa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}q("shaka.cast.CastProxy",Dh);Dh.prototype.changeReceiverId=Dh.prototype.Yf;Dh.prototype.forceDisconnect=Dh.prototype.Wb;Dh.prototype.suggestDisconnect=Dh.prototype.mh;Dh.prototype.setAppData=Dh.prototype.Le;Dh.prototype.cast=Dh.prototype.cast;Dh.prototype.receiverName=Dh.prototype.Ee;Dh.prototype.isCasting=Dh.prototype.xa;Dh.prototype.canCast=Dh.prototype.Xf;Dh.prototype.getPlayer=Dh.prototype.vg;Dh.prototype.getVideo=Dh.prototype.Fg;Dh.prototype.destroy=Dh.prototype.destroy;function Gh(e,t,n,i){Vi.call(this);var r=this;this.g=e;this.h=t;this.j=new ar;this.H={video:e,player:t};this.D=n||function(){};this.K=i||function(e){return e};this.i=null;this.F=!1;this.o=!0;this.m=0;this.A=!1;this.u=!0;this.s=this.l=null;this.G=new $t((function(){Wh(r)}));Hh(this)}y(Gh,Vi);i=Gh.prototype;i.isConnected=function(){return this.F};i.Lg=function(){return this.o};i.jh=function(e){this.i=e};i.ag=function(){this.i=null};i.kh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.title=e};i.ih=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.images=[{url:e}]};i.hh=function(e){this.i||(this.i={});this.i.artist=e;this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};i.destroy=function(){var e=this,t,n;return O((function(i){if(1==i.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.D=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Vi.prototype.release.call(e),E(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance();n.stop();x(i)}))};function Hh(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return qh(e)};t.onSenderDisconnected=function(){return qh(e)};t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&ef(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l);ef(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)};e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media");e.s.onMessage=function(t){return $h(e,t)};e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2");e.l.onMessage=function(t){return Qh(e,t)};t.start();t=c(ah);for(var n=t.next();!n.done;n=t.next())e.j.C(e.g,n.value,(function(t){return Xh(e,"video",t)}));for(var i in Fi)e.j.C(e.h,Fi[i],(function(t){return Xh(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Ne(3840,2160):e.h.Ne(1920,1080);e.j.C(e.g,"loadeddata",(function(){e.A=!0}));e.j.C(e.h,"loading",(function(){e.o=!1;zh(e)}));e.j.C(e.g,"playing",(function(){e.o=!1;zh(e)}));e.j.C(e.g,"pause",(function(){zh(e)}));e.j.C(e.h,"unloading",(function(){e.o=!0;zh(e)}));e.j.C(e.g,"ended",(function(){new $t((function(){e.g&&e.g.ended&&(e.o=!0,zh(e))})).S(rf)}))}function qh(e){e.m=0;e.u=!0;e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;zh(e)}function zh(e){var t;O((function(n){if(1==n.g)return E(n,Promise.resolve(),2);if(!e.h)return n.return();t=new ji("caststatuschanged");e.dispatchEvent(t);Yh(e)||tf(e);x(n)}))}function Kh(e,t,n){var i,r,a,o,s,u,l,c,d,h;O((function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);e.D(n);a=e.g.autoplay;return t.manifest?(e.g.autoplay=!1,A(f,5),E(f,e.h.load(t.manifest,t.startTime),7)):E(f,Promise.resolve(),3);case 7:I(f,3);break;case 5:return o=k(f),s=(new Map).set("detail",o),u=new ji("error",s),e.h&&e.h.dispatchEvent(u),f.return();case 3:if(!e.h)return f.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a;t.manifest&&(e.g.play(),tf(e));x(f)}}))}function Xh(e,t,n){e.h&&(Wh(e),ef(e,{type:"event",targetName:t,event:n},e.l))}function Wh(e){e.G.S(nf);for(var t={video:{},player:{}},n=c(oh),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.T())for(var r in dh)0==e.m%dh[r]&&(t.player[r]=e.h[r]());for(var a in lh)0==e.m%lh[a]&&(t.player[a]=e.h[a]());if(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())t.video.volume=n.level,t.video.muted=n.muted;ef(e,{type:"update",update:t},e.l);for(var o in ch)0==e.m%ch[o]&&(t={player:{}},t.player[o]=e.h[o](),ef(e,{type:"update",update:t},e.l));e.A&&(e.m+=1);Yh(e)}function Yh(e){return e.u&&(e.g.duration||e.h.T())?(Jh(e),e.u=!1,!0):!1}function Jh(e,t){var n={contentId:e.h.de(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(n.duration=e.g.duration);e.i&&(n.metadata=e.i);tf(e,void 0===t?0:t,n)}function Qh(e,t){var n=ih(t.data);switch(n.type){case"init":e.m=0;e.A=!1;e.u=!0;Kh(e,n.initState,n.appData);Wh(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;n=n.value;if("video"==i)if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}else if("muted"==r){t.setSystemVolumeMuted(n);break}e.H[i][r]=n;break;case"call":i=e.H[n.targetName];i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName;r=n.methodName;"player"==i&&"load"==r&&(e.m=0,e.A=!1);var a=n.id,o=t.senderId;t=e.H[i];n=t[r].apply(t,n.args);"player"==i&&"load"==r&&(n=n.then((function(){e.u=!0})));n.then((function(){return Zh(e,o,a,null)}),(function(t){return Zh(e,o,a,t)}))}}function $h(e,t){var n=ih(t.data);switch(n.type){case"PLAY":e.g.play();tf(e);break;case"PAUSE":e.g.pause();tf(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.g.currentTime=Number(t));i&&"PLAYBACK_START"==i?(e.g.play(),tf(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),tf(e));break;case"STOP":e.h.Te().then((function(){e.h&&tf(e)}));break;case"GET_STATUS":Jh(e,Number(n.requestId));break;case"VOLUME":i=n.volume;t=i.level;i=i.muted;var r=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t));null!=i&&(e.g.muted=i);r==e.g.volume&&a==e.g.muted||tf(e);break;case"LOAD":e.m=0;e.A=!1;e.u=!1;t=n.media;i=n.currentTime;r=e.K(t.contentId);a=n.autoplay||!0;e.D(t.customData);a&&(e.g.autoplay=!0);e.h.load(r,i).then((function(){e.h&&Jh(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED");ef(e,{requestId:Number(n.requestId),type:i},e.s)}));break;default:ef(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Zh(e,t,n,i){e.h&&ef(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function ef(e,t,n,i){e.F&&(e=nh(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function tf(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?af:e.h.he()?sf:e.g.paused?uf:of,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n);ef(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}q("shaka.cast.CastReceiver",Gh);Gh.prototype.destroy=Gh.prototype.destroy;Gh.prototype.setContentArtist=Gh.prototype.hh;Gh.prototype.setContentImage=Gh.prototype.ih;Gh.prototype.setContentTitle=Gh.prototype.kh;Gh.prototype.clearContentMetadata=Gh.prototype.ag;Gh.prototype.setContentMetadata=Gh.prototype.jh;Gh.prototype.isIdle=Gh.prototype.Lg;Gh.prototype.isConnected=Gh.prototype.isConnected;var nf=.5,rf=5,af="IDLE",of="PLAYING",sf="BUFFERING",uf="PAUSED";function lf(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=cf(i,r,s,u,l,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=df(i,r),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var m=g.l,v=g.i,y=g.j,b=g.h;if(m!=s||v!=u||y!=l||b!=c)d.payload&&e.nestedCues.push(d),d=cf(i,r,m,v,y,b),s=m,u=v,l=y,c=b;d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d);a!==o&&(d=df(i,r),e.nestedCues.push(d));d=cf(i,r,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function cf(e,t,n,i,r,a){e=new xe(e,t,"");n&&e.textDecoration.push("underline");i&&(e.fontStyle="italic");e.color=r;e.backgroundColor=a;return e}function df(e,t){e=new xe(e,t,"");e.lineBreak=!0;return e}function hf(e,t,n,i,r){this.g=e;this.l=t;this.i=n;this.h=i;this.j=r}function ff(e,t){this.i=[];this.g=1;this.h=0;this.u=e;this.s=t;this.j=this.m=!1;this.l="white";this.o="black";gf(this)}function pf(e,t,n){var i="CC"+(e.u<<1|e.s+1),r=new xe(t,n,"");r.lineInterpretation=1;r.line=e.g/16*100;return lf(r,i,e.i,t,n)}function gf(e){yf(e,0,15);e.g=1}function mf(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case bf:i=xf.has(n)?xf.get(n):String.fromCharCode(n);break;case wf:i=Af.get(n);break;case Tf:e.i[e.g].pop();i=Sf.get(n);break;case Ef:e.i[e.g].pop(),i=If.get(n)}i&&e.i[e.g].push(new hf(i,e.m,e.j,e.o,e.l))}}function vf(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function yf(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var bf=0,wf=1,Tf=2,Ef=3,xf=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Af=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Sf=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),If=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function kf(e,t){this.h=Df;this.o=new ff(e,t);this.i=new ff(e,t);this.g=this.j=new ff(e,t);this.l=0;this.m=null}function _f(e,t,n){e.g=e.i;var i=e.g,r=null;e.h!==Lf&&e.h!==Pf&&(r=pf(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,yf(n,0,15),n=e.j,n.g=0<n.h?n.h:0,yf(n,0,15),i.g=15);e.h=Lf;i.h=t;return r}function Cf(e){e.h=Rf;e.g=e.j;e.g.h=0}function Mf(e){$("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");e.g=e.o;e.h=Pf}var Df=0,Rf=1,Lf=3,Pf=4,Nf="black green blue cyan red yellow magenta black".split(" "),Of="white green blue cyan red yellow magenta white_italics".split(" ");function Uf(){this.l=!1;this.A=this.F=0;this.D=zf;this.i=[];this.g=this.h=this.j=0;this.u=this.o=!1;this.s="white";this.m="black";jf(this)}function jf(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Bf())}function Bf(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Ff(e,t){Vf(e)&&(e.i[e.h][e.g]=new hf(t,e.u,e.o,e.m,e.s),e.g++)}function Vf(e){var t=e.g<e.A&&0<=e.g;return e.h<e.F&&0<=e.h&&t}Uf.prototype.isVisible=function(){return this.l};function Gf(e,t,n){var i=new xe(e.j,t,"");i.textAlign=e.D===Hf?"left":e.D===qf?"right":Ie;if(n=lf(i,"svc"+n,e.i,e.j,t))e.j=t;return n}var Hf=0,qf=1,zf=2;function Kf(){this.i=[];this.h=null;this.g=0}function Xf(e,t){3===t.type?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Wf(e.h)),e.h=null,e.g=0))}function Wf(e){this.g=0;this.h=e}Wf.prototype.ha=function(){return this.g<this.h.length};Wf.prototype.fa=function(){return this.g};function Yf(e){if(!e.ha())throw new ht(2,2,3e3);return e.h[e.g++]}Wf.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ht(2,2,3e3);this.g+=e};function Jf(e){this.i=e;this.h=[null,null,null,null,null,null,null,null];this.g=null}function Qf(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=Yf(t).value;t=null;n=c($f(e,n));for(var r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Gf(r,i,e.i)),jf(r);return t}if(137===n)for(t=Yf(t).value,t=c($f(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(138===n){n=Yf(t).value;t=null;n=c($f(e,n));for(r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Gf(r,i,e.i)),r.l=!1;return t}if(139===n){n=Yf(t).value;t=null;n=c($f(e,n));for(r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=Gf(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return t=Yf(t).value,Zf(e,t,i);if(143===n)return i=Zf(e,255,i),ep(e),i;if(144===n)t.skip(1),i=Yf(t).value,e.g&&(e.g.o=0<(i&128),e.g.u=0<(i&64));else if(145===n)i=Yf(t).value,n=Yf(t).value,t.skip(1),e.g&&(t=tp((n&48)>>4,(n&12)>>2,n&3),e.g.s=tp((i&48)>>4,(i&12)>>2,i&3),e.g.m=t);else if(146===n)i=Yf(t).value,t=Yf(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(151===n)t.skip(1),t.skip(1),i=Yf(t).value,t.skip(1),e.g&&(e.g.D=i&3);else if(152<=n&&159>=n){n=(n&15)-8;r=null!==e.h[n];if(!r){var a=new Uf;a.j=i;e.h[n]=a}i=Yf(t).value;Yf(t);Yf(t);a=Yf(t).value;var o=Yf(t).value;t=Yf(t).value;r&&0===(t&7)||(t=e.h[n],t.h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black");t=e.h[n];t.l=0<(i&32);t.F=(a&15)+1;t.A=(o&63)+1;e.g=e.h[n]}}}return null}function $f(e,t){for(var n=[],i=0;8>i;i++)1===(t&1)&&e.h[i]&&n.push(i),t>>=1;return n}function Zf(e,t,n){var i=null;t=c($f(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=Gf(a,n,e.i));e.h[r]=null}return i}function ep(e){e.g=null;e.h=[null,null,null,null,null,null,null,null]}function tp(e,t,n){var i={0:0,1:0,2:1,3:1};e=i[e];t=i[t];n=i[n];return ip[e<<2|t<<1|n]}var np=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),ip="black blue green cyan red magenta yellow white".split(" ");function rp(){this.h=[];this.g=[];this.i=new Kf;this.l=0;this.m=new Map([["CC1",new kf(0,0)],["CC2",new kf(0,1)],["CC3",new kf(1,0)],["CC4",new kf(1,1)]]);this.s=this.o=0;this.j=new Map;this.u=!0;ap(this)}rp.prototype.clear=function(){this.l=0;this.h=[];this.g=[];var e=this.i;e.i=[];e.h=[];e.g=0;ap(this);e=c(this.j.values());for(var t=e.next();!t.done;t=e.next())ep(t.value)};function ap(e){e.o=0;e.s=0;for(var t=c(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=Df,n.g=n.j,n.m=null,gf(n.i),gf(n.j),gf(n.o);e.u=!0}rp.prototype.extract=function(e,t){if(this.u){for(var n=c(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.u=!1}e=new xr(e,0);if(181===e.qa()&&49===e.Ia()&&1195456820===e.J()&&3===e.qa()&&(n=e.qa(),0!==(n&64)))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.qa(),a=(r&4)>>2,o=e.qa(),s=e.qa();a&&(r&=3,0===r||1===r?this.h.push({pts:t,type:r,Ea:o,Za:s,order:this.h.length}):(this.g.push({pts:t,type:r,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}};rp.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e);this.g.sort(e);for(var n=c(this.h),i=n.next();!i.done;i=n.next())(i=op(this,i.value))&&t.push(i);n=c(this.g);for(i=n.next();!i.done;i=n.next())Xf(this.i,i.value);n=c(this.i.i);for(i=n.next();!i.done;i=n.next())i=sp(this,i.value),t.push.apply(t,d(i));this.i.i=[];this.h=[];this.g=[];return t};function op(e,t){var n=t.type;if(16===(t.Ea&112)){var i=t.Ea>>3&1;0===n?e.o=i:e.s=i}n=e.m.get("CC"+(n<<1|(n?e.s:e.o)+1));if(255===t.Ea&&255===t.Za||!t.Ea&&!t.Za||!up(t.Ea)||!up(t.Za))return 45<=++e.l&&ap(e),null;e.l=0;t.Ea&=127;t.Za&=127;if(!t.Ea&&!t.Za)return null;e=null;if(16===(t.Ea&112))e:{i=t.Ea;e=t.Za;if(n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16===(i&240)&&64===(e&192)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var r=(e&30)>>1;i="white";var a=!1;7>r?i=Of[r]:7===r&&(a=!0);e=1===(e&1);n.h!==Pf&&(r=n.g,n.h===Lf&&t!==r.g&&(n=1+t-r.h,vf(r,n,1+r.g-r.h,r.h),yf(r,0,n-1),yf(r,t+1,15-t)),r.g=t,r.m=e,r.j=a,r.l=i,r.o="black")}else if(17===(i&247)&&32===(e&240))n.g.m=!1,n.g.j=!1,n.g.l="white",mf(n.g,bf,32),i=!1,t=Of[(e&14)>>1],"white_italics"===t&&(t="white",i=!0),n.g.m=1===(e&1),n.g.j=i,n.g.l=t;else if(16===(i&247)&&32===(e&240)||23===(i&247)&&45===(e&255))t="black",0===(i&7)&&(t=Nf[(e&14)>>1]),n.g.o=t;else if(17===(i&247)&&48===(e&240))mf(n.g,wf,e);else if(18===(i&246)&&32===(e&224))mf(n.g,i&1?Ef:Tf,e);else if(20===(i&246)&&32===(e&240)){e=t.pts;i=null;switch(t.Za){case 32:Cf(n);break;case 33:n=n.g;n.i[n.g].pop();break;case 37:i=_f(n,2,e);break;case 38:i=_f(n,3,e);break;case 39:i=_f(n,4,e);break;case 40:mf(n.g,bf,32);break;case 41:n.h=2;n.g=n.i;n.g.h=0;n.l=e;break;case 42:gf(n.o);Mf(n);break;case 43:Mf(n);break;case 44:t=n.i;i=null;n.h!==Pf&&(i=pf(t,n.l,e));yf(t,0,15);break;case 45:t=n.g;n.h!==Lf?i=null:(i=pf(t,n.l,e),a=t.g-t.h+1,vf(t,a-1,a,t.h),yf(t,0,a-1),yf(t,t.g,15-t.g),n.l=e);break;case 46:yf(n.j,0,15);break;case 47:t=null,n.h!==Pf&&(t=pf(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Cf(n),n.l=e,i=t}e=i;break e}e=null}else i=t.Za,mf(n.g,bf,t.Ea),mf(n.g,bf,i);return e}function sp(e,t){var n=[];try{for(;t.ha();){var i=Yf(t).value,r=(i&224)>>5,a=i&31;7===r&&0!=a&&(r=Yf(t).value&63);if(0!=r){e.j.has(r)||e.j.set(r,new Jf(r));for(var o=e.j.get(r),s=t.fa();t.fa()-s<a;){r=t;var u=Yf(r),l=u.value,c=u.pts;if(16===l){var d=Yf(r);l=l<<16|d.value}if(0<=l&&31>=l){var h=c;if(o.g){var f=o.g;r=null;switch(l){case 8:!Vf(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.A-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:f.isVisible()&&(r=Gf(f,h,o.i));if(f.h+1>=f.F){h=f;for(var p=0,g=1;16>g;g++,p++)h.i[p]=h.i[g];for(g=0;1>g;g++,p++)h.i[p]=Bf()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(r=Gf(f,h,o.i));f.i[f.h]=Bf();f.g=0;break;case 12:f.isVisible()&&(r=Gf(f,h,o.i)),jf(f),h=f,h.h=0,h.g=0}var m=r}else m=null}else if(128<=l&&159>=l)m=Qf(o,r,l,c);else{if(4096<=l&&4127>=l)h=l&255,8<=h&&15>=h?r.skip(1):16<=h&&23>=h?r.skip(2):24<=h&&31>=h&&r.skip(3);else if(4224<=l&&4255>=l)h=l&255,128<=h&&135>=h?r.skip(4):136<=h&&143>=h&&r.skip(5);else if(32<=l&&127>=l)r=l,o.g&&(127===r?Ff(o.g,""):Ff(o.g,String.fromCharCode(r)));else if(160<=l&&255>=l)o.g&&Ff(o.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=l&255,o.g)if(np.has(r)){var v=np.get(r);Ff(o.g,v)}else Ff(o.g,"_")}else 4256<=l&&4351>=l&&o.g&&(160!=(l&255)?Ff(o.g,"_"):Ff(o.g,"[CC]"));m=null}(r=m)&&n.push(r)}}}}catch(e){if(e instanceof ht&&3e3===e.code)$("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw e}return n}function up(e){for(var t=0;e;)t^=e&1,e>>=1;return 1===t}q("shaka.cea.CeaDecoder",rp);ye=function(){return new rp};function lp(e){for(var t=[],n=e,i=e=0;i<n.length;)2==e&&3==n[i]?(e=0,n=[].concat(d(n)),n.splice(i,1),n=new Uint8Array(n)):0==n[i]?e++:e=0,i++;e=n;for(i=0;i<e.length;){for(n=0;255==e[i];)n+=255,i++;n+=e[i++];for(var r=0;255==e[i];)r+=255,i++;r+=e[i++];4==n&&t.push(e.subarray(i,i+r));i+=r}return t}function cp(){this.j=new Map;this.i=this.h=0;this.g=hp}cp.prototype.init=function(e){function t(e){e=e.name;e in gp&&(n.g=gp[e])}var n=this,i=[],r=[];(new Ir).box("moov",kr).box("mvex",kr).M("trex",(function(e){var t=e.reader;t.skip(4);t.skip(4);e=t.J();t=t.J();n.h=e;n.i=t})).box("trak",kr).M("tkhd",(function(e){e=Ro(e.reader,e.version);i.push(e.trackId)})).box("mdia",kr).M("mdhd",(function(e){e=Mo(e.reader,e.version);r.push(e.timescale)})).box("minf",kr).box("stbl",kr).M("stsd",_r).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Cr).box("sinf",kr).box("frma",(function(e){e=No(e.reader).oa;e in gp&&(n.g=gp[e])})).parse(e,!0);if(!i.length||!r.length||i.length!=r.length)throw new ht(2,2,2010);this.g==hp&&Q("Unable to determine bitstream format for CEA parsing!");i.forEach((function(e,t){n.j.set(e,r[t])}))};cp.prototype.parse=function(e){var t=this;if(this.g==hp)return[];var n=[],i=this.h,r=this.i,a=0,o=[],s=null,u=9e4;(new Ir).box("moof",(function(e){a=e.start;o=[];kr(e)})).box("traf",kr).M("trun",(function(e){e=Do(e.reader,e.version,e.flags);o.push(e)})).M("tfhd",(function(e){e=_o(e.reader,e.flags);i=e.ff||t.h;r=e.eg||t.i;e=e.trackId;t.j.has(e)&&(u=t.j.get(e))})).M("tfdt",(function(e){s=Co(e.reader,e.version).baseMediaDecodeTime})).box("mdat",(function(e){if(null===s)throw Q("Unable to find base media decode time for CEA captions!"),new ht(2,2,2010);dp(t,e.reader,s,u,i,r,a-e.start-8,o,n)})).parse(e,!1);return n};function dp(e,t,n,i,r,a,o,s,u){var l=0,h=a,f=s.map((function(e){return e.Af}));f=[].concat.apply([],d(f));f.length&&(h=f[0].sampleSize||a);for(t.skip(o+s[0].dg);t.ha();){o=t.J();var p=t.qa(),g=null;g=!1;s=1;switch(e.g){case fp:g=p&31;g=6==g;break;case pp:s=2;t.skip(1);g=p>>1&63;g=39==g||40==g;break;default:return}if(g)for(p=0,l<f.length&&(p=f[l].Md||0),p=(n+p)/i,s=c(lp(t.jb(o-s))),g=s.next();!g.done;g=s.next())u.push({packet:g.value,pts:p});else try{t.skip(o-s)}catch(e){break}h-=o+4;0==h&&(n=l<f.length?n+(f[l].Ie||r):n+r,l++,l<f.length?h=f[l].sampleSize||a:h=a)}}q("shaka.cea.Mp4CeaParser",cp);var hp=0,fp=1,pp=2,gp={avc1:fp,avc3:fp,hev1:pp,hvc1:pp,dvh1:pp,dvhe:pp};ve["video/mp4"]=function(){return new cp};function mp(){}mp.prototype.init=function(){};mp.prototype.parse=function(e){var t=[];e=he(e);if(!Xo(e))return t;e=(new zo).parse(e).ge();e=c(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,6==n.type&&null!=n.time)for(var i=c(lp(n.data)),r=i.next();!r.done;r=i.next())t.push({packet:r.value,pts:n.time});return t};q("shaka.cea.TsCeaParser",mp);ve["video/mp2t"]=function(){return new mp};function vp(e,t,n){var i=xp(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));o.delete(null);if(1<o.size)throw new ht(2,4,4010);t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Je?(r=e.init||r,!1):!0})),a.length&&(e=Ep(r,a,n,o),0==e.length&&(e=[yt("",r)])));if(i.length&&(t||!a.length))for(e=[],t=c(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,"org.w3.clearkey"!=n&&e.push(yt(n,r));if(o=Array.from(o)[0]||null)for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=o;return{ef:o,di:r,drmInfos:e,jf:!0}}function yp(e,t,n,i){var r=vp(e,n,i);if(t.jf){e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem;n=0==r.drmInfos.length;if(0==t.drmInfos.length||e&&!n)t.drmInfos=r.drmInfos;t.jf=!1}else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new ht(2,4,4008);return r.ef||t.ef}function bp(e){var t=0,n=fe(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{e=t+6;for(t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);e+=2;var r=n.getUint16(e,!0);e+=2;if(0!=(r&1)||r+e>n.byteLength){n=[];break e}var a=he(n,e,r);t.push({type:i,value:a});e+=r}n=t}return n}function wp(e){e=c(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=c(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&"LA_URL"==n.tagName)return n.textContent}return""}function Tp(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");if(t&&t.textContent)return t.textContent;e=Kr(e.node,"urn:microsoft:playready","pro");if(!e)return"";e=Br(e.textContent);e=bp(e).filter((function(e){return e.type===Sp}))[0];if(!e)return"";e=yr(e.value,!0);return(e=ca(e,"WRMHEADER"))?wp(e):""}function Ep(e,t,n,i){var r=[];t=c(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o=n[a.Je];if(o){var s;if(s=Kr(a.node,"urn:microsoft:playready","pro")){s=Br(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:qr(s,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;u=null;if("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.Je)if(u=i,0==u.size)u=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),d=new Uint8Array([]);u=[{initData:qr(d,l,u,1),initDataType:"cenc",keyId:a.keyId}]}s=yt(o,a.init||e||s||u);if(o=Ip.get(o))s.licenseServerUri=o(a);r.push(s)}}return r}function xp(e){var t=[];e=c(e);for(var n=e.next();!n.done;n=e.next())(n=Ap(n.value))&&t.push(n);return t}function Ap(e){var t=e.getAttribute("schemeIdUri"),n=Jr(e,"urn:mpeg:cenc:2013","default_KID"),i=Yr(e,"urn:mpeg:cenc:2013","pssh").map($r);if(!t)return null;t=t.toLowerCase();if(n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new ht(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:Br(e),keyId:null}}))}catch(e){throw new ht(2,4,4007)}return{node:e,Je:t,keyId:n,init:0<r.length?r:null}}var Sp=1,Ip=(new Map).set("com.widevine.alpha",(function(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Kr(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""})).set("com.microsoft.playready",Tp).set("com.microsoft.playready.recommendation",Tp).set("com.microsoft.playready.software",Tp).set("com.microsoft.playready.hardware",Tp).set("org.w3.clearkey",(function(e){var t=Kr(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Kr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function kp(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;"RepresentationID"==n&&i&&(i=void 0);"Time"==n&&(a=Math.round(a));switch(r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}i=e.parseInt(i,10)||1;return Array(Math.max(0,i-t.length)+1).join("0")+t}))}function _p(e,t){var n=Cp(e,t,"timescale"),i=1;n&&(i=aa(n)||1);var r=Cp(e,t,"duration");n=aa(r||"");"image"==e.I.contentType&&(n=sa(r||""));n&&(n/=i);var a=Cp(e,t,"startNumber");r=Number(Cp(e,t,"presentationTimeOffset"))||0;var o=oa(a||"");if(null==a||null==o)o=1;a=Mp(e,t,"SegmentTimeline");t=null;if(a){t=i;e=e.V.duration||Infinity;a=Xr(a,"S");for(var s=[],u=-r,l=0;l<a.length;++l){var c=a[l],d=a[l+1],h=ea(c,"t",oa),f=ea(c,"d",oa);c=ea(c,"r",ra);null!=h&&(h-=r);if(!f)break;h=null!=h?h:u;c=c||0;if(0>c)if(d){d=ea(d,"t",oa);if(null==d)break;else if(h>=d)break;c=Math.ceil((d-h)/f)-1}else{if(Infinity==e)break;else if(h/t>=e)break;c=Math.ceil((e*t-h)/f)-1}0<s.length&&h!=u&&(s[s.length-1].end=h/t);for(d=0;d<=c;++d)u=h+f,s.push({start:h/t,end:u/t,Ve:h}),h=u}t=s}return{timescale:i,ka:n,hc:o,kb:r/i||0,Ue:r,timeline:t}}function Cp(e,t,n){return[t(e.I),t(e.da),t(e.ga)].filter(mt).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Mp(e,t,n){return[t(e.I),t(e.da),t(e.ga)].filter(mt).map((function(e){return zr(e,n)})).reduce((function(e,t){return e||t}))}function Dp(e,t,n,i,r,a){for(var o=Jr(e,"http://www.w3.org/1999/xlink","href"),s=Jr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=c(Array.from(e.attributes)),l=u.next();!l.done;l=u.next())l=l.value,"http://www.w3.org/1999/xlink"==l.namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=a)return Ri(new ht(2,4,4028));if("onLoad"!=s)return Ri(new ht(2,4,4027));var d=vt([i],[o]);return r.request(0,Wi(d,t)).ea((function(i){i=da(i.data,e.tagName);if(!i)return Ri(new ht(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s);e.appendChild(s)}i=c(Array.from(i.attributes));for(s=i.next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return Rp(e,t,n,d[0],r,a+1)}))}function Rp(e,t,n,i,r,a){a=void 0===a?0:a;if(Jr(e,"http://www.w3.org/1999/xlink","href")){var o=Dp(e,t,n,i,r,a);n&&(o=o.ea(void 0,(function(){return Rp(e,t,n,i,r,a)})));return o}o=[];for(var s=c(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())u=u.value,u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Jr(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(Rp(u,t,n,i,r,a)));return Oi(o).ea((function(){return e}))}function Lp(e,t,n,i,r,a,o){var s,u=(new Ir).M("sidx",(function(e){s=Pp(t,i,r,a,o,n,e)}));e&&u.parse(e);if(s)return s;throw new ht(2,3,3004)}function Pp(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var u=o.reader.J();if(0==u)throw new ht(2,3,3005);if(0==o.version){var l=o.reader.J();var c=o.reader.J()}else l=o.reader.dc(),c=o.reader.dc();o.reader.skip(2);var d=o.reader.Ia();e=e+o.size+c;for(c=0;c<d;c++){var h=o.reader.J(),f=(h&2147483648)>>>31;h&=2147483647;var p=o.reader.J();o.reader.skip(4);if(1==f)throw new ht(2,3,3006);s.push(new fo(l/u+n,(l+p)/u+n,(function(){return a}),e,e+h-1,t,n,i,r));l+=p;e+=h}o.parser.stop();return s}function Np(e){this.h=fe(e);this.g=new xr(this.h,0)}Np.prototype.ha=function(){return this.g.ha()};function Op(e){var t=Up(e);if(7<t.length)throw new ht(2,3,3002);var n=0;t=c(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Up(e);e:{i=c(jp);for(var r=i.next();!r.done;r=i.next())if(le(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.fa();else{if(8==t.length&&t[1]&224)throw new ht(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}t=e.g.fa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.fa();i=fe(e.h,e.g.fa(),t);e.g.skip(t);return new Bp(n,i)}function Up(e){var t=e.g.fa(),n=e.g.qa();if(0==n)throw new ht(2,3,3002);n=8-Math.floor(Math.log2(n));e.g.skip(n-1);return he(e.h,t,n)}var jp=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Bp(e,t){this.id=e;this.g=t}function Fp(e){if(8<e.g.byteLength)throw new ht(2,3,3002);if(8==e.g.byteLength&&e.g.getUint8(0)&224)throw new ht(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function Vp(e,t,n,i,r,a,o,s,u){function l(){return r}var c=[];e=new Np(e.g);for(var d=null,h=null;e.ha();){var f=Op(e);if(187==f.id){var p=Gp(f);p&&(f=n*p.ph,p=t+p.Zg,null!=d&&c.push(new fo(d+o,f+o,l,h,p-1,a,o,s,u)),d=f,h=p)}}null!=d&&c.push(new fo(d+o,i+o,l,h,null,a,o,s,u));return c}function Gp(e){var t=new Np(e.g);e=Op(t);if(179!=e.id)throw new ht(2,3,3013);e=Fp(e);t=Op(t);if(183!=t.id)throw new ht(2,3,3012);t=new Np(t.g);for(var n=0;t.ha();){var i=Op(t);if(241==i.id){n=Fp(i);break}}return{ph:e,Zg:n}}function Hp(e,t){t=Mp(e,t,"Initialization");if(!t)return null;var n=e.I.Da,i=t.getAttribute("sourceURL");i&&(n=vt(e.I.Da,[i]));i=0;var r=null;if(t=ea(t,"range",ia))i=t.start,r=t.end;return new co((function(){return n}),i,r,Jp(e))}function qp(e,t){var n=Number(Cp(e,Kp,"presentationTimeOffset"))||0,i=Cp(e,Kp,"timescale"),r=1;i&&(r=aa(i)||1);var a=n/r||0,o=Hp(e,Kp);Wp(e,o);var s=Hi(e);return{Xb:function(){var e=Mp(s,Kp,"RepresentationIndex");var n=s.I.Da;e&&(e=e.getAttribute("sourceURL"))&&(n=vt(s.I.Da,[e]));e=Xp(s);return zp(s,t,o,n,e.start,e.end,a)}}}function zp(e,t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b,w,T;return O((function(x){if(1==x.g)return s=e.presentationTimeline,u=!e.qb||!e.V.ie,l=e.V.start,c=e.V.duration,d=e.I.mimeType.split("/")[1],h=t,f=null,p=[h(i,r,a,!1),"webm"==d?h(n.wa(),n.Ba,n.ia,!0):null],h=null,E(x,Promise.all(p),2);g=x.h;m=g[0];v=g[1]||null;y=null;b=l-o;w=l;T=c?l+c:Infinity;if("mp4"==d)var A=Lp(m,r,i,n,b,w,T);else{A=new Np(v);if(440786851!=Op(A).id)throw new ht(2,3,3008);var S=Op(A);if(408125543!=S.id)throw new ht(2,3,3009);A=S.g.byteOffset;S=new Np(S.g);for(var I=null;S.ha();){var k=Op(S);if(357149030==k.id){I=k;break}}if(!I)throw new ht(2,3,3010);I=new Np(I.g);k=1e6;for(S=null;I.ha();){var _=Op(I);if(2807729==_.id)k=Fp(_);else if(17545==_.id)if(4==_.g.byteLength)S=_.g.getFloat32(0);else if(8==_.g.byteLength)S=_.g.getFloat64(0);else throw new ht(2,3,3003)}if(null==S)throw new ht(2,3,3011);I=k/1e9;S*=I;k=Op(new Np(m));if(475249515!=k.id)throw new ht(2,3,3007);A=Vp(k,A,I,S,i,n,b,w,T)}y=A;s.Pc(y);f=new eu(y);u&&f.Vb(w,T,!0);return x.return(f)}))}function Kp(e){return e.Vc}function Xp(e){var t=Mp(e,Kp,"RepresentationIndex");e=Cp(e,Kp,"indexRange");e=ia(e||"");t&&(e=ea(t,"range",ia,e));return e}function Wp(e,t){Yp(e,t);if(!Xp(e))throw new ht(2,4,4002)}function Yp(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=Tt&&"mp4"!=n&&"webm"!=n)throw new ht(2,4,4006);if("webm"==n&&!t)throw new ht(2,4,4005)}function Jp(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Hd,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Qp(e,t){var n=Hp(e,$p),i=Zp(e);if(!i.ka&&!i.timeline&&1<i.ac.length)throw new ht(2,4,4002);if(!i.ka&&!e.V.duration&&!i.timeline&&1==i.ac.length)throw new ht(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new ht(2,4,4002);var r=null,a=null;e.ga.id&&e.I.id&&(a=t[e.ga.id+","+e.I.id])&&(r=a.segmentIndex);var o=eg(e.V.start,e.V.duration,e.I.Da,i,n);t=!r;r?r.Oc(o,e.presentationTimeline.eb()):r=new eu(o);e.presentationTimeline.Pc(o);e.qb&&e.V.ie||r.Vb(e.V.start,e.V.duration?e.V.start+e.V.duration:Infinity,t);a&&(a.segmentIndex=r);return{Xb:function(){r&&0!=r.Bb()||r.Fd(o);return Promise.resolve(r)}}}function $p(e){return e.ub}function Zp(e){var t=tg(e);e=_p(e,$p);var n=e.hc;0==n&&(n=1);var i=0;e.ka?i=e.ka*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start);return{ka:e.ka,startTime:i,hc:n,kb:e.kb,timeline:e.timeline,ac:t}}function eg(e,t,n,i,r){var a=i.ac.length;i.timeline&&i.timeline.length!=i.ac.length&&(a=Math.min(i.timeline.length,i.ac.length));for(var o=e-i.kb,s=t?e+t:Infinity,u=[],l=i.startTime,c={},d=0;d<a;c={vc:c.vc,tc:c.tc},d++){c.tc=i.ac[d];var h=void 0;h=null!=i.ka?l+i.ka:i.timeline?i.timeline[d].end:l+t;c.vc=null;u.push(new fo(e+l,e+h,function(e){return function(){null==e.vc&&(e.vc=vt(n,[e.tc.Rg]));return e.vc}}(c),c.tc.start,c.tc.end,r,o,e,s));l=h}return u}function tg(e){return[e.I.ub,e.da.ub,e.ga.ub].filter(mt).map((function(e){return Xr(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.pf&&(e.pf=!0);var n=t.getAttribute("media");t=ea(t,"mediaRange",ia,{start:0,end:null});return{Rg:n,start:t.start,end:t.end}}))}function ng(e,t,n,i,r,a){var o=sg(e),s=rg(e);ag(s);var u=Hi(e);if(s.Nc)return Yp(e,o),{Xb:function(){var e=kp(s.Nc,u.I.id,null,u.bandwidth||null,null);e=vt(u.I.Da,[e]);return zp(u,t,o,e,0,null,s.kb)}};if(s.ka)return i||"image"===e.da.contentType||(e.presentationTimeline.ve(s.ka),e.presentationTimeline.Gd(e.V.start)),{Xb:function(){return og(u,s,r,o,a)}};var l=null;i=i=null;e.ga.id&&e.I.id&&(i=e.ga.id+","+e.I.id,i=n[i])&&(l=i.segmentIndex);var c=e.V.start,d=e.V.duration?c+e.V.duration:Infinity,h=!(e.qb&&e.V.ie);l?(n=l,lg(n,s,c,d,h),n.Sa(e.presentationTimeline.eb())):l=new ug(s,e.I.id,e.bandwidth,e.I.Da,c,d,o,h);s.timeline&&"image"!==e.da.contentType&&e.presentationTimeline.xf(s.timeline,c);i&&e.qb&&(i.segmentIndex=l);return{Xb:function(){l instanceof ug&&0==l.Bb()&&lg(l,s,c,d,h);return Promise.resolve(l)}}}function ig(e){return e.Wc}function rg(e){var t=_p(e,ig),n=Cp(e,ig,"media");e=Cp(e,ig,"index");return{ka:t.ka,timescale:t.timescale,hc:t.hc,kb:t.kb,Ue:t.Ue,timeline:t.timeline,se:n,Nc:e}}function ag(e){var t=e.Nc?1:0;t+=e.timeline?1:0;t+=e.ka?1:0;if(0==t)throw new ht(2,4,4002);1!=t&&(e.Nc&&(e.timeline=null),e.ka=null);if(!e.Nc&&!e.se)throw new ht(2,4,4002)}function og(e,t,n,i,r){function a(e){var n=(e-p)*f,r=n+t.kb,a=n+l;n=a+f;var o=Math.min(n,s());a=new fo(a,o,(function(){var t=kp(m,y,e,v,r*g);return vt(b,[t])}),0,null,i,w,l,s());a.j=n;return a}function o(){var e=[Math.max(u.eb(),l),Math.min(u.Cb(),s())].map((function(e){return e-l}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=d&&r[d]||h;return e?l+e:Infinity}var u=e.presentationTimeline,l=e.V.start,d=e.ga.id,h=e.V.duration,f=t.ka,p=t.hc,g=t.timescale,m=t.se,v=e.bandwidth||null,y=e.I.id,b=e.I.Da,w=l-t.kb,T=o();e=e.qb?Math.max(T[0],T[1]-n+1):T[0];T=T[1];n=[];for(var E=e;E<=T;++E){var x=a(E);n.push(x)}var A=new eu(n);n=u.Cb()<s();E=u.T();if(n||E){var S=Math.max(e,T+1);A.Pd(f,(function(){var e=u.eb();A.Sa(e);var t=c(o());t.next();t=t.next().value;for(var n=[];S<=t;){var i=a(S);n.push(i);S++}return e>s()&&!n.length?null:n}))}return Promise.resolve(A)}function sg(e){var t=Cp(e,ig,"initialization");if(!t)return null;var n=e.I.id,i=e.bandwidth||null,r=e.I.Da;return new co((function(){var e=kp(t,n,null,i,null);return vt(r,[e])}),0,null,Jp(e))}function ug(e,t,n,i,r,a,o,s){eu.call(this,[]);this.h=e;this.D=t;this.s=n;this.u=i;this.j=r;this.o=a;this.A=o;s&&cg(this)}y(ug,eu);i=ug.prototype;i.Bb=function(){return this.h?this.h.timeline.length:0};i.release=function(){eu.prototype.release.call(this);this.h=null};i.Sa=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length;i+=1)if(n[i].end+this.j<=e)t+=1;else break;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.Bb()&&this.release())}};function lg(e,t,n,i,r){if(e.h){n=e.h.timeline;var a=n[n.length-1];t=t.timeline.filter((function(e){return e.start>=a.end}));0<t.length&&e.h.timeline.push.apply(e.h.timeline,d(t));e.o!==i&&(e.o=i)}else e.h=t,e.j=n,e.o=i;r&&cg(e)}function cg(e){if(!e.m){for(var t=e.h.timeline;t.length;)if(t[t.length-1].start>=e.o)t.pop();else break;e.Sa(e.j);0!==t.length&&Infinity!==e.o&&(t[t.length-1].end=e.o-e.j)}}i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>this.o)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],a=r.start+this.j;r=r.end+this.j;i<n&&(r=t[i+1].start+this.j);if(e>=a&&e<r)return i+this.i}return null};i.get=function(e){var t=this,n=e-this.i;if(0>n||n>=this.Bb()||!this.h)return null;var i=this.g[n];if(!i){i=this.h.timeline[n];var r=e+this.h.hc,a=this.h.Ue+i.Ve;i=new fo(this.j+i.start,this.j+i.end,(function(){return t.h?dg(t.h.se,t.D,r,t.s,a,t.u):[]}),0,null,this.A,this.j-this.h.kb,this.j,this.o);this.g[n]=i}return i};function dg(e,t,n,i,r,a){e=kp(e,t,n,i||null,r);return vt(a,[e]).map((function(e){return e.toString()}))}function hg(){this.j=[];this.g=[];this.i=[];this.l=[];this.h=[];this.m=new Set}i=hg.prototype;i.release=function(){for(var e=c(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[];this.i=[];this.l=[];this.h=[];this.j=[]};i.Eg=function(){return this.j};i.ee=function(){return this.l.slice()};i.mg=function(){return this.h};i.bf=function(e,t){var n=this,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N;return O((function(O){switch(O.g){case 1:i=Et;fg(e);gg(e);pg(e);mg(e);if(!t&&1==e.length){r=e[0];n.g=r.audioStreams;n.i=r.videoStreams;n.l=r.textStreams;n.h=r.imageStreams;O.B(2);break}a=-1;for(o=0;o<e.length;o++)s=e[o],n.m.has(s.id)||(n.m.add(s.id),-1==a&&(a=o));if(-1==a)return O.return();u=e.map((function(e){return e.audioStreams}));l=e.map((function(e){return e.videoStreams}));d=e.map((function(e){return e.textStreams}));h=e.map((function(e){return e.imageStreams}));f=c(d);for(p=f.next();!p.done;p=f.next())g=p.value,g.push(Og(i.ca));m=c(h);for(v=m.next();!v.done;v=m.next())y=v.value,y.push(Og(i.wc));return E(O,yg(n.g,u,a,xg,Sg),3);case 3:return E(O,yg(n.i,l,a,xg,Sg),4);case 4:return E(O,yg(n.l,d,a,xg,Sg),5);case 5:return E(O,yg(n.h,h,a,xg,Sg),2);case 2:b=0;w=[];if(n.i.length&&n.g.length)for(_=c(n.g),C=_.next();!C.done;C=_.next())for(M=C.value,D=c(n.i),R=D.next();!R.done;R=D.next())L=R.value,P=Ga(M.drmInfos,L.drmInfos),M.drmInfos.length&&L.drmInfos.length&&!P.length||(N=b++,w.push({id:N,language:M.language,disabledUntilTime:0,primary:M.primary,audio:M,video:L,bandwidth:(M.bandwidth||0)+(L.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(T=n.i.concat(n.g),A=c(T),S=A.next();!S.done;S=A.next())I=S.value,k=b++,w.push({id:k,language:I.language,disabledUntilTime:0,primary:I.primary,audio:I.type==i.pb?I:null,video:I.type==i.va?I:null,bandwidth:I.bandwidth||0,drmInfos:I.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=w;x(O)}}))};function fg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.audioStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&Te(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.audioStreams=n}}function pg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.bandwidth==s.bandwidth&&Te(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}function gg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.videoStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&Te(r.roles,s.roles)&&gr(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.videoStreams=n}}function mg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}function vg(e){var t,n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x,A,S,I,k,_,C;return O((function(M){switch(M.g){case 1:t=Et;if(1==e.length)return M.return(e[0]);n=e.map((function(e){return e.filter((function(e){return e.type==t.pb}))}));i=e.map((function(e){return e.filter((function(e){return e.type==t.va}))}));r=e.map((function(e){return e.filter((function(e){return e.type==t.ca}))}));a=e.map((function(e){return e.filter((function(e){return e.type==t.wc}))}));o=c(r);for(s=o.next();!s.done;s=o.next())u=s.value,u.push(Ng(t.ca));l=c(a);for(d=l.next();!d.done;d=l.next())h=d.value,h.push(Ng(t.wc));return E(M,yg([],n,0,Ag,Ig),2);case 2:return f=M.h,E(M,yg([],i,0,Ag,Ig),3);case 3:return p=M.h,E(M,yg([],r,0,Ag,Ig),4);case 4:return g=M.h,E(M,yg([],a,0,Ag,Ig),5);case 5:m=M.h;v=0;if(p.length&&f.length)for(x=c(f),A=x.next();!A.done;A=x.next())for(S=A.value,I=c(p),k=I.next();!k.done;k=I.next())_=k.value,C=v++,_.variantIds.push(C),S.variantIds.push(C);else for(y=p.concat(f),b=c(y),w=b.next();!w.done;w=b.next())T=w.value,T.variantIds=[v++];return M.return(p.concat(f).concat(g).concat(m))}}))}function yg(e,t,n,i,r){var a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x,A,S,I,k;return O((function(_){switch(_.g){case 1:a=Et;o=[];for(s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);u=c(e);l=u.next();case 2:if(l.done){_.B(4);break}d=l.value;return E(_,bg(d,t,n,r,o),5);case 5:h=_.h;if(!h)throw new ht(2,4,4037);l=u.next();_.B(2);break;case 4:f=c(o);for(p=f.next();!p.done;p=f.next())for(g=p.value,m=c(g),v=m.next();!v.done;v=m.next())y=v.value,(b=Tg(y,t,i,r,o))&&e.push(b);w=c(o);for(p=w.next();!p.done;p=w.next())for(T=p.value,x={},A=c(T),v=A.next();!v.done;x={ob:x.ob},v=A.next())if(x.ob=v.value,S=x.ob.type==a.ca&&!x.ob.language,I=x.ob.type==a.wc&&!x.ob.tilesLayout,!S&&!I&&(k=e.some(function(e){return function(t){return t.mimeType==e.ob.mimeType&&_t(t.codecs)==_t(e.ob.codecs)}}(x))))throw new ht(2,4,4037);return _.return(e)}}))}function bg(e,t,n,i,r){return O((function(a){if(1==a.g)return kg(t,e),e.matchedStreams?e.segmentIndex?E(a,wg(e,n),2):a.B(2):a.return(!1);Eg(e,n,i,r);return a.return(!0)}))}function wg(e,t){var n,i,r,a,o,s,u;return O((function(l){if(1==l.g){n=[];i=e.matchedStreams;r=c(i);for(a=r.next();!a.done;a=r.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return E(l,Promise.all(n),2)}if(e.segmentIndex instanceof ru)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);x(l)}))}function Tg(e,t,n,i,r){var a=n(e);kg(t,a);a.createSegmentIndex&&(a.createSegmentIndex=function(){return O((function(e){if(a.segmentIndex)return e.B(0);a.segmentIndex=new ru;return E(e,wg(a,0),0)}))});if(!a.matchedStreams||!a.matchedStreams.length)return null;Eg(a,0,i,r);return a}function Eg(e,t,n,i){for(var r=e.matchedStreams,a=0;a<r.length;a++)if(a>=t){var o=r[a];n(e,o);var s=!0;"audio"==e.type&&0==zt(e.language,o.language)&&(s=!1);s&&i[a].delete(o)}}function xg(e){var t=Object.assign({},e);t.originalId=null;t.createSegmentIndex=function(){return Promise.resolve()};t.closeSegmentIndex=function(){t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null);if(t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)};t.segmentIndex=null;t.emsgSchemeIdUris=[];t.keyIds=new Set;t.closedCaptions=null;t.trickModeVideo=null;return t}function Ag(e){e=Object.assign({},e);e.keyIds=new Set;e.segments=[];e.variantIds=[];e.closedCaptions=null;return e}function Sg(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));e.keyIds=function(e,t){return new Set([].concat(d(e),d(t)))}(e.keyIds,t.keyIds);null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=Ga(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new ht(2,4,4038);e.drmInfos=n;e.encrypted=e.encrypted||t.encrypted;if(t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);n=c(t.closedCaptions);for(var i=n.next();!i.done;i=n.next()){var r=c(i.value);i=r.next().value;r=r.next().value;e.closedCaptions.set(i,r)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=xg(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){e.trickModeVideo.segmentIndex=e.segmentIndex.clone();return Promise.resolve()}),Sg(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Sg(e.trickModeVideo,t)}function Ig(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;n=new Set([].concat(d(e.keyIds),d(n)));e.keyIds=n;e.encrypted=e.encrypted&&t.encrypted;e.segments.push.apply(e.segments,d(t.segments));if(t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=c(t.closedCaptions),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value;i=i.next().value;e.closedCaptions.set(n,i)}}function kg(e,t){var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){var r=t,a={audio:_g,video:_g,text:Cg,image:Mg}[r.type],o={audio:Dg,video:Rg,text:Lg,image:Pg}[r.type],s=null;i=c(i.value);for(var u=i.next();!u.done;u=i.next())u=u.value,!a(r,u)||s&&!o(r,s,u)||(s=u);r=s;if(!r)return;n.push(r)}t.matchedStreams=n}function _g(e,t){function n(e){if(!Gg.has(e)){var t=_t(e);Gg.set(e,t)}return Gg.get(e)}return t.mimeType!=e.mimeType||n(t.codecs)!=n(e.codecs)||e.drmInfos&&!Va(e.drmInfos,t.drmInfos)?!1:!0}function Cg(e,t){return e.language?t.language?0==zt(e.language,t.language)||t.kind!=e.kind?!1:!0:!0:!1}function Mg(e){return e.tilesLayout?!0:!1}function Dg(e,t,n){if(e.id==n.id)return!0;var i=zt(e.language,t.language),r=zt(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(e.roles.length)return i=t.roles.filter((function(t){return e.roles.includes(t)})),r=n.roles.filter((function(t){return e.roles.includes(t)})),r.length>i.length?!0:r.length<i.length?!1:n.roles.length<t.roles.length;if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;i=Ug(e.channelsCount,t.channelsCount,n.channelsCount);if(i==Bg)return!0;if(i==Vg)return!1;i=Ug(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate);return i==Bg?!0:i==Vg?!1:e.bandwidth&&jg(e.bandwidth,t.bandwidth,n.bandwidth)==Bg?!0:!1}function Rg(e,t,n){if(e.id==n.id)return!0;var i=Ug(e.width*e.height,t.width*t.height,n.width*n.height);if(i==Bg)return!0;if(i==Vg)return!1;if(e.frameRate){i=Ug(e.frameRate,t.frameRate,n.frameRate);if(i==Bg)return!0;if(i==Vg)return!1}return e.bandwidth&&jg(e.bandwidth,t.bandwidth,n.bandwidth)==Bg?!0:!1}function Lg(e,t,n){if(e.id==n.id)return!0;var i=zt(e.language,t.language),r=zt(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){i=t.roles.filter((function(t){return e.roles.includes(t)}));r=n.roles.filter((function(t){return e.roles.includes(t)}));if(r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs?!1:!0}function Pg(e,t,n){return e.id==n.id?!0:Ug(e.width*e.height,t.width*t.height,n.width*n.height)==Bg?!0:!1}function Ng(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Og(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new eu([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function Ug(e,t,n){if(t==e&&e!=n)return Vg;if(n==e&&e!=t)return Bg;if(t>e){if(n<=e||n-e<t-e)return Bg;if(n-e>t-e)return Vg}else{if(n>e)return Vg;if(e-n<e-t)return Bg;if(e-n>e-t)return Vg}return Fg}function jg(e,t,n){t=Math.abs(e-t);e=Math.abs(e-n);return e<t?Bg:t<e?Vg:Fg}q("shaka.util.PeriodCombiner",hg);hg.prototype.combinePeriods=hg.prototype.bf;hg.prototype.getImageStreams=hg.prototype.mg;hg.prototype.getTextStreams=hg.prototype.ee;hg.prototype.getVariants=hg.prototype.Eg;var Bg=1,Fg=0,Vg=-1,Gg=new Map;function Hg(){var e=this;this.h=this.g=null;this.s=[];this.i=null;this.H=1;this.l={};this.L={};this.j=new hg;this.D=0;this.G=new K(5);this.F=new $t((function(){$g(e)}));this.u=new qi;this.A=null;this.K=[];this.m=Infinity;this.o=!1}i=Hg.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this,i;return O((function(r){if(1==r.g)return n.o=t.isLowLatencyMode(),n.s=[e],n.h=t,E(r,qg(n),2);i=r.h;n.h&&Zg(n,i);if(!n.h)throw new ht(2,7,7001);return r.return(n.i)}))};i.stop=function(){for(var e=c(Object.values(this.l)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.j&&this.j.release();this.g=this.h=null;this.s=[];this.i=null;this.l={};this.j=null;null!=this.F&&(this.F.stop(),this.F=null);return this.u.destroy()};i.update=function(){var e=this,t;return O((function(n){if(1==n.g)return A(n,2),E(n,qg(e),4);if(2!=n.g)return I(n,0);t=k(n);if(!e.h||!t)return n.return();e.h.onError(t);x(n)}))};i.onExpirationUpdated=function(){};function qg(e){var t,n,i,r,a,o,s;return O((function(u){if(1==u.g)return t=Wi(e.s,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:4}),zi(e.u,r),E(u,r.promise,2);if(3!=u.g){a=u.h;if(!e.h)return u.return(0);a.uri&&!e.s.includes(a.uri)&&e.s.unshift(a.uri);return E(u,zg(e,a.data,a.uri),3)}o=Date.now();s=(o-i)/1e3;e.G.sample(1,s);return u.return(s)}))}function zg(e,t,n){var i,r,a,o,s;return O((function(u){if(1==u.g){i=da(t,"MPD");if(!i)throw new ht(2,4,4001,n);if(r=e.g.dash.disableXlinkProcessing)return u.return(Kg(e,i,n));a=e.g.dash.xlinkFailGracefully;o=Rp(i,e.g.retryParameters,a,n,e.h.networkingEngine);zi(e.u,o);return E(u,o.promise,2)}s=u.h;return u.return(Kg(e,s,n))}))}function Kg(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N,U,j,B;return O((function(O){switch(O.g){case 1:(i=e.g.dash.manifestPreprocessor)&&i(t);r=[n];a=Xr(t,"Location").map($r).filter(mt);0<a.length&&(o=vt(r,a),r=e.s=o);s=Xr(t,"BaseURL");u=s.map($r);l=vt(r,u);d=0;s&&s.length&&(d=ea(s[0],"availabilityTimeOffset",sa)||0);h=e.g.dash.ignoreMinBufferTime;f=0;h||(f=ea(t,"minBufferTime",na)||0);e.D=ea(t,"minimumUpdatePeriod",na,-1);p=ea(t,"availabilityStartTime",ta);g=ea(t,"timeShiftBufferDepth",na);m=e.g.dash.ignoreSuggestedPresentationDelay;v=null;m||(v=ea(t,"suggestedPresentationDelay",na));y=e.g.dash.ignoreMaxSegmentDuration;b=null;y||(b=ea(t,"maxSegmentDuration",na));w=t.getAttribute("type")||"static";if(e.i)for(T=e.i.presentationTimeline,A=c(Object.values(e.l)),S=A.next();!S.done;S=A.next())I=S.value,I.segmentIndex&&I.segmentIndex.Sa(T.eb());else k=e.g.defaultPresentationDelay||1.5*f,_=null!=v?v:k,T=new Rs(p,_,e.g.dash.autoCorrectDrift);T.fc("static"==w);(C=T.T())&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride);null==g&&(g=Infinity);T.Nd(g);M=t.getAttribute("profiles")||"";D={qb:"static"!=w,presentationTimeline:T,ga:null,V:null,da:null,I:null,bandwidth:0,pf:!1,Ub:d,profiles:M.split(",")};R=Xg(e,D,l,t);L=R.duration;P=R.periods;"static"!=w&&R.gf||T.Aa(L||Infinity);e.m&&!e.o&&(N=e.h.isAutoLowLatencyMode())&&(e.h.enableLowLatencyMode(),e.o=e.h.isLowLatencyMode());e.o?T.Ef(e.m):e.m&&Q("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");T.ve(b||1);return E(O,e.j.bf(P,D.qb),2);case 2:e.o&&(f=0);e.o&&e.m&&(e.D=e.m);if(e.i){e.i.variants=e.j.j;U=e.j.ee();0<U.length&&(e.i.textStreams=U);e.i.imageStreams=e.j.h;e.h.filter(e.i);O.B(3);break}var F=T,V=e.j.j,G=e.j.ee(),H=e.j.h,q=f||0,z=e.g.dash.sequenceMode;var K=zr(t,"ServiceDescription");if(K){var X=zr(K,"Latency");K=zr(K,"PlaybackRate");X&&X.getAttribute("max")||K?(X=X&&X.getAttribute("max")?parseInt(X.getAttribute("max"),10)/1e3:null,K=K?parseFloat(K.getAttribute("max")):null,X={maxLatency:X,maxPlaybackRate:K}):X=null}else X=null;e.i={presentationTimeline:F,variants:V,textStreams:G,imageStreams:H,offlineSessionIds:[],minBufferTime:q,sequenceMode:z,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:X};if(!T.Of()){O.B(4);break}j=Xr(t,"UTCTiming");return E(O,rm(e,l,j),5);case 5:B=O.h;if(!e.h)return O.return();T.Ff(B);case 4:T.Dd();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),x(O)}}))}function Xg(e,t,n,i){var r=ea(i,"mediaPresentationDuration",na),a=[],o=0;i=Xr(i,"Period");for(var s=0;s<i.length;s++){var u=i[s],l=i[s+1],c=ea(u,"start",na,o),d=u.id,h=ea(u,"duration",na),f=null;if(l){var p=ea(l,"start",na);null!=p&&(f=p-c)}else null!=r&&(f=r-c);null==f&&(f=h);if(!(null!==e.A&&null!==d&&null!==c&&c<e.A)||e.K.includes(d)||s+1==i.length){null!==c&&(null===e.A||c>e.A)&&(e.A=c);o=Wg(e,t,n,{start:c,duration:f,node:u,ie:null==f||!l});a.push(o);t.ga.id&&f&&(e.L[t.ga.id]=f);if(null==f){o=null;break}o=c+f}}e.K=a.map((function(e){return e.id}));return null!=r?{periods:a,duration:r,gf:!1}:{periods:a,duration:o,gf:!0}}function Wg(e,t,n,i){t.ga=em(i.node,null,n);t.V=i;t.ga.Ub=t.Ub;t.ga.id||(t.ga.id="__shaka_period_"+i.start);var r=Xr(i.node,"EventStream");n=t.presentationTimeline.eb();r=c(r);for(var a=r.next();!a.done;a=r.next())am(e,i.start,i.duration,a.value,n);n=Xr(i.node,"AdaptationSet").map((function(n){return Jg(e,t,n)})).filter(mt);if(t.qb){i=[];r=c(n);for(a=r.next();!a.done;a=r.next()){a=c(a.value.bh);for(var o=a.next();!o.done;o=a.next())i.push(o.value)}if(i.length!=new Set(i).size)throw new ht(2,4,4018)}i=n.filter((function(e){return!e.Se}));n=n.filter((function(e){return e.Se}));n=c(n);for(r=n.next();!r.done;r=n.next()){r=r.value;a=r.Se.split(" ");o=c(i);for(var s=o.next();!s.done;s=o.next()){var u=s.value;if(a.includes(u.id)){s={};u=c(u.streams);for(var l=u.next();!l.done;s={ed:s.ed},l=u.next())s.ed=l.value,s.ed.trickModeVideo=r.streams.find(function(e){return function(t){return _t(e.ed.codecs)==_t(t.codecs)}}(s))}}}r=e.g.disableAudio?[]:Yg(i,"audio");o=e.g.disableVideo?[]:Yg(i,"video");a=e.g.disableText?[]:Yg(i,Tt);n=e.g.disableThumbnails?[]:Yg(i,"image");if(!o.length&&!r.length)throw new ht(2,4,4004);i=[];r=c(r);for(s=r.next();!s.done;s=r.next())i.push.apply(i,d(s.value.streams));r=[];o=c(o);for(s=o.next();!s.done;s=o.next())r.push.apply(r,d(s.value.streams));o=[];a=c(a);for(s=a.next();!s.done;s=a.next())o.push.apply(o,d(s.value.streams));a=[];n=c(n);for(s=n.next();!s.done;s=n.next())a.push.apply(a,d(s.value.streams));return{id:t.ga.id,audioStreams:i,videoStreams:r,textStreams:o,imageStreams:a}}function Yg(e,t){return e.filter((function(e){return e.contentType==t}))}function Jg(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.da=em(n,t.ga,null);var r=!1,a=Xr(n,"Role"),o=a.map((function(e){return e.getAttribute("value")})).filter(mt),s=void 0,u=t.da.contentType==Tt;u&&(s="subtitle");a=c(a);for(var l=a.next();!l.done;l=a.next()){l=l.value;var h=l.getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(l=l.getAttribute("value"),l){case"main":r=!0;break;case"caption":case"subtitle":s=l}}var f;h=Xr(n,"EssentialProperty");a=null;l=!1;h=c(h);for(var p=h.next();!p.done;p=h.next()){p=p.value;var g=p.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?a=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?f=i(parseInt(p.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=g&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=g&&(l=!0)}h=Xr(n,"SupplementalProperty");h=c(h);for(p=h.next();!p.done;p=h.next())p=p.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==p.getAttribute("schemeIdUri")&&(f=i(parseInt(p.getAttribute("value"),10)));h=Xr(n,"Accessibility");var m=new Map,v;h=c(h);for(p=h.next();!p.done;p=h.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g){g=g.split(";");for(var y=c(g),b=y.next();!b.done;b=y.next()){var w=b.value,T=b=void 0;w.includes("=")?(w=w.split("="),b=w[0].startsWith("CC")?w[0]:"CC"+w[0],T=w[1]||"und"):(b="CC"+p,2==g.length?p+=2:p++,T=w);m.set(b,qt(T))}}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(g=c(g.split(";")),b=g.next();!b.done;b=g.next())b=b.value,w=y=void 0,b.includes("=")?(b=b.split("="),y="svc"+b[0],w=b[1].split(",")[0].split(":").pop()):(y="svc"+p,p++,w=b),m.set(y,qt(w));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==p?null!=g&&(o.push(g),"captions"==g&&(s="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==p&&("1"==g?v="visually impaired":"2"==g&&(v="hard of hearing"));if(l)return null;l=Xr(n,"ContentProtection");var E=vp(l,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),x=qt(t.da.language||"und"),A=n.getAttribute("label");(l=Xr(n,"Label"))&&l.length&&(l=l[0],l.textContent&&(A=l.textContent));l=Xr(n,"Representation");n=l.map((function(n){if(n=Qg(e,t,E,s,x,A,r,o,m,n,v))n.hdr=n.hdr||f;return n})).filter((function(e){return!!e}));if(0==n.length){a="image"==t.da.contentType;if(e.g.dash.ignoreEmptyAdaptationSet||u||a)return null;throw new ht(2,4,4003)}if(!t.da.contentType||"application"==t.da.contentType)for(t.da.contentType=sm(n[0].mimeType,n[0].codecs),u=c(n),h=u.next();!h.done;h=u.next())h.value.type=t.da.contentType;u=c(n);for(h=u.next();!h.done;h=u.next())for(h=h.value,p=c(E.drmInfos),g=p.next();!g.done;g=p.next())g=g.value,g.keyIds=g.keyIds&&h.keyIds?new Set([].concat(d(g.keyIds),d(h.keyIds))):g.keyIds||h.keyIds;u=l.map((function(e){return e.getAttribute("id")})).filter(mt);return{id:t.da.id||"__fake__"+e.H++,contentType:t.da.contentType,language:x,ei:r,streams:n,drmInfos:E.drmInfos,Se:a,bh:u}}function Qg(e,t,n,i,r,a,o,s,u,l,c){t.I=em(l,t.da,null);e.m=Math.min(e.m,t.I.Ub);if(!nm(t.I))return null;var d=t.V.start;t.bandwidth=ea(l,"bandwidth",aa)||0;var h=t.I.contentType,f=h==Tt||"application"==h;h="image"==h;try{var p=function(t,n,i,r){return om(e,t,n,i,r)};if(t.I.Vc)var g=qp(t,p);else if(t.I.ub)g=Qp(t,e.l);else if(t.I.Wc)g=ng(t,p,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var m=t.I.Da,v=t.V.duration||0;g={Xb:function(){return Promise.resolve(nu(d,v,m))}}}}catch(e){if((f||h)&&4002==e.code)return null;throw e}p=Xr(l,"ContentProtection");p=yp(p,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI);p=new Set(p?[p]:[]);var y=!1;Xr(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(y=!0);var b=!1;f&&(b=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var w;if(h&&((l=Xr(l,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(w=l.getAttribute("value")),!w))return null;var T;l=t.I.codecs;t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(T="PQ");l=t.I.id?t.ga.id+","+t.I.id:"";var A=l&&e.l[l]?e.l[l]:{id:e.H++,originalId:t.I.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){A.segmentIndex&&(A.segmentIndex.release(),A.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:r,originalLanguage:t.da.language,label:a,type:t.da.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:s,forced:b,channelsCount:t.I.Hd,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:T,tilesLayout:w,matchedStreams:[],accessibilityPurpose:c,external:!1};A.createSegmentIndex=function(){var e;return O((function(t){if(1==t.g){if(A.segmentIndex)return t.B(0);e=A;return E(t,g.Xb(),3)}e.segmentIndex=t.h;x(t)}))};l&&t.qb&&!e.l[l]&&(e.l[l]=A);return A}function $g(e){var t,n;O((function(i){switch(i.g){case 1:return t=0,A(i,2),E(i,qg(e),4);case 4:t=i.h;I(i,3);break;case 2:if(n=k(i),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(n),i.return();n.severity=1;e.h.onError(n)}case 3:if(!e.h)return i.return();Zg(e,t);x(i)}}))}function Zg(e,t){0>e.D||e.F.S(Math.max(e.D-t,X(e.G)))}function em(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Hd:null,audioSamplingRate:null,Ub:0};n=n||t.Da;var i=Xr(e,"BaseURL"),r=i.map($r),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=ea(e,"frameRate",la)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,d=Xr(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice();d=c(d);for(var f=d.next();!f.done;f=d.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);d=Xr(e,"AudioChannelConfiguration");d=tm(d)||t.Hd;f=ea(e,"audioSamplingRate",oa)||t.audioSamplingRate;a||(a=sm(o,s));var p=zr(e,"SegmentBase"),g=zr(e,"SegmentTemplate"),m=p?ea(p,"availabilityTimeOffset",sa)||0:0,v=g?ea(g,"availabilityTimeOffset",sa)||0:0;i=i&&i.length?ea(i[0],"availabilityTimeOffset",sa)||0:0;i=t.Ub+i+m+v;return{Da:vt(n,r),Vc:p||t.Vc,ub:zr(e,"SegmentList")||t.ub,Wc:g||t.Wc,width:ea(e,"width",oa)||t.width,height:ea(e,"height",oa)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:l,emsgSchemeIdUris:h,id:e.getAttribute("id"),language:e.getAttribute("lang"),Hd:d,audioSamplingRate:f,Ub:i}}function tm(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if(t=n.getAttribute("schemeIdUri"))if(n=n.getAttribute("value"))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":t=parseInt(n,10);if(!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":t=parseInt(n,16);if(!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function nm(e){var t=e.Vc?1:0;t+=e.ub?1:0;t+=e.Wc?1:0;if(0==t)return e.contentType==Tt||"application"==e.contentType?!0:!1;1!=t&&(e.Vc&&(e.ub=null),e.Wc=null);return!0}function im(e,t,n,i){var r,a,o,s,u,l;return O((function(c){if(1==c.g)return r=vt(t,[n]),a=Wi(r,e.g.retryParameters),a.method=i,o=e.h.networkingEngine.request(4,a),zi(e.u,o),E(c,o.promise,2);s=c.h;if("HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);u=s.headers.date}else u=vr(s.data);l=Date.parse(u);return isNaN(l)?c.return(0):c.return(l-Date.now())}))}function rm(e,t,n){var i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=c(i),o=a.next();case 2:if(o.done){h.B(4);break}s=o.value;A(h,5);u=s.scheme;l=s.value;switch(u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Q("NTP UTCTiming scheme is not supported");break;default:Q("Unrecognized scheme in UTCTiming element",u)}h.B(9);break;case 7:return E(h,im(e,t,l,"HEAD"),10);case 10:return h.return(h.h);case 8:return E(h,im(e,t,l,"GET"),11);case 11:return h.return(h.h);case 9:I(h,3);break;case 5:k(h);case 3:o=a.next();h.B(2);break;case 4:return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}function am(e,t,n,i,r){var a=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",s=ea(i,"timescale",oa)||1;i=c(Xr(i,"Event"));for(var u=i.next();!u.done;u=i.next()){u=u.value;var l=ea(u,"presentationTime",oa)||0,d=ea(u,"duration",oa)||0;l=l/s+t;d=l+d/s;null!=n&&(l=Math.min(l,t+n),d=Math.min(d,t+n));d<r||(u={schemeIdUri:a,value:o,startTime:l,endTime:d,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}function om(e,t,n,i,r){var a,o,s,u,l,c;return O((function(d){if(1==d.g)return a=er,o=r?0:1,s=Iu(t,n,i,e.g.retryParameters),u=e.h.networkingEngine,l=u.request(a,s,{type:o}),zi(e.u,l),E(d,l.promise,2);c=d.h;return d.return(c.data)}))}function sm(e,t){t=St(e,t);return Lt(t)?Tt:e.split("/")[0]}q("shaka.dash.DashParser",Hg);ao.mpd=function(){return new Hg};ro["application/dash+xml"]=function(){return new Hg};ro["video/vnd.mpeg.dash.mpd"]=function(){return new Hg};function um(){}q("shaka.dependencies",um);um.has=function(e){return cm.has(e)};um.add=function(e,t){if(!lm[e])throw Error(e+" is not supported");cm.set(e,(function(){return t}))};var lm={muxjs:"muxjs",ISOBoxer:"ISOBoxer"};um.Allowed=lm;var cm=new Map([["muxjs",function(){return e.muxjs}],["ISOBoxer",function(){return e.ISOBoxer}]]);function dm(e,t){return e.filter((function(e){return e.name==t}))}function hm(e,t){return e.filter((function(e){return bm(e,"TYPE")==t}))}function fm(e,t){e=dm(e,t);return e.length?e[0]:null}function pm(e,t,n){n=void 0===n?0:n;return(e=fm(e,t))?Number(e.value):n}function gm(e,t){return vt([e],[t])[0]}function mm(e,t,n,i){this.h=e;this.type=t;this.g=n;this.segments=i||null}function vm(e,t,n,i){this.id=e;this.name=t;this.g=n;this.value=void 0===i?null:i}vm.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,n=this.g?this.g.map(e):[];this.value&&n.unshift(this.value);0<n.length&&(t+=":"+n.join(","));return t};vm.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};function ym(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function bm(e,t){e=e.getAttribute(t);if(!e)throw new ht(2,4,4023,t);return e.value}function wm(e,t,n,i){i=void 0===i?[]:i;this.g=n;this.l=null;this.j=e;this.m=t;this.h=i}s.Object.defineProperties(wm.prototype,{i:{configurable:!0,enumerable:!0,get:function(){!this.l&&this.j&&this.m&&(this.l=gm(this.j,this.m),this.m=this.j=null);return this.l||""}}});function Tm(e,t){this.name=e;this.value=t}function Em(e){this.h=e||"";this.g=0}function xm(e){Am(e,/[ \t]+/gm)}function Am(e,t){t.lastIndex=e.g;t=t.exec(e.h);t=null==t?null:{position:t.index,length:t[0].length,results:t};if(e.g==e.h.length||null==t||t.position!=e.g)return null;e.g+=t.length;return t.results}function Sm(e){return e.g==e.h.length?null:(e=Am(e,/[^ \t\n]*/gm))?e[0]:null}function Im(){this.g=0}function km(e,t,n){t=vr(t);t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var i=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new ht(2,4,4015);t=0;for(var r=!0,a=c(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else if(o=_m(e,o),--e.g,Cm.includes(o.name)){t=1;break}else"EXT-X-STREAM-INF"==o.name&&(r=!0);a=[];r=!0;for(o=0;o<i.length;o++){var s=i[o],u=i[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{s=_m(e,s);if(Mm.includes(s.name)){if(1!=t)throw new ht(2,4,4017);var l=i.splice(o,i.length-o);i=n;r=[];o=[];u=[];s=null;l=c(l);for(var d=l.next();!d.done;d=l.next())d=d.value,/^(#EXT)/.test(d)?(d=_m(e,d),Cm.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==ym(d,"TYPE")?u.push(d):"MAP"==ym(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=d.trim(),s&&o.push(s),r.push(new wm(i,d,o,u)),o=[],u=[]);u.length&&(s&&o.push(s),r.push(new wm("","",o,u)));return new mm(n,t,a,r)}a.push(s);"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Tm("URI",u)),r=!0)}}return new mm(n,t,a)}function _m(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ht(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Em(i);var a;(a=Am(i,/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Am(i,o);)n.push(new Tm(a[1],a[2]||a[3])),xm(i)}return new vm(e,t,n,r)}var Cm="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Mm="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Dm(){}function Rm(e){try{var t=Lm(e);return Pi({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Ri(e)}}function Lm(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new ht(2,1,1004,t);n=n.slice(1).join(":").split(",");if(2>n.length)throw new ht(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(","));n=i.split(";");i=n[0];var r=!1;1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop());var a;r?a=Br(t):a=wr(t);return{data:a,contentType:i}}q("shaka.net.DataUriPlugin",Dm);Dm.parse=Rm;Xi("data",Rm);function Pm(){var e=this;this.g=this.i=null;this.Na=1;this.s=new Map;this.A=new Map;this.G=new Map;this.G.set("video",new Map);this.G.set("audio",new Map);this.G.set(Tt,new Map);this.G.set("image",new Map);this.ma=new Set;this.h=new Map;this.j=null;this.P="";this.Y=new Im;this.D=-1;this.L=Infinity;this.Ya=!1;this.m=new $t((function(){Av(e)}));this.ba=Dv;this.F=null;this.aa=0;this.l=Infinity;this.X=this.U=this.H=0;this.K=new qi;this.N=new Map;this.u=new Map;this.$=new Map;this.Oa=this.o=!1}i=Pm.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this,i;return O((function(r){return 1==r.g?(n.i=t,n.o=t.isLowLatencyMode(),E(r,xv(n,e),2)):3!=r.g?(i=r.h,n.P=i.uri,E(r,Fm(n,i.data,e),3)):r.return(n.F)}))};i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];this.K&&(e.push(this.K.destroy()),this.K=null);this.g=this.i=null;this.ma.clear();this.F=null;this.h.clear();this.A.clear();this.u.clear();this.s.clear();return Promise.all(e)};i.update=function(){var e=this,t,n,i,r,a,o,s,u,l;return O((function(h){if(1==h.g){if(!Sv(e))return h.return();t=[];n=Array.from(e.h.values());e.l=Infinity;i=n.filter((function(e){return e.stream.segmentIndex}));r=c(i);for(a=r.next();!a.done;a=r.next())o=a.value,t.push(Om(e,o));return E(h,Promise.all(t),2)}iv(e,i.map((function(e){return e.stream})));s=i.some((function(e){return 0==e.Lc}));i.length&&!s&&(u=Pv,Iv(e,u.Qf),l=i.map((function(e){return e.hb})),e.j.Aa(Math.min.apply(Math,d(l))),e.i.updateDuration());s&&Hm(e);x(h)}))};function Nm(e,t){return Sv(e)?e.G.get(t.type):t.Ed}function Om(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M;return O((function(D){if(1==D.g)return n=t.gd,i=new $e(n),r=new ct,t.jd&&(0<=t.Ga&&r.add("_HLS_msn",String(t.Ga)),0<=t.Ha&&r.add("_HLS_part",String(t.Ha))),t.kd&&r.add("_HLS_skip","YES"),dt(r),r.Dc&&tt(i,r),E(D,xv(e,i.toString(),!0),2);a=D.h;if(!t.stream.segmentIndex)return D.return();o=km(e.Y,a.data,a.uri);if(1!=o.type)throw new ht(2,4,4017);s=dm(o.g,"EXT-X-DEFINE");u=qm(e,s);l=t.stream;c=Nm(e,t);h=lv(o,l.mimeType);f=h.keyIds;p=h.drmInfos;g=function(e,t){return e.size===t.size&&[].concat(d(e)).every((function(e){return t.has(e)}))};g(l.keyIds,f)||(l.keyIds=f,l.drmInfos=p,e.i.newDrmInfo(l));m=vv(e,o,l.type,l.mimeType,c,u);v=m.segments;y=m.bandwidth;l.bandwidth=y;l.segmentIndex.Oc(v,e.j.eb());v.length&&(b=pm(o.g,"EXT-X-MEDIA-SEQUENCE",0),T=(w=fm(o.g,"EXT-X-SKIP"))?Number(ym(w,"SKIPPED-SEGMENTS")):0,A=sv(b,v),S=A.Ga,I=A.Ha,t.Ga=S+T,t.Ha=I,k=c.get(b),l.segmentIndex.Sa(k));_=v[0];t.Hb=_.startTime;C=v[v.length-1];t.hb=C.endTime;if(M=fm(o.g,"EXT-X-ENDLIST"))t.Lc=!0;dv(e,o);x(D)}))}i.onExpirationUpdated=function(){};function Um(e,t){for(var n=-1==e.D,i=c(t),r=i.next();!r.done;r=i.next()){r=r.value;var a=r.stream.segmentIndex,o=Nm(e,r);if(a=a.g[0]||null){o=c(o);for(var s=o.next();!s.done;s=o.next()){s=c(s.value);var u=s.next().value;if(s.next().value==a.startTime){n&&(e.D=Math.max(e.D,u));r.be=u;break}}}}if(!(0>e.D))for(t=c(t),r=t.next();!r.done;r=t.next())if(n=r.value,i=n.stream.segmentIndex)if(i.g.splice(0,e.D-n.be),i=i.g[0]||null)i=-i.startTime,n.stream.segmentIndex.offset(i),Bm(e,n,i)}function jm(e,t){if(Infinity==e.L){t=c(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.L=Math.min(e.L,i.g))}}t=e.L;if(Infinity!=t)for(i=c(e.h.values()),n=i.next();!n.done;n=i.next()){n=n.value;var r=n.stream.segmentIndex;if(null!=r){var a=r.g[0]||null;if(null==a.g)J("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Yc,"Expect AV sync issues!");else for(Bm(e,n,a.g-t-a.startTime),n=c(r),r=n.next();!r.done;r=n.next())r.value.Pe(t)}}}function Bm(e,t,n){t.Hb+=n;t.hb+=n;e=Nm(e,t);t=c(e);for(var i=t.next();!i.done;i=t.next()){var r=c(i.value);i=r.next().value;r=r.next().value;e.set(i,r+n)}}function Fm(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N,U,j;return O((function(O){switch(O.g){case 1:i=km(e.Y,t,e.P);r=dm(i.g,"EXT-X-DEFINE");for(var B=c(r),F=B.next();!F.done;F=B.next()){var V=F.value;F=ym(V,"NAME");V=ym(V,"VALUE");F&&V&&(e.s.has(F)||e.s.set(F,V))}a=[];o=[];s=[];if(1==i.type)return E(O,Vm(e,i),5);u=dm(i.g,"EXT-X-MEDIA");l=dm(i.g,"EXT-X-STREAM-INF");d=dm(i.g,"EXT-X-IMAGE-STREAM-INF");h=dm(i.g,"EXT-X-SESSION-KEY");B=c(l);for(F=B.next();!F.done;F=B.next()){var G=F.value;V=ym(G,"AUDIO");F=ym(G,"VIDEO");var H=ym(G,"SUBTITLES");G=Jm(e,G);if(H){var q=wt(Tt,G);e.u.set(H,q);we(G,q)}V&&(H=wt("audio",G),H||(H=e.g.hls.defaultAudioCodec),e.u.set(V,H));F&&(V=wt("video",G),V||(V=e.g.hls.defaultVideoCodec),e.u.set(F,V))}f=dm(i.g,"EXT-X-SESSION-DATA");p=c(f);for(g=p.next();!g.done;g=p.next())if(m=g.value,v=ym(m,"DATA-ID"),y=ym(m,"URI"),b=ym(m,"LANGUAGE"),w=ym(m,"VALUE"),T=(new Map).set("id",v),y&&T.set("uri",gm(e.P,y)),b&&T.set("language",b),w&&T.set("value",w),A=new ji("sessiondata",T),e.i)e.i.onEvent(A);Xm(e,u);B=hm(u,"CLOSED-CAPTIONS");B=c(B);for(F=B.next();!F.done;F=B.next())V=F.value,H=ym(V,"LANGUAGE"),F=qt(H||"und"),H||(H=ym(V,"NAME"))&&(F=H),H=bm(V,"GROUP-ID"),V=bm(V,"INSTREAM-ID").replace("SERVICE","svc"),e.N.get(H)||e.N.set(H,new Map),e.N.get(H).set(V,F);a=Wm(e,l,h);o=zm(e,u);return E(O,Km(e,d),4);case 4:s=O.h;O.B(3);break;case 5:return S=O.h,I=S.type,k=S.mimeType,_=S.codecs,C=S.language,M=S.height,D=S.width,R=S.channelCount,L=S.sampleRate,P=new Map,E(O,ov(e,i,n,n,_,I,C,!0,"Media Playlist",R,P,null,!1,L,!1,k),6);case 6:N=O.h,e.h.set(n,N),"video"==I&&Ev(N.stream,D,M,null,null),a.push({id:0,language:qt(C||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==I?N.stream:null,video:"video"==I?N.stream:null,bandwidth:N.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new ht(2,7,7001);e.j=new Rs(null,0);e.j.fc(!0);1==i.type&&(Sv(e)&&(hv(e,i),U=e.l,e.m.S(U)),j=Array.from(e.h.values()),rv(e,j),Hm(e));e.F={presentationTimeline:e.j,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null};e.i.makeTextStreamsForClosedCaptions(e.F);x(O)}}))}function Vm(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){if(1==w.g){n=e.g.hls.mediaPlaylistFullMimeType;i=n.split(";")[0];r=i.split("/")[0];a=Ct(n);o={type:r,mimeType:i,codecs:a,language:null,height:null,width:null,channelCount:null,sampleRate:null};if(!t.segments.length)return w.return(o);s=t.segments[0];u=new $e(s.i);l=u.ta.split(".").pop();if(c=_v[l])return w.return({type:"audio",mimeType:c,codecs:"",language:null,height:null,width:null,channelCount:null,sampleRate:null});d=[s.i];(h=fv(e,t,s.g,new Map))&&(d=h.wa());f=er;p=Wi(d,e.g.retryParameters);g=h?0:1;return E(w,kv(e,p,f,{type:g}),2)}m=w.h;(v=m.headers["content-type"])&&(v=v.split(";")[0].toLowerCase());if("ts"==l||"video/mp2t"==v){var T=he(m.data),x=(new zo).parse(T);T=x.nd();x=x.fe();var A=[],S=!1,I=!1;switch(T.audio){case"aac":A.push("mp4a.40.2");S=!0;break;case"mp3":A.push("mp4a.40.34");S=!0;break;case"ac3":A.push("ac-3");S=!0;break;case"ec3":A.push("ec-3"),S=!0}switch(T.video){case"avc":x.oa?A.push(x.oa):A.push("avc1.42E01E");I=!0;break;case"hvc":A.push("hvc1.1.6.L93.90"),I=!0}if(y=A.length?{type:S&&!I?"audio":"video",mimeType:"video/mp2t",codecs:A.join(", "),language:null,height:x.height,width:x.width,channelCount:null,sampleRate:null}:null)return w.return(y)}else if("mp4"==l||"video/mp4"==v||"audio/mp4"==v)if(b=Gm(m))return w.return(b);return w.return(o)}))}function Gm(e){function t(e){return n(e.name)}function n(e){e=e.toLowerCase();switch(e){case"avc1":case"avc3":i.push(e+".42E01E");a=!0;break;case"hev1":case"hvc1":i.push(e+".1.6.L93.90");a=!0;break;case"dvh1":case"dvhe":i.push(e+".05.04");a=!0;break;case"vp09":i.push(e+".00.10.08");a=!0;break;case"av01":i.push(e+".0.01M.08");a=!0;break;case"mp4a":i.push("mp4a.40.2");r=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":i.push(e),r=!0}}var i=[],r=!1,a=!1,o=null,s=null,u=null,l=null,c=null;(new Ir).box("moov",kr).box("trak",kr).M("tkhd",(function(e){e=Ro(e.reader,e.version);s=String(e.height);u=String(e.width)})).box("mdia",kr).M("mdhd",(function(e){o=Mo(e.reader,e.version).language})).box("minf",kr).box("stbl",kr).M("stsd",_r).box("mp4a",(function(e){var n=e.reader;n.skip(6);n.skip(2);n.skip(8);var i=n.Ia();n.skip(2);n.skip(2);n.skip(2);n=n.Ia()+n.Ia()/65536;l=i;c=n;e.reader.ha()?kr(e):t(e)})).box("esds",(function(e){e=Lo(e.reader);i.push(e.oa);r=!0})).box("ac-3",t).box("ec-3",t).box("opus",t).box("Opus",t).box("fLaC",t).box("avc1",(function(e){e=Po(e.reader,e.name);i.push(e.oa);a=!0})).box("avc3",(function(e){e=Po(e.reader,e.name);i.push(e.oa);a=!0})).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vp09",t).box("av01",t).box("enca",Cr).box("encv",Cr).box("sinf",kr).box("frma",(function(e){e=No(e.reader).oa;n(e)})).parse(e.data,!0);if(!i.length)return null;e=r&&!a;return{type:e?"audio":"video",mimeType:e?"audio/mp4":"video/mp4",codecs:Qm(i).join(", "),language:o,height:s,width:u,channelCount:l,sampleRate:c}}function Hm(e){if(Sv(e)){if(e.ba==Lv){for(var t,n=t=Infinity,i=c(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&"text"!=r.stream.type&&(t=Math.min(t,r.hb),n=Math.min(n,r.Hb));t-=n;e.g.hls.useSafariBehaviorForLive&&(t=e.j.m);isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride);e.j.Nd(t)}}else e.j.Aa(nv(e));e.j.Dd()}function qm(e,t){var n=new Map;t=c(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=ym(r,"NAME");var a=ym(r,"VALUE");r=ym(r,"IMPORT");i&&a&&n.set(i,a);r&&(i=e.s.get(r))&&n.set(r,i)}return n}function zm(e,t){var n=hm(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return $m(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));n=c(n);for(var i=n.next();!i.done;i=n.next()){var r=bm(i.value,"GROUP-ID");if(i=e.u.get(r))if(r=e.A.get(r)){r=c(r);for(var a=r.next();!a.done;a=r.next())a=a.value,a.stream.codecs=i,a.stream.mimeType=bv(Tt,i)||wv(Tt)}}return t.filter((function(e){return e}))}function Km(e,t){var n,i;return O((function(r){if(1==r.g)return n=t.map((function(t){var n,i,r;return O((function(a){if(1==a.g){if(n=e.g.disableThumbnails)return a.return(null);A(a,2);return E(a,Zm(e,t),4)}if(2!=a.g)return i=a.h,a.return(i.stream);r=k(a);if(e.g.hls.ignoreImageStreamFailures)return a.return(null);throw r}))})),E(r,Promise.all(n),2);i=r.h;return r.return(i.filter((function(e){return e})))}))}function Xm(e,t){t=t.filter((function(e){var t=ym(e,"URI")||"";return"SUBTITLES"!=ym(e,"TYPE")&&""!=t}));t=c(t);for(var n=t.next();!n.done;n=t.next())$m(e,n.value)}function Wm(e,t,n){var i=[],r=new Set;if(0<n.length){n=c(n);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=bm(a,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=ym(a,"KEYFORMAT")||"identity",a=(o=Mv[o])?o(a,""):null)){if(a.keyIds){o=c(a.keyIds);for(var s=o.next();!s.done;s=o.next())r.add(s.value)}i.push(a)}}}t=t.map((function(t){var n=ym(t,"FRAME-RATE"),a=Number(ym(t,"AVERAGE-BANDWIDTH"))||Number(bm(t,"BANDWIDTH")),o=ym(t,"RESOLUTION");o=c(o?o.split("x"):[null,null]);var s=o.next().value,u=o.next().value,l=ym(t,"VIDEO-RANGE");t=Ym(e,t);o=t.audio;t=t.video;for(var d=c(t),h=d.next();!h.done;h=d.next())Ev(h.value.stream,s,u,n,l);n=e.g.disableAudio;if(!o.length||n)o=[null];n=e.g.disableVideo;if(!t.length||n)t=[null];n=[];o=c(o);for(s=o.next();!s.done;s=o.next())for(s=s.value,u=c(t),l=u.next();!l.done;l=u.next()){var f=l.value;if(l=s?s.stream:null)l.drmInfos=i,l.keyIds=r;if(d=f?f.stream:null)d.drmInfos=i,d.keyIds=r;h=s?s.stream.drmInfos:null;var p=f?f.stream.drmInfos:null;f=(f?f.Yc:"")+" - "+(s?s.Yc:"");l&&d&&!Va(h,p)||e.ma.has(f)||(l={id:e.Na++,language:l?l.language:"und",disabledUntilTime:0,primary:!!l&&l.primary||!!d&&d.primary,audio:l,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(l),e.ma.add(f))}return n})).reduce(pt,[]);return t=t.filter((function(e){return null!=e}))}function Ym(e,t){var n=Jm(e,t),i=ym(t,"AUDIO"),r=ym(t,"VIDEO"),a=i||r;a=a&&e.A.has(a)?e.A.get(a):[];i={audio:i?a:[],video:r?a:[]};r=!1;var o=bm(t,"URI"),s=i.audio.find((function(e){return e&&e.Yc==o})),u=wt("video",n),l=wt("audio",n);l&&!u?(a="audio",r=0<i.audio.length):!a.length&&l&&u?(a="video",n=[[u,l].join()]):i.audio.length&&s?(a="audio",r=!0):a=i.video.length&&!i.audio.length?"audio":"video";r||(e=ev(e,t,n,a),i[e.stream.type]=[e]);return i}function Jm(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec);e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec);e=ym(t,"CODECS",n.join(",")).split(/\s*,\s*/);return Qm(e)}function Qm(e){var t=new Set,n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Mt(i)[0];t.has(r)||(n.push(i),t.add(r))}return n}function $m(e,t){var n=bm(t,"GROUP-ID"),i="",r=bm(t,"TYPE").toLowerCase();"subtitles"==r&&(r=Tt);var a=r;a==Tt?i=ym(t,"CODECS")||"":n&&e.u.has(n)&&(i=e.u.get(n));r=yv(bm(t,"URI"),e.s);if(e.h.has(r))return e.h.get(r);var o=ym(t,"LANGUAGE"),s=ym(t,"NAME"),u="YES"==ym(t,"DEFAULT");var l="audio"==a?(l=ym(t,"CHANNELS"))?parseInt(l.split("/")[0],10):null:null;var c="audio"==a?(c=ym(t,"CHANNELS"))?c.includes("/JOC"):!1:!1;var d=ym(t,"CHARACTERISTICS"),h="YES"==ym(t,"FORCED");"audio"==a?t=(t=ym(t,"SAMPLE-RATE"))?parseInt(t,10):null:t=null;i=tv(e,r,i,a,o,u,s,l,null,d,h,t,c);e.A.has(n)?e.A.get(n).push(i):e.A.set(n,[i]);if(e.h.has(r))return e.h.get(r);e.h.set(r,i);return i}function Zm(e,t){var n,i,r,a,o,s,u,l,c,d;return O((function(h){if(1==h.g){n=yv(bm(t,"URI"),e.s);i=ym(t,"CODECS","jpeg")||"";if(e.h.has(n))return h.return(e.h.get(n));r=ym(t,"LANGUAGE");a=ym(t,"NAME");o=ym(t,"CHARACTERISTICS");s=tv(e,n,i,"image",r,!1,a,null,null,o,!1,null,!1);return e.h.has(n)?h.return(e.h.get(n)):(u=ym(t,"RESOLUTION"))?E(h,s.stream.createSegmentIndex(),3):h.B(2)}2!=h.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1]));if(d=ym(t,"BANDWIDTH"))s.stream.bandwidth=Number(d);e.h.set(n,s);return h.return(s)}))}function ev(e,t,n,i){var r=yv(bm(t,"URI"),e.s);if(e.h.has(r))return e.h.get(r);t=ym(t,"CLOSED-CAPTIONS");t="video"==i&&t&&"NONE"!=t?e.N.get(t):null;n=bt(i,n);i=tv(e,r,n,i,null,!1,null,null,t,null,!1,null,!1);if(e.h.has(r))return e.h.get(r);e.h.set(r,i);return i}function tv(e,t,n,i,r,a,o,s,u,l,d,h,f){function p(p){var g,y,b,w,T,A,S,I,k,_,C,M,D,R;return O((function(L){if(1==L.g)return E(L,xv(e,v.gd,!0),2);if(3!=L.g){g=L.h;if(p.aborted)return L.return();y=g.uri;b=km(e.Y,g.data,y);w=Sv(e);return E(L,ov(e,b,t,y,n,i,r,a,o,s,u,l,d,h,f),3)}T=L.h;if(p.aborted)return L.return();A=T.stream;Sv(e)&&!w&&hv(e,b);v.gd=y;v.Hb=T.Hb;v.hb=T.hb;v.kd=T.kd;v.jd=T.jd;v.Lc=T.Lc;v.Ed=T.Ed;v.Ga=T.Ga;v.Ha=T.Ha;v.oe=!0;m.segmentIndex=A.segmentIndex;m.encrypted=A.encrypted;m.drmInfos=A.drmInfos;m.keyIds=A.keyIds;m.mimeType=A.mimeType;m.bandwidth=A.bandwidth;m.drmInfos.length&&e.i.newDrmInfo(m);S=Et;if(i==S.va||i==S.pb)for(I=c(e.h.values()),k=I.next();!k.done;k=I.next())_=k.value,_.oe||_.type!=i||(_.stream.mimeType=A.mimeType);i==S.ca&&(C=A.segmentIndex.get(0))&&C.h&&(m.mimeType="application/mp4");av(e)&&(e.Ya?rv(e,[v]):(e.Ya=!0,M=Array.from(e.h.values()),D=M.filter((function(e){return e.stream.segmentIndex})),rv(e,D),Hm(e),R=e.l,0<R&&e.m.S(R)));x(L)}))}var g=gm(e.P,t),m=uv(e,n,i,r,a,o,s,u,l,d,h,f),v={stream:m,type:i,Yc:t,gd:g,Hb:0,hb:0,Ed:new Map,kd:!1,jd:!1,Lc:!1,be:-1,Ga:-1,Ha:-1,oe:!1},y=null,b=new AbortController;m.createSegmentIndex=function(){if(y)return y;b=new AbortController;return y=new Promise((function(e){e(p(b.signal))}))};m.closeSegmentIndex=function(){y&&!m.segmentIndex&&b.abort();m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null);y=null};return v}function nv(e){var t=Infinity;e=c(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.hb));return t}function iv(e,t){var n=[];t=c(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&tu(i.segmentIndex,(function(e){n.push(e)}));e.j.Pc(n)}function rv(e,t){if(!Sv(e))for(var n=nv(e),i=c(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Vb(0,n);iv(e,t.map((function(e){return e.stream})));e.g.hls.ignoreManifestProgramDateTime?Um(e,t):jm(e,t)}function av(e){if(!e.F)return!1;var t=[],n=[];e=c(e.F.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return 0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex}))?!1:!0}function ov(e,t,n,i,r,a,o,s,u,l,c,d,h,f,p,g){var m,v,y,b,w,T,x,A,S,I,k,_,C,M,D,R,L,P,N,U,j,B,F;return O((function(O){if(1==O.g){if(1!=t.type)throw new ht(2,4,4017);m=dm(t.g,"EXT-X-DEFINE");v=qm(e,m);var V=fm(t.g,"EXT-X-PLAYLIST-TYPE"),G=fm(t.g,"EXT-X-ENDLIST");G=V&&"VOD"==V.value||G;V=V&&"EVENT"==V.value&&!G;V=!G&&!V;G?Iv(e,Dv):V?Iv(e,Lv):Iv(e,Rv);Sv(e)&&dv(e,t);return g?O.B(2):E(O,Tv(e,a,r,t,v),3)}2!=O.g&&(g=O.h);y=lv(t,g);b=y.drmInfos;w=y.keyIds;T=y.encrypted;x=y.Uf;if(T&&!b.length&&!x)throw new ht(2,4,4026);A=Sv(e)?e.G.get(a):new Map;S=vv(e,t,a,g,A,v);I=S.segments;k=S.bandwidth;Sv(e)&&dv(e,t);_=I[0].startTime;C=I[I.length-1];M=C.endTime;D=new eu(I);L=(R=fm(t.g,"EXT-X-SERVER-CONTROL"))?null!=R.getAttribute("CAN-SKIP-UNTIL"):!1;P=R?null!=R.getAttribute("CAN-BLOCK-RELOAD"):!1;N=pm(t.g,"EXT-X-MEDIA-SEQUENCE",0);U=sv(N,I);j=U.Ga;B=U.Ha;F=uv(e,r,a,o,s,u,l,c,d,h,f,p);F.segmentIndex=D;F.encrypted=T;F.drmInfos=b;F.keyIds=w;F.mimeType=g;F.bandwidth=k;return O.return({stream:F,type:a,Yc:n,gd:i,Hb:_,hb:M,kd:L,jd:P,Lc:!1,be:-1,Ga:j,Ha:B,Ed:A,oe:!1})}))}function sv(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Ga:e,Ha:n};t=t[t.length-1];var i=t.i;if(!t.i.length)return e++,t.o&&(n=0),{Ga:e,Ha:n};n=i.length-1;i[i.length-1].m||(e++,n=0);return{Ga:e,Ha:n}}function uv(e,t,n,i,r,a,o,s,u,l,d,h){var f=bv(n,t)||wv(n),p=[];if(u){u=c(u.split(","));for(var g=u.next();!g.done;g=u.next())p.push(g.value)}u=n==Tt?"subtitle":void 0;p.length||"subtitle"!==u||p.push("subtitle");return{id:e.Na++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:f,codecs:t,kind:n==Tt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:qt(i||"und"),originalLanguage:i,label:a,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:o,audioSamplingRate:d,spatialAudio:h,closedCaptions:s,hdr:void 0,tilesLayout:void 0,accessibilityPurpose:null,external:!1}}function lv(e,t){var n=[];if(e.segments){e=c(e.segments);for(var i=e.next();!i.done;i=e.next())i=dm(i.value.g,"EXT-X-KEY"),n.push.apply(n,d(i))}i=e=!1;var r=[],a=new Set;n=c(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=bm(o,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)i=!0;else if(s=ym(o,"KEYFORMAT")||"identity",o=(s=Mv[s])?s(o,t):null){if(o.keyIds){s=c(o.keyIds);for(var u=s.next();!u.done;u=s.next())a.add(u.value)}r.push(o)}}return{drmInfos:r,keyIds:a,encrypted:e,Uf:i}}function cv(t,n,i){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new ht(2,4,4042);var r=0,a=ym(n,"IV","");if(a){var o=Fr(a.substr(2));if(16!=o.byteLength)throw new ht(2,4,4043)}else r=pm(i.g,"EXT-X-MEDIA-SEQUENCE",0);n=gm(i.h,bm(n,"URI"));var s=Wi([n],t.g.retryParameters),u={method:"AES-128",iv:o,firstMediaSequenceNumber:r,fetchKey:function(){var n,i,r;return O((function(a){if(1==a.g)return E(a,kv(t,s,6),2);if(3!=a.g){n=a.h;if(!n.data||16!=n.data.byteLength)throw new ht(2,4,4044);i={name:"AES-CBC"};r=u;return E(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h;u.fetchKey=void 0;x(a)}))}};return u}function dv(e,t){var n=Infinity,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var a=fm(i[r].g,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}r--}i=fm(t.g,"EXT-X-TARGETDURATION");if(!i)throw new ht(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value);if(r=fm(t.g,"EXT-X-PART-INF"))e.H=Number(bm(r,"PART-TARGET"));t=fm(t.g,"EXT-X-SERVER-CONTROL");e.o&&e.H?(e.l=e.Oa?5*e.H<=n?Math.min(e.H,e.l):Math.min(n,e.l):Math.min(e.H,e.l),e.X=t?Number(bm(t,"PART-HOLD-BACK")):0):(e.l=Math.min(n,e.l),n=t?t.getAttribute("HOLD-BACK"):null,e.U=n?Number(n.value):0);e.aa=Math.max(i,e.aa)}function hv(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.X)t=e.X;else if(e.U)t=e.U;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2));t=e.aa*n}e.j.Hf(0);e.j.Gf(t);e.j.fc(!1)}function fv(e,t,n,i){var r=fm(n,"EXT-X-MAP");if(!r)return null;var a=bm(r,"URI");a=yv(gm(t.h,a),i);i=[a,ym(r,"BYTERANGE","")].join("-");if(!e.$.has(i)){var o=void 0;n=c(n);for(var s=n.next();!s.done;s=n.next())s=s.value,"EXT-X-KEY"==s.name&&"AES-128"==bm(s,"METHOD")&&s.id<r.id&&(o=cv(e,s,t));t=pv(a,r,o);e.$.set(i,t)}return e.$.get(i)}function pv(e,t,n){var i=0,r=null;if(t=ym(t,"BYTERANGE"))i=t.split("@"),r=Number(i[0]),i=Number(i[1]),r=i+r-1,n&&(t=r+1-i,t%16&&(r+=16-t%16));return new co((function(){return[e]}),i,r,null,null,null,n)}function gv(t,n,i,r,a,o,s,u,l,d){var h=r.g,f=fm(h,"EXTINF"),p=0,g=0,m=null;r.h.length&&!t.o&&Q("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var v=null;if(!t.g.hls.ignoreManifestProgramDateTime){var y=fm(h,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=ta(y.value))}var b=po;fm(h,"EXT-X-GAP")&&(b=2);if(!f){if(0==r.h.length)throw new ht(2,4,4024,"EXTINF");if(!t.o)return null}var w=[];y=!1;var T=null,E=!1,x=!1;if(t.o&&r.h.length){p=("video/mp4"==l||"audio/mp4"==l)&&e.ReadableStream;l=v;for(var A={},S=0;S<r.h.length;A={qc:A.qc,cd:A.cd},S++){var I=r.h[S],k=0==S?i:w[w.length-1],_=0==S?a:k.endTime,C=Number(ym(I,"DURATION"))||t.H;if(C){var M=_+C,D=0,R=null;"EXT-X-PRELOAD-HINT"==I.name?(D=(D=ym(I,"BYTERANGE-START"))?Number(D):0,(k=ym(I,"BYTERANGE-LENGTH"))?R=D+Number(k)-1:D&&(R=Number.MAX_SAFE_INTEGER)):(D=ym(I,"BYTERANGE"),R=c(mv(k,D)),D=R.next().value,R=R.next().value);A.cd=ym(I,"URI");if(A.cd){k=po;"YES"==ym(I,"GAP")&&(k=2,E=!0);A.qc=null;var L=function(e){return function(){null==e.qc&&(e.qc=gm(s,e.cd));return[e.qc]}}(A);p&&0<=D&&null!=R&&(T=L,y=!0);_=new fo(_,M,L,D,R,n,0,0,Infinity,[],"",null,l,k,d);"EXT-X-PRELOAD-HINT"==I.name&&(_.qe(),x=!0);"YES"!=ym(I,"INDEPENDENT")&&0<S&&_.uf();w.push(_);l&&(l+=C)}}}}if(f){f=Number(f.value.split(",")[0]);if(0==f)return null;p=a+f}else if(w.length)p=w[w.length-1].endTime;else return null;y&&(E||0!=w[0].Ba?(y=!1,T=null):w=[]);(f=fm(h,"EXT-X-BYTERANGE"))?(m=c(mv(i,f.value)),g=m.next().value,m=m.next().value):w.length&&(g=w[0].Ba,m=w[w.length-1].ia);i="";f=null;"image"==u&&(i="1x1",u=fm(h,"EXT-X-TILES"))&&(i=bm(u,"LAYOUT"),(u=ym(u,"DURATION"))&&(f=Number(u)));var P=null;n=new fo(a,p,(function(){if(T)return T();null==P&&(P=yv(r.i,o));return P.length?[P]:[]}),g,m,n,0,0,Infinity,w,i,f,v,b,d);y&&(t.Oa=!0,n.tf(),x&&n.qe());return n}function mv(e,t){var n=0,i=null;t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ia+1,i=n+t-1);return[n,i]}function vv(e,t,n,i,r,a){var o=t.segments,s=void 0,u=pm(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=pm(t.g,"EXT-X-MEDIA-SEQUENCE",0),d=fm(t.g,"EXT-X-SKIP"),h=d?Number(ym(d,"SKIPPED-SEGMENTS")):0,f=l+h,p=0;Sv(e)&&r.has(f)&&(p=r.get(f));var g=[],m=null;d=[];for(var v=0;v<o.length;v++){var y=o[v],b=0==v?p:m.endTime;f=l+h+v;fm(y.g,"EXT-X-DISCONTINUITY")&&u++;var w=c(y.g);for(var T=w.next();!T.done;T=w.next())T=T.value,"EXT-X-KEY"==T.name&&("AES-128"==bm(T,"METHOD")?s=cv(e,T,t):s=void 0);r.set(f,b);w=fv(e,t,y.g,a);!e.o&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.o=e.i.isLowLatencyMode());if(b=gv(e,w,m,y,b,a,t.h,n,i,s))(m=pm(y.g,"EXT-X-BITRATE"))?d.push({bitrate:m,duration:b.endTime-b.startTime}):d.length&&(m=d.pop(),m.duration+=b.endTime-b.startTime,d.push(m)),m=b,b.l=u,e.g.hls.ignoreManifestProgramDateTime&&null!=e.D&&f<e.D||g.push(b)}t=void 0;d.length&&(t=d.reduce((function(e,t){return e+t.duration}),0),t=Math.round(d.reduce((function(e,t){return e+t.bitrate*t.duration}),0)/t*1e3));if(d=g.some((function(e){return null!=e.g})))for(n={},i=0;i<g.length;n={mc:n.mc,lc:n.lc,Zc:n.Zc,mb:n.mb,kc:n.kc},i++)if(n.mb=g[i],null==n.mb.g)for(n.lc=0,n.mc=i,r=function(e){return function(){var t=g[e.mc];if(t){if(null!=t.g)return t.g+e.lc;e.lc-=t.endTime-t.startTime;e.mc+=1}return null}}(n),n.kc=0,n.Zc=i,a=function(e){return function(){var t=g[e.Zc];if(t){t!=e.mb&&(e.kc+=t.endTime-t.startTime);if(null!=t.g)return t.g+e.kc;--e.Zc}return null}}(n);null==n.mb.g;)n.mb.g=a(),null==n.mb.g&&(n.mb.g=r());if(d)for(n=c(g),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.g,r=c(r.i),a=r.next();!a.done;a=r.next())a=a.value,a.g=i,i+=a.endTime-a.startTime;e=e.L;if(d&&Infinity!=e)for(d=c(g),i=d.next();!i.done;i=d.next())i.value.Pe(e);return{segments:g,bandwidth:t}}function yv(e,t){if(!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=c(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),a=t.get(r);if(a)e=e.replace(i,a);else throw new ht(2,4,4039,r)}}return e}function bv(e,t){if(e==Tt){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function wv(e){return e==Tt?"text/vtt":Cv[e].mp4}function Tv(e,t,n,i,r){var a,o,s,u,l,c,d,h,f,p;return O((function(g){if(1==g.g){a=er;o=Math.trunc((i.segments.length-1)/2);s=yv(i.segments[o].i,r);u=new $e(s);l=u.ta.split(".").pop();c=Cv[t];if((d=c[l])||(d=_v[l])||(d=bv(t,n)))return g.return(d);h=Wi([s],e.g.retryParameters);h.method="HEAD";return E(g,kv(e,h,a,{type:1}),2)}f=g.h;return(p=f.headers["content-type"])?g.return(p.split(";")[0]):g.return(wv(t))}))}function Ev(e,t,n,i,r){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0)}function xv(e,t,n){return kv(e,Wi([t],e.g.retryParameters),0,{type:n?2:3})}function Av(e){var t,n;O((function(i){if(1==i.g){if(!e.i)return i.return();A(i,2);return E(i,e.update(),4)}if(2!=i.g)return Sv(e)&&(t=e.l,e.m.S(t)),I(i,0);n=k(i);if(!e.i)return i.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),i.return();n.severity=1;e.i.onError(n);e.m.S(.1);x(i)}))}function Sv(e){return e.ba!=Dv}function Iv(e,t){e.ba=t;e.j&&e.j.fc(!Sv(e));Sv(e)||e.m.stop()}function kv(e,t,n,i){if(!e.K)throw new ht(2,7,7001);t=e.i.networkingEngine.request(n,t,i);zi(e.K,t);return t.promise}q("shaka.hls.HlsParser",Pm);var _v={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Cv={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Mv={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new ht(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new ht(2,4,4041);return yt("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=bm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;t=bm(e,"URI");t=Lm(t);t=he(t.data);t=yt("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);if(e=ym(e,"KEYID"))t.keyIds=new Set([e.toLowerCase().substr(2)]);return t},"com.microsoft.playready":function(e){var t=bm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;e=bm(e,"URI");e=Lm(e);e=he(e.data);t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);e=qr(e,t,new Set,0);return yt("com.microsoft.playready",[{initDataType:"cenc",initData:e}])},identity:function(e){e=bm(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?yt("org.w3.clearkey",null):null}},Dv="VOD",Rv="EVENT",Lv="LIVE",Pv={Qf:Dv,zh:Rv,Eh:Lv};ao.m3u8=function(){return new Pm};ro["application/x-mpegurl"]=function(){return new Pm};ro["application/vnd.apple.mpegurl"]=function(){return new Pm};function Nv(e){var t=0,n=fe(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{e=t+6;for(t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);e+=2;var r=n.getUint16(e,!0);e+=2;if(0!=(r&1)||r+e>n.byteLength){n=[];break e}var a=he(n,e,r);t.push({type:i,value:a});e+=r}n=t}return n}function Ov(e){if(e=Uv(e))e:{e=c(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=zr(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function Uv(e){e=Br(e.textContent);e=Nv(e).filter((function(e){return e.type===jv}))[0];if(!e)return null;e=yr(e.value,!0);return(e=ca(e,"WRMHEADER"))?e:null}var jv=1,Bv=(new Map).set("com.microsoft.playready",Ov).set("com.microsoft.playready.recommendation",Ov).set("com.microsoft.playready.software",Ov).set("com.microsoft.playready.hardware",Ov);function Fv(e){if(!Wv){Wv=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);oy=Xv("ftyp",t,i,t,n);t=Xv("dref",sy);uy=Xv("dinf",t)}this.g=e}Fv.prototype.initSegment=function(){var e=new Uint8Array([]);var t=c(this.g);for(var n=t.next();!n.done;n=t.next()){var i=e;e=n.value;n=Xv;var r=e.id+1;var a=e.stream.width||0,o=e.stream.height||0;"audio"==e.type&&(o=a=0);var s=e.duration*e.timescale,u=Math.floor(s/(Yv+1));s=Math.floor(s%(Yv+1));r=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(zv(r,4)),[0,0,0,0],d(zv(u,4)),d(zv(s,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],d(zv(a,2)),[0,0],d(zv(o,2)),[0,0]));r=Xv("tkhd",r);a=Xv;u=e.duration*e.timescale;o=Math.floor(u/(Yv+1));u=Math.floor(u%(Yv+1));s=e.stream.language;s=s.charCodeAt(0)-96<<10|s.charCodeAt(1)-96<<5|s.charCodeAt(2)-96;o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(zv(e.timescale,4)),d(zv(o,4)),d(zv(u,4)),d(zv(s,2)),[0,0]));o=Xv("mdhd",o);u=e;s=new Uint8Array([]);switch(u.type){case"video":s=Qv;break;case"audio":s=$v}u=Xv("hdlr",s);e:{switch(e.type){case"video":e=Xv("minf",Xv("vmhd",iy),uy,Vv(e));break e;case"audio":e=Xv("minf",Xv("smhd",ry),uy,Vv(e));break e}e=new Uint8Array([])}e=a("mdia",o,u,e);n=n("trak",r,e);e=Gr(i,n)}n=this.g[0];t=Xv;r=n.duration*n.timescale;i=Math.floor(r/(Yv+1));r=Math.floor(r%(Yv+1));i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(zv(n.timescale,4)),d(zv(i,4)),d(zv(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));i=Xv("mvhd",i);a=new Uint8Array([]);r=c(this.g);for(o=r.next();!o.done;o=r.next())o=new Uint8Array([0,0,0,0].concat(d(zv(o.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),o=Xv("trex",o),a=Gr(a,o);r=Xv("mvex",a);a=new Uint8Array([]);if(n.encrypted)for(n=c(n.stream.drmInfos),o=n.next();!o.done;o=n.next())if(o=o.value,o.initData)for(o=c(o.initData),u=o.next();!u.done;u=o.next())a=Gr(a,u.value.initData);t=t("moov",i,e,r,a);i=new Uint8Array(oy.byteLength+t.byteLength);i.set(oy);i.set(t,oy.byteLength);return i};function Vv(e){var t=Xv,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.la.byteLength)var r=Xv("avcC",e.la);else{r=Xv;for(var a=7,o=[],s=[],u=0,l=0,c=0,h=0;h<e.Ka.length;h++){var f=Kv(e.Ka[h]);switch(f[0]&31){case 7:o.push(f);a+=f.length+2;break;case 8:s.push(f),a+=f.length+2}}0<o.length&&(u=o[0][1],c=o[0][2],l=o[0][3]);a=new Uint8Array(a);h=0;a[h++]=1;a[h++]=u;a[h++]=c;a[h++]=l;a[h++]=255;a[h++]=224|o.length;for(u=0;u<o.length;u++)a[h++]=(o[u].length&65280)>>8,a[h++]=o[u].length&255,a.set(o[u],h),h+=o[u].length;a[h++]=s.length;for(o=0;o<s.length;o++)a[h++]=(s[o].length&65280)>>8,a[h++]=s[o].length&255,a.set(s[o],h),h+=s[o].length;r=r("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(zv(n,2)),d(zv(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]));i="avc1";s=new Uint8Array([]);e.encrypted&&(s=Hv(e),i="encv");n=Xv(i,n,r,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.la.byteLength&&(n=Xv("hvcC",e.la)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(zv(i,2)),d(zv(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",s=new Uint8Array([]),e.encrypted&&(s=Hv(e),r="encv"),n=Xv(r,i,n,s));break;case"audio":if(e.codecs.includes("mp3"))e=Xv(".mp3",Gv(e));else if(e.codecs.includes("ac-3"))n=Xv("dac3",e.Z),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Hv(e),i="enca"),e=Xv(i,Gv(e),n,r);else if(e.codecs.includes("ec-3"))n=Xv("dec3",e.Z),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Hv(e),i="enca"),e=Xv(i,Gv(e),n,r);else{if(0<e.Z.byteLength)n=Xv("esds",e.Z);else{n=Xv;i=e.id+1;r=e.stream.bandwidth||0;s=e.stream.channelsCount||2;u=e.stream.audioSamplingRate||44100;l=bt("audio",e.codecs.split(","));c={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};o=c[u];if("mp4a.40.5"===l||"mp4a.40.29"===l)o=c[2*u];u=parseInt(l.split(".").pop(),10);i=new Uint8Array([0,0,0,0,3,25].concat(d(zv(i,2)),[0,4,17,64,21,0,6,0],d(zv(r,4)),d(zv(r,4)),[5,2,u<<3|o>>>1,o<<7|s<<3,6,1,2]));n=n("esds",i)}i="mp4a";r=new Uint8Array([]);e.encrypted&&(r=Hv(e),i="enca");e=Xv(i,Gv(e),n,r)}n=e}e=Xv("stsd",ay,n);return t("stbl",e,Xv("stts",Zv),Xv("stsc",ey),Xv("stsz",ny),Xv("stco",ty))}function Gv(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(d(zv(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Hv(e){var t=Xv;var n=e.codecs.substring(0,e.codecs.indexOf("."));for(var i=0,r=0;r<n.length;r+=1)i|=n.charCodeAt(r)<<8*(n.length-r-1);n=new Uint8Array([].concat(d(zv(i,4))));n=Xv("frma",n);i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);i=Xv("schm",i);r=Xv;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=c(e.stream.drmInfos);for(var o=e.next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size){o=c(o.keyIds);for(var s=o.next();!s.done;s=o.next())a=Kv(s.value)}e=new Uint8Array([0,0,0,0,0,0,1,8]);a=Xv("tenc",e,a);return t("sinf",n,i,r("schi",a))}function qv(e){var t=new Uint8Array([]);e=c(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=Xv,r=new Uint8Array([0,0,0,0].concat(d(zv(n.data?n.data.lb:0,4))));r=Xv("mfhd",r);var a;var o=n.data?n.data.Ja:[];var s=new Uint8Array(4+o.length);for(a=0;a<o.length;a++){var u=o[a].flags;s[a+4]=u.Qa<<4|u.Ua<<2|u.Ta}o=Xv("sdtp",s);var l=o.length+92;s=Xv;a=new Uint8Array([0,0,0,58].concat(d(zv(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));a=Xv("tfhd",a);u=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(u%(Yv+1));u=new Uint8Array([1,0,0,0].concat(d(zv(Math.floor(u/(Yv+1)),4)),d(zv(h,4))));u=Xv("tfdt",u);var f=l;l=n.data?n.data.Ja:[];h=l.length;var p=12+16*h,g=new Uint8Array(p);f+=8+p;g.set(["video"===n.type?1:0,0,15,1].concat(d(zv(h,4)),d(zv(f,4))),0);for(f=0;f<h;f++){var m=l[f];p=zv(m.duration,4);var v=zv(m.size,4),y=m.flags;m=zv(m.$a,4);g.set([].concat(d(p),d(v),[y.fb<<2|y.Qa,y.Ua<<6|y.Ta<<4|y.gb,y.Pa&61440,y.Pa&15],d(m)),12+16*f)}l=Xv("trun",g);o=s("traf",a,u,l,o);i=i("moof",r,o);r=n.data?n.data.Ja:[];n=new Uint8Array([]);r=c(r);for(o=r.next();!o.done;o=r.next())n=Gr(n,o.value.data);n=Xv("mdat",n);t=Gr(t,i,n)}return t}function zv(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Kv(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Xv(e){var t=U.apply(1,arguments),n=Jv[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Jv[e]=n);for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;r=new Uint8Array(i);r[0]=i>>24&255;r[1]=i>>16&255;r[2]=i>>8&255;r[3]=i&255;r.set(n,4);n=0;for(i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Wv=!1,Yv=Math.pow(2,32)-1,Jv={},Qv=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),$v=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Zv=new Uint8Array([0,0,0,0,0,0,0,0]),ey=new Uint8Array([0,0,0,0,0,0,0,0]),ty=new Uint8Array([0,0,0,0,0,0,0,0]),ny=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),iy=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ry=new Uint8Array([0,0,0,0,0,0,0,0]),ay=new Uint8Array([0,0,0,0,0,0,0,1]),oy=new Uint8Array([]),sy=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),uy=new Uint8Array([]);function ly(){var e=this;this.h=this.g=null;this.l=[];this.j=null;this.s=1;this.i=null;this.A=new K(5);this.o=new $t((function(){cy(e)}));this.u=new qi;this.m=new Map}i=ly.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this;return O((function(i){if(1==i.g)return n.l=[e],n.h=t,E(i,dy(n),2);if(!n.h)throw new ht(2,7,7001);return i.return(n.j)}))};function cy(e){var t;O((function(n){switch(n.g){case 1:return A(n,2),E(n,dy(e),4);case 4:I(n,3);break;case 2:t=k(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();x(n)}}))}i.stop=function(){this.g=this.h=null;this.l=[];this.j=null;null!=this.o&&(this.o.stop(),this.o=null);this.m.clear();return this.u.destroy()};i.update=function(){var e=this,t;return O((function(n){if(1==n.g)return A(n,2),E(n,dy(e),4);if(2!=n.g)return I(n,0);t=k(n);if(!e.h||!t)return n.return();e.h.onError(t);x(n)}))};i.onExpirationUpdated=function(){};function dy(e){var t,n,i,r,a,o,s;return O((function(u){if(1==u.g)return t=Wi(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5}),zi(e.u,r),E(u,r.promise,2);a=u.h;if(!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var l=a.uri,h=da(a.data,"SmoothStreamingMedia");if(!h)throw new ht(2,4,4046,l);(l=e.g.mss.manifestPreprocessor)&&l(h);e.i||(e.i=new Rs(null,0));if(l=ea(h,"IsLive",ua,!1))throw new ht(2,4,4047);e.i.fc(!l);var f=ea(h,"TimeScale",oa,1e7),p=ea(h,"DVRWindowLength",oa);l&&(0===p||isNaN(p))&&(p=Infinity);var g=ea(h,"CanSeek",ua,!1);0===p&&g&&(p=Infinity);g=null;p&&0<p&&(g=p/f);l&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride);null==g&&(g=Infinity);e.i.Nd(g);p=ea(h,"Duration",oa,Infinity);l||e.i.Aa(p/f);l={variants:[],textStreams:[],timescale:f,duration:p/f};g=Xr(h,"Protection");var m;f=e.g.mss.keySystemsBySystemId;p=[];g=c(g);for(m=g.next();!m.done;m=g.next())p=p.concat(Xr(m.value,"ProtectionHeader"));if(p.length){g=[];for(m=0;m<p.length;m++){var v=p[m],y=v.getAttribute("SystemID").toLowerCase(),b=f[y];if(b){var w=Uv(v);if(w)e:{w=c(w.getElementsByTagName("DATA"));for(var T=w.next();!T.done;T=w.next())if(T=zr(T.value,"KID")){w=Br(T.textContent);w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(d(w.slice(8))));w=Vr(w);break e}w=null}else w=null;T=Br(v.textContent);y=Fr(y.replace(/-/g,""));y=[{initData:qr(T,y,new Set,0),initDataType:"cenc",keyId:w}];y=yt(b,y);w&&y.keyIds.add(w);if(b=Bv.get(b))y.licenseServerUri=b(v);g.push(y)}}f=g}else f=[];m=f;g=[];f=[];p=[];h=Xr(h,"StreamIndex");h=c(h);for(v=h.next();!v.done;v=h.next()){v=v.value;b=Xr(v,"QualityLevel");y=l.timescale;w=l.duration;T=Xr(v,"c");for(var A=[],S=0,I=0;I<T.length;++I){var k=T[I],_=T[I+1],C=ea(k,"t",oa),M=ea(k,"d",oa);k=ea(k,"r",ra);if(!M)break;C=null!=C?C:S;k=k||0;if(0>k)if(_){_=ea(_,"t",oa);if(null==_)break;else if(C>=_)break;k=Math.ceil((_-C)/M)-1}else{if(Infinity==w)break;else if(C/y>=w)break;k=Math.ceil((w*y-C)/M)-1}for(_=0;_<=k;++_)S=C+M,A.push({start:C/y,end:S/y,Ve:C}),C=S}y=A;b=c(b);for(w=b.next();!w.done;w=b.next())(w=hy(e,v,w.value,y,m,l))&&("audio"!=w.type||e.g.disableAudio?"video"!=w.type||e.g.disableVideo?w.type!=Tt||e.g.disableText||p.push(w):f.push(w):g.push(w))}h=[];g=c(0<g.length?g:[null]);for(m=g.next();!m.done;m=g.next())for(m=m.value,v=c(0<f.length?f:[null]),w=v.next();!w.done;w=v.next())b=h,y=b.push,w=w.value,T=0,m&&m.bandwidth&&0<m.bandwidth&&(T+=m.bandwidth),w&&w.bandwidth&&0<w.bandwidth&&(T+=w.bandwidth),w={id:e.s++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!w&&w.primary,audio:m,video:w,bandwidth:T,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(b,w);l.variants=h;l.textStreams=p;e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Dd());Promise.resolve();o=Date.now();s=(o-i)/1e3;e.A.sample(1,s);x(u)}))}function hy(e,t,n,i,r,a){var o=t.getAttribute("Type");if("audio"!==o&&"video"!==o&&"text"!==o)return Q("Ignoring unrecognized type:",o),null;var s=t.getAttribute("Language"),u=e.s++,l=ea(n,"Bitrate",aa),c=ea(n,"MaxWidth",aa),d=ea(n,"MaxHeight",aa),h=ea(n,"Channels",aa),f=ea(n,"SamplingRate",aa),p=a.duration;i.length&&(p=i[i.length-1].end-i[0].start);var g=e.i.getDuration();e.i.Aa(Math.min(p,g));var m={id:u,originalId:t.getAttribute("Name")||String(u),createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:qt(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if(r=t.getAttribute("Subtype"))(r=yy[r])&&m.roles.push(r),"main"===r&&(m.primary=!0);r=n.getAttribute("FourCC");if(null===r||""===r)r=t.getAttribute("FourCC");if(!r)if("audio"===o)r="AAC";else if("video"===o)return Q('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!vy.includes(r.toUpperCase()))return Q("Codec not supported:",r),null;n=fy(n,o,r,m);m.mssPrivateData.codecPrivateData=n;switch(o){case"audio":if(!n)return Q("Quality unsupported without CodecPrivateData",o),null;m.type="audio";m.mimeType="mss/audio/mp4";m.codecs=py(r,n);break;case"video":if(!n)return Q("Quality unsupported without CodecPrivateData",o),null;m.type="video";m.mimeType="mss/video/mp4";m.codecs=gy(n);break;case"text":if(m.type=Tt,m.mimeType="application/mp4","TTML"===r||"DFXP"===r)m.codecs="stpp"}m.createSegmentIndex=function(){if(m.segmentIndex)return Promise.resolve();if(e.m.has(m.id))var n=e.m.get(m.id);else n=[],"video"==m.type&&(n=m.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:m.id,type:m.type,codecs:m.codecs,encrypted:m.encrypted,timescale:m.mssPrivateData.timescale,duration:m.mssPrivateData.duration,Ka:n,Z:new Uint8Array([]),la:new Uint8Array([]),data:null,stream:m},n=new Fv([n]).initSegment(),e.m.set(m.id,n);n=my(e,new co((function(){return[]}),0,null,null,void 0,n),m,t,i);m.segmentIndex=new eu(n);return Promise.resolve()};m.closeSegmentIndex=function(){m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null)};return m}function fy(e,t,n,i){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=i.channelsCount||2;e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};i=r[e];if("AACH"===n)return n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16);n=new Uint8Array(2);n[0]=16|i>>1;n[1]=i<<7|t<<3;t=new Uint16Array(1);t[0]=(n[0]<<8)+n[1];return t[0].toString(16)}function py(e,t){var n=0;"AACH"===e&&(n=5);t?0===n&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,"AACH"===e&&(n=5));return"mp4a.40."+n}function gy(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function my(e,t,n,i,r){var a=i.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));i=[];var o={};r=c(r);for(var s=r.next();!s.done;o={uc:o.uc},s=r.next())o.uc=s.value,i.push(new fo(o.uc.start,o.uc.end,function(t){return function(){return vt(e.l,[a.replace("{start time}",String(t.uc.Ve))])}}(o),0,null,t,0,0,n.mssPrivateData.duration));return i}q("shaka.mss.MssParser",ly);var vy="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),yy={CAPT:"main",SUBT:"alternate",DESC:"main"};ao.ism=function(){return new ly};ro["application/vnd.ms-sstr+xml"]=function(){return new ly};function by(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=br(t)}catch(e){}throw new ht(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function wy(){}function Ty(e,t,n,i,r){var a=new _y;fr(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new Iy,s={af:!1,Lf:!1};e=Ey(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i,r,t.streamDataCallback);e=new Di(e,(function(){s.af=!0;o.abort();return Promise.resolve()}));if(t=t.retryParameters.timeout){var u=new $t((function(){s.Lf=!0;o.abort()}));u.S(t/1e3);e.finally((function(){u.stop()}))}return e}function Ey(e,t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:return s=Sy,u=ky,h=d=0,f=Date.now(),A(w,2),E(w,s(e,n),4);case 4:l=w.h;a(xy(l.headers));if("HEAD"==n.method){w.B(5);break}p=l.clone().body.getReader();m=(g=l.headers.get("Content-Length"))?parseInt(g,10):0;v=function(e){function t(){var n,i;return O((function(a){switch(a.g){case 1:return A(a,2),E(a,p.read(),4);case 4:n=a.h;I(a,3);break;case 2:return k(a),a.return();case 3:if(n.done){a.B(5);break}d+=n.value.byteLength;if(!o){a.B(5);break}return E(a,o(n.value),5);case 5:i=Date.now();if(100<i-f||n.done)r(i-f,d-h,m-d),h=d,f=i;n.done?e.close():(e.enqueue(n.value),t());x(a)}}))}t()};new u({start:v});return E(w,l.arrayBuffer(),6);case 6:c=w.h;case 5:I(w,3);break;case 2:y=k(w);if(i.af)throw new ht(1,1,7001,e,t);if(i.Lf)throw new ht(1,1,1003,e,t);throw new ht(1,1,1002,e,y,t);case 3:return b=xy(l.headers),w.return(by(b,c,l.status,e,l.url,t))}}))}function xy(e){var t={};e.forEach((function(e,n){t[n.trim()]=e}));return t}function Ay(){if(e.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(e.Response){if(!new Response("").body)return!1}else return!1;return!(!e.fetch||!e.AbortController)}q("shaka.net.HttpFetchPlugin",wy);wy.isSupported=Ay;wy.parse=Ty;var Sy=e.fetch,Iy=e.AbortController,ky=e.ReadableStream,_y=e.Headers;Ay()&&(Xi("http",Ty,2,!0),Xi("https",Ty,2,!0),Xi("blob",Ty,2,!0));function Cy(){}function My(e,t,n,i,r){var a=new Ry,o=Date.now(),s=0,u=new Promise((function(u,l){a.open(t.method,e,!0);a.responseType="arraybuffer";a.timeout=t.retryParameters.timeout;a.withCredentials=t.allowCrossSiteCredentials;a.onabort=function(){l(new ht(1,1,7001,e,n))};var c=!1;a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Dy(a);r(e);c=!0}};a.onload=function(){var t=Dy(a),i=a.response;try{var r=by(t,i,a.status,e,a.responseURL,n);u(r)}catch(e){l(e)}};a.onerror=function(t){l(new ht(1,1,1002,e,t,n))};a.ontimeout=function(){l(new ht(1,1,1003,e,n))};a.onprogress=function(e){var t=Date.now();if(100<t-o||e.lengthComputable&&e.loaded==e.total)i(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t};for(var d in t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)}));return new Di(u,(function(){a.abort();return Promise.resolve()}))}function Dy(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}q("shaka.net.HttpXHRPlugin",Cy);Cy.parse=My;var Ry=e.XMLHttpRequest;Xi("http",My,1,!0);Xi("https",My,1,!0);Xi("blob",My,1,!0);function Ly(e,t,n,i){this.g=e;this.i=t;this.groupId=n;this.h=i}function Py(e){return e.wa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ia}function Ny(e,t){return Iu(e.g.wa(),e.g.Ba,e.g.ia,t.streaming.retryParameters)}function Oy(){this.h=this.j=this.i=0;this.g=new Map;this.l=0}function Uy(e,t){e.i+=t;var n=e.l;e.l++;e.g.set(n,t);return n}Oy.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e);this.j+=n;this.h+=t}};function jy(e){var t=this;this.o=e;this.j=new Map;this.i=new ir((function(){return Fy(t).catch((function(){}))}));this.h=[];this.m=function(){};this.l=function(){};this.g=new Oy}jy.prototype.destroy=function(){return this.i.destroy()};function By(e,t,n){e.m=t;e.l=n}function Fy(e){var t=e.h.map((function(e){return e()}));e.h=[];return Promise.all(t)}function Vy(e,t,n,i,r,a){rr(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,u,l,c,d;return O((function(h){if(1==h.g)return E(h,Hy(e,n),2);t=h.h;if(e.i.g)throw new ht(2,9,7001);if(r)for(u in o=he(t),s=new Hr(o),s.data)l=Number(u),c=s.data[l],d=s.g[l],e.l(c,d);e.g.close(i,t.byteLength);var f=e.g;e.m(0==f.i?0:f.j/f.i,e.g.h);return h.return(a(t))}))}));e.j.set(t,o)}function Gy(e){return O((function(t){return 1==t.g?E(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}function Hy(e,t){var n,i,r,a;return O((function(o){if(1==o.g)return n=er,i=e.o.request(n,t),r=function(){return i.abort()},e.h.push(r),E(o,i.promise,2);a=o.h;we(e.h,r);return o.return(a.data)}))}function qy(e,t){var n=this;this.i=e;this.h=e.objectStore(t);this.g=new Mi;e.onabort=function(e){e.preventDefault();n.g.reject()};e.onerror=function(e){e.preventDefault();n.g.reject()};e.oncomplete=function(){n.g.resolve()}}qy.prototype.abort=function(){var e=this;return O((function(t){if(1==t.g){try{e.i.abort()}catch(e){}A(t,2);return E(t,e.g,4)}if(2!=t.g)return I(t,0);k(t);x(t)}))};function zy(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i;r.onsuccess=function(){var e;return O((function(i){if(1==i.g){if(null==r.result)return n(),i.return();e=r.result;return E(i,t(e.key,e.value,e),2)}e.continue();x(i)}))}}))}qy.prototype.store=function(){return this.h};qy.prototype.promise=function(){return this.g};function Ky(e){this.h=e;this.g=[]}Ky.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))};function Xy(e,t){return Wy(e,t,"readwrite")}function Wy(e,t,n){n=e.h.transaction([t],n);var i=new qy(n,t);e.g.push(i);i.promise().then((function(){we(e.g,i)}),(function(){we(e.g,i)}));return i}function Yy(e,t,n){this.h=new Ky(e);this.i=t;this.g=n}i=Yy.prototype;i.destroy=function(){return this.h.destroy()};i.hasFixedKeySpace=function(){return!0};i.addSegments=function(){return Qy(this.i)};i.removeSegments=function(e,t){return $y(this,this.i,e,t)};i.getSegments=function(e){var t=this,n;return O((function(i){if(1==i.g)return E(i,Zy(t,t.i,e),2);n=i.h;return i.return(n.map((function(e){return t.cf(e)})))}))};i.addManifests=function(){return Qy(this.g)};i.updateManifest=function(){return Promise.reject(new ht(2,9,9016,"Cannot modify values in "+this.g))};function Jy(e,t,n){e=Xy(e.h,e.g);var i=e.store();i.get(t).onsuccess=function(){i.put(n,t)};return e.promise()}i.updateManifestExpiration=function(e,t){var n=Xy(this.h,this.g),i=n.store();i.get(e).onsuccess=function(n){if(n=n.target.result)n.expiration=t,i.put(n,e)};return n.promise()};i.removeManifests=function(e,t){return $y(this,this.g,e,t)};i.getManifests=function(e){var t=this,n;return O((function(i){if(1==i.g)return E(i,Zy(t,t.g,e),2);n=i.h;return i.return(Promise.all(n.map((function(e){return t.Cc(e)}))))}))};i.getAllManifests=function(){var e=this,t,n;return O((function(i){return 1==i.g?(t=Wy(e.h,e.g,"readonly"),n=new Map,E(i,zy(t,(function(t,i){var r;return O((function(a){if(1==a.g)return E(a,e.Cc(i),2);r=a.h;n.set(t,r);x(a)}))})),2)):3!=i.g?E(i,t.promise(),3):i.return(n)}))};i.cf=function(e){return e};i.Cc=function(e){return Promise.resolve(e)};function Qy(e){return Promise.reject(new ht(2,9,9011,"Cannot add new value to "+e))}i.add=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(d){if(1==d.g){i=Xy(n.h,e);r=i.store();a=[];o={};s=c(t);for(u=s.next();!u.done;o={dd:o.dd},u=s.next())l=u.value,o.dd=r.add(l),o.dd.onsuccess=function(e){return function(){a.push(e.dd.result)}}(o);return E(d,i.promise(),2)}return d.return(a)}))};function $y(e,t,n,i){e=Xy(e.h,t);t=e.store();var r={};n=c(n);for(var a=n.next();!a.done;r={bd:r.bd},a=n.next())r.bd=a.value,t.delete(r.bd).onsuccess=function(e){return function(){return i(e.bd)}}(r);return e.promise()}function Zy(e,t,n){var i,r,a,o,s,u,l;return O((function(d){if(1==d.g){i=Wy(e.h,t,"readonly");r=i.store();a={};o=[];s={};u=c(n);for(l=u.next();!l.done;s={sc:s.sc,pc:s.pc},l=u.next())s.pc=l.value,s.sc=r.get(s.pc),s.sc.onsuccess=function(e){return function(){void 0==e.sc.result&&o.push(e.pc);a[e.pc]=e.sc.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new ht(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function eb(e){this.g=new Ky(e)}eb.prototype.destroy=function(){return this.g.destroy()};eb.prototype.getAll=function(){var e=this,t,n;return O((function(i){return 1==i.g?(t=Wy(e.g,"session-ids","readonly"),n=[],E(i,zy(t,(function(e,t){n.push(t)})),2)):3!=i.g?E(i,t.promise(),3):i.return(n)}))};eb.prototype.add=function(e){var t=Xy(this.g,"session-ids"),n=t.store();e=c(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()};eb.prototype.remove=function(e){var t=this,n;return O((function(i){return 1==i.g?(n=Xy(t.g,"session-ids"),E(i,zy(n,(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2)):E(i,n.promise(),0)}))};function tb(){this.g=new Map}tb.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());this.g.clear();return Promise.all(e)};tb.prototype.init=function(){var e=this;lb.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=c(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function nb(e){var t=null;e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{Fa:n,na:i},na:e})}))}));if(t)return t;throw new ht(2,9,9013,"Could not find a cell that supports add-operations")}function ib(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({Fa:n,na:i},e)}))}))}function rb(e,t,n){e=e.g.get(t);if(!e)throw new ht(2,9,9013,"Could not find mechanism with name "+t);t=e.getCells().get(n);if(!t)throw new ht(2,9,9013,"Could not find cell with name "+n);return t}function ab(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}function ob(e){var t=Array.from(e.g.keys());if(!t.length)throw new ht(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function sb(e){var t,n,i;return O((function(r){return 1==r.g?(t=Array.from(e.g.values()),n=0<t.length,n||(i=lb,i.forEach((function(e){(e=e())&&t.push(e)}))),E(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.B(0):E(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}function ub(e,t){lb.set(e,t)}q("shaka.offline.StorageMuxer",tb);tb.unregister=function(e){lb.delete(e)};tb.register=ub;tb.prototype.destroy=tb.prototype.destroy;var lb=new Map;function cb(){Yy.apply(this,arguments)}y(cb,Yy);cb.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,a;return O((function(o){i=Xy(n.h,n.g);r=i.store();a=new Mi;r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),a.resolve()):a.reject(new ht(2,9,9012,"Could not find values for "+e))};return E(o,Promise.all([i.promise(),a]),0)}))};cb.prototype.Cc=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.g){t=[];for(n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=db(e.periods[n],r),t.push(a);return E(s,vg(t),2)}o=s.h;return s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?Infinity:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))};function db(e,t){pb(e);for(var n=c(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return hb(n,e.startTime,t)}))}function hb(e,t,n){var i=e.initSegmentUri?fb(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=fb(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}cb.prototype.cf=function(e){return{data:e.data}};function fb(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ht(2,9,9004,"Could not parse uri "+e)}function pb(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));e=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=c(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];n=c(e);for(i=n.next();!i.done;i=n.next())i.value.variantIds=[];n=0;if(e.length&&!t.length){var r=n++,a=c(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=c(t),i=a.next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(t=c(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=c(e),a=r.next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o);a.variantIds.push(o)}}}function gb(){Yy.apply(this,arguments)}y(gb,Yy);gb.prototype.Cc=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.g){t=[];for(n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime;r=i-e.periods[n].startTime;for(var u=e.periods[n],l=[],d=c(u.streams),h=d.next();!h.done;h=d.next())h=h.value,0!=h.variantIds.length&&l.push(mb(h,u.startTime,u.startTime+r));a=l;t.push(a)}return E(s,vg(t),2)}o=s.h;return s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?Infinity:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))};function mb(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function vb(){Yy.apply(this,arguments)}y(vb,Yy);i=vb.prototype;i.hasFixedKeySpace=function(){return!1};i.addSegments=function(e){return this.add(this.i,e)};i.addManifests=function(e){return this.add(this.g,e)};i.updateManifest=function(e,t){return Jy(this,e,t)};i.Cc=function(e){null==e.expiration&&(e.expiration=Infinity);return Promise.resolve(e)};function yb(){this.m=this.j=this.i=this.h=this.g=this.l=null}i=yb.prototype;i.init=function(){var t=this,n=new Mi,i=!1,r=new $t((function(){i=!0;n.reject(new ht(2,9,9017))}));r.S(5);var a=e.indexedDB.open("shaka_offline_db",5);a.onsuccess=function(){if(!i){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new cb(e,"segment","manifest"):null;t.g=o;o=e.objectStoreNames;o=o.contains("manifest-v2")&&o.contains("segment-v2")?new gb(e,"segment-v2","manifest-v2"):null;t.h=o;o=e.objectStoreNames;o=o.contains("manifest-v3")&&o.contains("segment-v3")?new gb(e,"segment-v3","manifest-v3"):null;t.i=o;o=e.objectStoreNames;o=o.contains("manifest-v5")&&o.contains("segment-v5")?new vb(e,"segment-v5","manifest-v5"):null;t.j=o;e=e.objectStoreNames.contains("session-ids")?new eb(e):null;t.m=e;r.stop();n.resolve()}};a.onupgradeneeded=function(){for(var e=a.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})};a.onerror=function(e){i||(n.reject(new ht(2,9,9001,a.error)),r.stop(),e.preventDefault())};return n};i.destroy=function(){var e=this;return O((function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),x(t)}}))};i.getCells=function(){var e=new Map;this.g&&e.set("v1",this.g);this.h&&e.set("v2",this.h);this.i&&e.set("v3",this.i);this.j&&e.set("v5",this.j);return e};i.getEmeSessionCell=function(){return this.m};i.erase=function(){var e=this;return O((function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return E(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),E(t,bb(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,E(t,e.init(),0)}}))};function bb(){var t=new Mi,n=e.indexedDB.deleteDatabase("shaka_offline_db");n.onblocked=function(){};n.onsuccess=function(){t.resolve()};n.onerror=function(e){t.reject(new ht(2,9,9001,n.error));e.preventDefault()};return t}ub("idb",(function(){return ln("CrKey")||nn()||!e.indexedDB?null:new yb}));function wb(e,t,n,i){this.g=e;this.i=t;this.h=n;this.l=i;this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}wb.prototype.Fa=function(){return this.i};wb.prototype.na=function(){return this.h};wb.prototype.key=function(){return this.l};wb.prototype.toString=function(){return this.j};function Tb(e){e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e);if(null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new wb(t,n,i,Number(e[4])):null}function Eb(e,t){this.h=e;this.g=t}function xb(e,t){var n=new Rs(null,0);n.Aa(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=Ab(e,i,r,n);r=t.streams.filter((function(e){return e.type==Tt})).map((function(t){return Sb(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Sb(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=c(i.values()),u=s.next();!u.done;u=s.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function Ab(e,t,n,i){for(var r=new Set,a=c(t),o=a.next();!o.done;o=a.next()){var s=c(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}a=c(n);for(o=a.next();!o.done;o=a.next())for(s=c(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);a=new Map;r=c(r);for(o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});t=c(t);for(r=t.next();!r.done;r=t.next())for(r=r.value,o=Sb(e,r,i),s=c(r.variantIds),r=s.next();!r.done;r=s.next())r=a.get(r.value),r.language=o.language,r.primary=r.primary||o.primary,r.audio=o;n=c(n);for(t=n.next();!t.done;t=n.next())for(r=t.value,t=Sb(e,r,i),o=c(r.variantIds),r=o.next();!r.done;r=o.next())r=a.get(r.value),r.primary=r.primary||t.primary,r.video=t;return a}function Sb(e,t,n){var i=t.segments.map((function(t){return Ib(e,t)}));n.Pc(i);return{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new eu(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function Ib(e,t){var n=new wb("segment",e.h,e.g,t.dataKey);return new fo(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?kb(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function kb(e,t){var n=new wb("segment",e.h,e.g,t);return new co((function(){return[n.toString()]}),0,null)}function _b(){this.g=null}i=_b.prototype;i.configure=function(){};i.start=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:i=Tb(e);n.g=i;if(null==i||"manifest"!=i.g)throw new ht(2,1,9004,e);r=new tb;S(c);return E(c,r.init(),4);case 4:return E(c,rb(r,i.Fa(),i.na()),5);case 5:return a=c.h,E(c,a.getManifests([i.key()]),6);case 6:return o=c.h,s=o[0],u=new Eb(i.Fa(),i.na()),l=xb(u,s),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return _(c),E(c,r.destroy(),7);case 7:C(c,0)}}))};i.stop=function(){return Promise.resolve()};i.update=function(){};i.onExpirationUpdated=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return i=n.g,r=new tb,A(c,2,3),E(c,r.init(),5);case 5:return E(c,rb(r,i.Fa(),i.na()),6);case 6:return a=c.h,E(c,a.getManifests([i.key()]),7);case 7:o=c.h;s=o[0];u=s.sessionIds.includes(e);l=void 0==s.expiration||s.expiration>t;if(!u||!l){c.B(3);break}return E(c,a.updateManifestExpiration(i.key(),t),3);case 3:return _(c),E(c,r.destroy(),10);case 10:C(c,0);break;case 2:k(c),c.B(3)}}))};ro["application/x-offline-manifest"]=function(){return new _b};function Cb(){}function Mb(e){var t=Tb(e);t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Pi(e)):e=t&&"segment"==t.g?Db(t.key(),t):Ri(new ht(2,1,9004,e));return e}function Db(e,t){var n=new tb;return Pi(void 0).ea((function(){return n.init()})).ea((function(){return rb(n,t.Fa(),t.na())})).ea((function(e){return e.getSegments([t.key()])})).ea((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}q("shaka.offline.OfflineScheme",Cb);Cb.plugin=Mb;Xi("offline",Mb);function Rb(e,t,n){var i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:i=[];for(var d=[],h=c(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=c(d),m=g.next();!m.done;m=g.next())if(m=m.value,Pb(m.info,f)){m.sessionIds.push(f.sessionId);p=!0;break}p||d.push({info:f,sessionIds:[f.sessionId]})}r=c(d);a=r.next();case 2:if(a.done){l.B(4);break}o=a.value;s=Lb(e,t,o);return E(l,s,5);case 5:u=l.h;i=i.concat(u);a=r.next();l.B(2);break;case 4:return l.return(i)}}))}function Lb(e,t,n){var i,r;return O((function(a){switch(a.g){case 1:return i=new fa({Ib:t,onError:function(){},Jd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),i.configure(e),E(a,va(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(a,3);break;case 2:return k(a),E(a,i.destroy(),5);case 5:return a.return([]);case 3:return A(a,6),E(a,Ta(i),8);case 8:I(a,7);break;case 6:return k(a),E(a,i.destroy(),9);case 9:return a.return([]);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return O((function(t){if(1==t.g)return A(t,2),E(t,Ea(i,e),4);if(2!=t.g)return r.push(e),I(t,0);k(t);x(t)}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}function Pb(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Te(e.audioCapabilities,t.audioCapabilities,n)&&Te(e.videoCapabilities,t.videoCapabilities,n)}function Nb(e,t,n){var i=t.presentationTimeline.getDuration();t=Ub(t);return{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:Infinity,tracks:t,appMetadata:n,isIncomplete:!1}}function Ob(e,t){var n=xb(new Eb(e.Fa(),e.na()),t),i=t.appMetadata||{};n=Ub(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Ub(e){var t=[],n=zn(e.variants);n=c(n);for(var i=n.next();!i.done;i=n.next())t.push(Un(i.value));e=c(e.textStreams);for(n=e.next();!n.done;n=e.next())t.push(jn(n.value));return t}function jb(){this.g={}}function Bb(e,t){var n=t.audio,i=t.video;n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth);!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth);if(n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth);e.g[n.id]=r;e.g[i.id]=a}}function Fb(e,t){e.g[t.id]=t.bandwidth||2048}function Vb(e,t){e=e.g[t];null==e&&(e=0);return e}function Gb(e){var t=this;if(e&&e.constructor!=dc)throw new ht(2,9,9008);this.g=this.h=null;e?(this.h=e.g,this.g=e.Ab()):(this.h=tc(),this.g=new Ki);this.i=[];this.j=[];var n=!e;this.l=new ir((function(){var e,i,r,a,o;return O((function(s){switch(s.g){case 1:return E(s,Promise.all(t.j.map((function(e){return Fy(e)}))),2);case 2:e=function(){};i=[];r=c(t.i);for(a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.B(4);break}return E(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,x(s)}}))}))}function Hb(){if(Zt())e:{var e=c(lb.values());for(var t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy();e=!0;break e}e=!1}else e=!1;return e}i=Gb.prototype;i.destroy=function(){return this.l.destroy()};i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Xl(e,t));return nc(this.h,e)};i.getConfiguration=function(){var e=tc();nc(e,this.h,tc());return e};i.Ab=function(){return this.g};i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new jy(this.g);this.j.push(a);t=qb(this,e,t||{},(function(){var t;return O((function(a){if(1==a.g)return E(a,to(e,i.g,r.manifest.retryParameters,n||null),2);t=a.h;return a.return(t())}))}),r,a);t=new Di(t,(function(){return Fy(a)}));t.finally((function(){we(i.j,a)}));return fw(this,t)};function qb(e,t,n,i,r,a){var o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:return dw(),s=o=null,u=new tb,d=c=l=null,A(w,2,3),E(w,i(),5);case 5:return o=w.h,E(w,aw(e,t,o,r),6);case 6:h=w.h;cw(e);f=!h.presentationTimeline.T()&&!h.presentationTimeline.Gb();if(!f)throw new ht(2,9,9005,t);return E(w,ow(e,h,(function(e){d=d||e}),r),7);case 7:s=w.h;cw(e);if(d)throw d;return E(w,Wb(h,r),8);case 8:return E(w,u.init(),9);case 9:return cw(e),E(w,nb(u),10);case 10:return l=w.h,cw(e),p=Yb(s,h,t,n,r,a),g=p.Og,m=p.Re,E(w,l.na.addManifests([g]),11);case 11:v=w.h;cw(e);c=v[0];cw(e);if(d)throw d;return E(w,zb(e,m,c,g,a,r,l.na,h,s),12);case 12:return cw(e),y=new wb("manifest",l.path.Fa,l.path.na,c),w.return(Ob(y,g));case 3:return _(w),E(w,u.destroy(),13);case 13:if(!o){w.B(14);break}return E(w,o.stop(),14);case 14:if(!s){w.B(16);break}return E(w,s.destroy(),16);case 16:C(w,0);break;case 2:b=k(w);if(null==c){w.B(18);break}return E(w,Kb(c),18);case 18:throw d||b}}))}function zb(e,t,n,i,r,a,o,s,u){var l,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:l={};d=0;h=function(t,h){var f,p,g,m,v,y,b;return O((function(w){if(1==w.g){f={};p=c(t);for(g=p.next();!g.done;f={wb:f.wb},g=p.next())f.wb=g.value,m=Ny(f.wb,a),v=f.wb.i,y=f.wb.h,b=function(t){return function(n){var i,r,a;return O((function(s){if(1==s.g)return E(s,o.addSegments([{data:n}]),2);i=s.h;cw(e);r=t.wb.g;a=Py(r);l[a]=i[0];d+=n.byteLength;x(s)}))}}(f),Vy(r,f.wb.groupId,m,v,y,b);return E(w,Gy(r),2)}if(!h)return w.B(0);cw(e);$b(s,i,u,a);return E(w,o.updateManifest(n,i),0)}))};f=!1;A(w,2);if(!Jb(s)||!f||Qb(s)){w.B(4);break}return E(w,h(t.filter((function(e){return e.h})),!0),5);case 5:return cw(e),t=t.filter((function(e){return!e.h})),p=l,g=d,l={},d=0,E(w,Xb(o,n,i,p,g,(function(){return cw(e)})),6);case 6:cw(e);case 4:if(f){w.B(7);break}return E(w,h(t,!1),8);case 8:return cw(e),m=l,v=d,l={},d=0,E(w,Xb(o,n,i,m,v,(function(){return cw(e)})),9);case 9:cw(e);case 7:I(w,0);break;case 2:return y=k(w),b=Object.values(l),E(w,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}function Kb(e){var t,n,i,r;return O((function(a){switch(a.g){case 1:return t=new tb,E(a,t.init(),2);case 2:return E(a,nb(t),3);case 3:return n=a.h,i=new wb("manifest",n.path.Fa,n.path.na,e),E(a,t.destroy(),4);case 4:return r=new Gb,E(a,r.remove(i.toString()),0)}}))}function Xb(e,t,n,i,r,a){var o,s,u,l,d,h,f,p,g,m,v;return O((function(y){switch(y.g){case 1:o=!1;A(y,2);s=!0;u=c(n.streams);for(l=u.next();!l.done;l=u.next())for(d=l.value,h=c(d.segments),f=h.next();!f.done;f=h.next())p=f.value,g=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null,null!=g&&(p.dataKey=g,p.pendingSegmentRefId=void 0),g=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null,null!=g&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);n.size+=r;s&&(n.isIncomplete=!1);return E(y,e.updateManifest(t,n),4);case 4:o=!0;a();I(y,0);break;case 2:return m=k(y),E(y,Kb(t),5);case 5:if(o){y.B(6);break}v=Object.values(i);return E(y,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function Wb(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,S,_,C,M,D,R,L,P,N,U;return O((function(O){switch(O.g){case 1:return n={width:Infinity,height:Infinity},En(e,t.restrictions,n),E(O,Sn(e,t.offline.usePersistentLicense),2);case 2:i=[];r=t.preferredAudioChannelCount;a=t.preferredDecodingAttributes;o=t.preferredVideoCodecs;s=t.preferredAudioCodecs;pn(e,o,s,r,a);u=c(e.variants);for(l=u.next();!l.done;l=u.next())d=l.value,i.push(Un(d));h=c(e.textStreams);for(f=h.next();!f.done;f=h.next())p=f.value,i.push(jn(p));g=c(e.imageStreams);for(m=g.next();!m.done;m=g.next())v=m.value,i.push(Bn(v));return E(O,t.offline.trackSelectionCallback(i),3);case 3:y=O.h;b=e.presentationTimeline.getDuration();w=0;T=c(y);for(S=T.next();!S.done;S=T.next())_=S.value,C=_.bandwidth*b/8,w+=C;A(O,4);return E(O,t.offline.downloadSizeCallback(w),6);case 6:M=O.h;if(!M)throw new ht(2,9,9014);I(O,5);break;case 4:D=k(O);if(D instanceof ht)throw D;throw new ht(2,9,9015);case 5:R=new Set;L=new Set;P=new Set;N=c(y);for(S=N.next();!S.done;S=N.next())U=S.value,"variant"==U.type&&R.add(U.id),"text"==U.type&&L.add(U.id),"image"==U.type&&P.add(U.id);e.variants=e.variants.filter((function(e){return R.has(e.id)}));e.textStreams=e.textStreams.filter((function(e){return L.has(e.id)}));e.imageStreams=e.imageStreams.filter((function(e){return P.has(e.id)}));vw(e);x(O)}}))}function Yb(e,t,n,i,r,a){var o=Nb(n,t,i),s=r.offline.progressCallback;By(a,(function(e,t){o.size=t;s(o,e)}),(function(t,n){u&&r.offline.usePersistentLicense&&l==n&&Aa(e,"cenc",t)}));var u=Jb(t)&&!Qb(t),l=null;u&&(l=yw.get(e.g.keySystem));for(var d=new jb,h=c(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;h=c(t.imageStreams);for(f=h.next();!f.done;f=h.next())Fb(d,f.value);f=c(t.variants);for(h=f.next();!h.done;h=f.next())Bb(d,h.value);d=sw(a,d,t,r);a=d.streams;d=d.Re;f=e.g;h=r.offline.usePersistentLicense;f&&h&&(f.initData=[]);return{Og:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Ic(),streams:a,sessionIds:h?Ia(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Re:d}}function Jb(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Qb(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function $b(e,t,n,i){t.expiration=n.Ic();n=Ia(n);t.sessionIds=i.offline.usePersistentLicense?n:[];if(Jb(e)&&i.offline.usePersistentLicense&&!n.length)throw new ht(2,9,9007)}i.remove=function(e){return hw(this,Zb(this,e))};function Zb(e,t){var n,i,r,a,o,s;return O((function(u){switch(u.g){case 1:dw();n=Tb(t);if(null==n||"manifest"!=n.g)throw new ht(2,9,9004,t);i=n;r=new tb;S(u);return E(u,r.init(),4);case 4:return E(u,rb(r,i.Fa(),i.na()),5);case 5:return a=u.h,E(u,a.getManifests([i.key()]),6);case 6:return o=u.h,s=o[0],E(u,Promise.all([tw(e,s,r),nw(a,i,s)]),2);case 2:return _(u),E(u,r.destroy(),8);case 8:C(u,0)}}))}function ew(e,t){for(var n=[],i=c(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:St(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:St(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function tw(e,t,n){return O((function(i){return E(i,gw(e.g,e.h.drm,n,t),0)}))}function nw(e,t,n){function i(){}var r=pw(n);Ob(t,n);return Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}i.ah=function(){return hw(this,iw(this))};function iw(e){var t,n,i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:return dw(),t=e.g,n=e.h.drm,i=new tb,r=!1,S(h),E(h,i.init(),4);case 4:a=[],ab(i,(function(e){return a.push(e)})),o=c(a),s=o.next();case 5:if(s.done){h.B(2);break}u=s.value;return E(h,u.getAll(),8);case 8:return l=h.h,E(h,Rb(n,t,l),9);case 9:return d=h.h,E(h,u.remove(d),10);case 10:d.length!=l.length&&(r=!0);s=o.next();h.B(5);break;case 2:return _(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}i.list=function(){return hw(this,rw())};function rw(){var e,t,n;return O((function(i){switch(i.g){case 1:return dw(),e=[],t=new tb,S(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),ib(t,(function(t,i){n=n.then((function(){var n;return O((function(r){if(1==r.g)return E(r,i.getAllManifests(),2);n=r.h;n.forEach((function(n,i){n=Ob(new wb("manifest",t.Fa,t.na,i),n);e.push(n)}));x(r)}))}))})),E(i,n,2);case 2:return _(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}}))}function aw(e,t,n,i){var r,a,o,s,u;return O((function(l){if(1==l.g)return r=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(i.manifest),cw(e),E(l,n.start(t,o),2);if(3!=l.g)return s=l.h,cw(e),u=mw(s),E(l,Promise.all(cr(u,(function(e){return e.createSegmentIndex()}))),3);cw(e);if(r)throw r;return l.return(s)}))}function ow(e,t,n,i){var r;return O((function(a){switch(a.g){case 1:return r=new fa({Ib:e.g,onError:n,Jd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(i.drm),E(a,ga(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,Ta(r),3);case 3:return E(a,xa(r),4);case 4:return a.return(r)}}))}function sw(e,t,n,i){var r=new Map,a=mw(n),o=new Map;a=c(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=uw(e,t,n,s,i,r);o.set(s.id,u)}e=c(n.variants);for(t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),Re:Array.from(r.values())}}function uw(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external},s=r.offline.numberOfParallelDownloads,u=0;lw(i,n.presentationTimeline.eb(),(function(n){var r=Py(n),l=void 0;if(!a.has(r)){var c=n.endTime-n.startTime;c=Vb(t,i.id)*c;c=Uy(e.g,c);a.set(r,new Ly(n,c,u,!1))}n.h&&(l=Py(n.h),a.has(l)||(c=.5*Vb(t,i.id),c=Uy(e.g,c),a.set(l,new Ly(n.h,c,u,!0))));o.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:r,dataKey:0});u=(u+1)%s}));return o}function lw(e,t,n){t=e.segmentIndex.find(t);if(null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function cw(e){if(e.l.g)throw new ht(2,9,7001)}function dw(){if(!Hb())throw new ht(2,9,9e3)}function hw(e,t){return O((function(n){if(1==n.g)return e.i.push(t),S(n),E(n,t,4);if(2!=n.g)return n.return(n.h);_(n);we(e.i,t);return C(n,0)}))}function fw(e,t){var n=t.promise;e.i.push(n);return t.finally((function(){we(e.i,n)}))}function pw(e){var t=new Set;e=c(e.streams);for(var n=e.next();!n.done;n=e.next()){n=c(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,null!=i.initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function gw(e,t,n,i){var r,a,o;return O((function(s){if(1==s.g){if(!i.drmInfo)return s.return();r=ob(n);a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:ew(i,!1),videoCapabilities:ew(i,!0)}}));return E(s,Rb(t,e,a),2)}return 3!=s.g?(o=s.h,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}function mw(e){for(var t=new Set,n=c(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);n=c(e.imageStreams);for(i=n.next();!i.done;i=n.next())t.add(i.value);e=c(e.variants);for(n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function vw(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=c(t),i=n.next();!i.done;i=n.next()){i=c(t);for(var r=i.next();!r.done;r=i.next());}t=c(e);for(n=t.next();!n.done;n=t.next())for(n=c(e),i=n.next();!i.done;i=n.next());}q("shaka.offline.Storage",Gb);Gb.deleteAll=function(){var e;return O((function(t){return 1==t.g?(e=new tb,S(t),E(t,sb(e),2)):5!=t.g?(_(t),E(t,e.destroy(),5)):C(t,0)}))};Gb.prototype.list=Gb.prototype.list;Gb.prototype.removeEmeSessions=Gb.prototype.ah;Gb.prototype.remove=Gb.prototype.remove;Gb.prototype.store=Gb.prototype.store;Gb.prototype.getNetworkingEngine=Gb.prototype.Ab;Gb.prototype.getConfiguration=Gb.prototype.getConfiguration;Gb.prototype.configure=Gb.prototype.configure;Gb.prototype.destroy=Gb.prototype.destroy;Gb.support=Hb;var yw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Bd.offline=Hb;function bw(){}function ww(e,t){e={priority:t||0,Wf:e};for(t=0;t<Tw.length;t++)if(Tw[t].priority<e.priority){Tw.splice(t,0,e);return}Tw.push(e)}q("shaka.polyfill",bw);bw.register=ww;bw.installAll=function(){for(var e=c(Tw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Wf()}catch(e){Q("Error installing polyfill!",e)}}};var Tw=[];function Ew(){this.g=new Aw}function xw(){e.AbortController||(e.AbortController=Ew,e.AbortSignal=Aw)}Ew.prototype.abort=function(e){var t=this.g;if(!t.h){t.h=!0;t.g=e;void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError"));e=new ji("abort");if(t.onabort)t.onabort(e);t.dispatchEvent(e)}};s.Object.defineProperties(Ew.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}});bw.AbortController=Ew;Ew.install=xw;function Aw(){Vi.call(this);this.h=!1;this.g=void 0;this.onabort=null}y(Aw,Vi);s.Object.defineProperties(Aw.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}});ww(xw);function Sw(){}function Iw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())kw(t.value)}function kw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}bw.Aria=Sw;Sw.install=Iw;ww(Iw);function _w(){}function Cw(){eA()}bw.EncryptionScheme=_w;_w.install=Cw;ww(Cw,-2);function Mw(){}function Dw(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;t=Document.prototype;t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Rw);document.addEventListener("webkitfullscreenerror",Rw);document.addEventListener("mozfullscreenchange",Rw);document.addEventListener("mozfullscreenerror",Rw);document.addEventListener("MSFullscreenChange",Rw);document.addEventListener("MSFullscreenError",Rw)}}function Rw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}bw.Fullscreen=Mw;Mw.install=Dw;ww(Dw);function Lw(){}function Pw(){var e=!0;if(on()||ln("PlayStation 5")||sn()||ln("Web0S")||rn()||ln("CrKey")||ln("PC=EOS")||ln("Hisense")||ln("VIDAA"))e=!1;e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Ow=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Nw)}function Nw(t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,w;return O((function(T){switch(T.g){case 1:n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t};if(!t)return T.return(n);i=t.video;r=t.audio;if("media-source"==t.type){if(!Zt())return T.return(n);if(i){if(ln("CrKey"))if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var x=i.contentType;i.width&&i.height&&(x+="; width="+i.width+"; height="+i.height);i.framerate&&(x+="; framerate="+i.framerate);"pq"===i.transferFunction&&(x+="; eotf=smpte2084");a=cast.__platform__.canDisplayType(x)}else a=re(i.contentType);else rn()?(o=i.contentType,i.width&&i.height&&(o+="; width="+i.width,o+="; height="+i.height),i.framerate&&(o+="; framerate="+i.framerate),i.bitrate&&(o+="; bitrate="+i.bitrate),a=re(o)):a=re(i.contentType);if(!a)return T.return(n)}if(r&&(s=r.contentType,u=re(s),!u))return T.return(n)}else if("file"==t.type){if(i&&(l=i.contentType,c=en(l),!c)||r&&(d=r.contentType,h=en(d),!h))return T.return(n)}else return T.return(n);if(!t.keySystemConfiguration)return n.supported=!0,T.return(Promise.resolve(n));f=t.keySystemConfiguration;p=[];g=[];f.audio&&(m={robustness:f.audio.robustness||"",contentType:t.audio.contentType},p.push(m));f.video&&(v={robustness:f.video.robustness||"",contentType:t.video.contentType},g.push(v));y={initDataTypes:[f.initDataType],distinctiveIdentifier:f.distinctiveIdentifier,persistentState:f.persistentState,sessionTypes:f.sessionTypes};p.length&&(y.audioCapabilities=p);g.length&&(y.videoCapabilities=g);b=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem;A(T,3);if(b in Uw){w=Uw[b];T.B(5);break}return E(T,navigator.requestMediaKeySystemAccess(f.keySystem,[y]),6);case 6:w=T.h,Uw[b]=w;case 5:I(T,4);break;case 3:k(T);case 4:w&&(n.supported=!0,n.keySystemAccess=w);case 2:return T.return(n)}}))}bw.MediaCapabilities=Lw;Lw.install=Pw;var Ow=null;Lw.originalMcap=Ow;var Uw={};Lw.memoizedMediaKeySystemAccessRequests_=Uw;ww(Pw,-1);function jw(){}function Bw(){var t=un();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?qw():t?12>=t?(Fw(),Vw()):15>=t&&Fw():tn()?Gw():(ln("Tizen 2")||ln("Tizen 3")||ln("Tizen 4"))&&Hw());e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&zw()}function Fw(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,U.apply(0,arguments));t.abort=function(){};return t}}function Vw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Gw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}function Hw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Mt(t)[0]&&e(t)}}function qw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);n.shift();return n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}function zw(){var e=MediaSource.isTypeSupported;ln("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; "));return e(t)})}bw.MediaSource=jw;jw.install=Bw;ww(Bw);function Kw(){}function Xw(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?Ww():void 0!=e.orientation&&Yw())}function Ww(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()});void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function Yw(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary";n.angle=270;break;case 0:n.type="portrait-primary";n.angle=0;break;case 90:n.type="landscape-primary";n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Jw;screen.orientation=n;t();e.addEventListener("orientationchange",(function(){t();var e=new ji("change");n.dispatchEvent(e)}))}bw.Orientation=Kw;Kw.install=Xw;function Jw(){Vi.call(this);this.type="";this.angle=0}y(Jw,Vi);Jw.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):screen.msLockOrientation?screen.msLockOrientation(e):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0;this.unlock();break;default:n=t(e)}if(n)return Promise.resolve();e=Error("screen.orientation.lock() is not available on this device");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;return Promise.reject(e)};Jw.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};ww(Xw);function Qw(){}var $w,Zw,eT,tT,nT,iT;function rT(e,t){try{var n=new sT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function aT(e){var t=this.mediaKeys;t&&t!=e&&lT(t,null);delete this.mediaKeys;return(this.mediaKeys=e)?lT(e,this):Promise.resolve()}function oT(e){e=he(e.initData);if(fe(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=yr(e.subarray(4),!0);e=wr(e);var t=new Event("encrypted");t.initDataType="skd";t.initData=de(e);this.dispatchEvent(t)}bw.PatchedMediaKeysApple=Qw;Qw.uninstall=function(){$w&&($w=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Zw),HTMLMediaElement.prototype.setMediaKeys=eT,e.MediaKeys=tT,e.MediaKeySystemAccess=nT,navigator.requestMediaKeySystemAccess=iT,Zw=iT=eT=nT=tT=null,e.shakaMediaKeysPolyfill=!1)};Qw.install=function(t){if(e.HTMLVideoElement&&e.WebKitMediaKeys){if(void 0===t?0:t)$w=!0,Zw=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),eT=HTMLMediaElement.prototype.setMediaKeys,tT=e.MediaKeys,nT=e.MediaKeySystemAccess,iT=navigator.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=aT;e.MediaKeys=uT;e.MediaKeySystemAccess=sT;navigator.requestMediaKeySystemAccess=rT;e.shakaMediaKeysPolyfill=!0}};function sT(e,t){this.keySystem=e;if(e.startsWith("com.apple.fps"))for(e=c(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=c(n.audioCapabilities),o=a.next();!o.done;o=a.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(n=c(n.videoCapabilities),o=n.next();!o.done;o=n.next())a=o.value,a.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));t=r?t:null}if(t){this.g=t;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}sT.prototype.createMediaKeys=function(){var e=new uT(this.keySystem);return Promise.resolve(e)};sT.prototype.getConfiguration=function(){return this.g};function uT(e){this.h=new WebKitMediaKeys(e);this.g=new ar}uT.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new cT(this.h,e)};uT.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function lT(e,t){e.g.sb();if(!t)return Promise.resolve();e.g.C(t,"webkitneedkey",oT);try{return Bs(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}uT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function cT(e){Vi.call(this);this.i=null;this.l=e;this.g=this.h=null;this.j=new ar;this.sessionId="";this.expiration=NaN;this.closed=new Mi;this.keyStatuses=new hT}y(cT,Vi);i=cT.prototype;i.generateRequest=function(e,t){var n=this;this.h=new Mi;try{var i=this.l.createSession("video/mp4",he(t));this.i=i;this.sessionId=i.sessionId||"";this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null);e=(new Map).set("messageType",void 0==n.keyStatuses.Db()?"license-request":"license-renewal").set("message",de(e.message));e=new ji("message",e);n.dispatchEvent(e)}));this.j.C(i,"webkitkeyadded",(function(){n.g&&(dT(n,"usable"),n.g.resolve(),n.g=null)}));this.j.C(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");e.errorCode=n.i.error;if(null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:dT(n,"output-not-allowed");break;default:dT(n,"internal-error")}}));dT(this,"status-pending")}catch(e){this.h.reject(e)}return this.h};i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};i.update=function(e){this.g=new Mi;try{this.i.update(he(e))}catch(e){this.g.reject(e)}return this.g};i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.sb()}catch(e){this.closed.reject(e)}return this.closed};i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function dT(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1;n.g=t;t=new ji("keystatuseschange");e.dispatchEvent(t)}function hT(){this.size=0;this.g=void 0}i=hT.prototype;i.Db=function(){return this.g};i.forEach=function(e){this.g&&e(this.g,Za.value())};i.get=function(e){if(this.has(e))return this.g};i.has=function(e){var t=Za.value();return this.g&&le(e,t)?!0:!1};i.entries=function(){};i.keys=function(){};i.values=function(){};function fT(){}function pT(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=gT,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mT,e.MediaKeys=vT,e.MediaKeySystemAccess=yT,e.shakaMediaKeysPolyfill=!0)}function gT(){return Promise.reject(Error("The key system specified is not supported."))}function mT(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}bw.PatchedMediaKeysNop=fT;fT.install=pT;function vT(){throw new TypeError("Illegal constructor.")}vT.prototype.createSession=function(){};vT.prototype.setServerCertificate=function(){};vT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function yT(){this.keySystem="";throw new TypeError("Illegal constructor.")}yT.prototype.getConfiguration=function(){};yT.prototype.createMediaKeys=function(){};ww(pT,-10);function bT(){}function wT(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)LT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=ET;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=xT;e.MediaKeys=ST;e.MediaKeySystemAccess=AT;e.shakaMediaKeysPolyfill=!0}}function TT(e){var t=LT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function ET(e,t){try{var n=new AT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function xT(e){var t=this.mediaKeys;t&&t!=e&&IT(t,null);delete this.mediaKeys;(this.mediaKeys=e)&&IT(e,this);return Promise.resolve()}bw.PatchedMediaKeysWebkit=bT;bT.install=wT;function AT(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1;var r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");t=c(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=c(a.audioCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),i=!0));if(a.videoCapabilities)for(u=c(a.videoCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),i=!0));s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g));"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1);if(i){this.h=o;return}}n="Unsupported keySystem";if("org.w3.clearkey"==e||"com.widevine.alpha"==e)n="None of the requested configurations were supported.";e=Error(n);e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}AT.prototype.createMediaKeys=function(){var e=new ST(this.g);return Promise.resolve(e)};AT.prototype.getConfiguration=function(){return this.h};function ST(e){this.l=e;this.h=null;this.g=new ar;this.i=[];this.j=new Map}function IT(e,t){e.h=t;e.g.sb();var n=LT;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc";n.initData=de(t.initData);e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=kT(e,t.sessionId);n&&(t=(new Map).set("messageType",void 0==n.keyStatuses.Db()?"licenserequest":"licenserenewal").set("message",t.message),t=new ji("message",t),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){if(t=kT(e,t.sessionId))DT(t,"usable"),t.g&&t.g.resolve(),t.g=null})),e.g.C(t,n+"keyerror",(function(t){var n=kT(e,t.sessionId);n&&n.handleError(t)})))}ST.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");t.src||(t.src="about:blank");e=new _T(t,this.l,e);this.i.push(e);return e};ST.prototype.setServerCertificate=function(){return Promise.resolve(!1)};ST.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function kT(e,t){var n=e.j.get(t);return n?n:(n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null}function _T(e,t,n){Vi.call(this);this.j=e;this.m=!1;this.g=this.h=null;this.i=t;this.l=n;this.sessionId="";this.expiration=NaN;this.closed=new Mi;this.keyStatuses=new RT}y(_T,Vi);i=_T.prototype;i.handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode;t.errorCode=n;!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?DT(this,"output-restricted"):1==t?DT(this,"expired"):DT(this,"internal-error"))};function CT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=he(wr("LOAD_SESSION|"+n));else{var r=wr("PERSISTENT|");i=Gr(r,t)}else i=he(t)}catch(e){return Promise.reject(e)}e.h=new Mi;var a=TT("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new $t((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).S(.01)}return e.h}function MT(e,t,n){if(e.g)e.g.then((function(){return MT(e,t,n)})).catch((function(){return MT(e,t,n)}));else{e.g=t;if("webkit-org.w3.clearkey"==e.i){var i=vr(n);var r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null);i=Br(r.keys[0].k);r=Br(r.keys[0].kid)}else i=he(n),r=null;var a=TT("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function DT(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1;n.g=t;t=new ji("keystatuseschange");e.dispatchEvent(t)}i.generateRequest=function(e,t){return CT(this,t,null)};i.load=function(e){return"persistent-license"==this.l?CT(this,null,e):Promise.reject(Error("Not a persistent session."))};i.update=function(e){var t=new Mi;MT(this,t,e);return t};i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=TT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}this.closed.resolve();return this.closed};i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()};function RT(){this.size=0;this.g=void 0}i=RT.prototype;i.Db=function(){return this.g};i.forEach=function(e){this.g&&e(this.g,Za.value())};i.get=function(e){if(this.has(e))return this.g};i.has=function(e){var t=Za.value();return this.g&&le(e,t)?!0:!1};i.entries=function(){};i.keys=function(){};i.values=function(){};var LT="";ww(wT);function PT(){}function NT(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=UT,Object.defineProperty(t,"disablePictureInPicture",{get:BT,set:FT,enumerable:!0,configurable:!0}),document.exitPictureInPicture=jT,document.addEventListener("webkitpresentationmodechanged",OT,!0))}}function OT(e){e=e.target;if("picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function UT(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function jT(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function BT(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function FT(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}bw.PiPWebkit=PT;PT.install=NT;ww(NT);function VT(){}function GT(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=HT))}function HT(){var e=URL.createObjectURL(new Blob),t=e.toString();URL.revokeObjectURL(e);return t.substr(t.lastIndexOf("/")+1)}bw.RandomUUID=VT;VT.install=GT;ww(GT);function qT(){}function zT(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=KT)}function KT(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}bw.StorageEstimate=qT;qT.install=zT;ww(zT);function XT(){}function WT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:YT})}function YT(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}bw.Symbol=XT;XT.install=WT;ww(WT);function JT(){}function QT(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);e&&e.catch((function(){}));return e}}}bw.VideoPlayPromise=JT;JT.install=QT;ww(QT);function $T(){}function ZT(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||an())&&(t.getVideoPlaybackQuality=eE)}}function eE(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}bw.VideoPlaybackQuality=$T;$T.install=ZT;ww(ZT);function tE(){}function nE(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=iE;else if(6==n)t=rE;else{try{var i=!!iE(1,2,"")}catch(e){i=!1}i&&(t=iE)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function iE(t,n,i){return new e.TextTrackCue(t,n,i)}function rE(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}bw.VTTCue=tE;tE.install=nE;ww(nE);function aE(){}aE.prototype.parseInit=function(){};aE.prototype.setSequenceMode=function(){};aE.prototype.setManifestType=function(){};aE.prototype.parseMedia=function(e,t){var n=null,i=[];e=vr(e).split(/\r?\n/);e=c(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=oE.exec(r))){var a=sE.exec(r[1]);a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",","."));r=new xe(a,t.segmentEnd?t.segmentEnd:a+2,r[2]);n&&(n.endTime=a,i.push(n));n=r}n&&i.push(n);return i};q("shaka.text.LrcTextParser",aE);aE.prototype.parseMedia=aE.prototype.parseMedia;aE.prototype.setManifestType=aE.prototype.setManifestType;aE.prototype.setSequenceMode=aE.prototype.setSequenceMode;aE.prototype.parseInit=aE.prototype.parseInit;var oE=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,sE=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Bt["application/x-subtitle-lrc"]=function(){return new aE};function uE(){}uE.prototype.parseInit=function(){};uE.prototype.setSequenceMode=function(){};uE.prototype.setManifestType=function(){};uE.prototype.parseMedia=function(e,t){var n=vr(e);e=[];if(""==n)return e;var i=ca(n,"tt");if(!i)throw new ht(2,2,2005,"Failed to parse TTML.");n=i.getElementsByTagName("body")[0];if(!n)return[];var r=Qr(i,PE,"frameRate"),a=Qr(i,PE,"subFrameRate"),o=Qr(i,PE,"frameRateMultiplier"),s=Qr(i,PE,"tickRate"),u=Qr(i,PE,"cellResolution"),l=i.getAttribute("xml:space")||"default",d=Qr(i,NE,"extent");if("default"!=l&&"preserve"!=l)throw new ht(2,2,2005,"Invalid xml:space value: "+l);l="default"==l;r=new TE(r,a,o,s);u=u?(u=/^(\d+) (\d+)$/.exec(u))?{bg:parseInt(u[1],10),rows:parseInt(u[2],10)}:null:null;a=(a=i.getElementsByTagName("metadata")[0])?Wr(a):[];o=Array.from(i.getElementsByTagName("style"));i=Array.from(i.getElementsByTagName("region"));s=[];for(var h=c(i),f=h.next();!f.done;f=h.next()){var p=f.value;f=new Fe;var g=p.getAttribute("xml:id");if(g){f.id=g;var m=null;d&&(m=EE.exec(d)||SE.exec(d));g=m?Number(m[1]):null;m=m?Number(m[2]):null;var v,y;if(v=fE(p,o,"extent"))v=(y=EE.exec(v))||SE.exec(v),null!=v&&(f.width=Number(v[1]),f.height=Number(v[2]),y||(null!=g&&(f.width=100*f.width/g),null!=m&&(f.height=100*f.height/m)),f.widthUnits=y||null!=g?Ve:0,f.heightUnits=y||null!=m?Ve:0);if(p=fE(p,o,"origin"))v=(y=EE.exec(p))||SE.exec(p),null!=v&&(f.viewportAnchorX=Number(v[1]),f.viewportAnchorY=Number(v[2]),y||(null!=m&&(f.viewportAnchorY=100*f.viewportAnchorY/m),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=y||null!=g?Ve:0)}else f=null;f&&s.push(f)}if(Xr(n,"p").length)throw new ht(2,2,2001,"<p> can only be inside <div> in TTML");d=c(Xr(n,"div"));for(h=d.next();!h.done;h=d.next())if(Xr(h.value,"span").length)throw new ht(2,2,2001,"<span> can only be inside <p> in TTML");if(t=lE(n,t,r,a,o,i,s,l,u,null,!1))t.backgroundColor||(t.backgroundColor="transparent"),e.push(t);return e};function lE(e,t,n,i,r,a,o,s,u,l,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var f=document.createElement("span");f.textContent=e.textContent}else f=e;for(var p=null,g=c(OE),m=g.next();!m.done&&!(p=mE(f,"backgroundImage",i,"#",m.value)[0]);m=g.next());if("p"==e.nodeName||p)d=!0;e=d;g="default"==(f.getAttribute("xml:space")||(s?"default":"preserve"));m=Array.from(f.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}));s=[];if(!m)for(var v=c(f.childNodes),y=v.next();!y.done;y=v.next())(y=lE(y.value,t,n,i,r,a,o,g,u,f,d))&&s.push(y);i=null!=l;v=/\S/.test(f.textContent);var b=f.hasAttribute("begin")||f.hasAttribute("end")||f.hasAttribute("dur");if(!(b||v||"br"==f.tagName||0!=s.length||i&&!g))return null;y=yE(f,n);v=y.start;for(y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)y=vE(h,n,v,y),v=y.start,y=y.end,h=h.parentNode;null==v&&(v=0);v+=t.periodStart;y=null==y?Infinity:y+t.periodStart;v=Math.max(v,t.segmentStart);y=Math.min(y,t.segmentEnd);if(!b&&0<s.length)for(v=Infinity,y=0,t=c(s),n=t.next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==f.tagName)return r=new xe(v,y,""),r.lineBreak=!0,r;t="";m&&(t=f.textContent,g&&(t=t.trim(),t=t.replace(/\s+/g," ")));t=new xe(v,y,t);t.nestedCues=s;d||(t.isContainer=!0);u&&(t.cellResolution=u);u=mE(f,"region",a,"")[0];if(f.hasAttribute("region")&&u&&u.getAttribute("xml:id")){var w=u.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==w}))[0]}o=u;l&&i&&!f.getAttribute("region")&&!f.getAttribute("style")&&(o=mE(l,"region",a,"")[0]);cE(t,f,o,p,r,e,0==s.length);return t}function cE(e,t,n,i,r,a,o){a=a||o;"rtl"==hE(t,n,r,"direction",a)&&(e.direction="rtl");o=hE(t,n,r,"writingMode",a);"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=Me);(o=hE(t,n,r,"textAlign",!0))?(e.positionAlign=LE[o],e.lineAlign=RE[o],e.textAlign=ke[o.toUpperCase()]):e.textAlign=Ie;if(o=hE(t,n,r,"displayAlign",!0))e.displayAlign=Ce[o.toUpperCase()];if(o=hE(t,n,r,"color",a))e.color=o;if(o=hE(t,n,r,"backgroundColor",a))e.backgroundColor=o;if(o=hE(t,n,r,"border",a))e.border=o;if(o=hE(t,n,r,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=hE(t,n,r,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700);o=hE(t,n,r,"wrapOption",a);e.wrapLine=o&&"noWrap"==o?!1:!0;(o=hE(t,n,r,"lineHeight",a))&&o.match(AE)&&(e.lineHeight=o);(o=hE(t,n,r,"fontSize",a))&&(o.match(AE)||o.match(xE))&&(e.fontSize=o);if(o=hE(t,n,r,"fontStyle",a))e.fontStyle=Be[o.toUpperCase()];if(i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var s=i.getAttribute("encoding");i=i.textContent.trim();"PNG"==o&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)}if(i=hE(t,n,r,"textOutline",a))i=i.split(" "),i[0].match(AE)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(AE)?e.textStrokeWidth=i[0]:e.textStrokeColor="";(i=hE(t,n,r,"letterSpacing",a))&&i.match(AE)&&(e.letterSpacing=i);(i=hE(t,n,r,"linePadding",a))&&i.match(AE)&&(e.linePadding=i);if(a=hE(t,n,r,"opacity",a))e.opacity=parseFloat(a);(n=fE(n,r,"textDecoration"))&&dE(e,n);(t=pE(t,r,"textDecoration"))&&dE(e,t)}function dE(e,t){t=c(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&we(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&we(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&we(e.textDecoration,"overline")}}function hE(e,t,n,i,r){r=void 0===r?!0:r;return(e=pE(e,n,i))?e:r?fE(t,n,i):null}function fE(e,t,n){if(!e)return null;var i=Qr(e,NE,n);return i?i:gE(e,t,n)}function pE(e,t,n){var i=Qr(e,NE,n);return i?i:gE(e,t,n)}function gE(e,t,n){e=mE(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=Jr(e[r],"urn:ebu:tt:style",n);a||(a=Qr(e[r],NE,n));a||(a=pE(e[r],t,n));a&&(i=a)}return i}function mE(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?Jr(o,r,t):o.getAttribute(t))&&(o=o.parentNode,o instanceof Element););if(t=e)for(t=c(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=c(n),o=e.next();!o.done;o=e.next())if(o=o.value,i+o.getAttribute("xml:id")==r){a.push(o);break}return a}function vE(e,t,n,i){e=yE(e,t);null==n?n=e.start:null!=e.start&&(n+=e.start);null==i?i=e.end:null!=e.start&&(i+=e.start);return{start:n,end:i}}function yE(e,t){var n=bE(e.getAttribute("begin"),t),i=bE(e.getAttribute("end"),t);e=bE(e.getAttribute("dur"),t);null==i&&null!=e&&(i=n+e);return{start:n,end:i}}function bE(e,t){var n=null;if(IE.test(e)){e=IE.exec(e);n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);a+=(Number(e[5])||0)/t.h;r+=a/t.frameRate;n=r+60*i+3600*n}else if(kE.test(e))n=wE(kE,e);else if(_E.test(e))n=wE(_E,e);else if(CE.test(e))e=CE.exec(e),n=Number(e[1])/t.frameRate;else if(ME.test(e))e=ME.exec(e),n=Number(e[1])/t.g;else if(DE.test(e))n=wE(DE,e);else if(e)throw new ht(2,2,2001,"Could not parse cue time range in TTML");return n}function wE(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}q("shaka.text.TtmlTextParser",uE);uE.prototype.parseMedia=uE.prototype.parseMedia;uE.prototype.setManifestType=uE.prototype.setManifestType;uE.prototype.setSequenceMode=uE.prototype.setSequenceMode;uE.prototype.parseInit=uE.prototype.parseInit;function TE(e,t,n,i){this.frameRate=Number(e)||30;this.h=Number(t)||1;this.g=Number(i);0==this.g&&(this.g=e?this.frameRate*this.h:1);n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var EE=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,xE=/^(\d{1,2}(?:\.\d+)?|100)%$/,AE=/^(\d+px|\d+em|\d*\.?\d+c)$/,SE=/^(\d+)px (\d+)px$/,IE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,kE=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,_E=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,CE=/^(\d*(?:\.\d*)?)f$/,ME=/^(\d*(?:\.\d*)?)t$/,DE=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),RE={left:Le,center:"center",right:"end",start:Le,end:"end"},LE={left:"line-left",center:"center",right:"line-right"},PE=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],NE=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],OE=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Bt["application/ttml+xml"]=function(){return new uE};function UE(){this.g=new uE}UE.prototype.parseInit=function(e){var t=!1;(new Ir).box("moov",kr).box("trak",kr).box("mdia",kr).box("minf",kr).box("stbl",kr).M("stsd",_r).box("stpp",(function(e){t=!0;e.parser.stop()})).parse(e);if(!t)throw new ht(2,2,2007)};UE.prototype.setSequenceMode=function(){};UE.prototype.setManifestType=function(){};UE.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];(new Ir).box("mdat",Mr((function(e){i=!0;r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1);if(!i)throw new ht(2,2,2007);return r};q("shaka.text.Mp4TtmlParser",UE);UE.prototype.parseMedia=UE.prototype.parseMedia;UE.prototype.setManifestType=UE.prototype.setManifestType;UE.prototype.setSequenceMode=UE.prototype.setSequenceMode;UE.prototype.parseInit=UE.prototype.parseInit;Bt['application/mp4; codecs="stpp"']=function(){return new UE};Bt['application/mp4; codecs="stpp.ttml"']=function(){return new UE};Bt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new UE};Bt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new UE};function jE(){this.h=!1;this.g="UNKNOWN"}jE.prototype.parseInit=function(){};jE.prototype.setSequenceMode=function(e){this.h=e};jE.prototype.setManifestType=function(e){this.g=e};jE.prototype.parseMedia=function(e,t){e=vr(e);e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ht(2,2,2e3);e=t.vttOffset;if(n[0].includes("X-TIMESTAMP-MAP")&&this.h){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){e=zE(new Em(i[1]));if(null==e)throw new ht(2,2,2e3);r=Number(r[1]);for(i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);t=[];r=c(n[0].split("\n"));for(i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Em(i);var a=new Fe;Sm(i);xm(i);for(var o=Sm(i);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up");xm(i);o=Sm(i)}t.push(a)}r=new Map;BE(r);i=[];n=c(n.slice(1));for(a=n.next();!a.done;a=n.next()){a=a.value.split("\n");if((1!=a.length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){s=[];o=-1;for(u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));s=c(s);for(o=s.next();!o.done;o=s.next()){var l=o.value;o="global";(u=l[0].match(/\((.*)\)/))&&(o=u.pop());u=l.slice(1,-1);l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";"));(l=r.get(o))||(l=new xe(0,0,""));for(var d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0;l.backgroundColor=p;break;case"color":d=!0;l.color=p;break;case"font-family":d=!0;l.fontFamily=p;break;case"font-size":d=!0;l.fontSize=p;break;case"font-weight":if(700<=parseInt(p,10)||"bold"==p)d=!0,l.fontWeight=700;break;case"font-style":switch(p){case"normal":d=!0;l.fontStyle=je;break;case"italic":d=!0;l.fontStyle="italic";break;case"oblique":d=!0,l.fontStyle="oblique"}break;case"opacity":d=!0;l.opacity=parseFloat(p);break;case"text-shadow":d=!0;l.textShadow=p;break;case"white-space":d=!0,l.wrapLine="noWrap"!=p}}}d&&r.set(o,l)}}d=e;if(1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),o=new Em(a[0]),u=zE(o),h=Am(o,/[ \t]+--\x3e[ \t]+/g),l=zE(o),null==u||null==h||null==l)Q("Failed to parse VTT time code. Cue skipped:",s,a),a=null;else{u+=d;l+=d;d=a.slice(1).join("\n").trim();r.has("global")?(a=r.get("global").clone(),a.startTime=u,a.endTime=l,a.payload=""):a=new xe(u,l,"");FE(d,a,r);xm(o);for(u=Sm(o);u;)HE(a,u,t),xm(o),u=Sm(o);null!=s&&(a.id=s)}a&&i.push(a)}return i};function BE(e){for(var t=c(Object.entries(Ne)),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value;i=i.next().value;var r=new xe(0,0,"");r.color=i;e.set("."+n,r)}t=c(Object.entries(Oe));for(n=t.next();!n.done;n=t.next())i=c(n.value),n=i.next().value,i=i.next().value,r=new xe(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function FE(e,t,n){0===n.size&&BE(n);e:{var i=e;e=[];for(var r=-1,a="",o=0;o<i.length;o++)if("/"===i[o]&&0<o&&"<"===i[o-1]){var s=i.indexOf(">",o);if(s<=o){e=i;break e}if((s=i.substring(o+1,s))&&"c"===s){var u=e.pop();u?u===s?(a+="/"+s+">",o+=s.length+1):u.startsWith("c.")?(o+=s.length+1,a+="/"+u+">"):a+=i[o]:a+=i[o]}else a+=i[o]}else"<"===i[o]?(r=o+1,"c"!=i[r]&&(r=-1)):">"===i[o]&&0<r&&(e.push(i.substr(r,o-r)),r=-1),a+=i[o];e=a}i=[];a=-1;for(r=0;r<e.length;r++)"<"===e[r]?a=r+1:">"===e[r]&&0<a&&(a=e.substr(a,r-a),a.match(XE)&&i.push(a),a=-1);i=c(i);for(r=i.next();!r.done;r=i.next())r=r.value,e=e.replace("<"+r+">",'<div time="'+r+'">'),e+="</div>";e:{r=e;a=[];o=-1;i="";e=!1;for(s=0;s<r.length;s++)if("/"===r[s]){u=r.indexOf(">",s);if(-1===u){e=r;break e}if((u=r.substring(s+1,u))&&"v"==u){e=!0;var l=null;a.length&&(l=a[a.length-1]);if(l){if(l===u)i+="/"+u+">";else{if(!l.startsWith("v")){i+=r[s];continue}i+="/"+l+">"}s+=u.length+1}else i+=r[s]}else i+=r[s]}else"<"===r[s]?(o=s+1,"v"!=r[o]&&(o=-1)):">"===r[s]&&0<o&&(a.push(r.substr(o,s-o)),o=-1),i+=r[s];r=c(a);for(a=r.next();!a.done;a=r.next())a=a.value,o=a.replace(" ",".voice-"),i=i.replace("<"+a+">","<"+o+">"),i=i.replace("</"+a+">","</"+o+">"),e||(i+="</"+o+">");e=i}if(r=ca("<span>"+e+"</span>","span")){i=[];r=r.childNodes;if(1==r.length&&(a=r[0],a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE)){t.payload=KE(e);return}e=c(r);for(r=e.next();!r.done;r=e.next())GE(r.value,t,i,n);t.nestedCues=i}else t.payload=KE(e)}function VE(e,t){return e&&0<e.length?e:t}function GE(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=c(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]';i.has(s)||(s="v[voice="+u+"]")}i.has(s)&&(s=i.get(s))&&(r.backgroundColor=VE(s.backgroundColor,r.backgroundColor),r.color=VE(s.color,r.color),r.fontFamily=VE(s.fontFamily,r.fontFamily),r.fontSize=VE(s.fontSize,r.fontSize),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.textShadow=s.textShadow,r.wrapLine=s.wrapLine);switch(o){case"br":o=t.clone();o.lineBreak=!0;n.push(o);break;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":if(o=e.getAttribute("color"))r.color=o;break;case"div":if(o=e.getAttribute("time"))if(o=zE(new Em(o)))r.startTime=o}}if(Zr(e))for(a=!0,i=c(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||(a=t.clone(),a.lineBreak=!0,n.push(a)),0<e.length&&(a=r.clone(),a.payload=KE(e),n.push(a)),a=!1;else for(t=c(e.childNodes),e=t.next();!e.done;e=t.next())GE(e.value,r,n,i)}function HE(e,t,n){var i;if(i=/^align:(start|middle|center|end|left|right)$/.exec(t))t=i[1],"middle"==t?e.textAlign=Ie:e.textAlign=ke[t.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(t))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Se);else if(i=/^region:(.*)$/.exec(t)){if(t=qE(n,i[1]))e.region=t}else if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Pe[n[2].toUpperCase()]);else if(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Re,e.line=Number(n[1]),n[2]&&(e.lineAlign=Pe[n[2].toUpperCase()])}function qE(e,t){e=e.filter((function(e){return e.id==t}));return e.length?e[0]:null}function zE(e){e=Am(e,XE);if(null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function KE(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}q("shaka.text.VttTextParser",jE);jE.prototype.parseMedia=jE.prototype.parseMedia;jE.prototype.setManifestType=jE.prototype.setManifestType;jE.prototype.setSequenceMode=jE.prototype.setSequenceMode;jE.prototype.parseInit=jE.prototype.parseInit;var XE=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Bt["text/vtt"]=function(){return new jE};Bt['text/vtt; codecs="vtt"']=function(){return new jE};Bt['text/vtt; codecs="wvtt"']=function(){return new jE};function WE(){this.g=null}WE.prototype.parseInit=function(e){var t=this,n=!1;(new Ir).box("moov",kr).box("trak",kr).box("mdia",kr).M("mdhd",(function(e){e=Mo(e.reader,e.version);t.g=e.timescale})).box("minf",kr).box("stbl",kr).M("stsd",_r).box("wvtt",(function(){n=!0})).parse(e);if(!this.g)throw new ht(2,2,2008);if(!n)throw new ht(2,2,2008)};WE.prototype.setSequenceMode=function(){};WE.prototype.setManifestType=function(){};WE.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new ht(2,2,2008);var n=0,i=[],r,a=[],o=!1,s=!1,u=!1,l=null;(new Ir).box("moof",kr).box("traf",kr).M("tfdt",(function(e){o=!0;n=Co(e.reader,e.version).baseMediaDecodeTime})).M("tfhd",(function(e){l=_o(e.reader,e.flags).ff})).M("trun",(function(e){s=!0;i=Do(e.reader,e.version,e.flags).Af})).box("mdat",Mr((function(e){u=!0;r=e}))).parse(e,!1);if(!u&&!o&&!s)throw new ht(2,2,2008);e=n;for(var d=new xr(r,0),h=c(i),f=h.next();!f.done;f=h.next()){f=f.value;var p=f.Ie||l,g=f.Md?n+f.Md:e;e=g+(p||0);var m=0;do{var v=d.J();m+=v;var y=d.J(),b=null;"vttc"==Rr(y)?8<v&&(b=d.jb(v-8)):d.skip(v-8);p&&b&&(v=YE(b,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(f.sampleSize&&m<f.sampleSize)}return a.filter(mt)};function YE(e,t,n){var i,r,a;(new Ir).box("payl",Mr((function(e){i=vr(e)}))).box("iden",Mr((function(e){r=vr(e)}))).box("sttg",Mr((function(e){a=vr(e)}))).parse(e);return i?JE(i,r,a,t,n):null}function JE(e,t,n,i,r){i=new xe(i,r,"");FE(e,i,new Map);t&&(i.id=t);if(n)for(e=new Em(n),t=Sm(e);t;)HE(i,t,[]),xm(e),t=Sm(e);return i}q("shaka.text.Mp4VttParser",WE);WE.prototype.parseMedia=WE.prototype.parseMedia;WE.prototype.setManifestType=WE.prototype.setManifestType;WE.prototype.setSequenceMode=WE.prototype.setSequenceMode;WE.prototype.parseInit=WE.prototype.parseInit;Bt['application/mp4; codecs="wvtt"']=function(){return new WE};function QE(){}QE.prototype.parseInit=function(){};QE.prototype.setSequenceMode=function(){};QE.prototype.setManifestType=function(){};QE.prototype.parseMedia=function(e){var t=vr(e).replace(/\r+/g,"");t=t.trim();e=[];if(""==t)return e;t=c(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new Em(n[0]),r=$E(i),a=Am(i,/,/g);i=$E(i);if(null==r||null==a||null==i)throw new ht(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new xe(r,i,n.slice(1).join("\n").trim()))}return e};function $E(e){e=Am(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}q("shaka.text.SbvTextParser",QE);QE.prototype.parseMedia=QE.prototype.parseMedia;QE.prototype.setManifestType=QE.prototype.setManifestType;QE.prototype.setSequenceMode=QE.prototype.setSequenceMode;QE.prototype.parseInit=QE.prototype.parseInit;Bt["text/x-subviewer"]=function(){return new QE};function ZE(){this.g=new jE}ZE.prototype.parseInit=function(){};ZE.prototype.setSequenceMode=function(){};ZE.prototype.setManifestType=function(){};ZE.prototype.parseMedia=function(e,t){e=vr(e);e=ex(e);e=he(wr(e));return this.g.parseMedia(e,t)};function ex(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,"");e=e.trim();e=c(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}q("shaka.text.SrtTextParser",ZE);ZE.srt2webvtt=ex;ZE.prototype.parseMedia=ZE.prototype.parseMedia;ZE.prototype.setManifestType=ZE.prototype.setManifestType;ZE.prototype.setSequenceMode=ZE.prototype.setSequenceMode;ZE.prototype.parseInit=ZE.prototype.parseInit;Bt["text/srt"]=function(){return new ZE};function tx(){}tx.prototype.parseInit=function(){};tx.prototype.setSequenceMode=function(){};tx.prototype.setManifestType=function(){};tx.prototype.parseMedia=function(e){var t="",n="";e=vr(e).split(/\r?\n\s*\r?\n/);e=c(e);for(var i=e.next();!i.done;i=e.next()){var r=ax.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[];i=null;t=c(t.split(/\r?\n/));for(var a=t.next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=ox.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(sx);else if("Style"==r){r=a.split(sx);a={};for(var o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}i=[];t=null;r={};n=c(n.split(/\r?\n/));for(a=n.next();!a.done;r={Wd:r.Wd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=ox.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(sx);else if("Dialogue"==a){o=o.split(sx);a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];s=rx(a.Start);var u=rx(a.End);o=new xe(s,u,o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,""));r.Wd=a.Style;(a=e.find(function(e){return function(t){return t.Name==e.Wd}}(r)))&&nx(o,a);i.push(o)}return i};function nx(e,t){var n=t.Fontname;n&&(e.fontFamily=n);if(n=t.Fontsize)e.fontSize=n+"px";if(n=t.PrimaryColour)if(n=ix(n))e.color=n;if(n=t.BackColour)if(n=ix(n))e.backgroundColor=n;t.Bold&&(e.fontWeight=700);t.Italic&&(e.fontStyle="italic");t.Underline&&e.textDecoration.push("underline");if(n=t.Spacing)e.letterSpacing=n+"px";if(n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=_e;e.textAlign="start";break;case 2:e.displayAlign=_e;e.textAlign=Ie;break;case 3:e.displayAlign=_e;e.textAlign="end";break;case 5:e.displayAlign="before";e.textAlign="start";break;case 6:e.displayAlign="before";e.textAlign=Ie;break;case 7:e.displayAlign="before";e.textAlign="end";break;case 9:e.displayAlign="center";e.textAlign="start";break;case 10:e.displayAlign="center";e.textAlign=Ie;break;case 11:e.displayAlign="center",e.textAlign="end"}if(t=t.AlphaLevel)e.opacity=parseFloat(t)}function ix(e){e=parseInt(e.replace("&H",""),16);return 0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function rx(e){e=ux.exec(e);return 3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}q("shaka.text.SsaTextParser",tx);tx.prototype.parseMedia=tx.prototype.parseMedia;tx.prototype.setManifestType=tx.prototype.setManifestType;tx.prototype.setSequenceMode=tx.prototype.setSequenceMode;tx.prototype.parseInit=tx.prototype.parseInit;var ax=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,ox=/^\s*([^:]+):\s*(.*)/,sx=/\s*,\s*/,ux=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Bt["text/x-ssa"]=function(){return new tx};function lx(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{vd:n,O:e}:null}function cx(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,a=(e[t+2]&1)<<2;a|=(e[t+3]&192)>>>6;return{sampleRate:n[i],channelCount:a,oa:"mp4a.40."+r}}function dx(e,t){if(t+1<e.length&&255===e[t]&&240===(e[t+1]&246)){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;if(i<=n)return!1;t+=i;return t===e.length||t+1<e.length&&255===e[t]&&240===(e[t+1]&246)}return!1}function hx(e){this.i=e;this.h=0;this.g=new Map}i=hx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]?re(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Ct(t)||"mp4a.40.2")+'"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){for(var r=he(e),a=ko(r),o=a.length;o<r.length&&!dx(r,o);o++);e=1e3*n.endTime;a=Io(a);a.length&&n&&(n=a.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(e=n.data);n=cx(r,o);if(!n)return Promise.reject(new ht(2,3,3018));t.audioSamplingRate=n.sampleRate;t.channelsCount=n.channelCount;for(a=[];o<r.length;){var s=lx(r,o);if(!s)return Promise.reject(new ht(2,3,3018));var u=s.vd+s.O;o+u<=r.length&&a.push({data:r.subarray(o+s.vd,o+u),size:s.O,duration:1024,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});o+=u}r=n.sampleRate;e=Math.floor(e*r/1e3);i={id:t.id,type:"audio",codecs:n.oa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:a},stream:t};e=new Fv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=qv(e);this.h++;t=Gr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.AacTransmuxer",hx);hx.prototype.transmux=hx.prototype.transmux;hx.prototype.getOrginalMimeType=hx.prototype.getOrginalMimeType;hx.prototype.convertCodecs=hx.prototype.convertCodecs;hx.prototype.isSupported=hx.prototype.isSupported;hx.prototype.destroy=hx.prototype.destroy;qe("audio/aac",(function(){return new hx("audio/aac")}),Xe);function fx(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var a=e[t+6]>>5,o=0;2===a?o+=2:(a&1&&1!==a&&(o+=2),a&4&&(o+=2));o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=e[t+5]&7;e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|a<<3|o<<2|i>>4,i<<4&224]);return{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,Z:e,O:r}}function px(e,t){if(11===e[t]&&119===e[t+1]){var n=0,i=5;t+=i;for(var r,a;0<i;){a=e[t];var o=Math.min(i,8),s=8-o;r=4278190080>>>24+s<<s;r=(a&r)>>s;n=n?n<<o|r:r;t+=1;i-=o}if(16>n)return!0}return!1}function gx(e){this.i=e;this.h=0;this.g=new Map}i=gx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]?re(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=he(e);for(var r=ko(e),a=r.length;a<e.length&&!px(e,a);a++);var o=1e3*n.endTime;r=Io(r);r.length&&n&&(n=r.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=n.data);n=0;r=new Uint8Array([]);for(var s=[];a<e.length;){var u=fx(e,a);if(!u)return Promise.reject(new ht(2,3,3018));t.audioSamplingRate=u.sampleRate;t.channelsCount=u.channelCount;n=u.sampleRate;r=u.Z;s.push({data:e.subarray(a,a+u.O),size:u.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});a+=u.O}e=Math.floor(o*n/1e3);i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Ka:[],Z:r,la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:s},stream:t};e=new Fv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=qv(e);this.h++;t=Gr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Ac3Transmuxer",gx);gx.prototype.transmux=gx.prototype.transmux;gx.prototype.getOrginalMimeType=gx.prototype.getOrginalMimeType;gx.prototype.convertCodecs=gx.prototype.convertCodecs;gx.prototype.isSupported=gx.prototype.isSupported;gx.prototype.destroy=gx.prototype.destroy;qe("audio/ac3",(function(){return new gx("audio/ac3")}),Xe);function mx(e,t){if(t+8>e.length||2935!==(e[t]<<8|e[t+1]<<0))return null;var n=new Oo(e.subarray(t+2));jo(n,2);jo(n,3);var i=Bo(n,11)+1<<1,r=Bo(n,2);if(3==r){r=Bo(n,2);r=[24e3,22060,16e3][r];var a=3}else r=[48e3,44100,32e3][r],a=Bo(n,2);var o=Bo(n,3),s=Bo(n,1);n=Bo(n,5);if(t+i>e.byteLength)return null;e=Math.floor(i*r/(16*[1,2,3,6][a]));e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|o<<1|s<<0,0]);return{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][o]+s,Z:e,O:i}}function vx(e){this.i=e;this.h=0;this.g=new Map}i=vx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]?re(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=he(e);for(var r=ko(e),a=r.length;a<e.length&&2935!==(e[a]<<8|e[a+1]<<0);a++);var o=1e3*n.endTime;r=Io(r);r.length&&n&&(n=r.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=n.data);n=0;r=new Uint8Array([]);for(var s=[];a<e.length;){var u=mx(e,a);if(!u)return Promise.reject(new ht(2,3,3018));t.audioSamplingRate=u.sampleRate;t.channelsCount=u.channelCount;n=u.sampleRate;r=u.Z;s.push({data:e.subarray(a,a+u.O),size:u.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});a+=u.O}e=Math.floor(o*n/1e3);i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,Ka:[],Z:r,la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:s},stream:t};e=new Fv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=qv(e);this.h++;t=Gr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Ec3Transmuxer",vx);vx.prototype.transmux=vx.prototype.transmux;vx.prototype.getOrginalMimeType=vx.prototype.getOrginalMimeType;vx.prototype.convertCodecs=vx.prototype.convertCodecs;vx.prototype.isSupported=vx.prototype.isSupported;vx.prototype.destroy=vx.prototype.destroy;qe("audio/ec3",(function(){return new vx("audio/ec3")}),Xe);function yx(e){if(!e.length)return null;var t=e.find((function(e){return 7==e.type}));e=e.find((function(e){return 8==e.type}));if(!t||!e)return null;var n=new Oo(t.data),i=Bo(n,8);Bo(n,8);Bo(n,8);Vo(n);if(wx.includes(i)&&(i=Go(n),3===i&&jo(n,1),Vo(n),Vo(n),jo(n,1),1===Bo(n,1))){i=3!==i?8:12;for(var r=0;r<i;r++)1===Bo(n,1)&&(6>r?Ho(n,16):Ho(n,64))}Vo(n);i=Go(n);if(0===i)Go(n);else if(1===i)for(jo(n,1),Vo(n),Vo(n),i=Go(n),r=0;r<i;r++)Vo(n);Vo(n);jo(n,1);i=Go(n);var a=Go(n),o=Bo(n,1);0===o&&jo(n,1);jo(n,1);var s=r=0,u=0,l=0;1===Bo(n,1)&&(r=Go(n),s=Go(n),u=Go(n),l=Go(n));n=(2-o)*(a+1)*16-2*u-2*l;i=16*(i+1)-2*r-2*s;r=[];t=t.ab;r.push(t.byteLength>>>8&255);r.push(t.byteLength&255);r=r.concat.apply(r,d(t));t=[];e=e.ab;t.push(e.byteLength>>>8&255);t.push(e.byteLength&255);t=t.concat.apply(t,d(e));e=new Uint8Array([1,r[3],r[4],r[5],255,225].concat(r,[1],t));return{height:n,width:i,la:e}}function bx(e){var t=!1,n=new Uint8Array([]),i=e.find((function(e){return 7==e.type})),r=!1;e=c(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var o=!1;switch(a.type){case 1:o=r=!0;var s=a.data;i&&4<s.length&&(s=qo(new Oo(s)),2===s||4===s||7===s||9===s)&&(t=!0);break;case 5:t=o=r=!0;break;case 6:o=!0;break;case 7:o=!0;break;case 8:o=!0;break;case 9:r=o=!0;break;case 12:o=!0;break;default:o=!1}r&&o&&(o=a.ab.byteLength,s=new Uint8Array(4),s[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=o&255,n=Gr(n,s,a.ab))}return n.byteLength?{data:n,rf:t}:null}var wx=[100,110,122,244,44,83,86,118,128,138,139,134];function Tx(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==a){var o=e[t+3]>>6;r=1e3*xx[14*(3===n?3-i:3===i?3:4)+r-1];a=Ax[3*(3===n?0:2===n?1:2)+a];n=Sx[n][i];var s=Ix[i],u=Math.floor(n*r/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);(l=l?parseInt(l[1],10):0)&&87>=l&&2===i&&224e3<=r&&0===o&&(e[t+3]|=128);return{sampleRate:a,channelCount:3===o?1:2,O:u,fh:8*n*s}}return null}function Ex(e,t){return 255===e[t]&&224===(e[t+1]&224)&&0!==(e[t+1]&6)}var xx=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ax=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Sx=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ix=[0,1,1,4];function kx(e){this.i=e;this.h=0;this.g=new Map}i=kx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]?re(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=he(e);for(n=ko(e).length;n<e.length;n++){var r=n;if(r+1<e.length&&Ex(e,r)){var a=Tx(e,r),o=4;a&&a.O&&(o=a.O);r+=o;r=r===e.length||r+1<e.length&&Ex(e,r)}else r=!1;if(r)break}var s;for(r=[];n<e.length;){a=Tx(e,n);if(!a)return Promise.reject(new ht(2,3,3018));s||(s=a);n+a.O<=e.length&&r.push({data:e.subarray(n,n+a.O),size:a.O,duration:1152,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});n+=a.O}if(!s)return Promise.reject(new ht(2,3,3018));e=9e4*s.fh/s.sampleRate*this.h;i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:i,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:r},stream:t};s=new Fv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=s.initSegment(),this.g.set(t.id,i));t=qv(s);this.h++;t=Gr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Mp3Transmuxer",kx);kx.prototype.transmux=kx.prototype.transmux;kx.prototype.getOrginalMimeType=kx.prototype.getOrginalMimeType;kx.prototype.convertCodecs=kx.prototype.convertCodecs;kx.prototype.isSupported=kx.prototype.isSupported;kx.prototype.destroy=kx.prototype.destroy;qe("audio/mpeg",(function(){return new kx("audio/mpeg")}),Xe);function _x(e){this.h=e;this.g=null}i=_x.prototype;i.destroy=function(){};i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Ct(e).split(","),n=wt("audio",t);t=wt("video",t);return!n||t||"mp3"!=_t(n)?!1:re(this.convertCodecs("audio",e))};i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t};i.getOrginalMimeType=function(){return this.h};i.transmux=function(e){this.g?this.g.clearData():this.g=new zo;e=he(e);var t=this.g.parse(e);e=t.nd();if("mp3"!=e.audio||e.video)return Promise.reject(new ht(2,3,3018));e=new Uint8Array([]);t=c(t.yb());for(var n=t.next();!n.done;n=t.next())if(n=n.value.data)for(var i=0;i<n.length;){var r=Tx(n,i);r?(i+r.O<=n.length&&(e=Gr(e,n.subarray(i,i+r.O))),i+=r.O):i++}return Promise.resolve(e)};q("shaka.transmuxer.MpegTsTransmuxer",_x);_x.prototype.transmux=_x.prototype.transmux;_x.prototype.getOrginalMimeType=_x.prototype.getOrginalMimeType;_x.prototype.convertCodecs=_x.prototype.convertCodecs;_x.prototype.isSupported=_x.prototype.isSupported;_x.prototype.destroy=_x.prototype.destroy;qe("video/mp2t",(function(){return new _x("video/mp2t")}),We);function Cx(e){this.h=e;(this.g=cm.get("ISOBoxer")())&&Mx(this)}function Mx(e){function t(){this._procFullBox();this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8));this._procField("sample_count","uint",32);this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8);this.flags&2&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16);this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}e.g.addBoxProcessor("saio",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("entry_count","uint",32);this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}));e.g.addBoxProcessor("saiz",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("default_sample_info_size","uint",8);this._procField("sample_count","uint",32);0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}));e.g.addBoxProcessor("senc",t);e.g.addBoxProcessor("uuid",(function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==Rx[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))}))}i=Cx.prototype;i.destroy=function(){};i.isSupported=function(e,t){var n=e.startsWith("mss/");if(!this.g||!n)return!1;if(t)return re(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return re(t)||re(e)};i.convertCodecs=function(e,t){return t.replace("mss/","")};i.getOrginalMimeType=function(){return this.h};i.transmux=function(e,t,n){if(!n)return Promise.resolve(he(e));if(!t.mssPrivateData)return Promise.reject(new ht(2,3,3020));try{var i,r=this.g.parseBuffer(e),a=r.fetch("tfhd");a.track_ID=t.id+1;var o=r.fetch("tfdt"),s=r.fetch("traf");null===o&&(o=this.g.createFullBox("tfdt",s,a),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=r.fetch("sepiff");if(null!==d){d.type="senc";d.usertype=void 0;var h=r.fetch("saio");if(null===h){h=this.g.createFullBox("saio",s);h.version=0;h.flags=0;h.entry_count=1;h.offset=[0];var f=this.g.createFullBox("saiz",s);f.version=0;f.flags=0;f.sample_count=d.sample_count;f.default_sample_info_size=0;f.sample_info_size=[];if(d.flags&2)for(i=0;i<d.sample_count;i+=1)f.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else f.default_sample_info_size=8}}a.flags&=16777214;a.flags|=131072;u.flags|=1;var p=r.fetch("moof");u.data_offset=p.getLength()+8;var g=r.fetch("saio");null!==g&&(g.offset[0]=Dx(p,"traf")+Dx(s,"senc")+16);var m=he(r.write());return Promise.resolve(m)}catch(e){return e instanceof ht?Promise.reject(e):Promise.reject(new ht(2,3,3022))}};function Dx(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}q("shaka.transmuxer.MssTransmuxer",Cx);Cx.prototype.transmux=Cx.prototype.transmux;Cx.prototype.getOrginalMimeType=Cx.prototype.getOrginalMimeType;Cx.prototype.convertCodecs=Cx.prototype.convertCodecs;Cx.prototype.isSupported=Cx.prototype.isSupported;Cx.prototype.destroy=Cx.prototype.destroy;var Rx=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);qe("mss/audio/mp4",(function(){return new Cx("mss/audio/mp4")}),Xe);qe("mss/video/mp4",(function(){return new Cx("mss/video/mp4")}),Xe);function Lx(e){var t=this;this.m=e;this.j=cm.get("muxjs")();this.h=this.g=null;this.l=[];this.i=!1;this.j&&(this.g=new this.j.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",(function(e){t.l.push(Gr(e.initSegment,e.data))})),this.g.on("done",(function(){var e=Gr.apply(Or,d(t.l));t.h.resolve(e);t.i=!1})))}i=Lx.prototype;i.destroy=function(){this.g&&this.g.dispose();this.g=null};i.isSupported=function(e,t){var n="mp2t"==e.toLowerCase().split(";")[0].split("/")[1];if(!this.j||!n)return!1;if(t)return re(Px(t,e));t=Px("audio",e);e=Px("video",e);return re(t)||re(e)};i.convertCodecs=function(e,t){return"mp2t"==t.toLowerCase().split(";")[0].split("/")[1]?Px(e,t):t};function Px(e,t){t=t.replace(/mp2t/i,"mp4");"audio"==e&&(t=t.replace("video","audio"));if(e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",i=e[1],r=Number(e[2]);n=("66"==i?n+"4200":"77"==i?n+"4d00":n+"6400")+(r>>4).toString(16);n+=(r&15).toString(16);t=t.replace(e[0],n)}return t}i.getOrginalMimeType=function(){return this.m};i.transmux=function(e){this.i=!0;this.h=new Mi;this.l=[];e=he(e);this.g.push(e);this.g.flush();this.i&&this.h.reject(new ht(2,3,3018));return this.h};q("shaka.transmuxer.MuxjsTransmuxer",Lx);Lx.prototype.transmux=Lx.prototype.transmux;Lx.prototype.getOrginalMimeType=Lx.prototype.getOrginalMimeType;Lx.prototype.convertCodecs=Lx.prototype.convertCodecs;Lx.prototype.isSupported=Lx.prototype.isSupported;Lx.prototype.destroy=Lx.prototype.destroy;qe("video/mp2t",(function(){return new Lx("video/mp2t")}),Xe);function Nx(e){this.j=e;this.g=0;this.h=new Map;this.i=null}i=Nx.prototype;i.destroy=function(){this.h.clear()};i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=Ct(e).split(","),i=wt("audio",n);n=wt("video",n);if(i&&n||i&&(i=_t(i),!Ox.includes(i))||n&&(i=_t(n),!Ux.includes(i)))return!1;if(t)return re(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return re(t)||re(e)};i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Ct(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t};i.getOrginalMimeType=function(){return this.j};i.transmux=function(e,t,n,i,r){this.i?this.i.clearData():this.i=new zo;e=he(e);var a=this.i.parse(e);e=[];var o=a.nd();try{n=null;if("video"==r){switch(o.video){case"avc":for(var s=[],u=null,l=[],d=a.td(),h=0;h<d.length;h++){var f=d[h],p=void 0;h+1<d.length&&(p=d[h+1]);var g=a.Be(f,p);l=l.concat(g);var m=bx(g);m&&(null==u&&(u=f.dts),p=void 0,p=h+1<d.length?(d[h+1].dts||0)-(f.dts||0):(f.dts||0)-(d[h-1].dts||0),s.push({data:m.data,size:m.data.byteLength,duration:p,$a:Math.round((f.pts||0)-(f.dts||0)),flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:m.rf?2:1,gb:m.rf?0:1}}))}var v=yx(l);if(!v||null==u)throw new ht(2,3,3018);t.height=v.height;t.width=v.width;n={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Ka:[],Z:new Uint8Array([]),la:v.la,data:{lb:this.g,baseMediaDecodeTime:u,Ja:s},stream:t}}n&&(e.push(n),n=null)}if("audio"==r){switch(o.audio){case"aac":for(var y=[],b,w=null,T=c(a.yb()),E=T.next();!E.done;E=T.next()){var x=E.value,A=x.data;if(A){a=0;b=cx(A,a);if(!b)throw new ht(2,3,3018);t.audioSamplingRate=b.sampleRate;t.channelsCount=b.channelCount;null==w&&null!==x.pts&&(w=x.pts);for(;a<A.length;){var S=lx(A,a);if(S){var I=S.vd+S.O;a+I<=A.length&&y.push({data:A.subarray(a+S.vd,a+I),size:S.O,duration:1024,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});a+=I}else a++}}}if(!b||null==w)throw new ht(2,3,3018);var k=b.sampleRate;a=w/9e4*k;n={id:t.id,type:"audio",codecs:b.oa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:k,duration:i,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:a,Ja:y},stream:t};break;case"ac3":w=[];b=0;y=new Uint8Array([]);k=null;for(var _=c(a.yb()),C=_.next();!C.done;C=_.next()){var M=C.value,D=M.data;null==k&&null!==M.pts&&(k=M.pts);for(a=0;a<D.length;){var R=fx(D,a);R?(t.audioSamplingRate=R.sampleRate,t.channelsCount=R.channelCount,b=R.sampleRate,y=R.Z,w.push({data:D.subarray(a,a+R.O),size:R.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),a+=R.O):a++}}if(0==b||0==y.byteLength||null==k)throw new ht(2,3,3018);a=k/9e4*b;n={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:b,duration:i,Ka:[],Z:y,la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:a,Ja:w},stream:t};break;case"ec3":y=[];b=0;w=new Uint8Array([]);k=null;for(var L=c(a.yb()),P=L.next();!P.done;P=L.next()){var N=P.value,O=N.data;null==k&&null!==N.pts&&(k=N.pts);for(a=0;a<O.length;){var U=mx(O,a);U?(t.audioSamplingRate=U.sampleRate,t.channelsCount=U.channelCount,b=U.sampleRate,w=U.Z,y.push({data:O.subarray(a,a+U.O),size:U.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),a+=U.O):a++}}if(0==b||0==w.byteLength||null==k)throw new ht(2,3,3018);a=k/9e4*b;n={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:b,duration:i,Ka:[],Z:w,la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:a,Ja:y},stream:t};break;case"mp3":y=[];var j;w=null;for(var B=c(a.yb()),F=B.next();!F.done;F=B.next()){var V=F.value,G=V.data;if(G)for(null==w&&null!==V.pts&&(w=V.pts),a=0;a<G.length;){var H=Tx(G,a);H?(j||(j=H),a+H.O<=G.length&&y.push({data:G.subarray(a,a+H.O),size:H.O,duration:1152,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),a+=H.O):a++}}if(!j||null==w)throw new ht(2,3,3018);var q=j.sampleRate;a=w/9e4*q;n={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:q,duration:i,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:a,Ja:y},stream:t}}n&&e.push(n)}}catch(e){return Promise.reject(e)}if(!e.length)return Promise.reject(new ht(2,3,3018));e=new Fv(e);this.h.has(t.id)?i=this.h.get(t.id):(i=e.initSegment(),this.h.set(t.id,i));t=qv(e);this.g++;t=Gr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.TsTransmuxer",Nx);Nx.prototype.transmux=Nx.prototype.transmux;Nx.prototype.getOrginalMimeType=Nx.prototype.getOrginalMimeType;Nx.prototype.convertCodecs=Nx.prototype.convertCodecs;Nx.prototype.isSupported=Nx.prototype.isSupported;Nx.prototype.destroy=Nx.prototype.destroy;var Ox=["aac","ac-3","ec-3","mp3"],Ux=["avc"];qe("video/mp2t",(function(){return new Nx("video/mp2t")}),Ye);function jx(){}var Bx;function Fx(){Bx?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Bx=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Vx):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Vx(e,t){var n=this,i;return O((function(r){if(1==r.g)return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Bx.call(n,e,t),2);i=r.h;if($x(i))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Bx,r.return(i);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=Gx;return r.return(Gx.call(n,e,t))}))}function Gx(e,t){var n=this,i,r,a,o,s,u,l,d,h,f;return O((function(p){if(1==p.g){console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess');i=Qx(e);r=[];a=c(t);for(o=a.next();!o.done;o=a.next())s=o.value,u=Hx(s.videoCapabilities,i),l=Hx(s.audioCapabilities,i),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||(d=Object.assign({},s),d.videoCapabilities=u,d.audioCapabilities=l,r.push(d));if(!r.length)throw h=Error("Unsupported keySystem or supportedConfigurations."),h.name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return E(p,Bx.call(n,e,r),2)}f=p.h;return p.return(new Jx(f,i))}))}function Hx(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}q("EmeEncryptionSchemePolyfill",jx);jx.install=Fx;function qx(){}var zx;function Kx(){zx?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(zx=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Xx):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Xx(e){var t=this,n,i,r;return O((function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(a,zx.call(t,e),2);case 2:n=a.h;if(!e.keySystemConfiguration)return a.return(n);if((i=n.keySystemAccess)&&$x(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=zx,a.return(n);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=Wx;if(i){a.B(3);break}r=n;return E(a,Yx(e),4);case 4:return r.keySystemAccess=a.h,a.return(n);case 3:return a.return(Wx.call(t,e))}}))}function Wx(e){var t=this,n,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,r=i.keySystem,a=i.audio&&i.audio.encryptionScheme,o=i.video&&i.video.encryptionScheme,n=Qx(r),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},a&&a!=n||o&&o!=n)?c.return(s):E(c,zx.call(t,e),2);case 2:u=c.h;if(u.keySystemAccess){u.keySystemAccess=new Jx(u.keySystemAccess,n);c.B(3);break}if(!e.keySystemConfiguration){c.B(3);break}l=u;return E(c,Yx(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(u)}}))}function Yx(e){var t,n;return O((function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],o=[];r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType});r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType});r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes};a.length&&(r.audioCapabilities=a);o.length&&(r.videoCapabilities=o);t=r;return E(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}n=i.h;return i.return(n)}))}q("McEncryptionSchemePolyfill",qx);qx.install=Kx;function Jx(e,t){this.h=e;this.g=t;this.keySystem=e.keySystem}Jx.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=c(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e};Jx.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function Qx(e){if(e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3"))return"cenc";if(e.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!");return null}function $x(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return(e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&void 0!==e.encryptionScheme?!0:!1}function Zx(){}function eA(){Fx();Kx()}q("EncryptionSchemePolyfills",Zx);Zx.install=eA;"undefined"!==typeof n&&n.exports&&(n.exports=Zx)}).call(i,n,n,undefined);if(true)for(var r in i.shaka)t[r]=i.shaka[r];else{}})()}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/shaka-player/dist/shaka-player.ui.js":function(e,t,n){(function(e){(function(){var n=typeof window!="undefined"?window:e;var i={};(function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(e==Array.prototype||e==Object.prototype)return e;e[t]=n.value;return e};function o(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var s=o(this);function u(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1];i=n[e];t=t(i);t!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}u("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(e||"")+"_"+r++,e)}function n(e,t){this.g=e;a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}));u("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=s[t[n]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));function l(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function d(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var h="function"==typeof Object.create?Object.create:function(e){function t(){}t.prototype=e;return new t},f;if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var p;e:{var g={a:!0},m={};try{m.__proto__=g;p=m.a;break e}catch(e){}p=!1}f=p?function(e,t){e.__proto__=t;if(e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var v=f;function y(e,t){e.prototype=h(t.prototype);e.prototype.constructor=e;if(v)v(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.ik=t.prototype}function b(){this.s=!1;this.l=null;this.h=void 0;this.g=1;this.j=this.m=0;this.C=this.i=null}function w(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}b.prototype.B=function(e){this.h=e};function T(e,t){e.i={kg:t,ug:!0};e.g=e.m||e.j}b.prototype.return=function(e){this.i={return:e};this.g=this.j};function E(e,t,n){e.g=n;return{value:t}}b.prototype.D=function(e){this.g=e};function x(e){e.g=0}function A(e,t,n){e.m=t;void 0!=n&&(e.j=n)}function S(e){e.m=0;e.j=2}function I(e,t,n){e.g=t;e.m=n||0}function k(e,t){e.m=t||0;t=e.i.kg;e.i=null;return t}function _(e){e.C=[e.i];e.m=0;e.j=0}function C(e,t){var n=e.C.splice(0)[0];(n=e.i=e.i||n)?n.ug?e.g=e.m||e.j:void 0!=n.D&&e.j<n.D?(e.g=n.D,e.i=null):e.g=e.j:e.g=t}function M(e){this.g=new b;this.h=e}function D(e,t){w(e.g);var n=e.g.l;if(n)return R(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.g.return);e.g.return(t);return L(e)}function R(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.s=!1,r;var a=r.value}catch(t){return e.g.l=null,T(e.g,t),L(e)}e.g.l=null;i.call(e.g,a);return L(e)}function L(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,T(e.g,t)}e.g.s=!1;if(e.g.i){t=e.g.i;e.g.i=null;if(t.ug)throw t.kg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(e){this.next=function(t){w(e.g);e.g.l?t=R(e,e.g.l.next,t,e.g.B):(e.g.B(t),t=L(e));return t};this.throw=function(t){w(e.g);e.g.l?t=R(e,e.g.l["throw"],t,e.g.B):(T(e.g,t),t=L(e));return t};this.return=function(t){return D(e,t)};this[Symbol.iterator]=function(){return this}}function N(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){function a(e){e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(a,r)}a(e.next())}))}function O(e){return N(new P(new M(e)))}function U(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}u("Promise",(function(e){function t(e){this.h=0;this.i=void 0;this.g=[];this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=s.setTimeout;n.prototype.i=function(e){r(e,0)};n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null};n.prototype.j=function(e){this.i((function(){throw e}))};t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.H),reject:e(this.l)}};t.prototype.H=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.J(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.G(e):this.m(e)}};t.prototype.G=function(e){var t=void 0;try{t=e.then}catch(e){this.l(e);return}"function"==typeof t?this.K(t,e):this.m(e)};t.prototype.l=function(e){this.B(2,e)};t.prototype.m=function(e){this.B(1,e)};t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e;this.i=t;2===this.h&&this.I();this.C()};t.prototype.I=function(){var e=this;r((function(){if(e.F()){var t=s.console;"undefined"!==typeof t&&t.error(e.i)}}),1)};t.prototype.F=function(){if(this.s)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;if("undefined"===typeof n)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.i;return n(e)};t.prototype.C=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;t.prototype.J=function(e){var t=this.j();e.Md(t.resolve,t.reject)};t.prototype.K=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}};t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e;a=t}));this.Md(i(e,r),i(n,a));return o};t.prototype.catch=function(e){return this.then(void 0,e)};t.prototype.Md=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n);this.s=!0};t.resolve=i;t.reject=function(e){return new t((function(t,n){n(e)}))};t.race=function(e){return new t((function(t,n){for(var r=c(e),a=r.next();!a.done;a=r.next())i(a.value).Md(t,n)}))};t.all=function(e){var n=c(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n;s--;0==s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Md(a(o.length-1),t),r=n.next()}while(!r.done)}))};return t}));function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}u("WeakMap",(function(e){function t(e){this.g=(u+=Math.random()+1).toString();if(e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!j(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){if(e instanceof n)return e;Object.isExtensible(e)&&r(e);return t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);if(2!=i.get(t)||3!=i.get(n))return!1;i.delete(t);i.set(n,4);return!i.has(t)&&4==i.get(n)}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze");o("preventExtensions");o("seal");var u=0;t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");r(e);if(!j(e,s))throw Error("WeakMap key fail: "+e);e[s][this.g]=t;return this};t.prototype.get=function(e){return i(e)&&j(e,s)?e[s][this.g]:void 0};t.prototype.has=function(e){return i(e)&&j(e,s)&&j(e[s],this.g)};t.prototype.delete=function(e){return i(e)&&j(e,s)&&j(e[s],this.g)?delete e[s][this.g]:!1};return t}));u("Map",(function(e){function t(){var e={};return e.Hb=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.Hb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&j(e.h,n))for(e=0;e<i.length;e++){var r=i[e];if(t!==t&&r.key!==r.key||t===r.key)return{id:n,list:i,index:e,entry:r}}return{id:n,list:i,index:-1,entry:void 0}}function r(e){this.h={};this.g=t();this.size=0;if(e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();if(r.done||r.value[0]!=t||"s"!=r.value[1])return!1;r=i.next();return r.done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done?!1:!0}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){e=0===e?0:e;var n=i(this,e);n.list||(n.list=this.h[n.id]=[]);n.entry?n.entry.value=t:(n.entry={next:this.g,Hb:this.g.Hb,head:this.g,key:e,value:t},n.list.push(n.entry),this.g.Hb.next=n.entry,this.g.Hb=n.entry,this.size++);return this};r.prototype.delete=function(e){e=i(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.Hb.next=e.entry.next,e.entry.next.Hb=e.entry.Hb,e.entry.head=null,this.size--,!0):!1};r.prototype.clear=function(){this.h={};this.g=this.g.Hb=t();this.size=0};r.prototype.has=function(e){return!!i(this,e).entry};r.prototype.get=function(e){return(e=i(this,e).entry)&&e.value};r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))};r.prototype.keys=function(){return n(this,(function(e){return e.key}))};r.prototype.values=function(){return n(this,(function(e){return e.value}))};r.prototype.forEach=function(e,t){for(var n=this.entries(),i;!(i=n.next()).done;)i=i.value,e.call(t,i[1],i[0],this)};r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r}));function B(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}i=!0;return{done:!0,value:void 0}}};r[Symbol.iterator]=function(){return r};return r}u("Array.prototype.keys",(function(e){return e?e:function(){return B(this,(function(e){return e}))}}));u("Set",(function(e){function t(e){this.g=new Map;if(e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();if(r.done||r.value[0]!=t||r.value[1]!=t)return!1;r=i.next();return r.done||r.value[0]==t||4!=r.value[0].x||r.value[1]!=r.value[0]?!1:i.next().done}catch(e){return!1}}())return e;t.prototype.add=function(e){e=0===e?0:e;this.g.set(e,e);this.size=this.g.size;return this};t.prototype.delete=function(e){e=this.g.delete(e);this.size=this.g.size;return e};t.prototype.clear=function(){this.g.clear();this.size=0};t.prototype.has=function(e){return this.g.has(e)};t.prototype.entries=function(){return this.g.entries()};t.prototype.values=function(){return this.g.values()};t.prototype.keys=t.prototype.values;t.prototype[Symbol.iterator]=t.prototype.values;t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))};return t}));u("Array.from",(function(e){return e?e:function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}}));function F(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{rg:r,v:a}}return{rg:-1,v:void 0}}u("Array.prototype.findIndex",(function(e){return e?e:function(e,t){return F(this,e,t).rg}}));u("Object.is",(function(e){return e?e:function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}));u("Array.prototype.includes",(function(e){return e?e:function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;t=t||0;for(0>t&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}));function V(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}u("String.prototype.includes",(function(e){return e?e:function(e,t){return-1!==V(this,e,"includes").indexOf(e,t||0)}}));u("Array.prototype.find",(function(e){return e?e:function(e,t){return F(this,e,t).v}}));u("String.prototype.startsWith",(function(e){return e?e:function(e,t){var n=V(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(t|0,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}}));var G="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)j(i,r)&&(e[r]=i[r])}return e};u("Object.assign",(function(e){return e||G}));u("Array.prototype.values",(function(e){return e?e:function(){return B(this,(function(e,t){return t}))}}));u("Promise.prototype.finally",(function(e){return e?e:function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));u("Array.prototype.entries",(function(e){return e?e:function(){return B(this,(function(e,t){return[e,t]}))}}));u("String.prototype.repeat",(function(e){return e?e:function(e){var t=V(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)if(e&1&&(n+=t),e>>>=1)t+=t;return n}}));u("Number.isNaN",(function(e){return e?e:function(e){return"number"===typeof e&&isNaN(e)}}));u("Number.isFinite",(function(e){return e?e:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}}));u("Object.values",(function(e){return e?e:function(e){var t=[],n;for(n in e)j(e,n)&&t.push(e[n]);return t}}));u("Math.log2",(function(e){return e?e:function(e){return Math.log(e)/Math.LN2}}));u("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}));u("Math.trunc",(function(e){return e?e:function(e){e=Number(e);if(isNaN(e)||Infinity===e||-Infinity===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}));u("Object.entries",(function(e){return e?e:function(e){var t=[],n;for(n in e)j(e,n)&&t.push([n,e[n]]);return t}}));var H=this||self;function q(e,t){e=e.split(".");var n=H;e[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||void 0===t?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}var z={};function K(t,n){if(n)if(n instanceof Map)for(var i=c(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now();this.type=t;this.isTrusted=!1;this.target=this.currentTarget=null;this.g=!1}function X(e){var t=new K(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}K.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};K.prototype.stopImmediatePropagation=function(){this.g=!0};K.prototype.stopPropagation=function(){};q("shaka.util.FakeEvent",K);var W={Oi:"abrstatuschanged",Pi:"adaptation",Qi:"buffering",Ti:"downloadfailed",Ui:"downloadheadersreceived",Vi:"drmsessionupdate",bj:"emsg",Aj:"prft",Error:"error",cj:"expirationupdated",fj:"gapjumped",jj:"loaded",kj:"loading",pj:"manifestparsed",qj:"mediaqualitychanged",Metadata:"metadata",uj:"onstatechange",vj:"onstateidle",Fj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"stalldetected",Oj:"streaming",Pj:"textchanged",Qj:"texttrackvisibility",Rj:"timelineregionadded",Sj:"timelineregionenter",Tj:"timelineregionexit",Uj:"trackschanged",Zj:"unloading",ck:"variantchanged"};function Y(){}function J(){}function Q(){}function $(e){var t=U.apply(1,arguments);ie.has(e)||(ie.add(e),Q.apply(Y,d(t)))}function Z(){}function ee(){}function te(){}function ne(){}var ie=new Set;e.console&&(Q=function(){return console.warn.apply(console,d(U.apply(0,arguments)))},J=function(){console.error.apply(console,d(U.apply(0,arguments)))});function re(){this.g={}}i=re.prototype;i.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]};i.get=function(e){return(e=this.g[e])?e.slice():null};i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])};i.forEach=function(e){for(var t in this.g)e(t,this.g[t])};i.size=function(){return Object.keys(this.g).length};i.keys=function(){return Object.keys(this.g)};function ae(){this.ma=new re;this.qe=this}ae.prototype.addEventListener=function(e,t){this.ma&&this.ma.push(e,t)};ae.prototype.removeEventListener=function(e,t){this.ma&&this.ma.remove(e,t)};ae.prototype.dispatchEvent=function(e){if(!this.ma)return!0;var t=this.ma.get(e.type)||[],n=this.ma.get("All");n&&(t=t.concat(n));t=c(t);for(n=t.next();!n.done;n=t.next()){n=n.value;e.target=this.qe;e.currentTarget=this.qe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented};ae.prototype.release=function(){this.ma=null};function oe(e,t){var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function se(e,t){e=c(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function ue(e,t){e=c(e);for(var n=e.next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function le(e,t){var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next())i=i.value,t(i)&&n.push(i);return n}var ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function de(e){var t;e instanceof de?(he(this,e.eb),this.qc=e.qc,this.mb=e.mb,fe(this,e.Hc),this.La=e.La,pe(this,e.g.clone()),this.Yb=e.Yb):e&&(t=String(e).match(ce))?(he(this,t[1]||"",!0),this.qc=ge(t[2]||""),this.mb=ge(t[3]||"",!0),fe(this,t[4]),this.La=ge(t[5]||"",!0),pe(this,t[6]||"",!0),this.Yb=ge(t[7]||"")):this.g=new xe(null)}i=de.prototype;i.eb="";i.qc="";i.mb="";i.Hc=null;i.La="";i.Yb="";i.toString=function(){var e=[],t=this.eb;t&&e.push(me(t,ye,!0),":");if(t=this.mb){e.push("//");var n=this.qc;n&&e.push(me(n,ye,!0),"@");e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));t=this.Hc;null!=t&&e.push(":",String(t))}if(t=this.La)this.mb&&"/"!=t.charAt(0)&&e.push("/"),e.push(me(t,"/"==t.charAt(0)?we:be,!0));(t=this.g.toString())&&e.push("?",t);(t=this.Yb)&&e.push("#",me(t,Ee));return e.join("")};i.resolve=function(e){var t=this.clone();"data"===t.eb&&(t=new de);var n=!!e.eb;n?he(t,e.eb):n=!!e.qc;n?t.qc=e.qc:n=!!e.mb;n?t.mb=e.mb:n=null!=e.Hc;var i=e.La;if(n)fe(t,e.Hc);else if(n=!!e.La){if("/"!=i.charAt(0))if(this.mb&&!this.La)i="/"+i;else{var r=t.La.lastIndexOf("/");-1!=r&&(i=t.La.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0);i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}n?t.La=i:n=""!==e.g.toString();n?pe(t,e.g.clone()):n=!!e.Yb;n&&(t.Yb=e.Yb);return t};i.clone=function(){return new de(this)};function he(e,t,n){e.eb=n?ge(t,!0):t;e.eb&&(e.eb=e.eb.replace(/:$/,""))}function fe(e,t){if(t){t=Number(t);if(isNaN(t)||0>t)throw Error("Bad port number "+t);e.Hc=t}else e.Hc=null}function pe(e,t,n){t instanceof xe?e.g=t:(n||(t=me(t,Te)),e.g=new xe(t))}function ge(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function me(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ve),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ve(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var ye=/[#\/\?@]/g,be=/[#\?:]/g,we=/[#\?]/g,Te=/[#\?@]/g,Ee=/#/g;function xe(e){this.g=e||null}function Ae(e){if(!e.Ha&&(e.Ha={},e.dd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," "));r=r||"";e.add(a,decodeURIComponent(r.replace(/\+/g," ")))}}i=xe.prototype;i.Ha=null;i.dd=null;i.add=function(e,t){Ae(this);this.g=null;var n=this.Ha.hasOwnProperty(e)?this.Ha[e]:null;n||(this.Ha[e]=n=[]);n.push(t);this.dd++;return this};i.set=function(e,t){Ae(this);this.g=null;this.Ha.hasOwnProperty(e)?this.Ha[e]=[t]:this.add(e,t);return this};i.toString=function(){if(this.g)return this.g;if(!this.Ha)return"";var e=[],t;for(t in this.Ha)for(var n=encodeURIComponent(t),i=this.Ha[t],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r]));e.push(a)}return this.g=e.join("&")};i.clone=function(){var e=new xe;e.g=this.g;if(this.Ha){var t={},n;for(n in this.Ha)t[n]=this.Ha[n].concat();e.Ha=t;e.dd=this.dd}return e};function Se(e,t,n){var i=U.apply(3,arguments);this.severity=e;this.category=t;this.code=n;this.data=i;this.handled=!1;this.message="Shaka Error "+this.code;if(Ie)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}Se.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};q("shaka.util.Error",Se);var Ie=!0;Se.Severity={RECOVERABLE:1,CRITICAL:2};Se.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};Se.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function ke(e,t){return e.concat(t)}function _e(){}function Ce(e){return null!=e}function Me(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length)return e=new de(e[0]),t=new de(t[0]),[e.resolve(t).toString()];var n=t.map((function(e){return new de(e)}));return e.map((function(e){var t=new de(e);return n.map((function(e){return t.resolve(e).toString()}))})).reduce(ke,[])}function De(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Re(e,t){if(1==t.length)return t[0];e=Le(e,t);if(null!=e)return e;throw new Se(2,4,4025,t)}function Le(e,t){for(var n=c(Oe[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=c(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==Pe?"":null}var Pe="text",Ne={Na:"video",Ob:"audio",na:Pe,Zc:"image",Li:"application"},Oe={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ue(){}function je(e,t){e=Ve(e);t=Ve(t);return e.split("-")[0]==t.split("-")[0]}function Be(e,t){e=Ve(e);t=Ve(t);e=e.split("-");t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function Fe(e,t){e=Ve(e);t=Ve(t);e=e.split("-");t=t.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function Ve(e){var t=e.split("-x-"),n=t[0].split("-");e=n[0]||"";n=n[1]||"";t=t[1]?"x-"+t[1]:"";e=e.toLowerCase();e=Xe.get(e)||e;n=n.toUpperCase();return(n?e+"-"+n:e)+(t?"-"+t:"")}function Ge(e,t){var n=qe(e),i=qe(t);return e!=n&&t!=i&&n==i}function He(e,t){e=Ve(e);t=Ve(t);return t==e?4:Be(t,e)?3:Fe(t,e)?2:Be(e,t)?1:0}function qe(e){var t=e.indexOf("-");e=0<=t?e.substring(0,t):e;e=e.toLowerCase();return e=Xe.get(e)||e}function ze(e){return e.language?Ve(e.language):e.audio&&e.audio.language?Ve(e.audio.language):e.video&&e.video.language?Ve(e.video.language):"und"}function Ke(e,t){e=Ve(e);var n=new Set,i=c(t);for(t=i.next();!t.done;t=i.next())n.add(Ve(t.value));i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,Be(t,e))return t;i=c(n);for(t=i.next();!t.done;t=i.next())if(t=t.value,Fe(t,e))return t;n=c(n);for(t=n.next();!t.done;t=n.next())if(t=t.value,Be(e,t))return t;return null}q("shaka.util.LanguageUtils",Ue);Ue.findClosestLocale=Ke;Ue.getLocaleForVariant=ze;Ue.getLocaleForText=function(e){return Ve(e.language||"und")};Ue.getBase=qe;Ue.relatedness=He;Ue.areSiblings=Ge;Ue.normalize=Ve;Ue.isSiblingOf=Fe;Ue.isParentOf=Be;Ue.areLanguageCompatible=je;Ue.areLocaleCompatible=function(e,t){e=Ve(e);t=Ve(t);return e==t};var Xe=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function We(e){ae.call(this);this.j=Ve(e);this.i=new Map;this.g=new Set;this.h=new Map}y(We,ae);i=We.prototype;i.release=function(){ae.prototype.release.call(this)};i.cg=function(e){var t=this;this.g.clear();e=c(e);for(var n=e.next();!n.done;n=e.next())this.g.add(Ve(n.value));Ye(this);e=le(this.g,(function(e){return!t.h.has(e)}));e.length&&this.dispatchEvent(new K("unknown-locales",(new Map).set("locales",e)));e=le(this.g,(function(e){return t.h.has(e)}));e=(new Map).set("locales",e.length?e:[this.j]);this.dispatchEvent(new K("locale-changed",e))};i.ka=function(e,t,n){e=Ve(e);void 0===n&&(n=Qe);var i=this.h.get(e)||new Map;t.forEach((function(e,t){i.has(t)&&n!=Qe||i.set(t,e)}));this.h.set(e,i);Ye(this);this.dispatchEvent(new K("locale-updated"));return this};i.si=function(e){for(var t=c(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))};i.resolve=function(e){var t=this.i.get(e);if(t)return t;e=(new Map).set("locales",Array.from(this.g)).set("missing",e);this.dispatchEvent(new K("unknown-localization",e));return""};function Ye(e){for(var t=e.h,n=e.j,i=e.g,r=new Set,a={},o=c(i),s=o.next();!s.done;a={uc:a.uc},s=o.next()){a.uc=s.value;r.add(a.uc);r.add(qe(a.uc));s=le(t.keys(),function(e){return function(t){return Ge(t,e.uc)}}(a));s.sort();var u=c(s);for(s=u.next();!s.done;s=u.next())r.add(s.value);s=le(t.keys(),function(e){return function(t){return qe(t)==e.uc}}(a));s.sort();u=c(s);for(s=u.next();!s.done;s=u.next())r.add(s.value)}r.add(n);n=[];r=c(r);for(s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&n.push(s);n.reverse();e.i.clear();t=c(n);for(s=t.next();!s.done;s=t.next())s.value.forEach((function(t,n){e.i.set(n,t)}));t=e.i.keys();r=new Set;n=c(e.g);for(s=n.next();!s.done;s=n.next())s=e.h.get(s.value)||new Map,Je(s,t,r);0<r.size&&(i=(new Map).set("locales",Array.from(i)).set("missing",Array.from(r)),e.dispatchEvent(new K("missing-localizations",i)))}function Je(e,t,n){t=c(t);for(var i=t.next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}q("shaka.ui.Localization",We);We.prototype.resolve=We.prototype.resolve;We.prototype.resolveDictionary=We.prototype.si;We.prototype.insert=We.prototype.ka;We.prototype.changeLocale=We.prototype.cg;We.prototype.release=We.prototype.release;var Qe=1;We.ConflictResolution={USE_OLD:0,USE_NEW:Qe};We.UNKNOWN_LOCALES="unknown-locales";We.UNKNOWN_LOCALIZATION="unknown-localization";We.MISSING_LOCALIZATIONS="missing-localizations";We.LOCALE_CHANGED="locale-changed";We.LOCALE_UPDATED="locale-updated";var $e={Xj:"UNMUTE",Zi:"EXIT_FULL_SCREEN",Mi:"AUTO_QUALITY",AD_PROGRESS:"AD_PROGRESS",$i:"EXIT_LOOP_MODE",zj:"PLAYBACK_RATE",Si:"CAST",ej:"FULL_SCREEN",Ej:"REWIND",Cj:"REPLAY",dj:"FAST_FORWARD",oj:"MUTE",nj:"MULTIPLE_LANGUAGES",rj:"NOT_APPLICABLE",Dj:"RESOLUTION",hj:"LANGUAGE",Hj:"SKIP_AD",mj:"MORE_SETTINGS",xj:"PICTURE_IN_PICTURE",Xi:"ENTER_PICTURE_IN_PICTURE",tj:"ON",Yj:"UNRECOGNIZED_LANGUAGE",aj:"EXIT_PICTURE_IN_PICTURE",yj:"PLAY",Ii:"AD_DURATION",Kj:"STATISTICS",BACK:"BACK",wj:"PAUSE",bk:"VOLUME",Sg:"LIVE",Ji:"AD_TIME",Gj:"SEEK",Ki:"AIRPLAY",sj:"OFF",Ri:"CAPTIONS",ij:"LOOP",Wj:"UNDETERMINED_LANGUAGE",Wi:"ENTER_LOOP_MODE",Bj:"QUALITY",Tg:"SUBTITLE_FORCED",Ij:"SKIP_TO_LIVE"};function Ze(e){this.g=Math.exp(Math.log(.5)/e);this.i=this.h=0}Ze.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h;isNaN(t)||(this.h=t,this.i+=e)};function et(e){return e.h/(1-Math.pow(e.g,e.i))}function tt(){this.h=new Ze(2);this.j=new Ze(5);this.g=0;this.i=128e3;this.l=16e3}tt.prototype.configure=function(e){this.i=e.minTotalBytes;this.l=e.minBytes;this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife);this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)};tt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3;this.g+=t;this.h.sample(e,n);this.j.sample(e,n)}};tt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(et(this.h),et(this.j))};function nt(e){if(it.has(e))return it.get(e);var t=MediaSource.isTypeSupported(e);it.set(e,t);return t}var it=new Map;function rt(){}rt.prototype.extract=function(){};rt.prototype.decode=function(){return[]};rt.prototype.clear=function(){};function at(){}at.prototype.init=function(){};at.prototype.parse=function(){return[]};function ot(){}function st(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ut(e)==ut(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=ct(e);t=ct(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function ut(e){return e instanceof ArrayBuffer?e:e.buffer}function lt(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ct(e,t,n){n=void 0===n?Infinity:n;return ht(e,void 0===t?0:t,n,Uint8Array)}function dt(e,t,n){n=void 0===n?Infinity:n;return ht(e,void 0===t?0:t,n,DataView)}function ht(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;t=Math.max(0,Math.min((e.byteOffset||0)+t,r));return new i(ut(e),t,Math.min(t+Math.max(n,0),r)-t)}q("shaka.util.BufferUtils",ot);ot.toDataView=dt;ot.toUint8=ct;ot.toArrayBuffer=lt;ot.equal=st;function ft(){}ft.prototype.init=function(){};ft.prototype.j=function(){};ft.prototype.i=function(){};q("shaka.media.IClosedCaptionParser",ft);function pt(e){this.h=new at;if(e=gt[e.toLowerCase()])this.h=e();this.g=new rt;if(e=mt)this.g=e()}pt.prototype.init=function(e){this.h.init(e)};pt.prototype.j=function(e){e=this.h.parse(e);e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=ct(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()};pt.prototype.i=function(){this.g.clear()};q("shaka.media.ClosedCaptionParser",pt);pt.findDecoder=function(){return mt};pt.unregisterDecoder=function(){mt=null};pt.registerDecoder=function(e){mt=e};pt.findParser=function(e){return gt[e]};pt.unregisterParser=function(e){delete gt[e]};pt.registerParser=function(e,t){gt[e]=t};var gt={},mt=null;function vt(e,t){return"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)?!0:e===t}function yt(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function bt(e,t,n){n||(n=vt);if(e.length!=t.length)return!1;t=t.slice();var i={};e=c(e);for(var r=e.next();!r.done;i={Ee:i.Ee},r=e.next()){i.Ee=r.value;r=t.findIndex(function(e){return function(t){return n(e.Ee,t)}}(i));if(-1==r)return!1;t[r]=t[t.length-1];t.pop()}return 0==t.length}function wt(e,t,n){n||(n=vt);if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Tt(e,t,n){this.startTime=e;this.endTime=t;this.payload=n;this.region=new jt;this.position=null;this.positionAlign=xt;this.size=0;this.textAlign=At;this.direction=_t;this.writingMode=Ct;this.lineInterpretation=Mt;this.line=null;this.lineHeight="";this.lineAlign=Dt;this.displayAlign=It;this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=Nt;this.fontStyle=Ot;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=[];this.textStrokeWidth=this.textStrokeColor=this.textShadow="";this.wrapLine=!0;this.id="";this.nestedCues=[];this.lineBreak=this.isContainer=!1;this.cellResolution={eh:32,rows:15}}Tt.prototype.clone=function(){var e=new Tt(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Et(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!wt(e.nestedCues,t.nestedCues,Et))return!1}else if("region"==n||"cellResolution"==n)for(var i in e[n]){if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!wt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}q("shaka.text.Cue",Tt);Tt.equal=Et;Tt.prototype.clone=Tt.prototype.clone;var xt="auto";Tt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:xt};var At="center",St={LEFT:"left",RIGHT:"right",CENTER:At,START:"start",END:"end"};Tt.textAlign=St;var It="after",kt={BEFORE:"before",CENTER:"center",AFTER:It};Tt.displayAlign=kt;var _t="ltr";Tt.direction={HORIZONTAL_LEFT_TO_RIGHT:_t,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ct="horizontal-tb";Tt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ct,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Mt=0;Tt.lineInterpretation={LINE_NUMBER:Mt,PERCENTAGE:1};var Dt="start",Rt={CENTER:"center",START:Dt,END:"end"};Tt.lineAlign=Rt;var Lt={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Tt.defaultTextColor=Lt;var Pt={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Tt.defaultTextBackgroundColor=Pt;var Nt=400;Tt.fontWeight={NORMAL:Nt,BOLD:700};var Ot="normal",Ut={NORMAL:Ot,ITALIC:"italic",OBLIQUE:"oblique"};Tt.fontStyle=Ut;Tt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function jt(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Bt;this.scroll=Ft}q("shaka.text.CueRegion",jt);var Bt=1;jt.units={PX:0,PERCENTAGE:Bt,LINES:2};var Ft="";jt.scrollMode={NONE:Ft,UP:"up"};function Vt(){}Vt.prototype.destroy=function(){};function Gt(e,t,n){qt[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,pe:t}}function Ht(e,t){for(var n=e.toLowerCase().split(";")[0],i=c([Wt,Xt,Kt,zt]),r=i.next();!r.done;r=i.next())if(r=qt[n+"-"+r.value]){var a=r.pe(),o=a.isSupported(e,t);a.destroy();if(o)return r.pe}return null}q("shaka.transmuxer.TransmuxerEngine",Vt);Vt.findTransmuxer=Ht;Vt.unregisterTransmuxer=function(e,t){delete qt[e.toLowerCase().split(";")[0]+"-"+t]};Vt.registerTransmuxer=Gt;Vt.prototype.destroy=Vt.prototype.destroy;var qt={},zt=1,Kt=2,Xt=3,Wt=4;Vt.PluginPriority={FALLBACK:zt,PREFERRED_SECONDARY:Kt,PREFERRED:Xt,APPLICATION:Wt};function Yt(){}function Jt(e,t){var n=e;t&&!nn.includes(e)&&(n+='; codecs="'+t+'"');return n}function Qt(e,t){t&&(e+='; codecs="'+t+'"');return e}function $t(e,t,n){var i=Jt(e,t);t=Qt(e,t);Ht(t)?(e=Ht(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?i.replace("video","audio"):i;return n}function Zt(e){var t=tn(e);e=t[0];t=t[1].toLowerCase();switch(!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function en(e){e=e.split(/ *; */);e.shift();return(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function tn(e){e=e.split(".");var t=e[0];e.shift();return[t,e.join(".")]}q("shaka.util.MimeUtils",Yt);Yt.getFullTypeWithAllCodecs=Qt;Yt.getFullType=Jt;(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var nn=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function rn(e){this.i=null;this.j=e;this.C=!1;this.l=this.B=0;this.m=Infinity;this.h=this.g=null;this.F="";this.s=new Map}function an(e){return dn[e]?!0:"application/cea-608"==e||"application/cea-708"==e?!!mt:!1}rn.prototype.destroy=function(){this.j=this.i=null;this.s.clear();return Promise.resolve()};function on(e,t,n,i){var r,a,o,s;return O((function(u){if(1==u.g)return E(u,Promise.resolve(),2);if(!e.i||!e.j)return u.return();if(null==n||null==i)return e.i.parseInit(ct(t)),u.return();r=e.C?n:e.B;a={periodStart:e.B,segmentStart:n,segmentEnd:i,vttOffset:r};o=e.i.parseMedia(ct(t),a);s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m}));e.j.append(s);null==e.g&&(e.g=Math.max(n,e.l));e.h=Math.min(i,e.m);x(u)}))}rn.prototype.remove=function(e,t){var n=this;return O((function(i){if(1==i.g)return E(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e));x(i)}))};function sn(e,t,n){e.l=t;e.m=n}function un(e,t,n){e.F=t;if(t=e.s.get(t))for(var i=c(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.j.append(r)}function ln(e,t,n){t.startTime+=n;t.endTime+=n;t=c(t.nestedCues);for(var i=t.next();!i.done;i=t.next())ln(e,i.value,n)}function cn(e,t,n,i,r){var a=n+" "+i,o=new Map;t=c(t);for(var s=t.next();!s.done;s=t.next()){var u=s.value;s=u.stream;u=u.cue;o.has(s)||o.set(s,new Map);o.get(s).has(a)||o.get(s).set(a,[]);ln(e,u,r);u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.F&&e.j.append([u]))}r=c(o.keys());for(a=r.next();!a.done;a=r.next())for(a=a.value,e.s.has(a)||e.s.set(a,new Map),t=c(o.get(a).keys()),s=t.next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.s.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l));e.h=Math.max(e.h,Math.min(i,e.m))}q("shaka.text.TextEngine",rn);rn.prototype.destroy=rn.prototype.destroy;rn.findParser=function(e){return dn[e]};rn.unregisterParser=function(e){delete dn[e]};rn.registerParser=function(e,t){dn[e]=t};var dn={};function hn(e){this.h=e;this.g=null}hn.prototype.R=function(t){var n=this;this.stop();var i=!0,r=null;this.g=function(){e.clearTimeout(r);i=!1};r=e.setTimeout((function(){i&&n.h()}),1e3*t);return this};hn.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function fn(e){this.h=e;this.g=null}fn.prototype.Ca=function(){this.stop();this.h();return this};fn.prototype.R=function(e){var t=this;this.stop();this.g=new hn((function(){t.h()})).R(e);return this};fn.prototype.ha=function(e){var t=this;this.stop();this.g=new hn((function(){t.g.R(e);t.h()})).R(e);return this};fn.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)};q("shaka.util.Timer",fn);fn.prototype.stop=fn.prototype.stop;fn.prototype.tickEvery=fn.prototype.ha;fn.prototype.tickAfter=fn.prototype.R;fn.prototype.tickNow=fn.prototype.Ca;function pn(){return e.MediaSource&&MediaSource.isTypeSupported?!0:!1}function gn(e){return""!=An().canPlayType(e)}function mn(){return navigator.userAgent.match(/Edge?\//)?!0:!1}function vn(){return xn("Xbox One")}function yn(){return xn("Tizen")}function bn(){return xn("Web0S")&&xn("Chrome/38.0.2125.122 Safari/537.36")}function wn(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!yn()&&!xn("PC=EOS")&&!xn("VirginMedia")&&!xn("SOPOpenBrowser")&&!Tn()&&!xn("AFT")}function Tn(){return xn("PlayStation 4")}function En(){if(!wn())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function xn(e){return(navigator.userAgent||"").includes(e)}function An(){if(In)return In;Sn||(Sn=new fn((function(){In=null})));(In=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(In=document.createElement("video"));Sn.R(1);return In}var Sn=null,In=null;function kn(){}function _n(e,t,n,i,r){var a=e.variants;if(t.length||n.length)a=Dn(a,t,n);a=oi(a,i);t=Cn(a);t=Mn(t);var o=Rn(t,r);e.variants=e.variants.filter((function(e){return Nn(e)==o?!0:!1}))}function Cn(e){var t=new re;e=c(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=Nn(n);t.push(i,n)}return t}function Mn(e){var t=0,n=new Map,i=e.size();e.forEach((function(e,r){r=c(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var o=a.video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1);n.has(o)||n.set(o,new re);var s=n.get(o);s.push(e,a);s.size()===i&&(t=Math.max(t,o))}}}));return t?n.get(t):e}function Dn(e,t,n){var i={};t=c(t);for(var r=t.next();!r.done;i={Ke:i.Ke},r=t.next())if(i.Ke=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Ke)}}(i)),r.length){e=r;break}i={};n=c(n);for(t=n.next();!t.done;i={Ce:i.Ce},t=n.next())if(i.Ce=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Ce)}}(i)),t.length){e=t;break}return e}function Rn(e,t){t=c(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n==fi||n==pi){if(e=Ln(e,n),1==e.size())return e.keys()[0]}else if(n==gi)break;return Pn(e)}function Ln(e,t){var n=0,i=new re;e.forEach((function(e,r){for(var a=0,o=0,s=c(r),u=s.next();!u.done;u=s.next())u=u.value,u.decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);a/=o;a>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)}));return i}function Pn(e){var t="",n=Infinity;e.forEach((function(e,i){var r=0,a=0;i=c(i);for(var o=i.next();!o.done;o=i.next())r+=o.value.bandwidth||0,++a;r/=a;r<n&&(t=e,n=r)}));return t}function Nn(e){var t="";e.video&&(t=Zt(e.video.codecs));var n="";e.audio&&(n=Zt(e.audio.codecs));return t+"-"+n}function On(e,t,n){e.variants=e.variants.filter((function(e){return Un(e,t,n)}))}function Un(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth)?!1:!0}function jn(e,t){return O((function(n){if(1==n.g)return E(n,Bn(t,0<t.offlineSessionIds.length),2);Kn(e,t);Xn(t);return E(n,Wn(t),0)}))}function Bn(e,t){return O((function(n){if(1==n.g)return E(n,Gn(e.variants,t,!1,[]),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=zn(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");n=Re("video",i);n=zn(n);i=Re("audio",i);i=qn(i);var r=$t(t.mimeType,i,"audio");if(!nt(r))return!1;n=[n,i].join()}i=$t(t.mimeType,n,"video");if(!nt(i))return!1;t.codecs=n}if(n=e.audio){i=qn(n.codecs);r=$t(n.mimeType,i,"audio");if(!nt(r))return!1;n.codecs=i}if(vn()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3.")))return ee(li(e)),!1;(t=e.decodingInfos.some((function(e){return e.supported})))||ee(li(e));return t}));x(n)}))}function Fn(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=c(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=JSON.stringify(r);r=e[r];r instanceof Object?(r=Fn(r),n.push(i+":"+r)):(r=JSON.stringify(r),n.push(i+":"+r))}return"{"+n.join(",")+"}"}function Vn(e,t){var n,i,r;return O((function(a){switch(a.g){case 1:n=Fn(t);A(a,2);i=di;if(i[n]){e.decodingInfos.push(i[n]);a.D(4);break}return E(a,navigator.mediaCapabilities.decodingInfo(t),5);case 5:r=a.h,i[n]=r,e.decodingInfos.push(r);case 4:I(a,0);break;case 2:k(a),JSON.stringify(t),x(a)}}))}function Gn(e,t,n,i){var r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T;return O((function(x){switch(x.g){case 1:if(r=e.some((function(e){return e.decodingInfos.length})))return x.return();a={};o=c(i);s=o.next();case 2:if(s.done){x.D(4);break}a.Ge=s.value;u=!1;l=c(e);d=l.next();case 5:if(d.done){x.D(7);break}h=d.value;f=Hn(h,t,n).filter(function(e){return function(t){return(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.Ge}}(a));p=c(f);g=p.next();case 8:if(g.done){x.D(10);break}m=g.value;return E(x,Vn(h,m),9);case 9:g=p.next();x.D(8);break;case 10:h.decodingInfos.length&&(u=!0);d=l.next();x.D(5);break;case 7:if(u)return x.return();a={Ge:a.Ge};s=o.next();x.D(2);break;case 4:v=c(e),d=v.next();case 12:if(d.done){x.D(0);break}y=d.value;b=Hn(y,t,n).filter((function(e){e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem;return!e||!i.includes(e)}));w=c(b);g=w.next();case 15:if(g.done){d=v.next();x.D(12);break}T=g.value;return E(x,Vn(y,T),16);case 16:g=w.next(),x.D(15)}}))}function Hn(e,t,n){var i=e.audio,r=e.video;n={type:n?"file":"media-source"};if(r){var a=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");a=Re("video",o);a=zn(a);o=Re("audio",o);o=qn(o);o=$t(r.mimeType,o,"audio");n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}a=zn(a);a=$t(r.mimeType,a,"video");n.video={contentType:a,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1};if(r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}i&&(a=qn(i.codecs),a=$t(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]);if(!o.length)return[n];e=[];a=new Map;o=c(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]);a.get(u.keySystem).push(u)}o=t?"required":"optional";t=t?["persistent-license"]:["temporary"];u=c(a.keys());for(var l=u.next();!l.done;l=u.next()){var d=l.value;l=Object.assign({},n);var h=a.get(d);d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t};h=c(h);for(s=h.next();!s.done;s=h.next()){s=s.value;if(s.initData&&s.initData.length){for(var f=new Set,p=c(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required");s.persistentStateRequired&&(d.persistentState="required");s.sessionType&&(d.sessionTypes=[s.sessionType]);i&&(""!=s.audioRobustness?d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}:d.audio||(d.audio={}));r&&(""!=s.videoRobustness?d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness}:d.video||(d.video={}))}l.keySystemConfiguration=d;e.push(l)}return e}function qn(e){return"fLaC"===e?"flac":"Opus"===e?"opus":yn()?"ac-3"==e.toLowerCase()?"ec-3":e:e}function zn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Kn(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;t=t.video;return n&&e&&e.audio&&!Jn(n,e.audio)||t&&e&&e.video&&!Jn(t,e.video)?!1:!0}))}function Xn(e){e.textStreams=e.textStreams.filter((function(e){e=Jt(e.mimeType,e.codecs);return an(e)}))}function Wn(e){var t,n,i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:t=[],n=c(e.imageStreams),i=n.next();case 2:if(i.done){l.D(4);break}r=i.value;a=r.mimeType;if(mi.has(a)){l.D(5);break}o=vi.get(a);if(!o){mi.set(a,!1);l.D(5);break}return E(l,Yn(o),7);case 7:s=l.h,mi.set(a,s);case 5:(u=mi.get(a))&&t.push(r);i=n.next();l.D(2);break;case 4:e.imageStreams=t,x(l)}}))}function Yn(e){return new Promise((function(t){var n=new Image;n.src=e;"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}function Jn(e,t){return e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0]?!1:!0}function Qn(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o);a&&s.push(a);var u=[];n&&u.push(n.mimeType);t&&u.push(t.mimeType);u=u[0]||null;var l=[];t&&l.push(t.kind);n&&l.push(n.kind);l=l[0]||null;var d=new Set;if(t)for(var h=c(t.roles),f=h.next();!f.done;f=h.next())d.add(f.value);if(n)for(h=c(n.roles),f=h.next();!f.done;f=h.next())d.add(f.value);e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null};n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null);t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage);return e}function $n(e){return{id:e.id,active:!1,type:Pe,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Zn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;i&&(r=i.tilesLayout||r);r&&null!=t&&(t/=Number(r.split("x")[0]));r&&null!=n&&(n/=Number(r.split("x")[1]));return{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function ei(e){e.__shaka_id||(e.__shaka_id=hi++);return e.__shaka_id}function ti(e){var t=ii(e);t.active="disabled"!=e.mode;t.type="text";t.originalTextId=e.id;"captions"==e.kind&&(t.mimeType="application/cea-608");"subtitles"==e.kind&&(t.mimeType="text/vtt");e.kind&&(t.roles=[e.kind]);"forced"==e.kind&&(t.forced=!0);return t}function ni(e){var t=ii(e);t.active=e.enabled;t.type="variant";t.originalAudioId=e.id;"main"==e.kind&&(t.primary=!0);e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label);return t}function ii(e){var t=e.language;return{id:ei(e),active:!1,type:"",bandwidth:0,language:Ve(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function ri(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function ai(e){return e.filter((function(e){return ri(e)}))}function oi(e,t){var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map;n=c(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.audio.channelsCount;i.has(a)||i.set(a,[]);i.get(a).push(r)}n=Array.from(i.keys());if(0==n.length)return e;e=n.filter((function(e){return e<=t}));return e.length?i.get(Math.max.apply(Math,d(e))):i.get(Math.min.apply(Math,d(n)))}function si(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var o=r.length?r[0].language:"";r=r.filter((function(e){return e.language==o}));if(t){var s=Ke(Ve(t),e.map((function(e){return e.language})));s&&(r=e.filter((function(e){return Ve(e.language)==s})))}r=r.filter((function(e){return e.forced==i}));if(n){if(e=ui(r,n),e.length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;e=r.map((function(e){return e.roles})).reduce(ke,[]);return e.length?ui(r,e[0]):r}function ui(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function li(e){var t=[];e.audio&&t.push(ci(e.audio));e.video&&t.push(ci(e.video));return t.join(", ")}function ci(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}q("shaka.util.StreamUtils",kn);kn.meetsRestrictions=Un;var di={},hi=0,fi="smooth",pi="powerEfficient",gi="bandwidth",mi=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),vi=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function yi(){var e=this;this.m=null;this.l=!1;this.i=new tt;this.C=null;navigator.connection&&navigator.connection.addEventListener&&(this.C=function(){if(e.l&&e.g.useNetworkInformation){e.i=new tt;e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.C));this.s=[];this.F=1;this.H=!1;this.h=this.j=this.g=this.B=null;this.G=new fn((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}))}i=yi.prototype;i.stop=function(){this.m=null;this.l=!1;this.s=[];this.F=1;this.j=this.B=null;this.h&&(this.h.disconnect(),this.h=null);this.G.stop()};i.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.C),this.C=null);this.G=null};i.init=function(e){this.m=e};i.chooseVariant=function(){var t=Infinity,n=Infinity;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width);this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientHeight*n,n*=this.j.clientWidth);t=wi(this.g.restrictions,this.s,t,n);n=this.i.getBandwidthEstimate(bi(this));this.s.length&&!t.length&&(t=wi(null,this.s,Infinity,Infinity),t=[t[0]]);for(var i=t[0]||null,r=0;r<t.length;r++){for(var a=t[r],o=isNaN(this.F)?1:Math.abs(this.F),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:Infinity},l=r+1;l<t.length;l++)if(a.bandwidth!=t[l].bandwidth){u=t[l];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget;n>=s&&n<=o&&i.bandwidth!=a.bandwidth&&(i=a)}this.B=Date.now();return i};i.enable=function(){this.l=!0};i.disable=function(){this.l=!1};i.segmentDownloaded=function(e,t){this.i.sample(e,t);if(null!=this.B&&this.l)e:{if(!this.H){e=this.i;if(!(e.g>=e.i))break e;this.H=!0}else if(Date.now()-this.B<1e3*this.g.switchInterval)break e;e=this.chooseVariant();this.i.getBandwidthEstimate(bi(this));e&&this.m(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch)}};i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(bi(this))};i.setVariants=function(e){this.s=e};i.playbackRateChanged=function(e){this.F=e};i.setMediaElement=function(t){var n=this;this.j=t;this.h&&(this.h.disconnect(),this.h=null);this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.G.R(Ti)})),this.h.observe(this.j))};i.configure=function(e){this.g=e;this.i&&this.g&&this.i.configure(this.g.advanced)};function bi(e){var t=e.g.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink);return t}function wi(e,t,n,i){e&&(t=t.filter((function(t){return Un(t,e,{width:i,height:n})})));return t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}q("shaka.abr.SimpleAbrManager",yi);yi.prototype.configure=yi.prototype.configure;yi.prototype.setMediaElement=yi.prototype.setMediaElement;yi.prototype.playbackRateChanged=yi.prototype.playbackRateChanged;yi.prototype.setVariants=yi.prototype.setVariants;yi.prototype.getBandwidthEstimate=yi.prototype.getBandwidthEstimate;yi.prototype.segmentDownloaded=yi.prototype.segmentDownloaded;yi.prototype.disable=yi.prototype.disable;yi.prototype.enable=yi.prototype.enable;yi.prototype.chooseVariant=yi.prototype.chooseVariant;yi.prototype.init=yi.prototype.init;yi.prototype.release=yi.prototype.release;yi.prototype.stop=yi.prototype.stop;var Ti=1;function Ei(e,t){this.g=e;this.h=t}Ei.prototype.toString=function(){return"v"+this.g+"."+this.h};function xi(e,t){var n=new Ei(5,0),i=Ii,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function Ai(e,t,n,i){Q([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Si(e,t,n,i){J([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}var Ii=null;q("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function ki(e,t){this.h=e;this.g=new Set([e]);t=t||[];e=c(t);for(t=e.next();!t.done;t=e.next())this.add(t.value)}ki.prototype.add=function(e){return _i(this.h,e)?(this.g.add(e),!0):!1};function _i(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&Ci(n,i)&&Mi(n.roles,i.roles))}!n&&(n=e.video&&t.video)&&(e=e.video,t=t.video,n=!(Ci(e,t)&&Mi(e.roles,t.roles)));return n?!1:!0}ki.prototype.values=function(){return this.g.values()};function Ci(e,t){if(e.mimeType!=t.mimeType)return!1;e=e.codecs.split(",").map((function(e){return tn(e)[0]}));t=t.codecs.split(",").map((function(e){return tn(e)[0]}));if(e.length!=t.length)return!1;e.sort();t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Mi(e,t){e=new Set(e);t=new Set(t);e.delete("main");t.delete("main");if(e.size!=t.size)return!1;e=c(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Di(e){this.g=e;this.h=new Ri(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","")}Di.prototype.create=function(e){var t=this,n=e.filter((function(e){return _i(t.g,e)}));return n.length?new ki(n[0],n):this.h.create(e)};function Ri(e,t,n,i,r){this.j=e;this.l=t;this.g=n;this.h=i;this.i=void 0===r?"":r}Ri.prototype.create=function(e){var t=[];t=Li(e,this.j);var n=e.filter((function(e){return e.primary}));t=t.length?t:n.length?n:e;e=Pi(t,this.l);e.length&&(t=e);this.h&&(e=Oi(t,this.h),e.length&&(t=e));this.g&&(e=oi(t,this.g),e.length&&(t=e));this.i&&(e=Ni(t,this.i),e.length&&(t=e));e=new ki(t[0]);t=c(t);for(n=t.next();!n.done;n=t.next())n=n.value,_i(e.h,n)&&e.add(n);return e};function Li(e,t){t=Ve(t);var n=Ke(t,e.map((function(e){return ze(e)})));return n?e.filter((function(e){return n==ze(e)})):[]}function Pi(e,t){return e.filter((function(e){return e.audio?t?e.audio.roles.includes(t):0==e.audio.roles.length:!1}))}function Ni(e,t){return e.filter((function(e){return e.audio&&e.audio.label?e.audio.label.toLowerCase()==t.toLowerCase():!1}))}function Oi(t,n){"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");return t.filter((function(e){return e.video&&e.video.hdr&&e.video.hdr!=n?!1:!0}))}function Ui(){this.g=Fi;this.h=(new Map).set(Fi,2).set(Bi,1)}function ji(e,t,n){e.h.set(Fi,n).set(Bi,t)}var Bi=0,Fi=1;function Vi(e,t){var n=Hi();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts;this.j=null==e.baseDelay?n.baseDelay:e.baseDelay;this.s=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor;this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor;this.g=0;this.h=this.j;if(this.i=void 0===t?!1:t)this.g=1}function Gi(e){var t,n;return O((function(i){if(1==i.g){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new Se(2,7,1010);t=e.g;e.g++;if(0==t)return i.return();n=e.h*(1+(2*Math.random()-1)*e.s);return E(i,new Promise((function(e){new fn(e).R(n/1e3)})),2)}e.h*=e.m;x(i)}))}function Hi(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function qi(){var e,t,n=new Promise((function(n,i){e=n;t=i}));n.resolve=e;n.reject=t;return n}qi.prototype.resolve=function(){};qi.prototype.reject=function(){};function zi(e,t){this.promise=e;this.i=t;this.g=!1}function Ki(e){return new zi(Promise.reject(e),(function(){return Promise.resolve()}))}function Xi(){var e=Promise.reject(new Se(2,7,7001));e.catch((function(){}));return new zi(e,(function(){return Promise.resolve()}))}function Wi(e){return new zi(Promise.resolve(e),(function(){return Promise.resolve()}))}function Yi(e){return new zi(e,(function(){return e.catch((function(){}))}))}zi.prototype.abort=function(){this.g=!0;return this.i()};function Ji(e){return new zi(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}zi.prototype.finally=function(e){this.promise.then((function(){return e(!0)}),(function(){return e(!1)}));return this};zi.prototype.qa=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var u=n?e:t;u?i=Qi(u,s,a):(n?a.resolve:a.reject)(s)}}}function i(){a.reject(o);return r.abort()}var r=this,a=new qi,o=new Se(2,7,7001);this.promise.then(n(!0),n(!1));return new zi(a,(function(){return i()}))};function Qi(e,t,n){try{var i=e(t);if(i&&i.promise&&i.abort)return n.resolve(i.promise),function(){return i.abort()};n.resolve(i);return function(){return Promise.resolve(i).then((function(){}),(function(){}))}}catch(e){return n.reject(e),function(){return Promise.resolve()}}}q("shaka.util.AbortableOperation",zi);zi.prototype.chain=zi.prototype.qa;zi.prototype["finally"]=zi.prototype.finally;zi.all=Ji;zi.prototype.abort=zi.prototype.abort;zi.notAbortable=Yi;zi.completed=Wi;zi.aborted=Xi;zi.failed=Ki;function $i(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var i=e.constructor==Array;if(e.constructor!=Object&&!i)return null;n.add(e);var r=i?[]:{},a;for(a in e)r[a]=t(e[a]);i&&(r.length=e.length);return r}}var n=new Set;return t(e)}function Zi(e){var t={},n;for(n in e)t[n]=e[n];return t}function er(){this.g=[]}function tr(e,t){e.g.push(t.finally((function(){yt(e.g,t)})))}er.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch((function(){})),e.push(n.abort());this.g=[];return Promise.all(e)};function nr(e,t,n,i){ae.call(this);this.i=!1;this.m=new er;this.g=new Set;this.h=new Set;this.l=e||null;this.j=t||null;this.B=n||null;this.C=i||null;this.s=!1}y(nr,ae);i=nr.prototype;i.Bf=function(e){this.s=e};function ir(e,t,n,i){n=n||dr;var r=hr[e];if(!r||n>=r.priority)hr[e]={priority:n,pe:t,ji:void 0===i?!1:i}}i.ki=function(e){this.g.add(e)};i.Ei=function(e){this.g.delete(e)};i.ah=function(){this.g.clear()};i.li=function(e){this.h.add(e)};i.Fi=function(e){this.h.delete(e)};i.bh=function(){this.h.clear()};function rr(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}i.destroy=function(){this.i=!0;this.g.clear();this.h.clear();ae.prototype.release.call(this);return this.m.destroy()};i.request=function(e,t,n){var i=this,r=new ur;if(this.i){var a=Promise.reject(new Se(2,7,7001));a.catch((function(){}));return new lr(a,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET";t.headers=t.headers||{};t.retryParameters=t.retryParameters?$i(t.retryParameters):Hi();t.uris=$i(t.uris);a=ar(this,e,t,n);var o=a.qa((function(){return or(i,e,t,new Vi(t.retryParameters,!1),0,null,r)})),s=o.qa((function(t){return sr(i,e,t,n)})),u=Date.now(),l=0;a.promise.then((function(){l=Date.now()-u}),(function(){}));var c=0;o.promise.then((function(){c=Date.now()}),(function(){}));var d=s.qa((function(n){var r=Date.now()-c,a=n.response;a.timeMs+=l;a.timeMs+=r;n.Sh||!i.l||a.fromCache||"HEAD"==t.method||e!=cr||i.l(a.timeMs,a.data.byteLength);return a}),(function(e){e&&(e.severity=2);throw e}));a=new lr(d.promise,(function(){return d.abort()}),r);tr(this.m,a);return a};function ar(e,t,n,i){function r(e){a=a.qa((function(){n.body&&(n.body=lt(n.body));return e(t,n,i)}))}var a=Wi(void 0);e.C&&r(e.C);e=c(e.g);for(var o=e.next();!o.done;o=e.next())r(o.value);return a.qa(void 0,(function(e){if(e instanceof Se&&7001==e.code)throw e;throw new Se(2,1,1006,e)}))}function or(e,t,n,i,r,a,o){e.s&&(n.uris[r]=n.uris[r].replace("http://","https://"));var s=new de(n.uris[r]),u=s.eb,l=!1;u||(u=location.protocol,u=u.slice(0,-1),he(s,u),n.uris[r]=s.toString());u=u.toLowerCase();var c=(u=hr[u])?u.pe:null;if(!c)return Ki(new Se(2,1,1e3,s));var d=u.ji,h=null,f=null,p=!1,g=!1,m;return Yi(Gi(i)).qa((function(){if(e.i)return Xi();m=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){h&&h.stop();f&&f.R(s/1e3);e.l&&t==cr&&(e.l(n,i),l=!0,o.g=r)}),(function(i){e.j&&e.j(i,n,t);g=!0}));if(!d)return i;var a=n.retryParameters.connectionTimeout;a&&(h=new fn((function(){p=!0;i.abort()})),h.R(a/1e3));var s=n.retryParameters.stallTimeout;s&&(f=new fn((function(){p=!0;i.abort()})));return i})).qa((function(i){h&&h.stop();f&&f.stop();void 0==i.timeMs&&(i.timeMs=Date.now()-m);var r={response:i,Sh:l};!g&&e.j&&e.j(i.headers,n,t);return r}),(function(s){h&&h.stop();f&&f.stop();if(e.B){var u=null,l=0;s instanceof Se&&(u=s,1001==s.code&&(l=s.data[1]));e.B(n,u,l,p)}if(e.i)return Xi();p&&(s=new Se(1,1,1003,n.uris[r],t));if(s instanceof Se){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return u=(new Map).set("error",s),u=new K("retry",u),e.dispatchEvent(u),r=(r+1)%n.uris.length,or(e,t,n,i,r,s,o)}throw s}))}function sr(e,t,n,i){var r=Wi(void 0),a={};e=c(e.h);for(var o=e.next();!o.done;a={Ie:a.Ie},o=e.next())a.Ie=o.value,r=r.qa(function(e){return function(){var r=n.response;r.data&&(r.data=lt(r.data));return e.Ie(t,r,i)}}(a));return r.qa((function(){return n}),(function(e){var t=2;if(e instanceof Se){if(7001==e.code)throw e;t=e.severity}throw new Se(t,1,1007,e)}))}q("shaka.net.NetworkingEngine",nr);nr.prototype.request=nr.prototype.request;nr.prototype.destroy=nr.prototype.destroy;nr.makeRequest=rr;nr.defaultRetryParameters=function(){return Hi()};nr.prototype.clearAllResponseFilters=nr.prototype.bh;nr.prototype.unregisterResponseFilter=nr.prototype.Fi;nr.prototype.registerResponseFilter=nr.prototype.li;nr.prototype.clearAllRequestFilters=nr.prototype.ah;nr.prototype.unregisterRequestFilter=nr.prototype.Ei;nr.prototype.registerRequestFilter=nr.prototype.ki;nr.unregisterScheme=function(e){delete hr[e]};nr.registerScheme=ir;nr.prototype.setForceHTTPS=nr.prototype.Bf;function ur(){this.g=0}nr.NumBytesRemainingClass=ur;function lr(e,t,n){zi.call(this,e,t);this.h=n}y(lr,zi);nr.PendingRequest=lr;var cr=1;nr.RequestType={MANIFEST:0,SEGMENT:cr,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};nr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var dr=3;nr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:dr};var hr={};function fr(e){this.g=!1;this.h=new qi;this.i=e}fr.prototype.destroy=function(){var e=this;if(this.g)return this.h;this.g=!0;return this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()}))};function pr(e,t){if(e.g){if(t instanceof Se&&7003==t.code)throw t;throw new Se(2,7,7003,t)}}function gr(){this.g=new re}i=gr.prototype;i.release=function(){this.Ub();this.g=null};i.o=function(e,t,n,i){this.g&&(e=new mr(e,t,n,i),this.g.push(t,e))};i.wa=function(e,t,n,i){function r(i){a.Lc(e,t,r);n(i)}var a=this;this.o(e,t,r,i)};i.Lc=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=c(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Lc(),this.g.remove(t,r))}};i.Ub=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,d(e.g[n]));e=c(t);for(t=e.next();!t.done;t=e.next())t.value.Lc();this.g.g={}}};q("shaka.util.EventManager",gr);gr.prototype.removeAll=gr.prototype.Ub;gr.prototype.unlisten=gr.prototype.Lc;gr.prototype.listenOnce=gr.prototype.wa;gr.prototype.listen=gr.prototype.o;gr.prototype.release=gr.prototype.release;function mr(e,t,n,i){this.target=e;this.type=t;this.listener=n;this.g=vr(e,i);this.target.addEventListener(t,n,this.g)}mr.prototype.Lc=function(){this.target.removeEventListener(this.type,this.listener,this.g);this.listener=this.target=null;this.g=!1};function vr(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);Object.keys(t).filter((function(e){return!n.has(e)}));return yr(e)?t:t.capture||!1}function yr(e){var t=br;if(void 0==t){t=!1;try{var n={},i={get:function(){t=!0;return!1}};Object.defineProperty(n,"passive",i);Object.defineProperty(n,"capture",i);i=function(){};e.addEventListener("test",i,n);e.removeEventListener("test",i,n)}catch(e){t=!1}br=t}return t||!1}var br=void 0;function wr(e){this.h=e;this.g=void 0}wr.prototype.value=function(){void 0==this.g&&(this.g=this.h());return this.g};function Tr(e){for(var t=new Map,n=c(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Er(e){var t={};e.forEach((function(e,n){t[n]=e}));return t}function xr(e,t){if(e||t){if(e&&!t||t&&!e)return!1}else return!0;if(e.size!=t.size)return!1;e=c(e);for(var n=e.next();!n.done;n=e.next()){var i=c(n.value);n=i.next().value;i=i.next().value;if(!t.has(n))return!1;n=t.get(n);if(n!=i||void 0==n)return!1}return!0}function Ar(){}function Sr(t){if(!t)return"";t=ct(t);239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3));if(e.TextDecoder&&!Tn())return t=(new TextDecoder).decode(t),t.includes("")&&J('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;0==(t[i]&128)?r=t[i]:t.length>=i+2&&192==(t[i]&224)&&128==(t[i+1]&192)?(r=(t[i]&31)<<6|t[i+1]&63,i+=1):t.length>=i+3&&224==(t[i]&240)&&128==(t[i+1]&192)&&128==(t[i+2]&192)?(r=(t[i]&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=2):t.length>=i+4&&240==(t[i]&241)&&128==(t[i+1]&192)&&128==(t[i+2]&192)&&128==(t[i+3]&192)&&(r=(t[i]&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=3);if(65535>=r)n+=String.fromCharCode(r);else{r-=65536;var a=r&1023;n+=String.fromCharCode(55296+(r>>10));n+=String.fromCharCode(56320+a)}}return n}function Ir(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Se(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=dt(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Mr.value()(i)}function kr(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=ct(e);if(239==n[0]&&187==n[1]&&191==n[2])return Sr(n);if(254==n[0]&&255==n[1])return Ir(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ir(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ir(e,!1);if(0==n[1]&&0==n[3])return Ir(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Sr(e);throw new Se(2,2,2003)}function _r(t){if(e.TextEncoder&&!Tn()){var n=new TextEncoder;return lt(n.encode(t))}t=encodeURIComponent(t);t=unescape(t);n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return lt(n)}function Cr(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}q("shaka.util.StringUtils",Ar);Ar.resetFromCharCode=function(){Mr.g=void 0};Ar.toUTF16=Cr;Ar.toUTF8=_r;Ar.fromBytesAutoDetect=kr;Ar.fromUTF16=Ir;Ar.fromUTF8=Sr;var Mr=new wr((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Mb:65536};0<t.Mb;t={Mb:t.Mb},t.Mb/=2)if(e(t.Mb))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Mb)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Mb));return n}}(t);return null}));function Dr(e,t){this.h=dt(e);this.i=t==Lr;this.g=0}i=Dr.prototype;i.va=function(){return this.g<this.h.byteLength};i.ra=function(){return this.g};i.getLength=function(){return this.h.byteLength};i.Ia=function(){try{var e=this.h.getUint8(this.g);this.g+=1;return e}catch(e){throw Rr()}};i.Za=function(){try{var e=this.h.getUint16(this.g,this.i);this.g+=2;return e}catch(e){throw Rr()}};i.N=function(){try{var e=this.h.getUint32(this.g,this.i);this.g+=4;return e}catch(e){throw Rr()}};i.Bg=function(){try{var e=this.h.getInt32(this.g,this.i);this.g+=4;return e}catch(e){throw Rr()}};i.Ic=function(){try{if(this.i){var e=this.h.getUint32(this.g,!0);var t=this.h.getUint32(this.g+4,!0)}else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw Rr()}if(2097151<t)throw new Se(2,3,3001);this.g+=8;return t*Math.pow(2,32)+e};i.Ib=function(e){if(this.g+e>this.h.byteLength)throw Rr();var t=ct(this.h,this.g,e);this.g+=e;return t};i.skip=function(e){if(this.g+e>this.h.byteLength)throw Rr();this.g+=e};i.ti=function(e){if(this.g<e)throw Rr();this.g-=e};i.seek=function(e){if(0>e||e>this.h.byteLength)throw Rr();this.g=e};i.vd=function(){for(var e=this.g;this.va()&&0!=this.h.getUint8(this.g);)this.g+=1;e=ct(this.h,e,this.g-e);this.g+=1;return Sr(e)};function Rr(){return new Se(2,3,3e3)}q("shaka.util.DataViewReader",Dr);Dr.prototype.readTerminatedString=Dr.prototype.vd;Dr.prototype.seek=Dr.prototype.seek;Dr.prototype.rewind=Dr.prototype.ti;Dr.prototype.skip=Dr.prototype.skip;Dr.prototype.readBytes=Dr.prototype.Ib;Dr.prototype.readUint64=Dr.prototype.Ic;Dr.prototype.readInt32=Dr.prototype.Bg;Dr.prototype.readUint32=Dr.prototype.N;Dr.prototype.readUint16=Dr.prototype.Za;Dr.prototype.readUint8=Dr.prototype.Ia;Dr.prototype.getLength=Dr.prototype.getLength;Dr.prototype.getPosition=Dr.prototype.ra;Dr.prototype.hasMoreData=Dr.prototype.va;var Lr=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Lr};function Pr(){this.i=[];this.h=[];this.g=!1}i=Pr.prototype;i.box=function(e,t){e=Br(e);this.i[e]=Gr;this.h[e]=t;return this};i.T=function(e,t){e=Br(e);this.i[e]=Hr;this.h[e]=t;return this};i.stop=function(){this.g=!0};i.parse=function(e,t,n){e=new Dr(e,0);for(this.g=!1;e.va()&&!this.g;)this.td(0,e,t,n)};i.td=function(e,t,n,i){var r=t.ra();if(i&&r+8>t.getLength())this.g=!0;else{var a=t.N(),o=t.N(),s=Fr(o),u=!1;switch(a){case 0:a=t.getLength()-r;break;case 1:if(i&&t.ra()+8>t.getLength()){this.g=!0;return}a=t.Ic();u=!0}var l=this.h[o];if(l){var c=null,d=null;if(this.i[o]==Hr){if(i&&t.ra()+4>t.getLength()){this.g=!0;return}d=t.N();c=d>>>24;d&=16777215}o=r+a;n&&o>t.getLength()&&(o=t.getLength());i&&o>t.getLength()?this.g=!0:(i=o-t.ra(),t=0<i?t.Ib(i):new Uint8Array(0),t=new Dr(t,0),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t,size:a,start:r+e,has64BitSize:u}))}else t.skip(Math.min(r+a-t.ra(),t.getLength()-t.ra()))}};function Nr(e){for(var t=Vr(e);e.reader.va()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay)}function Or(e){for(var t=Vr(e),n=e.reader.N(),i=0;i<n&&(e.parser.td(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Ur(e){var t=Vr(e);for(e.reader.skip(78);e.reader.va()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay)}function jr(e){return function(t){e(t.reader.Ib(t.reader.getLength()-t.reader.ra()))}}function Br(e){var t=0;e=c(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Fr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Vr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}q("shaka.util.Mp4Parser",Pr);Pr.headerSize=Vr;Pr.typeToString=Fr;Pr.allData=jr;Pr.visualSampleEntry=Ur;Pr.sampleDescription=Or;Pr.children=Nr;Pr.prototype.parseNext=Pr.prototype.td;Pr.prototype.parse=Pr.prototype.parse;Pr.prototype.stop=Pr.prototype.stop;Pr.prototype.fullBox=Pr.prototype.T;Pr.prototype.box=Pr.prototype.box;var Gr=0,Hr=1;function qr(){}function zr(e){e=ct(e);e=Mr.value()(e);return btoa(e)}function Kr(e,t){t=void 0==t?!0:t;e=zr(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")}function Xr(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Wr(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Yr(e){var t=ct(e);e="";t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function Jr(){for(var e=U.apply(0,arguments),t=0,n=c(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;t=new Uint8Array(t);n=0;e=c(e);for(i=e.next();!i.done;i=e.next())i=i.value,t.set(ct(i),n),n+=i.byteLength;return t}q("shaka.util.Uint8ArrayUtils",qr);qr.concat=Jr;qr.toHex=Yr;qr.fromHex=Wr;qr.fromBase64=Xr;qr.toBase64=Kr;qr.toStandardBase64=zr;function Qr(e){var t=this;this.g=[];this.h=[];this.data=[];(new Pr).box("moov",Nr).box("moof",Nr).T("pssh",(function(e){if(!(1<e.version)){var n=ct(e.reader.h,-12,e.size);t.data.push(n);t.g.push(Yr(e.reader.Ib(16)));if(0<e.version){n=e.reader.N();for(var i=0;i<n;i++){var r=Yr(e.reader.Ib(16));t.h.push(r)}}}})).parse(e)}function $r(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var o=new Uint8Array(a),s=dt(o),u=0;s.setUint32(u,a);u+=4;s.setUint32(u,1886614376);u+=4;1>i?s.setUint32(u,0):s.setUint32(u,16777216);u+=4;o.set(t,u);u+=t.length;if(0<i)for(s.setUint32(u,n.size),u+=4,t=c(n),n=t.next();!n.done;n=t.next())n=Wr(n.value),o.set(n,u),u+=n.length;s.setUint32(u,r);o.set(e,u+4);return o}function Zr(e,t){e=ta(e,t);return 1!=e.length?null:e[0]}function ea(e,t,n){e=ia(e,t,n);return 1!=e.length?null:e[0]}function ta(e,t){var n=[];e=c(e.childNodes);for(var i=e.next();!i.done;i=e.next())i=i.value,i instanceof Element&&i.tagName==t&&n.push(i);return n}function na(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}function ia(e,t,n){var i=[];e=c(e.childNodes);for(var r=e.next();!r.done;r=e.next())r=r.value,r instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function ra(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function aa(e,t,n){t=c(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function oa(e){return Array.from(e.childNodes).every(sa)?e.textContent.trim():null}function sa(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function ua(e,t,n,i){i=void 0===i?null:i;var r=null;e=e.getAttribute(t);null!=e&&(r=n(e));return null==r?i:r}function la(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");e=Date.parse(e);return isNaN(e)?null:e/1e3}function ca(e){if(!e)return null;e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!e)return null;e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null);return isFinite(e)?e:null}function da(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;e=Number(t[1]);if(!isFinite(e))return null;t=Number(t[2]);return isFinite(t)?{start:e,end:t}:null}function ha(e){e=Number(e);return 0===e%1?e:null}function fa(e){e=Number(e);return 0===e%1&&0<e?e:null}function pa(e){e=Number(e);return 0===e%1&&0<=e?e:null}function ga(e){e=Number(e);return isNaN(e)?null:e}function ma(e){return e?"true"===e.toLowerCase():!1}function va(e){var t;var n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ya(e,t){var n=new DOMParser,i=wa.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}n=e.documentElement;if(!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function ba(e,t){try{var n=kr(e);return ya(n,t)}catch(e){return null}}var wa=new wr((function(){if("undefined"!==typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function Ta(e,t){var n=this;t=void 0===t?1:t;this.G=e;this.I=new Set;this.m=this.B=null;this.ea=this.Z=!1;this.J=0;this.g=null;this.F=new gr;this.i=new Map;this.C=new Map;this.l=new qi;this.h=null;this.s=function(t){2==t.severity&&n.l.reject(t);e.onError(t)};this.V=new Map;this.ma=new Map;this.X=new fn((function(){return za(n)}));this.O=!1;this.L=[];this.P=!1;this.$=new fn((function(){$a(n)})).ha(t);this.l.catch((function(){}));this.j=new fr((function(){return Ea(n)}));this.Y=!1;this.K=this.H=null}i=Ta.prototype;i.destroy=function(){return this.j.destroy()};function Ea(e){return O((function(t){switch(t.g){case 1:return e.F.release(),e.F=null,e.l.reject(),e.$.stop(),e.$=null,e.X.stop(),e.X=null,E(t,Wa(e),2);case 2:if(!e.m){t.D(3);break}A(t,4);return E(t,e.m.setMediaKeys(null),6);case 6:I(t,5);break;case 4:k(t);case 5:e.m=null;case 3:e.g=null,e.I.clear(),e.B=null,e.C=new Map,e.h=null,e.s=function(){},e.G=null,e.Y=!1,e.H=null,x(t)}}))}i.configure=function(e){this.h=e};function xa(e,t,n){e.ea=!0;e.C=new Map;e.O=n;return Ia(e,t)}function Aa(e,t,n){e.C=new Map;n=c(n);for(var i=n.next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});n=c(e.h.persistentSessionsMetadata);for(i=n.next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});e.O=0<e.C.size;return Ia(e,t)}function Sa(e,t,n,i,r,a){var o=new Map;r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t};r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}];o.set(t,r);return Na(e,o,[])}function Ia(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return O((function(w){if(1==w.g){if(n=ja(e))for(i=c(t),r=i.next();!r.done;r=i.next())a=r.value,a.video&&(a.video.drmInfos=[n]),a.audio&&(a.audio.drmInfos=[n]);o=t.some((function(e){return e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length?!0:!1}));o||(s=Tr(e.h.servers),to(t,s));u=new Set;l=c(t);for(r=l.next();!r.done;r=l.next())for(d=r.value,h=Qa(d),f=c(h),p=f.next();!p.done;p=f.next())g=p.value,u.add(g);m=c(u);for(p=m.next();!p.done;p=m.next())v=p.value,io(v,Tr(e.h.servers),Tr(e.h.advanced||{}),e.h.keySystemsMapping);return E(w,Gn(t,e.O,e.Y,e.h.preferredKeySystems),2)}y=o||Object.keys(e.h.servers).length;if(!y)return e.Z=!0,w.return(Promise.resolve());b=Na(e,void 0,t);return w.return(o?b:b.catch((function(){})))}))}function ka(e){var t;return O((function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.H){n.D(2);break}return E(n,e.H,3);case 3:return pr(e.j),n.return();case 2:return A(n,4),e.H=e.m.setMediaKeys(e.B),E(n,e.H,6);case 6:I(n,5);break;case 4:t=k(n),e.s(new Se(2,6,6003,t.message));case 5:pr(e.j),x(n)}}))}function _a(e,t){return O((function(n){if(1==n.g)return E(n,ka(e),2);Ra(e,t.initDataType,ct(t.initData));x(n)}))}i.$c=function(e){var t=this;return O((function(n){if(1==n.g){if(!t.B)return t.F.wa(e,"encrypted",(function(){t.s(new Se(2,6,6010))})),n.return();t.m=e;t.F.wa(t.m,"play",(function(){for(var e=c(t.L),n=e.next();!n.done;n=e.next())Ha(t,n.value);t.P=!0;t.L=[]}));"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.F.o(t.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Wa(t)}));t.K=t.g?t.g.initData.find((function(e){return 0<e.initData.length}))||null:null;return t.K||"com.apple.fps"!==t.g.keySystem||t.C.size?E(n,ka(t),2):n.D(2)}Da(t).catch((function(){}));t.K||t.C.size||t.h.parseInbandPsshEnabled||t.F.o(t.m,"encrypted",(function(e){return _a(t,e)}));x(n)}))};function Ca(e){var t,n,i,r,a;return O((function(o){switch(o.g){case 1:if(!e.B||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.D(2);break}t=rr([e.g.serverCertificateUri],e.h.retryParameters);A(o,3);n=e.G.lc.request(5,t);return E(o,n.promise,5);case 5:i=o.h;e.g.serverCertificate=ct(i.data);I(o,4);break;case 3:throw r=k(o),new Se(2,6,6017,r);case 4:if(e.j.g)return o.return();case 2:if(!e.g.serverCertificate||!e.g.serverCertificate.length)return o.return();A(o,6);return E(o,e.B.setServerCertificate(e.g.serverCertificate),8);case 8:I(o,0);break;case 6:throw a=k(o),new Se(2,6,6004,a.message)}}))}function Ma(e,t){var n,i,r;return O((function(a){if(1==a.g)return E(a,Va(e,t,{initData:null,initDataType:null}),2);if(3!=a.g){n=a.h;if(!n)return a.return();i=[];if(r=e.i.get(n))r.sb=new qi,i.push(r.sb);i.push(n.remove());return E(a,Promise.all(i),3)}e.i.delete(n);x(a)}))}function Da(e){var t,n,i,r,a;return O((function(o){if(1==o.g){if(!e.C.size)return o.D(2);e.C.forEach((function(t,n){Va(e,n,t)}));return E(o,e.l,3)}if(2!=o.g){t=e.g&&e.g.keyIds||new Set([]);if(0<t.size&&eo(e))return o.return(e.l);e.l=new qi;e.l.catch((function(){}))}n=(e.g?e.g.initData:[])||[];i=c(n);for(r=i.next();!r.done;r=i.next())a=r.value,Ra(e,a.initDataType,a.initData);n.length||e.l.resolve();return o.return(e.l)}))}function Ra(e,t,n){if(n.length){var i=e.i.values();i=c(i);for(var r=i.next();!r.done;r=i.next())if(st(n,r.value.initData)&&!xn("Tizen 2"))return;0<e.i.size&&Za(e)&&(e.l.resolve(),e.l=new qi,e.l.catch((function(){})));Ga(e,t,n,e.g.sessionType)}}function La(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Pa(e){e=e.i.keys();e=oe(e,(function(e){return e.sessionId}));return Array.from(e)}i.Te=function(){var e=this,t=this.i.keys();t=oe(t,(function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}));return Array.from(t)};i.gd=function(){var e=Infinity,t=this.i.keys();t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};i.Ud=function(){return Er(this.ma)};function Na(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:i=new Map;if(n.length){r=Oa(e,n,i);b.D(2);break}return E(b,Ua(e,t),3);case 3:r=b.h;case 2:a=r;if(!a)throw new Se(2,6,6001);pr(e.j);A(b,4);e.I.clear();o=a.getConfiguration();s=o.audioCapabilities||[];u=o.videoCapabilities||[];l=c(s);for(d=l.next();!d.done;d=l.next())h=d.value,e.I.add(h.contentType.toLowerCase());f=c(u);for(d=f.next();!d.done;d=f.next())p=d.value,e.I.add(p.contentType.toLowerCase());if(n.length){var w=a.keySystem;var T=i.get(a.keySystem);var x=[],S=[],_=[],C=[],M=new Set;no(T,x,_,S,C,M);var D=e.O?"persistent-license":"temporary";w={keySystem:w,licenseServerUri:x[0],distinctiveIdentifierRequired:T[0].distinctiveIdentifierRequired,persistentStateRequired:T[0].persistentStateRequired,sessionType:T[0].sessionType||D,audioRobustness:T[0].audioRobustness||"",videoRobustness:T[0].videoRobustness||"",serverCertificate:_[0],serverCertificateUri:S[0],initData:C,keyIds:M};T=c(T);for(x=T.next();!x.done;x=T.next())x=x.value,x.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(w.persistentStateRequired=x.persistentStateRequired);T=w}else T=a.keySystem,w=t.get(a.keySystem),x=[],S=[],_=[],C=[],M=new Set,no(w.drmInfos,x,_,S,C,M),T={keySystem:T,licenseServerUri:x[0],distinctiveIdentifierRequired:"required"==w.distinctiveIdentifier,persistentStateRequired:"required"==w.persistentState,sessionType:w.sessionTypes[0]||"temporary",audioRobustness:(w.audioCapabilities?w.audioCapabilities[0].robustness:"")||"",videoRobustness:(w.videoCapabilities?w.videoCapabilities[0].robustness:"")||"",serverCertificate:_[0],serverCertificateUri:S[0],initData:C,keyIds:M};e.g=T;if(!e.g.licenseServerUri)throw new Se(2,6,6012,e.g.keySystem);return E(b,a.createMediaKeys(),6);case 6:g=b.h;pr(e.j);e.B=g;if(!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.B)){b.D(7);break}A(b,8);return E(b,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:m=b.h;if("usable"!=m)throw new Se(2,6,6018);pr(e.j);I(b,7,4);break;case 8:v=k(b,4);if(v instanceof Se)throw v;throw new Se(2,6,6019,v.message);case 7:return e.Z=!0,E(b,Ca(e),11);case 11:pr(e.j);I(b,0);break;case 4:y=k(b);pr(e.j,y);e.g=null;e.I.clear();if(y instanceof Se)throw y;throw new Se(2,6,6002,y.message)}}))}function Oa(e,t,n){for(var i=c(t),r=i.next();!r.done;r=i.next()){var a=c(Qa(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new Se(2,6,6e3);i={};e=c(e.h.preferredKeySystems);for(r=e.next();!r.done;i={He:i.He},r=e.next())for(i.He=r.value,a=c(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.He}}(i)))return r.keySystemAccess;e=c([!0,!1]);for(r=e.next();!r.done;r=e.next())for(i=r.value,a=c(t),r=a.next();!r.done;r=a.next()){var o=c(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){r=n.get(s.keySystemAccess.keySystem);var u=c(r);for(r=u.next();!r.done;r=u.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}function Ua(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v;return O((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new Se(2,6,6e3);i=c(t.values());for(r=i.next();!r.done;r=i.next())a=r.value,0==a.audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=c(e.h.preferredKeySystems);s=o.next();case 2:if(s.done){y.D(4);break}u=s.value;if(!t.has(u)){y.D(3);break}l=t.get(u);A(y,6);return E(y,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=y.h,y.return(n);case 6:k(y);case 7:pr(e.j);case 3:s=o.next();y.D(2);break;case 4:d=c([!0,!1]),h=d.next();case 9:if(h.done){y.D(11);break}f=h.value;p=c(t.keys());s=p.next();case 12:if(s.done){h=d.next();y.D(9);break}g=s.value;m=t.get(g);v=m.drmInfos.some((function(e){return!!e.licenseServerUri}));if(v!=f){y.D(13);break}A(y,15);return E(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y.return(n);case 15:k(y);case 16:pr(e.j);case 13:s=p.next();y.D(12);break;case 11:return y.return(n)}}))}function ja(t){t=Tr(t.h.clearKeys);if(0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=t;22!=r.length&&(r=Kr(Wr(t),!1));t=e;22!=t.length&&(t=Kr(Wr(e),!1));e={kty:"oct",kid:r,k:t};n.push(e);i.push(e.kid)}));t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});r=[{initData:ct(_r(r)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}function Ba(e){Za(e)&&e.l.resolve()}function Fa(e,t){new fn((function(){t.loaded=!0;Ba(e)})).R(ao)}function Va(e,t,n){var i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:try{i=e.B.createSession("persistent-license")}catch(t){return r=new Se(2,6,6005,t.message),e.s(r),c.return(Promise.reject(r))}e.F.o(i,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Ha(e,t)}));e.F.o(i,"keystatuseschange",(function(t){return qa(e,t)}));a={initData:n.initData,initDataType:n.initDataType,loaded:!1,nf:Infinity,sb:null,type:"persistent-license"};e.i.set(i,a);A(c,2);return E(c,i.load(t),4);case 4:return o=c.h,pr(e.j),o||(e.i.delete(i),s=e.h.persistentSessionOnlinePlayback?1:2,e.s(new Se(s,6,6013)),a.loaded=!0),Fa(e,a),Ba(e),c.return(i);case 2:u=k(c),pr(e.j,u),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.s(new Se(l,6,6005,u.message)),a.loaded=!0,Ba(e);case 3:return c.return(Promise.resolve())}}))}function Ga(e,t,n,i){try{var r=e.B.createSession(i)}catch(t){e.s(new Se(2,6,6005,t.message));return}e.F.o(r,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Ha(e,t)}));e.F.o(r,"keystatuseschange",(function(t){return qa(e,t)}));e.i.set(r,{initData:n,initDataType:t,loaded:!1,nf:Infinity,sb:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){t=n;n instanceof Se||(t=new Se(2,6,6016,n));e.s(t);return}e.h.logLicenseExchange&&Kr(n);r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32));i="0x"+i.toString(16)}e.s(new Se(2,6,6006,t.message,t,i))}}))}function Ha(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g;O((function(m){switch(m.g){case 1:n=t.target;e.h.logLicenseExchange&&Kr(t.message);i=e.i.get(n);r=e.g.licenseServerUri;a=e.h.advanced[e.g.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer);o=rr([r],e.h.retryParameters);o.body=t.message;o.method="POST";o.licenseRequestType=t.messageType;o.sessionId=n.sessionId;o.drmInfo=e.g;i&&(o.initData=i.initData,o.initDataType=i.initDataType);if(La(e.g.keySystem)){var v=Ir(o.body,!0,!0);if(v.includes("PlayReadyKeyMessage")){v=ya(v,"PlayReadyKeyMessage");for(var y=c(v.getElementsByTagName("HttpHeader")),b=y.next();!b.done;b=y.next())b=b.value,o.headers[b.getElementsByTagName("name")[0].textContent]=b.getElementsByTagName("value")[0].textContent;o.body=Xr(v.getElementsByTagName("Challenge")[0].textContent)}else o.headers["Content-Type"]="text/xml; charset=utf-8"}s=Date.now();A(m,2);l=e.G.lc.request(2,o);return E(m,l.promise,4);case 4:u=m.h;I(m,3);break;case 2:return d=k(m),h=new Se(2,6,6007,d),e.s(h),i&&i.sb&&i.sb.reject(h),m.return();case 3:if(e.j.g)return m.return();e.J+=(Date.now()-s)/1e3;e.h.logLicenseExchange&&Kr(u.data);A(m,5);return E(m,n.update(u.data),7);case 7:I(m,6);break;case 5:return f=k(m),p=new Se(2,6,6008,f.message),e.s(p),i&&i.sb&&i.sb.reject(p),m.return();case 6:if(e.j.g)return m.return();g=new K("drmsessionupdate");e.G.onEvent(g);i&&(i.sb&&i.sb.resolve(),Fa(e,i));x(m)}}))}function qa(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach((function(t,r){if("string"==typeof r){var a=r;r=t;t=a}if(La(e.g.keySystem)&&16==r.byteLength&&(mn()||Tn())){a=dt(r);var o=a.getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1);a.setUint16(4,s,!1);a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0);"expired"==t&&(i=!0);r=Yr(r).slice(0,32);e.V.set(r,t)}));var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.sb&&(e.i.delete(t),t.close().catch((function(){})));Za(e)&&(e.l.resolve(),e.X.R(oo))}function za(e){var t=e.V,n=e.ma;n.clear();t.forEach((function(e,t){return n.set(t,e)}));t=Array.from(n.values());t.length&&t.every((function(e){return"expired"==e}))&&e.s(new Se(2,6,6014));e.G.me(Er(n))}function Ka(){var e,t,n,i,r,a,o,s;return O((function(u){return 1==u.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},r=[i,n],a=new Map,o=function(e){var t,n,i;return O((function(o){switch(o.g){case 1:A(o,2);if("org.w3.clearkey"===e&&En())throw Error("Unsupported keySystem");return E(o,navigator.requestMediaKeySystemAccess(e,r),4);case 4:return t=o.h,i=(n=t.getConfiguration().sessionTypes)?n.includes("persistent-license"):!1,xn("Tizen 3")&&(i=!1),a.set(e,{persistentState:i}),E(o,t.createMediaKeys(),5);case 5:I(o,0);break;case 2:k(o),a.set(e,null),x(o)}}))},s=e.map((function(e){return o(e)})),E(u,Promise.all(s),2)):u.return(Er(a))}))}function Xa(e){var t;return O((function(n){if(1==n.g)return t=new Promise((function(e,t){new fn(t).R(ro)})),A(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(2!=n.g)return I(n,0);k(n);x(n)}))}function Wa(e){var t;return O((function(n){t=Array.from(e.i.entries());e.i.clear();return E(n,Promise.all(t.map((function(t){t=c(t);var n=t.next().value,i=t.next().value;return O((function(t){if(1==t.g)return A(t,2),e.ea||e.C.has(n.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?E(t,Xa(n),5):E(t,n.remove(),5);if(2!=t.g)return I(t,0);k(t);x(t)}))}))),0)}))}function Ya(e,t){return e.length&&t.length&&e!==t?0<Ja(e,t).length:!0}function Ja(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r={},a=c(t),o=a.next();!o.done;r={bb:r.bb},o=a.next())if(o=o.value,i.keySystem==o.keySystem){r.bb=[];r.bb=r.bb.concat(i.initData||[]);r.bb=r.bb.concat(o.initData||[]);r.bb=r.bb.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.bb.findIndex((function(e){return e.keyId===t.keyId}))}}(r));a=i.keyIds&&o.keyIds?new Set([].concat(d(i.keyIds),d(o.keyIds))):i.keyIds||o.keyIds;n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r.bb,keyIds:a});break}}return n}function Qa(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function $a(e){e.i.forEach((function(t,n){var i=t.nf,r=n.expiration;isNaN(r)&&(r=Infinity);r!=i&&(e.G.onExpirationUpdated(n.sessionId,r),t.nf=r)}))}function Za(e){e=e.i.values();return se(e,(function(e){return e.loaded}))}function eo(e){for(var t=c(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.V.get(n.value))return!1;return!0}function to(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));e=c(e);for(t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function no(e,t,n,i,r,a){var o={};e=c(e);for(var s=e.next();!s.done;o={Ja:o.Ja},s=e.next()){o.Ja=s.value;t.includes(o.Ja.licenseServerUri)||t.push(o.Ja.licenseServerUri);i.includes(o.Ja.serverCertificateUri)||i.push(o.Ja.serverCertificateUri);o.Ja.serverCertificate&&(n.some(function(e){return function(t){return st(t,e.Ja.serverCertificate)}}(o))||n.push(o.Ja.serverCertificate));if(o.Ja.initData){s={};for(var u=c(o.Ja.initData),l=u.next();!l.done;s={Ed:s.Ed},l=u.next())s.Ed=l.value,r.some(function(e){return function(t){var n=e.Ed;return t.keyId&&t.keyId==n.keyId?!0:t.initDataType==n.initDataType&&st(t.initData,n.initData)}}(s))||r.push(s.Ed)}if(o.Ja.keyIds)for(s=c(o.Ja.keyIds),u=s.next();!u.done;u=s.next())a.add(u.value)}}function io(t,n,i,r){var a=t.keySystem;if(a&&("org.w3.clearkey"!=a||!t.licenseServerUri)){n.size&&(n=n.get(a)||"",t.licenseServerUri=n);t.keyIds||(t.keyIds=new Set);if(i=i.get(a))t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri);r[a]&&(t.keySystem=r[a]);e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready")}}var ro=1,ao=5,oo=.5,so=new wr((function(){return lt(new Uint8Array([0]))}));function uo(){}function lo(e,t,n,i){var r,a,o,s;return O((function(u){if(1==u.g){if(i&&(r=fo[i.toLowerCase()]))return u.return(r);if(a=ho(e))if(o=po[a])return u.return(o);return i?u.D(2):E(u,co(e,t,n),3)}if(2!=u.g&&(i=u.h)&&(s=fo[i]))return u.return(s);throw new Se(2,4,4e3,e)}))}function co(e,t,n){var i,r,a;return O((function(o){if(1==o.g)return i=rr([e],n),i.method="HEAD",E(o,t.request(0,i).promise,2);r=o.h;a=r.headers["content-type"];return o.return(a?a.toLowerCase().split(";").shift():"")}))}function ho(e){e=new de(e).La.split("/").pop().split(".");return 1==e.length?"":e.pop().toLowerCase()}q("shaka.media.ManifestParser",uo);uo.unregisterParserByMime=function(e){delete fo[e]};uo.registerParserByMime=function(e,t){fo[e]=t};uo.registerParserByExtension=function(e,t){po[e]=t};uo.AccessibilityPurpose={$j:"visually impaired",gj:"hard of hearing"};var fo={},po={};function go(e){function t(){i=!0}function n(e){a.push(e);Nr(e)}e=ct(e);var i=!1,r,a=[],o=[];(new Pr).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).T("stsd",(function(e){r=e;a.push(e);Or(e)})).T("encv",t).T("enca",t).T("hev1",(function(e){o.push({box:e,mc:1701733238})})).T("hvc1",(function(e){o.push({box:e,mc:1701733238})})).T("avc1",(function(e){o.push({box:e,mc:1701733238})})).T("avc3",(function(e){o.push({box:e,mc:1701733238})})).T("ac-3",(function(e){o.push({box:e,mc:1701733217})})).T("ec-3",(function(e){o.push({box:e,mc:1701733217})})).T("mp4a",(function(e){o.push({box:e,mc:1701733217})})).parse(e);if(i)return e;if(0==o.length||!r)throw ne(Yr(e)),new Se(2,3,3019);o.reverse();for(var s=c(o),u=s.next();!u.done;u=s.next())u=u.value,e=mo(e,r,u.box,a,u.mc);return e}function mo(e,t,n,i,r){var a=yo.value(),o=e.subarray(n.start,n.start+n.size),s=dt(o),u=new Uint8Array(n.size+a.byteLength);u.set(o,0);o=dt(u);o.setUint32(4,r);u.set(a,n.size);r=s.getUint32(4);o.setUint32(n.size+16,r);vo(u,0,u.byteLength);r=new Uint8Array(e.byteLength+u.byteLength);n=vn()?n.start:n.start+n.size;a=e.subarray(n);r.set(e.subarray(0,n));r.set(u,n);r.set(a,n+u.byteLength);e=c(i);for(i=e.next();!i.done;i=e.next())i=i.value,vo(r,i.start,i.size+u.byteLength);u=dt(r,t.start);t=Vr(t);e=u.getUint32(t);u.setUint32(t,e+1);return r}function vo(e,t,n){e=dt(e,t);t=e.getUint32(0);0!=t&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var yo=new wr((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function bo(e,t,n,i,r,a,o){this.Oa=e;this.Sa=t;this.za=n;this.jf=void 0===i?null:i;this.timescale=void 0===r?null:r;this.g=void 0===a?null:a;this.B=void 0===o?null:o}bo.prototype.jd=function(){return this.Sa};bo.prototype.fd=function(){return this.za};function wo(e,t){return e&&t?e.jd()==t.jd()&&e.fd()==t.fd()&&wt(e.Oa(),t.Oa())&&st(e.g,t.g):e==t}q("shaka.media.InitSegmentReference",bo);bo.prototype.getEndByte=bo.prototype.fd;bo.prototype.getStartByte=bo.prototype.jd;function To(e,t,n,i,r,a,o,s,u,l,c,d,h,f,p){l=void 0===l?[]:l;f=void 0===f?Eo:f;this.startTime=e;this.j=this.endTime=t;this.H=n;this.Sa=i;this.za=r;this.h=a;this.timestampOffset=o;this.appendWindowStart=s;this.appendWindowEnd=u;this.i=l;this.tilesLayout=void 0===c?"":c;this.G=void 0===d?null:d;this.g=void 0===h?null:h;this.status=f;this.m=!1;this.C=!0;this.s=!1;this.B=void 0===p?null:p;this.F=null;this.l=0}i=To.prototype;i.Oa=function(){return this.H()};i.getStartTime=function(){return this.startTime};i.uh=function(){return this.endTime};i.jd=function(){return this.Sa};i.fd=function(){return this.za};i.Nh=function(){return this.tilesLayout};i.Mh=function(){return this.G};i.dc=function(){return this.status};i.ai=function(){this.status=xo};i.hf=function(){this.m=!0};i.Xh=function(){return this.m};i.xg=function(){this.C=!1};i.Wh=function(){return this.C};i.wg=function(){this.s=!0};i.Th=function(){return this.s};i.Lg=function(e){this.F=e};i.Lh=function(){return this.F};i.offset=function(e){this.startTime+=e;this.endTime+=e;this.j+=e;for(var t=c(this.i),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e};i.Hf=function(e){null==this.g?J("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))};q("shaka.media.SegmentReference",To);To.prototype.syncAgainst=To.prototype.Hf;To.prototype.offset=To.prototype.offset;To.prototype.getThumbnailSprite=To.prototype.Lh;To.prototype.setThumbnailSprite=To.prototype.Lg;To.prototype.hasByterangeOptimization=To.prototype.Th;To.prototype.markAsByterangeOptimization=To.prototype.wg;To.prototype.isIndependent=To.prototype.Wh;To.prototype.markAsNonIndependent=To.prototype.xg;To.prototype.isPreload=To.prototype.Xh;To.prototype.markAsPreload=To.prototype.hf;To.prototype.markAsUnavailable=To.prototype.ai;To.prototype.getStatus=To.prototype.dc;To.prototype.getTileDuration=To.prototype.Mh;To.prototype.getTilesLayout=To.prototype.Nh;To.prototype.getEndByte=To.prototype.fd;To.prototype.getStartByte=To.prototype.jd;To.prototype.getEndTime=To.prototype.uh;To.prototype.getStartTime=To.prototype.getStartTime;To.prototype.getUris=To.prototype.Oa;var Eo=0,xo=1;To.Status={Ni:Eo,Vj:xo,lj:2};function Ao(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function So(e,t){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Io(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=c(_o(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start;r=r.end;r>t&&(n+=r-Math.max(i,t))}return n}function ko(e,t,n){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;e=_o(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}));return 0<=e?e:null}function _o(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Co(){}function Mo(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function Do(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function Ro(e,t){var n=(e[t]&127)<<21;n|=(e[t+1]&127)<<14;n|=(e[t+2]&127)<<7;return n|=e[t+3]&127}function Lo(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=Sr(ct(e.data,1,n));e=Sr(ct(e.data,2+n)).replace(/\0*$/,"");t.description=i;t.data=e;return t}if("WXXX"===e.type){if(2>e.size||3!==e.data[0])return null;n=e.data.subarray(1).indexOf(0);if(-1===n)return null;i=Sr(ct(e.data,1,n));e=Sr(ct(e.data,2+n)).replace(/\0*$/,"");t.description=i;t.data=e;return t}if("PRIV"===e.type){if(2>e.size)return null;i=e.data.indexOf(0);if(-1===i)return null;i=Sr(ct(e.data,0,i));t.description=i;"com.apple.streaming.transportStreamTimestamp"==i?(i=e.data.subarray(i.length+1),e=i[3]&1,i=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7],i/=45,e&&(i+=47721858.84),t.data=i):(e=lt(e.data.subarray(i.length+1)),t.data=e);return t}if("T"===e.type[0]){if(2>e.size||3!==e.data[0])return null;e=Sr(e.data.subarray(1)).replace(/\0*$/,"");t.data=e;return t}return"W"===e.type[0]?(e=Sr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=lt(e.data),t):null}function Po(e){for(var t=0,n=[];Mo(e,t);){var i=Ro(e,t+6);e[t+5]>>6&1&&(t+=10);t+=10;for(i=t+i;t+10<i;){var r=e.subarray(t),a=Ro(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)};(a=Lo(r))&&n.push(a);t+=r.size+10}Do(e,t)&&(t+=10)}return n}function No(e,t){for(var n=t=void 0===t?0:t,i=0;Mo(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Ro(e,t+6),Do(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}q("shaka.util.Id3Utils",Co);Co.getID3Data=No;Co.getID3Frames=Po;function Oo(e,t){var n=null,i=null,r=null,a=e.N();t&1&&(r=e.Ic());t&2&&e.skip(4);t&8&&(n=e.N());t&16&&(i=e.N());return{trackId:a,ig:n,hh:i,dk:r}}function Uo(e,t){return 1==t?(t=e.N(),e=e.N(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.N()}}function jo(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));t=e.N();e.skip(4);e=e.Za();return{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Bo(e,t,n){var i=e.N(),r=[],a=null;n&1&&(a=e.N());n&4&&e.skip(4);for(var o=0;o<i;o++){var s={vf:null,sampleSize:null,ve:null};n&256&&(s.vf=e.N());n&512&&(s.sampleSize=e.N());n&1024&&e.skip(4);n&2048&&(s.ve=0==t?e.N():e.Bg());r.push(s)}return{hk:i,Dg:r,gh:a}}function Fo(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.N();1==t?e.skip(8):e.skip(4);e.skip(4);e.skip(8);e.skip(2);e.skip(2);e.skip(2);e.skip(2);e.skip(36);t=e.Za()+e.Za()/16;e=e.Za()+e.Za()/16;return{trackId:n,width:t,height:e}}function Vo(e){var t="mp4a";e.skip(11);t+="."+this.g(e.Ia());t+="."+this.g(e.Ia()>>>2&63).replace(/^0/,"");return{Ga:t}}function Go(e,t){e.skip(87);return{Ga:t+"."+this.g(e.Ia())+this.g(e.Ia())+this.g(e.Ia())}}function Ho(e){e=e.N();return{Ga:Fr(e)}}function qo(e){this.j=e;this.i=e.byteLength;this.g=this.h=0}function zo(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);0!==i&&(n.set(e.j.subarray(t,t+i)),e.h=new Dr(n,0).N(),e.g=8*i,e.i-=i)}function Ko(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n;e.g-=n;zo(e)}e.h<<=t;e.g-=t}function Xo(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;e.g-=n;0<e.g?e.h<<=n:0<e.i&&zo(e);n=t-n;return 0<n?i<<n|Xo(e,n):i}function Wo(e){var t;for(t=0;t<e.g;++t)if(0!==(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;zo(e);return t+Wo(e)}function Yo(e){Ko(e,1+Wo(e))}function Jo(e){var t=Wo(e);return Xo(e,t+1)-1}function Qo(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=Jo(e),i=(n+(1&i?1+i>>>1:-1*(i>>>1))+256)%256),n=0===i?n:i}function $o(e){Xo(e,8);Jo(e);return Jo(e)}q("shaka.util.ExpGolomb",qo);function Zo(){this.B=null;this.C=!1;this.j=this.F=null;this.i=[];this.l=this.m=null;this.g=[];this.s=null;this.h=[]}i=Zo.prototype;i.clearData=function(){this.i=[];this.g=[];this.h=[]};i.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,ns(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71==e[r]){var a=!!(e[r+1]&64),o=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var s=r+5+e[r+4];if(s==r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1);this.B=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.B:a&&(s+=e[s]+1);a=e;o={audio:-1,video:-1,Zd:-1,audioCodec:"",videoCodec:""};var u=s+3+((a[s+1]&15)<<8|a[s+2])-4;for(s+=12+((a[s+10]&15)<<8|a[s+11]);s<u;){var l=(a[s+1]&31)<<8|a[s+2],c=(a[s+3]&15)<<8|a[s+4];switch(a[s]){case 6:if(-1==o.audio&&0<c)for(var d=s+5,h=c;2<h;){switch(a[d]){case 106:o.audio=l;o.audioCodec="ac3";break;case 122:o.audio=l,o.audioCodec="ec3"}var f=a[d+1]+2;d+=f;h-=f}break;case 15:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 21:-1==o.Zd&&(o.Zd=l);break;case 27:-1==o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1==o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1==o.video&&(o.video=l,o.videoCodec="hvc");break;case 129:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:-1==o.audio&&(o.audio=l,o.audioCodec="ec3")}s+=c+5}a=o;-1!=a.video&&(this.F=a.video,this.j=a.videoCodec);-1!=a.audio&&(this.m=a.audio,this.l=a.audioCodec);-1!=a.Zd&&(this.s=a.Zd);i&&!this.C&&(i=!1,r=t-188);this.C=!0;break;case this.F:s=e.subarray(s,r+188);a?this.i.push(s):this.i.length&&(a=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Jr(a,s));break;case this.m:s=e.subarray(s,r+188);a?this.g.push(s):this.g.length&&(a=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Jr(a,s));break;case this.s:s=e.subarray(s,r+188);a?this.h.push(s):this.h.length&&(a=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Jr(a,s));break;default:i=!0}}return this};function es(e){if(1!==(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),qf:e[4]<<8|e[5],pts:null,dts:null};if(t.qf&&t.qf>e.byteLength-6)return null;var n=e[7];n&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,n&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2));n=e[8]+9;if(e.byteLength<=n)return null;t.data=e.subarray(n);return t}i.rf=function(e,t){for(var n=e.pts?e.pts/9e4:null,i=e.data,r=i.byteLength,a=0,o=[],s=-1,u=0,l=!1,c,d=0;d<r;++d){var h=i[d];if(h)if(2<=a&&1==h&&l){e=d-(3<a?3:a);if(0==e)break;c.data=Jr(c.data,i.subarray(0,e));c.Ab=Jr(c.Ab,i.subarray(0,e));break}else{if(2<=a&&1==h){0<=s&&(a=d-((3<a?3:a)+1),o.push({data:i.subarray(s+1,a+1),Ab:i.subarray(s,a+1),type:u,time:n}));if(d>=r-1)return o;d++;s=d;u=i[d]&31}a=0}else a++;d>=r-1&&0<=s&&0<=a&&(l?(c.data=Jr(c.data,i),c.Ab=Jr(c.Ab,i)):(l=!0,c={data:i.subarray(s+1,r),Ab:i.subarray(s,r),type:u,time:n},t&&0==e.qf&&(i=t.data,r=i.byteLength,d=-1)))}c&&o.push(c);return o};i.getMetadata=function(){for(var e=[],t=c(this.h),n=t.next();!n.done;n=t.next())(n=es(n.value))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Po(n.data),dts:n.dts,pts:n.pts});return e};i.Zb=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=es(n.value))&&e.push(n);return e};i.Xd=function(){for(var e=[],t=c(this.i),n=t.next();!n.done;n=t.next()){n=n.value;var i=es(n);i&&null!=i.pts&&null!=i.dts?e.push(i):e.length&&(n=i?i.data:n)&&(i=e.pop(),i.data=Jr(i.data,n),e.push(i))}return e};i.getStartTime=function(){for(var e=null,t=c(this.Zb()),n=t.next();!n.done;n=t.next()){var i=n.value;i&&null!=i.pts&&(i=Math.min(i.dts,i.pts)/9e4,null==e||e>i)&&(e=i)}t=null;i=c(this.Xd());for(n=i.next();!n.done;n=i.next())(n=n.value)&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==t||t>n)&&(t=n);return{audio:e,video:t}};i.Rd=function(){return{audio:this.l,video:this.j}};i.Ye=function(){var e=[];if("avc"!=this.j)return e;for(var t=this.Xd(),n=0;n<t.length;n++){var i=t[n],r=void 0;n+1<t.length&&(r=t[n+1]);e.push.apply(e,d(this.rf(i,r)))}return e};i.Qh=function(){xi("TsParser","Please use getVideoInfo function instead.");var e=this.Xe();return{height:e.height,width:e.width}};i.Xe=function(){var e={height:null,width:null,Ga:null},t=this.Ye();if(!t.length)return e;t=t.find((function(e){return 7==e.type}));if(!t)return e;t=new qo(t.data);var n=Xo(t,8),i=Xo(t,8),r=Xo(t,8);Yo(t);if(is.includes(n)){var a=Jo(t);3===a&&Ko(t,1);Yo(t);Yo(t);Ko(t,1);if(1===Xo(t,1)){a=3!==a?8:12;for(var o=0;o<a;o++)1===Xo(t,1)&&(6>o?Qo(t,16):Qo(t,64))}}Yo(t);a=Jo(t);if(0===a)Jo(t);else if(1===a)for(Ko(t,1),Yo(t),Yo(t),a=Jo(t),o=0;o<a;o++)Yo(t);Yo(t);Ko(t,1);a=Jo(t);o=Jo(t);var s=Xo(t,1);0===s&&Ko(t,1);Ko(t,1);var u=0,l=0,c=0,d=0;1===Xo(t,1)&&(u=Jo(t),l=Jo(t),c=Jo(t),d=Jo(t));e.height=String((2-s)*(o+1)*16-2*c-2*d);e.width=String(16*(a+1)-2*u-2*l);e.Ga="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2);return e};function ts(e){return 0>ns(e)?!1:!0}function ns(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}q("shaka.util.TsParser",Zo);Zo.syncOffset=ns;Zo.probe=ts;Zo.prototype.getVideoInfo=Zo.prototype.Xe;Zo.prototype.getVideoResolution=Zo.prototype.Qh;Zo.prototype.getVideoNalus=Zo.prototype.Ye;Zo.prototype.getCodecs=Zo.prototype.Rd;Zo.prototype.getStartTime=Zo.prototype.getStartTime;Zo.prototype.getVideoData=Zo.prototype.Xd;Zo.prototype.getAudioData=Zo.prototype.Zb;Zo.prototype.getMetadata=Zo.prototype.getMetadata;Zo.prototype.parseAvcNalus=Zo.prototype.rf;Zo.prototype.parse=Zo.prototype.parse;Zo.prototype.clearData=Zo.prototype.clearData;Zo.Timescale=9e4;var is=[100,110,122,244,44,83,86,118,128,138,139,134];function rs(e,t,n){this.g=null;this.i=-1;this.j=e;this.h=t;this.l=n;"undefined"===typeof libDPIModule&&Q("Could not Find LCEVC Library dependencies on this page");"undefined"===typeof LcevcDil?Q("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Q(LcevcDil.SupportObject.SupportError);"undefined"!==typeof LcevcDil&&"undefined"!==typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}rs.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function as(e,t){var n=os;switch(t.mimeType){case"video/webm":n=ss;break;case"video/mp4":n=us}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}q("shaka.lcevc.Dil",rs);rs.prototype.release=rs.prototype.release;var os=0,ss=1,us=2;function ls(e,t,n,i){var r=this;this.l=e;this.G=null;this.C=t;this.h={};this.J={};this.Y={};this.g=null;this.P=!1;this.ma=n||function(){};this.L=i||null;this.j={};this.F=new gr;this.m={};this.H=null;this.I=new qi;this.V="";this.i=cs(this,this.I);this.s=!1;this.K=new fr((function(){return ds(r)}));this.B=!1;this.O="UNKNOWN";this.X=this.Z=!1;this.$=new qi}function cs(e,t){var n=new MediaSource;e.F.wa(n,"sourceopen",(function(){URL.revokeObjectURL(e.V);t.resolve()}));e.V=js(n);e.l.src=e.V;return n}i=ls.prototype;i.destroy=function(){return this.K.destroy()};function ds(e){var t,n,i,r,a,o,s,u;return O((function(l){if(1==l.g){t=[];for(n in e.j)for(i=e.j[n],r=i[0],e.j[n]=i.slice(0,1),r&&t.push(r.p.catch(_e)),a=c(i.slice(1)),o=a.next();!o.done;o=a.next())s=o.value,s.p.reject(new Se(2,7,7003,void 0));e.g&&t.push(e.g.destroy());e.C&&t.push(e.C.destroy());for(u in e.m)t.push(e.m[u].destroy());return E(l,Promise.all(t),2)}e.F&&(e.F.release(),e.F=null);e.l&&(e.l.removeAttribute("src"),e.l.load(),e.l=null);e.G=null;e.i=null;e.g=null;e.C=null;e.h={};e.m={};e.H=null;e.j={};e.L=null;x(l)}))}i.init=function(e,t,n,i){t=void 0===t?!1:t;n=void 0===n?"UNKNOWN":n;i=void 0===i?!1:i;var r=this,a,o,s,u;return O((function(l){if(1==l.g)return E(l,r.I,2);r.B=t;r.O=n;r.Z=i;r.X=!r.B&&"HLS"==r.O&&!r.Z;a=c(e.keys());for(o=a.next();!o.done;o=a.next())s=o.value,u=e.get(s),hs(r,s,u),r.j[s]=[];x(l)}))};function hs(e,t,n){var i=Jt(n.mimeType,n.codecs);if(t==Pe)fs(e,i,e.B,n.external);else{var r=e.G.forceTransmux;if(!nt(i)||!e.B&&nn.includes(i))r=!0;var a=Qt(n.mimeType,n.codecs);r&&(r=Ht(a))&&(i=r(),e.m[t]=i,i=i.convertCodecs(t,a));a=i+e.G.sourceBufferExtraFeatures;pr(e.K);try{var o=e.i.addSourceBuffer(a)}catch(t){throw new Se(2,3,3015,t,"The mediaSource_ status was"+e.i.readyState+"expected 'open'")}e.B&&(o.mode=Bs);e.F.o(o,"error",(function(){e.j[t][0].p.reject(new Se(2,3,3014,e.l.error?e.l.error.code:0))}));e.F.o(o,"updateend",(function(){return _s(e,t)}));e.h[t]=o;e.J[t]=i;e.Y[t]=!!n.drmInfos.length}}i.configure=function(e){this.G=e};function fs(e,t,n,i){e.g||(e.g=new rn(e.C));var r=e.g;i=i||e.P;e=e.O;"application/cea-608"==t||"application/cea-708"==t?r.i=null:(r.i=(0,dn[t])(),r.i.setSequenceMode?r.i.setSequenceMode(n):Q('Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Q('Text parsers should have a "setManifestType" method!'),r.C=i)}function ps(e){return e.s?!1:e.i?"ended"==e.i.readyState:!0}function gs(e,t){e.s?e=null:t==Pe?e=e.g.g:(e=ys(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null);return e}function ms(e,t){return e.s?null:t==Pe?e.g.h:Ao(ys(e,t))}function vs(e,t,n){if(e.s)return 0;if(t==Pe)return e=e.g,null==e.h||e.h<n?0:e.h-Math.max(n,e.g);e=ys(e,t);return Io(e,n)}i.Bb=function(){var e={total:this.s?[]:_o(this.l.buffered),audio:this.s?[]:_o(ys(this,"audio")),video:this.s?[]:_o(ys(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e};function ys(e,t){try{return e.h[t].buffered}catch(e){return null}}function bs(e,t,n,i,r,a){var o=null,s=ct(n);if(nn.includes(r))a=Po(s),a.length&&i&&((t=a.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&t.data&&(o=Math.round(t.data)/1e3),e.ma([{cueTime:i.startTime,data:s,frames:a,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(r.includes("/mp4")&&i&&0==i.timestampOffset&&i.h&&i.h.timescale){var u=i.h.timescale;if(!isNaN(u)){var l=0,c=!1;(new Pr).box("moof",Nr).box("traf",Nr).T("tfdt",(function(e){l=Uo(e.reader,e.version).baseMediaDecodeTime/u;c=!0;e.parser.stop()})).parse(n,!0);c&&(o=l)}}else r.includes("/mp4")||r.includes("/webm")||!ts(s)||(s=(new Zo).parse(s),t=s.getStartTime()[t],null!=t&&(o=t),s=s.getMetadata(),s.length&&e.ma(s,a,i?i.endTime:null));return o}function ws(e,t,n,i,r,a,o,s){o=void 0===o?!1:o;s=void 0===s?!1:s;var u,l,c,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:u=Ne;if(t!=u.na){b.D(2);break}if(!e.B){b.D(3);break}return E(b,e.$,4);case 4:l=b.h,e.g.B=l;case 3:return E(b,on(e.g,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return b.return();case 2:c=e.h[t].timestampOffset;d=e.J[t];e.m[t]&&(d=e.m[t].getOrginalMimeType());if(i&&(h=bs(e,t,n,i,d,c),null!=h)){f=i.startTime-h;p=Math.abs(c-f);if(.1<=p||o||s)c=f,e.X&&(Cs(e,t,(function(){return Is(e,t)})),Cs(e,t,(function(){return ks(e,t,c)})));g=t==u.Na||!(u.Na in e.h);e.B&&g&&e.$.resolve(c)}a&&t==u.Na&&(e.g||fs(e,"application/cea-608",e.B,!1),e.H||(m=d.split(";",1)[0],e.H=new pt(m)),i?(v=e.H.j(n),v.length&&cn(e.g,v,i.startTime,i.endTime,c)):e.H.init(n));if(!e.m[t]){b.D(6);break}return E(b,e.m[t].transmux(n,r,i,e.i.duration,t),7);case 7:n=b.h;case 6:return n=Ls(e,n,i?i.startTime:null,t),i&&e.B&&t!=u.na&&(o||s)&&(y=i.startTime,Cs(e,t,(function(){return Is(e,t)})),Cs(e,t,(function(){return ks(e,t,y)}))),E(b,Cs(e,t,(function(){var i=n;if("video"==t&&e.L){var r=e.L;r.g&&r.g.appendBuffer(i,"video",r.i)}e.h[t].appendBuffer(i)})),8);case 8:x(b)}}))}function Ts(e,t){var n=ms(e,"video")||0;un(e.g,t,n)}function Es(e){e.g&&un(e.g,"",0)}i.remove=function(e,t,n){var i=this,r;return O((function(a){r=Ne;return e==r.na?E(a,i.g.remove(t,n),0):E(a,Cs(i,e,(function(){n<=t?_s(i,e):i.h[e].remove(t,n)})),0)}))};function xs(e,t){var n;return O((function(i){n=Ne;return t==n.na?e.g?E(i,e.g.remove(0,Infinity),0):i.return():E(i,Cs(e,t,(function(){var n=e.i.duration;0>=n?_s(e,t):e.h[t].remove(0,n)})),0)}))}i.flush=function(e){var t=this,n;return O((function(i){n=Ne;return e==n.na?i.return():E(i,Cs(t,e,(function(){t.l.currentTime-=.001;_s(t,e)})),0)}))};function As(e,t,n,i,r,a,o,s){var u,l,c;return O((function(d){if(1==d.g){u=Ne;if(t==u.na)return a||(e.g.B=n),sn(e.g,i,r),d.return();l=[];return E(d,Us(e,t,o,s),2)}(c=d.h)||l.push(Cs(e,t,(function(){return Is(e,t)})));a||l.push(Cs(e,t,(function(){return ks(e,t,n)})));l.push(Cs(e,t,(function(){e.h[t].appendWindowStart=0;e.h[t].appendWindowEnd=r;e.h[t].appendWindowStart=i;_s(e,t)})));return E(d,Promise.all(l),0)}))}function Ss(e,t,n){var i;return O((function(r){i=Ne;if(t==i.na)return r.return();Cs(e,t,(function(){return Is(e,t)}));return E(r,Cs(e,t,(function(){return ks(e,t,n)})),0)}))}i.endOfStream=function(e){var t=this;return O((function(n){return E(n,Ms(t,(function(){ps(t)||"closed"===t.i.readyState||(e?t.i.endOfStream(e):t.i.endOfStream())})),0)}))};i.Ra=function(e){var t=this;return O((function(n){return E(n,Ms(t,(function(){if(e<t.i.duration)for(var n in t.h){var i={start:function(){},p:new qi};t.j[n].unshift(i)}t.i.duration=e})),0)}))};i.getDuration=function(){return this.i.duration};function Is(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort();e.h[t].appendWindowStart=n;e.h[t].appendWindowEnd=i;_s(e,t)}function ks(e,t,n){0>n&&(n+=.001);e.h[t].timestampOffset=n;_s(e,t)}function _s(e,t){if(!e.s){var n=e.j[t][0];n&&(n.p.resolve(),Ds(e,t))}}function Cs(e,t,n){pr(e.K);n={start:n,p:new qi};e.j[t].push(n);1==e.j[t].length&&Rs(e,t);return n.p}function Ms(e,t){var n,i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:pr(e.K);n=[];i={};for(r in e.h)i.Uc=new qi,a={start:function(e){return function(){return e.Uc.resolve()}}(i),p:i.Uc},e.j[r].push(a),n.push(i.Uc),1==e.j[r].length&&a.start(),i={Uc:i.Uc};A(l,2);return E(l,Promise.all(n),4);case 4:I(l,3);break;case 2:throw o=k(l),o;case 3:return A(l,5,6),E(l,t(),6);case 6:_(l);for(s in e.h)Ds(e,s);C(l,0);break;case 5:throw u=k(l),new Se(2,3,3015,u,e.l.error||"No error in the media element")}}))}function Ds(e,t){e.j[t].shift();Rs(e,t)}function Rs(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Se(2,3,3017,t)):n.p.reject(new Se(2,3,3015,i,e.l.error||"No error in the media element")),Ds(e,t)}}function Ls(e,t,n,i){var r=e.Y[i];e.G.insertFakeEncryptionInInit&&null==n&&r&&(yn()||vn())&&"mp4"==e.J[i].split(";")[0].split("/")[1]&&(t=go(t));return t}function Ps(t,n,i,r){return Cs(t,n,(function(){n!==Pe&&(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType&&(t.m[n]&&t.m[n].destroy(),r&&(t.m[n]=r),t.h[n].changeType(i+t.G.sourceBufferExtraFeatures),t.J[n]=i),_s(t,n))}))}function Ns(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x;return O((function(A){switch(A.g){case 1:e.s=!0;n=e.l.currentTime;S(A);e.F.Ub();i=[];for(r in e.m)i.push(e.m[r].destroy());for(a in e.j)for(o=e.j[a],s=o[0],e.j[a]=o.slice(0,1),s&&i.push(s.p.catch(_e)),u=c(o.slice(1)),l=u.next();!l.done;l=u.next())d=l.value,d.p.reject(new Se(2,7,7003,void 0));for(h in e.h){f=e.h[h];try{e.i.removeSourceBuffer(f)}catch(e){}}return E(A,Promise.all(i),4);case 4:return e.m={},e.j={},e.h={},p=e.i.duration,e.I=new qi,e.i=cs(e,e.I),E(A,e.I,5);case 5:e.i.duration=p;g=new qi;m=e.i.sourceBuffers;v=t.size;y=0;e.F.o(m,"addsourcebuffer",(function(){y++;y===v&&g.resolve()}));b=c(t.keys());for(w=b.next();!w.done;w=b.next())T=w.value,x=t.get(T),hs(e,T,x);e.l.currentTime=n;return E(A,g,2);case 2:_(A),e.s=!1,C(A,0)}}))}function Os(e,t){return Ms(e,(function(){return Ns(e,t)}))}function Us(t,n,i,r){var a,o,s,u,l,c,d,h,f;return O((function(p){if(1==p.g){a=tn(en(t.J[n]))[0];o=t.J[n].split(";")[0];u=Jt(i.mimeType,i.codecs);l=t.G.forceTransmux;if(!nt(u)||!t.B&&nn.includes(u))l=!0;c=Qt(i.mimeType,i.codecs);l&&(d=Ht(c))&&(s=d(),u=s.convertCodecs(n,c));h=tn(en(u))[0];f=u.split(";")[0];if(a===h&&o===f)return p.return(!1);if(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType)return E(p,Ps(t,n,u,s),3);s&&s.destroy();return E(p,Os(t,r),3)}return p.return(!0)}))}var js=e.URL.createObjectURL,Bs="sequence";function Fs(e,t,n){this.i=e;this.m=t;this.B=this.j=Infinity;this.g=1;this.h=this.l=null;this.s=0;this.G=!0;this.H=0;this.C=void 0===n?!0:n;this.I=0;this.F=!1}i=Fs.prototype;i.getDuration=function(){return this.j};i.Dh=function(){return this.g};i.Kg=function(e){this.i=e};i.Ra=function(e){this.j=e};i.Hh=function(){return this.i};i.Gg=function(e){this.s=e};i.Jc=function(e){this.G=e};i.xe=function(e){this.B=e};i.Hg=function(e){this.m=e};i.sh=function(){return this.m};i.Ag=function(e,t){if(0!=e.length){var n=e[e.length-1].end+t;this.ie(e[0].start+t);this.g=e.reduce((function(e,t){return Math.max(e,t.end-t.start)}),this.g);this.h=Math.max(this.h,n);null!=this.i&&this.C&&!this.F&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}};i.sd=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.s)/1e3;e=c(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime));this.ie(t);this.h=Math.max(this.h,n);null!=this.i&&this.C&&!this.F&&(this.i=i-this.h-this.g)}};i.be=function(){this.F=!0};i.ie=function(e){this.l=null==this.l?e:Math.min(this.l,e)};i.mf=function(e){this.g=Math.max(this.g,e)};i.offset=function(e){null!=this.l&&(this.l+=e);null!=this.h&&(this.h+=e)};i.S=function(){return Infinity==this.j&&!this.G};i.hc=function(){return Infinity!=this.j&&!this.G};i.Db=function(){return Math.max(this.H,this.cc()-this.B)};i.Mg=function(e){this.H=e};i.cc=function(){return this.S()||this.hc()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.I,this.j):this.h?Math.min(this.h,this.j):this.j};i.hd=function(e){var t=Math.max(this.l,this.H);return Infinity==this.B?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.cc()-this.B+e,this.Cb()))};i.Ac=function(){return this.hd(0)};i.Cb=function(){return Math.max(0,this.cc()-(this.S()||this.hc()?this.m:0))};i.Qg=function(){return null==this.i||null!=this.h&&this.C?!1:!0};i.Fg=function(e){this.I=e};q("shaka.media.PresentationTimeline",Fs);Fs.prototype.setAvailabilityTimeOffset=Fs.prototype.Fg;Fs.prototype.usingPresentationStartTime=Fs.prototype.Qg;Fs.prototype.getSeekRangeEnd=Fs.prototype.Cb;Fs.prototype.getSeekRangeStart=Fs.prototype.Ac;Fs.prototype.getSafeSeekRangeStart=Fs.prototype.hd;Fs.prototype.getSegmentAvailabilityEnd=Fs.prototype.cc;Fs.prototype.setUserSeekStart=Fs.prototype.Mg;Fs.prototype.getSegmentAvailabilityStart=Fs.prototype.Db;Fs.prototype.isInProgress=Fs.prototype.hc;Fs.prototype.isLive=Fs.prototype.S;Fs.prototype.offset=Fs.prototype.offset;Fs.prototype.notifyMaxSegmentDuration=Fs.prototype.mf;Fs.prototype.notifyMinSegmentStartTime=Fs.prototype.ie;Fs.prototype.lockStartTime=Fs.prototype.be;Fs.prototype.notifySegments=Fs.prototype.sd;Fs.prototype.notifyTimeRange=Fs.prototype.Ag;Fs.prototype.getDelay=Fs.prototype.sh;Fs.prototype.setDelay=Fs.prototype.Hg;Fs.prototype.setSegmentAvailabilityDuration=Fs.prototype.xe;Fs.prototype.setStatic=Fs.prototype.Jc;Fs.prototype.setClockOffset=Fs.prototype.Gg;Fs.prototype.getPresentationStartTime=Fs.prototype.Hh;Fs.prototype.setDuration=Fs.prototype.Ra;Fs.prototype.setPresentationStartTime=Fs.prototype.Kg;Fs.prototype.getMaxSegmentDuration=Fs.prototype.Dh;Fs.prototype.getDuration=Fs.prototype.getDuration;function Vs(e,t,n){this.l=n;this.j=e;this.B=qs(e);this.g=e.g.currentTime;this.m=Date.now()/1e3;this.h=!1;this.s=0;this.C=t;this.i=function(){}}Vs.prototype.release=function(){this.l=this.j=null;this.i=function(){}};function Gs(e,t){e.i=t}function Hs(e){this.g=e}function qs(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;e=c(_o(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function zs(e,t,n,i,r){var a=this;this.C=r;this.g=e;this.F=t;this.B=n;this.l=new gr;this.j=!1;this.H=e.readyState;this.G=this.i=0;this.h=i;this.s=!1;this.l.o(e,"waiting",(function(){return Ks(a)}));this.m=new fn((function(){Ks(a)})).ha(this.B.gapJumpTimerTime)}zs.prototype.release=function(){this.l&&(this.l.release(),this.l=null);null!=this.m&&(this.m.stop(),this.m=null);this.h&&(this.h.release(),this.h=null);this.g=this.F=this.C=null};zs.prototype.pf=function(){this.s=!0;Ks(this)};function Ks(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.H&&(e.H=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.j,i=qs(n),r=n.g.currentTime,a=Date.now()/1e3;if(t.g!=r||t.B!=i)t.m=a,t.g=r,t.B=i,t.h=!1;r=a-t.m;if(i=r>=t.C&&i&&!t.h)t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.s++,t.l(new K("stalldetected"));t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=ko(n,t,e.B.gapDetectionThreshold),null==i||0==i&&!e.s||(r=n.start(i),r>=e.F.Cb()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,t==e.i&&(e.i=r),e.G++,e.C(new K("gapjumped")))))}}}function Xs(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Ws.value().get(t),n.wa(e,t,i))}var Ws=new wr((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Ys(e,t,n,i){var r=this;this.g=e;this.m=t;this.B=n;this.l=null;this.j=function(){null==r.l&&(r.l=i());return r.l};this.s=!1;this.h=new gr;this.i=new eu(e);Xs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){$s(r,r.j())}))}Ys.prototype.release=function(){this.h&&(this.h.release(),this.h=null);null!=this.i&&(this.i.release(),this.i=null);this.m=function(){};this.g=null};function Js(e){return e.s?e.g.currentTime:e.j()}function Qs(e,t){0<e.g.readyState?tu(e.i,t):Xs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){$s(e,e.j())}))}function $s(e,t){.001>Math.abs(e.g.currentTime-t)?Zs(e):(e.h.wa(e.g,"seeking",(function(){Zs(e)})),tu(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Zs(e){e.s=!0;e.h.o(e.g,"seeking",(function(){return e.m()}));e.B(e.g.currentTime)}function eu(e){var t=this;this.h=e;this.m=10;this.l=this.j=this.i=0;this.g=new fn((function(){0>=t.i?t.g.stop():t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}eu.prototype.release=function(){this.g&&(this.g.stop(),this.g=null);this.h=null};function tu(e,t){e.j=e.h.currentTime;e.l=t;e.i=e.m;e.h.currentTime=t;e.g.ha(.1)}function nu(e){this.g=e;this.j=!1;this.h=null;this.i=new gr}i=nu.prototype;i.Ne=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.wa(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Xs(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){e()}))};i.release=function(){this.i&&(this.i.release(),this.i=null);this.g=null};i.Oe=function(e){this.h=this.j?this.h:e};i.Jd=function(){return(this.j?this.g.currentTime:this.h)||0};i.Wf=function(){return 0};i.Vf=function(){return 0};i.zg=function(){};function iu(e,t,n,i,r,a){var o=this;this.i=e;this.g=t.presentationTimeline;this.F=t.minBufferTime||0;this.l=n;this.C=r;this.B=null;this.s=su(e,n,a);this.j=new zs(e,t.presentationTimeline,n,this.s,a);this.h=new Ys(e,(function(){e:{var e=o.j;e.j=!0;e.s=!1;var t=Js(o.h);e=au(o,t);if(.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.B||o.B<t-1)){o.B=t;Qs(o.h,e);e=void 0;break e}o.C();e=void 0}return e}),(function(e){var t=o.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)}),(function(){var e=i;null==e?e=Infinity>o.g.getDuration()?o.g.Ac():o.g.Cb():0>e&&(e=o.g.Cb()+e);return ru(o,ou(o,e))}));this.m=new fn((function(){if(0!=o.i.readyState&&!o.i.paused){var e=Js(o.h),t=o.g.Ac(),n=o.g.Cb();3>n-t&&(t=n-3);e<t&&(e=au(o,e),o.i.currentTime=e)}}))}i=iu.prototype;i.Ne=function(){this.m.ha(.25)};i.release=function(){this.h&&(this.h.release(),this.h=null);this.j&&(this.j.release(),this.j=null);this.m&&(this.m.stop(),this.m=null);this.i=this.h=this.g=this.l=null;this.C=function(){}};i.Oe=function(e){Qs(this.h,e)};i.Jd=function(){var e=Js(this.h);return 0<this.i.readyState&&!this.i.paused?ou(this,e):e};i.Wf=function(){return this.s?this.s.s:0};i.Vf=function(){return this.j.G};i.zg=function(){this.j.pf()};function ru(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function au(e,t){var n=Math.max(e.F,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Ac(),a=e.g.Cb(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.hd(n),u=e.g.hd(i);n=e.g.hd(n+i);return t>=o?ru(e,t):t>a?a:t<r?So(e.i.buffered,u)?u:n:t>=s||So(e.i.buffered,t)?t:n}function ou(e,t){var n=e.g.Ac();if(t<n)return n;e=e.g.Cb();return t>e?e:t}function su(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;t=new Vs(new Hs(e),t.stallThreshold,n);Gs(t,(function(){i?e.currentTime+=i:(e.pause(),e.play())}));return t}function uu(e){this.g=e;this.l=null;this.i=0;this.m=!1}i=uu.prototype;i.bc=function(){return this.g.length};i.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)};i.bi=function(){this.m=!0};function lu(e,t){e=c(e.g);for(var n=e.next();!n.done;n=e.next())t(n.value)}i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null};i.get=function(e){if(0==this.g.length)return null;e-=this.i;return 0>e||e>=this.g.length?null:this.g[e]};i.offset=function(e){if(!this.m)for(var t=c(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)};i.fe=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t}));this.g.push.apply(this.g,d(e))}};i.rd=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}));this.fe(e);this.ob(t)};i.ob=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e}));this.i+=t-this.g.length}};i.wc=function(e,t,n){n=void 0===n?!1:n;if(!this.m){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=t)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=e)this.g.shift(),n||this.i++;else break;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new To(e.startTime,t,e.H,e.Sa,e.za,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.G,e.g,e.status,e.B),this.g[this.g.length-1].l=e.l)}};i.Ae=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new fn((function(){var e=t();e?n.g.push.apply(n.g,d(e)):(n.l.stop(),n.l=null)})),this.l.ha(e))};uu.prototype[Symbol.iterator]=function(){return this.$b(0)};uu.prototype.$b=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var a=n.i[r];if(e>=a.startTime&&e<a.endTime){for(;r&&!a.C;)r--,a=n.i[r];if(!a.C)return J("No independent partial segment found!"),null;t++;i=r-1;break}}return new du(this,t,i)};function cu(e,t,n){return new uu([new To(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}q("shaka.media.SegmentIndex",uu);uu.forSingleSegment=cu;uu.prototype.getIteratorForTime=uu.prototype.$b;uu.prototype.updateEvery=uu.prototype.Ae;uu.prototype.fit=uu.prototype.wc;uu.prototype.evict=uu.prototype.ob;uu.prototype.mergeAndEvict=uu.prototype.rd;uu.prototype.offset=uu.prototype.offset;uu.prototype.get=uu.prototype.get;uu.prototype.find=uu.prototype.find;uu.prototype.markImmutable=uu.prototype.bi;uu.prototype.release=uu.prototype.release;function du(e,t,n){this.i=e;this.g=t;this.h=n}du.prototype.fh=function(){return this.g};du.prototype.current=function(){var e=this.i.get(this.g);e&&0<e.i.length&&e.Oa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g));return e&&0<e.i.length?e.i[this.h]:e};du.prototype.next=function(){var e=this.i.get(this.g);e&&0<e.i.length?(this.h++,e.Oa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0);e=this.current();return{value:e,done:!e}};q("shaka.media.SegmentIterator",du);du.prototype.next=du.prototype.next;du.prototype.current=du.prototype.current;du.prototype.currentPosition=du.prototype.fh;function hu(){uu.call(this,[]);this.h=[]}y(hu,uu);i=hu.prototype;i.clone=function(){var e=new hu;e.h=this.h.slice();return e};i.release=function(){for(var e=c(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]};i.find=function(e){for(var t=0,n=c(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(null!=r)return r+t;t+=i.i+i.bc()}return null};i.get=function(e){for(var t=0,n=c(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;t+=i.i+i.bc()}return null};i.offset=function(){};i.fe=function(){};i.ob=function(){};i.rd=function(){};i.wc=function(){};i.Ae=function(){};q("shaka.media.MetaSegmentIndex",hu);hu.prototype.updateEvery=hu.prototype.Ae;hu.prototype.fit=hu.prototype.wc;hu.prototype.mergeAndEvict=hu.prototype.rd;hu.prototype.evict=hu.prototype.ob;hu.prototype.merge=hu.prototype.fe;hu.prototype.offset=hu.prototype.offset;hu.prototype.get=hu.prototype.get;hu.prototype.find=hu.prototype.find;hu.prototype.release=hu.prototype.release;function fu(e){var t=this;this.g=e;this.j=!1;this.i=this.g.Wd();this.h=new fn((function(){t.g.yg(.25*t.i)}))}fu.prototype.release=function(){this.h&&(this.h.stop(),this.h=null);this.g=null};fu.prototype.set=function(e){this.i=e;pu(this)};fu.prototype.Sd=function(){return this.g.Sd()};function pu(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Wd()!=t&&e.g.Df(t);return}catch(e){}e.h.ha(.25);0!=e.g.Wd()&&e.g.Df(0)}function gu(e){var t=this;this.h=e;this.g=new Set;this.i=new fn((function(){mu(t,!1)})).ha(.25)}gu.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function mu(e,t){for(var n=c(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function vu(e){ae.call(this);this.g=new Map;this.h=e}y(vu,ae);vu.prototype.release=function(){this.g.clear();ae.prototype.release.call(this)};function yu(e,t){var n=e.g.get(t);n||(n={ud:[],gg:null,contentType:t},e.g.set(t,n));return n}function bu(e,t,n){var i=yu(e,t.contentType);wu(e,i);e={jf:t,position:n};i=i.ud;t=i.findIndex((function(e){return e.position>=n}));0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}vu.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{var i=n.ud;for(var r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.jf;break e}}i=null}if(r=i)r=n.gg,r=!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width);if(r)e:{r=e;a=i.contentType;if((a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(r>=a[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.gg=i,JSON.stringify(i),n=new K("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function wu(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.ud;t.ud=r.filter((function(e,t){return e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i?!1:!0}))}else t.ud=[]}function Tu(e){ae.call(this);var t=this;this.g=new Set;this.i=e;this.h=new fn((function(){for(var e=t.i(),n=c(t.g),i=n.next();!i.done;i=n.next())i=i.value,i.endTime<e.start&&(t.g.delete(i),i=new K("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).ha(2)}y(Tu,ae);Tu.prototype.release=function(){this.g.clear();this.h.stop();ae.prototype.release.call(this)};function Eu(e,t){ae.call(this);var n=this;this.i=e;this.l=t;this.g=new Map;this.m=[{sc:null,rc:Su,fc:function(e,t){return xu(n,"enter",e,t)}},{sc:Au,rc:Su,fc:function(e,t){return xu(n,"enter",e,t)}},{sc:Iu,rc:Su,fc:function(e,t){return xu(n,"enter",e,t)}},{sc:Su,rc:Au,fc:function(e,t){return xu(n,"exit",e,t)}},{sc:Su,rc:Iu,fc:function(e,t){return xu(n,"exit",e,t)}},{sc:Au,rc:Iu,fc:function(e,t){return xu(n,"skip",e,t)}},{sc:Iu,rc:Au,fc:function(e,t){return xu(n,"skip",e,t)}}];this.h=new gr;this.h.o(this.i,"regionremove",(function(e){n.g.delete(e.region)}))}y(Eu,ae);Eu.prototype.release=function(){this.i=null;this.g.clear();this.h.release();this.h=null;ae.prototype.release.call(this)};Eu.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=c(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?Au:e>i.endTime?Iu:Su;this.g.set(i,a);for(var o=c(this.m),s=o.next();!s.done;s=o.next())s=s.value,s.sc==r&&s.rc==a&&s.fc(i,t)}}};function xu(e,t,n,i){t=new K(t,new Map([["region",n],["seeking",i]]));e.dispatchEvent(t)}var Au=1,Su=2,Iu=3;function ku(e,t,n){this.j=e;this.h=t;this.i=0;this.l=n;this.g=new Map}function _u(e,t){if(e.h.segmentIndex){var n=e.h.segmentIndex.$b(Math.max(t.startTime,e.i));if(n)for(;e.g.size<e.j&&null!=t;){var i=!0;t.m&&null!=t.za&&(i=!1);2==t.dc()&&(i=!1);i&&!e.g.has(t)&&(i=new Ru(e.l),Lu(i,t,e.h),e.g.set(t,i));e.i=t.startTime;t=n.next().value}}}function Cu(e){if(0!==e.g.size){for(var t=c(e.g.keys()),n=t.next();!n.done;n=t.next())(n=n.value)&&Du(e,n);e.i=0}}function Mu(e,t){t&&t!==e.h&&(Cu(e),e.h=t)}function Du(e,t){var n=e.g.get(t);e.g.delete(t);n&&n.abort()}function Ru(e){this.i=e;this.g=this.h=null}function Lu(e,t,n){e.g=e.i(t,n,(function(t){return O((function(n){return e.h?E(n,e.h(t),0):n.D(0)}))}))}Ru.prototype.abort=function(){this.g&&this.g.abort()};function Pu(e,t,n,i,r){e=rr(e,i,r);if(0!=t||null!=n)e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-";return e}function Nu(e,t){var n=this;this.g=t;this.m=e;this.i=null;this.C=1;this.s=this.j=null;this.H=0;this.G=!1;this.h=new Map;this.F=!1;this.I=null;this.B=!1;this.l=new fr((function(){return Ou(n)}))}i=Nu.prototype;i.destroy=function(){return this.l.destroy()};function Ou(e){var t,n,i,r;return O((function(a){if(1==a.g){t=[];n=c(e.h.values());for(i=n.next();!i.done;i=n.next())r=i.value,ll(r),t.push(cl(r));return E(a,Promise.all(t),2)}e.h.clear();e.g=null;e.m=null;e.i=null;x(a)}))}i.configure=function(e){this.i=e;this.I=new Vi({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=c(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=this.h.get(n.value),n.Qa){var i=n.Qa,r=e.segmentPrefetchLimit;i.j=r;for(var a=Array.from(i.g.keys());a.length>r;){var o=a.pop();o&&Du(i,o)}0<e.segmentPrefetchLimit||(n.Qa=null)}else 0<e.segmentPrefetchLimit&&(n.Qa=Xu(this,n.stream))};i.start=function(){var e=this;return O((function(t){if(1==t.g)return E(t,zu(e),2);pr(e.l);e.F=!0;x(t)}))};function Uu(e,t){var n,i,r,a,o,s,u;O((function(l){switch(l.g){case 1:return n=Ne,e.H++,i=e.H,A(l,2),E(l,xs(e.g.W,n.na),4);case 4:I(l,3);break;case 2:if(r=k(l),e.g)e.g.onError(r);case 3:a=Jt(t.mimeType,t.codecs),fs(e.g.W,a,e.m.sequenceMode,t.external),o=e.g.W.C,(s=o.isTextVisible()||e.i.alwaysStreamText)&&e.H==i&&(u=Ku(e,t),e.h.set(n.na,u),ul(e,u,0)),x(l)}}))}function ju(e){var t=e.h.get(Pe);t&&(ll(t),cl(t).catch((function(){})),e.h.delete(Pe));e.s=null}function Bu(e,t){var n=e.h.get("video");if(n){var i=n.stream;if(i)if(t)(t=i.trickModeVideo)&&!n.pc&&(Gu(e,t,!1,0,!1),n.pc=i);else if(i=n.pc)n.pc=null,Gu(e,i,!0,0,!1)}}function Fu(e,t,n,i,r,a){n=void 0===n?!1:n;i=void 0===i?0:i;r=void 0===r?!1:r;a=void 0===a?!1:a;e.j=t;e.F&&(t.video&&Gu(e,t.video,n,i,r,a),t.audio&&Gu(e,t.audio,n,i,r,a))}function Vu(e,t){O((function(n){if(1==n.g)return e.s=t,e.F?t.segmentIndex?n.D(2):E(n,t.createSegmentIndex(),2):n.return();Gu(e,t,!0,0,!1);x(n)}))}function Gu(e,t,n,i,r,a){var o=e.h.get(t.type);o||t.type!=Pe?o&&(o.pc&&(t.trickModeVideo?(o.pc=t,t=t.trickModeVideo):o.pc=null),o.stream!=t||r)&&(o.Qa&&Mu(o.Qa,t),t.type==Pe&&(r=Jt(t.mimeType,t.codecs),fs(e.g.W,r,e.m.sequenceMode,t.external)),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.ba=null,o.Xf=!!a,n&&(o.bd?o.Be=!0:o.Ma?(o.Wb=!0,o.Pd=i,o.Be=!0):(ll(o),sl(e,o,!0,i).catch((function(t){if(e.g)e.g.onError(t)})))),Hu(e,o).catch((function(t){if(e.g)e.g.onError(t)}))):Uu(e,t)}function Hu(e,t){var n,i;return O((function(r){if(1==r.g){if(!t.Pa)return r.return();n=t.stream;i=t.Pa;return n.segmentIndex?r.D(2):E(r,n.createSegmentIndex(),2)}if(t.Pa!=i||t.stream!=n)return r.return();var a=e.g.Vd();var o=ms(e.g.W,t.type),s=t.stream.segmentIndex.find(t.Ka?t.Ka.endTime:a),u=null==s?null:t.stream.segmentIndex.get(s);s=u?u.za?u.za-u.Sa:null:null;u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8);s?((u=u.h)&&(s+=(u.za?u.za-u.Sa:null)||0),u=e.g.getBandwidthEstimate(),a=8*s/u<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.Pa.h.g>s?!0:!1):a=!1;a&&t.Pa.abort();x(r)}))}i.xd=function(){if(this.g)for(var e=this.g.Vd(),t=c(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r=null;n.ba&&(r=n.ba.current());if(!r||r.startTime>e||r.endTime<e)n.ba=null;r=this.g.W;r.s?r=!1:i==Pe?(r=r.g,r=null==r.g||null==r.h?!1:e>=r.g&&e<r.h):(r=ys(r,i),r=So(r,e));r||((null!=ms(this.g.W,i)||n.Ma)&&qu(this,n),n.Pa&&(n.Pa.abort(),n.Pa=null),i===Pe&&(i=this.g.W,i.H&&i.H.i()),n.xd=!0)}};function qu(e,t){t.bd||t.Wb||(t.Ma?(t.Wb=!0,t.Pd=0):null==gs(e.g.W,t.type)?null==t.ub&&ul(e,t,0):(ll(t),sl(e,t,!1,0).catch((function(t){if(e.g)e.g.onError(t)}))))}function zu(e){var t,n,i,r,a,o,s,u,l;return O((function(d){if(1==d.g){t=Ne;if(!e.j)throw new Se(2,5,5006);n=new Map;i=new Set;e.j.audio&&(n.set(t.Ob,e.j.audio),i.add(e.j.audio));e.j.video&&(n.set(t.Na,e.j.video),i.add(e.j.video));e.s&&(n.set(t.na,e.s),i.add(e.s));r=e.g.W;return E(d,r.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}pr(e.l);e.updateDuration();a=c(n.keys());for(o=a.next();!o.done;o=a.next())s=o.value,u=n.get(s),e.h.has(s)||(l=Ku(e,u),e.h.set(s,l),ul(e,l,0));x(d)}))}function Ku(e,t){return{stream:t,type:t.type,ba:null,Qa:Xu(e,t),Ka:null,Ec:null,ef:null,cf:null,bf:null,pc:null,endOfStream:!1,Ma:!1,ub:null,Wb:!1,Pd:0,Be:!1,bd:!1,xd:!0,lf:!1,tf:!1,md:!1,Pa:null}}function Xu(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.i.segmentPrefetchLimit?new ku(e.i.segmentPrefetchLimit,t,(function(t,n,i){return ol(e,t,n,i)})):null}i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();Infinity>e?this.g.W.Ra(e):this.g.W.Ra(Math.pow(2,32))};function Wu(e,t){var n,i,r,a,o;return O((function(s){switch(s.g){case 1:pr(e.l);if(t.Ma||null==t.ub||t.bd)return s.return();t.ub=null;if(!t.Wb){s.D(2);break}return E(s,sl(e,t,t.Be,t.Pd),3);case 3:return s.return();case 2:if(t.stream.segmentIndex){s.D(4);break}n=t.stream;return E(s,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Ma||t.ub||ul(e,t,0),s.return();case 4:A(s,6);i=Yu(e,t);null!=i&&(ul(e,t,i),t.md=!1);I(s,7);break;case 6:return r=k(s),E(s,dl(e,t,r),8);case 8:return s.return();case 7:a=Array.from(e.h.values());if(!e.F||!a.every((function(e){return e.endOfStream}))){s.D(0);break}return E(s,e.g.W.endOfStream(),10);case 10:pr(e.l),o=e.g.W.getDuration(),0!=o&&o<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Ra(o),x(s)}}))}function Yu(e,t){if(rl(t))return Ts(e.g.W,t.stream.originalId||""),null;t.type==Pe&&Es(e.g.W);var n=e.g.Vd(),i=t.Ka?t.Ka.endTime:n,r=vs(e.g.W,t.type,n),a=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.C,o=e.m.presentationTimeline.getDuration()-i,s=ms(e.g.W,t.type);if(1e-6>o&&s)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(Pe))&&rl(e)&&(e.endOfStream=!0),null;t.endOfStream=!1;if(r>=a)return e.i.updateIntervalSeconds/2;r=Ju(e,t,n,s);if(!r)return e.i.updateIntervalSeconds;a=Infinity;o=Array.from(e.h.values());o=c(o);for(s=o.next();!s.done;s=o.next())s=s.value,rl(s)||s.ba&&!s.ba.current()||(a=Math.min(a,s.Ka?s.Ka.endTime:n));if(i>=a+e.m.presentationTimeline.g)return e.i.updateIntervalSeconds;t.Qa&&t.ba&&_u(t.Qa,r);Qu(e,t,n,r).catch((function(){}));return null}function Ju(e,t,n,i){if(t.ba)return t.ba.current();if(t.Ka||i)return n=t.Ka?t.Ka.endTime:i,t.lf=!0,t.ba=t.stream.segmentIndex.$b(n),t.ba&&t.ba.next().value;e=e.i.inaccurateManifestTolerance;i=Math.max(n-e,0);var r=null;e&&(t.ba=t.stream.segmentIndex.$b(i),r=t.ba&&t.ba.next().value);r||(t.ba=t.stream.segmentIndex.$b(n),r=t.ba&&t.ba.next().value);return r}function Qu(t,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:a=Ne;o=n.stream;s=n.ba;n.Ma=!0;A(w,2);if(2==r.dc())throw new Se(1,1,1011);return E(w,tl(t,n,r),4);case 4:pr(t.l);if(t.B)return w.return();u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType;l=e.ReadableStream;if(t.i.lowLatencyMode&&l&&u&&("HLS"!=t.m.type||r.s))return h=new Uint8Array(0),p=f=!1,g=function(e){var a,s,u;return O((function(l){if(f)return l.return();p=!0;pr(t.l);if(t.B)return l.return();h=Zu(h,e);a=!1;s=0;(new Pr).box("mdat",(function(e){s=e.size+e.start;a=!0})).parse(h,!1,!0);if(!a)return l.D(0);u=h.subarray(0,s);h=h.subarray(s);return E(l,nl(t,n,i,o,r,u),0)}))},E(w,al(t,n,r,g),9);c=al(t,n,r);return E(w,c,7);case 7:d=w.h;pr(t.l);if(t.B)return w.return();pr(t.l);return n.Wb?(n.Ma=!1,ul(t,n,0),w.return()):E(w,nl(t,n,i,o,r,d),6);case 9:m=w.h;if(p){w.D(6);break}f=!0;pr(t.l);return t.B?w.return():n.Wb?(n.Ma=!1,ul(t,n,0),w.return()):E(w,nl(t,n,i,o,r,m),6);case 6:pr(t.l);if(t.B)return w.return();n.Ka=r;s.next();n.Ma=!1;n.tf=!1;v=t.g.W.Bb();y=v[n.type];te(JSON.stringify(y));n.Wb||t.g.pf(r.startTime,r.endTime,n.type);ul(t,n,0);I(w,0);break;case 2:b=k(w);pr(t.l,b);if(t.B)return w.return();n.Ma=!1;if(7001==b.code)n.Ma=!1,ll(n),ul(t,n,0),w.D(0);else if(n.type==a.na&&t.i.ignoreTextStreamFailures)t.h.delete(a.na),w.D(0);else if(3017==b.code)el(t,n,b),w.D(0);else return n.md=!0,b.severity=2,E(w,dl(t,n,b),0)}}))}function $u(t,n,i){var r,a,o,s;return O((function(u){if(1==u.g)return r=n,r.cryptoKey?u.D(2):E(u,r.fetchKey(),3);a=r.iv;if(!a)for(a=ct(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i.g,s=a.byteLength-1;0<=s;s--)a[s]=o&255,o>>=8;return u.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))}))}function Zu(e,t){var n=new Uint8Array(e.length+t.length);n.set(e);n.set(t,e.length);return n}function el(e,t,n){if(!Array.from(e.h.values()).some((function(e){return e!=t&&e.tf}))){var i=Math.round(100*e.C);if(20<i)e.C-=.2;else if(4<i)e.C-=.04;else{t.md=!0;e.B=!0;e.g.onError(n);return}t.tf=!0}ul(e,t,4)}function tl(e,t,n){var i,r,a,o,s,u,l,c,d,h,f,p,g;return O((function(m){i=Ne;r=[];a=Math.max(0,n.appendWindowStart-.1);o=n.appendWindowEnd+.01;s=tn(t.stream.codecs)[0];u=t.stream.mimeType.split(";")[0];l=n.timestampOffset;if(l!=t.ef||a!=t.cf||o!=t.bf||s!=t.ae||u!=t.df){if(t.ae&&s!=t.ae||t.df&&u!=t.df)if(t.type===i.Na){if(c=e.h.get(i.Ob))c.Ec=null,cl(c)}else t.type===i.Ob&&(d=e.h.get(i.Na))&&(d.Ec=null,cl(d));h=function(){var n,r,c;return O((function(d){if(1==d.g)return n=new Map,e.j.audio&&n.set(i.Ob,e.j.audio),e.j.video&&n.set(i.Na,e.j.video),A(d,2),t.cf=a,t.bf=o,t.ae=s,t.df=u,t.ef=l,r=e.m.sequenceMode||"HLS"==e.m.type,E(d,As(e.g.W,t.type,l,a,o,r,t.stream,n),4);if(2!=d.g)return I(d,0);c=k(d);t.cf=null;t.bf=null;t.ae=null;t.ef=null;throw c}))};r.push(h())}!wo(n.h,t.Ec)&&(t.Ec=n.h)&&(f=al(e,t,n.h,void 0,!0),p=function(){var r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return A(c,2),E(c,f,4);case 4:return r=c.h,pr(e.l),a=null,o=new Map,s=new Pr,s.box("moov",Nr).box("trak",Nr).box("mdia",Nr).T("mdhd",(function(e){a=jo(e.reader,e.version).timescale})).box("hdlr",(function(e){e=e.reader;e.skip(8);e=e.Ib(4);var t=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);switch(t){case"soun":o.set(i.Ob,a);break;case"vide":o.set(i.Na,a)}a=null})).parse(r),o.has(t.type)?n.h.timescale=o.get(t.type):null!=a&&(n.h.timescale=a),u=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(c,e.g.Zf(t.type,r),5);case 5:return E(c,ws(e.g.W,t.type,r,null,t.stream,u),6);case 6:I(c,0);break;case 2:throw l=k(c),t.Ec=null,l}}))},e.g.ei(n.startTime,n.h),r.push(p()));e.m.sequenceMode&&(g=t.Ka?t.Ka.l:null,n.l!=g||t.lf)&&(t.lf=!1,r.push(Ss(e.g.W,t.type,n.startTime)));return E(m,Promise.all(r),0)}))}function nl(e,t,n,i,r,a){var o,s,u,l,c,d;return O((function(h){switch(h.g){case 1:o=i.closedCaptions&&0<i.closedCaptions.size;u=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes;l=e.i.parsePrftBox&&!e.G;if(u||l)s=new Pr;u&&s.T("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version){var a=t.reader.vd();var o=t.reader.vd();var s=t.reader.N();var u=t.reader.N();var l=t.reader.N();var c=t.reader.N();var d=r.startTime+u/s}else s=t.reader.N(),d=t.reader.Ic()/s+r.timestampOffset,u=d-r.startTime,l=t.reader.N(),c=t.reader.N(),a=t.reader.vd(),o=t.reader.vd();t=t.reader.Ib(t.reader.getLength()-t.reader.ra());if(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)"urn:mpeg:dash:event:2012"==a?e.g.gi():(n=(new Map).set("detail",{startTime:d,endTime:d+l/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}),n=new K("emsg",n),n.cancelable=!0,e.g.onEvent(n),n.defaultPrevented||"https://aomedia.org/emsg/ID3"!=a&&"https://developer.apple.com/streaming/emsg-id3"!=a||(a=Po(t),a.length&&r&&e.g.ii([{cueTime:r.startTime,data:t,frames:a,dts:r.startTime,pts:r.startTime}],0,r.endTime)))}));l&&s.T("prft",(function(t){if(!e.G&&r.h.timescale){var n=t.reader,i=t.version;n.N();t=n.N();var a=n.N();t=1e3*t+a/Math.pow(2,32)*1e3;0===i?n=n.N():(i=n.N(),n=n.N(),n=i*Math.pow(2,32)+n);t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime();n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/r.h.timescale*1e3)});n=new K("prft",n);e.g.onEvent(n);e.G=!0}}));(u||l)&&s.parse(a);return E(h,il(e,t,n),2);case 2:return pr(e.l),c=t.xd,t.xd=!1,d=t.Xf,t.Xf=!1,E(h,e.g.Zf(t.type,a),3);case 3:return E(h,ws(e.g.W,t.type,a,r,i,o,c,d),4);case 4:pr(e.l),x(h)}}))}function il(e,t,n){var i,r,a,o;return O((function(s){if(1==s.g){i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g);r=gs(e.g.W,t.type);if(null==r)return s.return();a=n-r;o=a-i;return.01>=o?s.return():E(s,e.g.W.remove(t.type,r,r+o),2)}pr(e.l);x(s)}))}function rl(e){return e&&e.type==Pe&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function al(e,t,n,i,r){var a,o,s,u,l;return O((function(c){switch(c.g){case 1:if(n instanceof bo&&(a=n.g))return c.return(a);o=null;if(t.Qa&&n instanceof To){var d=t.Qa;if(d.g.has(n)){var h=d.g.get(n);i&&(h.h=i);d.g.delete(n);o=h.g}else o=null}o||(o=ol(e,n,t.stream,i,r));t.Pa=o;return E(c,o.promise,2);case 2:s=c.h;t.Pa=null;u=s.data;if(!n.B){c.D(3);break}l=t.ba;return E(c,$u(u,n.B,l),4);case 4:u=c.h;case 3:return c.return(u)}}))}function ol(e,t,n,i,r){r=r?0:1;var a=t instanceof To?t:void 0;t=Pu(t.Oa(),t.Sa,t.za,e.i.retryParameters,i);return e.g.lc.request(cr,t,{type:r,stream:n,segment:a})}function sl(e,t,n,i){var r,a;return O((function(o){if(1==o.g)return t.Wb=!1,t.Be=!1,t.Pd=0,t.bd=!0,t.Ka=null,t.Ec=null,t.ba=null,t.Qa&&Cu(t.Qa),i?(r=e.g.Vd(),a=e.g.W.getDuration(),E(o,e.g.W.remove(t.type,r+i,a),3)):E(o,xs(e.g.W,t.type),4);if(3!=o.g)return pr(e.l),n?E(o,e.g.W.flush(t.type),3):o.D(3);pr(e.l);t.bd=!1;t.endOfStream=!1;t.Ma||t.ub||ul(e,t,0);x(o)}))}function ul(e,t,n){var i=t.type;if(i!=Pe||e.h.has(i))t.ub=new hn((function(){var n;return O((function(i){if(1==i.g)return A(i,2),E(i,Wu(e,t),4);if(2!=i.g)return I(i,0);n=k(i);if(e.g)e.g.onError(n);x(i)}))})).R(n)}function ll(e){null!=e.ub&&(e.ub.stop(),e.ub=null)}function cl(e){return O((function(t){return e.Pa?E(t,e.Pa.abort(),0):t.D(0)}))}function dl(e,t,n){var i;return O((function(r){if(1==r.g)return E(r,Gi(e.I),2);pr(e.l);i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime;1===n.category&&0<i&&(n.handled=e.g.Re(t.stream,i),n.handled&&(n.severity=1));e.g.onError(n);n.handled||e.i.failureCallback(n);x(r)}))}function hl(e,t){var n=Gd(),i=this;this.j=t;this.i=e;this.l=n;this.s=null;this.m=[];this.h=this.g=null;this.C=Promise.resolve().then((function(){return gl(i)}));this.B=new fr((function(){return fl(i)}))}hl.prototype.destroy=function(){return this.B.destroy()};function fl(e){var t,n,i;return O((function(r){if(1==r.g)return e.h&&e.h.abort(),vl(e),E(r,e.C,2);e.g&&e.g.rb.nc();t=c(e.m);for(n=t.next();!n.done;n=t.next())i=n.value,i.rb.nc();e.g=null;e.m=[];e.j=null;x(r)}))}function pl(e,t){var n={Gc:function(){},le:function(){},nc:function(){},onError:function(){},oe:function(){},gk:function(){}};e.m.push({create:t,rb:n});e.h&&e.h.abort();vl(e);return n}function gl(e){return O((function(t){if(e.B.g)t=t.D(0);else{if(0==e.m.length||e.g&&!e.g.ec)var n=!1;else{e.g&&(e.g.rb.nc(),e.g=null);n=e.m.shift();var i=n.create(e.l);i?(n.rb.Gc(),e.g={node:i.node,payload:i.payload,ec:i.ec,rb:n.rb}):n.rb.oe();n=!0}n?n=Promise.resolve():e.g?n=ml(e):(e.j.di(e.i),e.s=new qi,n=e.s);t=E(t,n,1)}return t}))}function ml(e){var t,n;return O((function(i){switch(i.g){case 1:return e.i=e.j.Fh(e.i,e.l,e.g.node,e.g.payload),A(i,2),e.h=e.j.ih(e.i,e.l,e.g.payload),E(i,e.h.promise,4);case 4:e.h=null;e.i==e.g.node&&(e.g.rb.le(),e.g=null);I(i,0);break;case 2:t=k(i);if(7001==t.code)e.g.rb.nc();else e.g.rb.onError(t);e.g=null;e.h=null;n=e;return E(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,x(i)}}))}function vl(e){e.s&&(e.s.resolve(),e.s=null)}function yl(e){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(yl).join("");var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");n&&t.push(["b"]);i&&t.push(["i"]);r&&t.push(["u"]);n="";(i=bl(e.color))&&(n+="."+i);(i=bl(e.backgroundColor))&&(n+=".bg_"+i);n&&t.push(["c",n]);return t.reduceRight((function(e,t){var n=c(t);t=n.next().value;n=n.next().value;return"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"}),e.payload)}function bl(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function wl(e,t){e=c(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.isContainer)wl(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[];i.payload=yl(n);t.push(i)}return t}function Tl(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())n=n.value,n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack"));this.g.mode="hidden"}i=Tl.prototype;i.remove=function(e,t){if(!this.g)return!1;xl(this.g,(function(n){return n.startTime<t&&n.endTime>e}));return!0};i.append=function(e){var t=wl(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=c(t);for(var r=t.next();!r.done;i={tc:i.tc},r=t.next())i.tc=r.value,e.some(function(e){return function(t){return t.startTime==e.tc.startTime&&t.endTime==e.tc.endTime&&t.text==e.tc.payload?!0:!1}}(i))||(r=El(i.tc))&&n.push(r);e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}));e=c(e);for(i=e.next();!i.done;i=e.next())this.g.addCue(i.value)};i.destroy=function(){this.g&&(xl(this.g,(function(){return!0})),this.g.mode="disabled");this.g=null;return Promise.resolve()};i.isTextVisible=function(){return"showing"==this.g.mode};i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function El(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign;t.positionAlign=e.positionAlign;e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}"center"==e.textAlign&&"center"!=t.align&&(t.align="middle");"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl");1==e.lineInterpretation&&(t.snapToLines=!1);null!=e.line&&(t.line=e.line);null!=e.position&&(t.position=e.position);return t}function xl(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=c(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}q("shaka.text.SimpleTextDisplayer",Tl);Tl.prototype.setTextVisibility=Tl.prototype.setTextVisibility;Tl.prototype.isTextVisible=Tl.prototype.isTextVisible;Tl.prototype.destroy=Tl.prototype.destroy;Tl.prototype.append=Tl.prototype.append;Tl.prototype.remove=Tl.prototype.remove;function Al(){}function Sl(e){return document.createElement(e)}function Il(){var e=document.createElement("button");e.setAttribute("type","button");return e}function kl(e){for(;e.firstChild;)e.removeChild(e.firstChild)}q("shaka.util.Dom",Al);Al.removeAllChildren=kl;function _l(t,n){var i=this;this.j=!1;this.i=[];this.F=t;this.m=n;this.g=Sl("div");this.g.classList.add("shaka-text-container");this.g.style.textAlign="center";this.g.style.display="flex";this.g.style.flexDirection="column";this.g.style.alignItems="center";this.g.style.justifyContent="flex-end";this.m.appendChild(this.g);this.C=new fn((function(){Dl(i)})).ha(.25);this.h=new Map;this.B=new gr;this.B.o(document,"fullscreenchange",(function(){Dl(i,!0)}));this.l=null;"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Dl(i,!0)})),this.l.observe(this.g));this.s=new Map}i=_l.prototype;i.append=function(e){var t=[].concat(d(this.i)),n={};e=c(e);for(var i=e.next();!i.done;n={Dd:n.Dd},i=e.next())n.Dd=i.value,t.some(function(e){return function(t){return Et(t,e.Dd)}}(n))||this.i.push(n.Dd);Dl(this)};i.destroy=function(){this.m.removeChild(this.g);this.g=null;this.j=!1;this.i=[];this.C&&this.C.stop();this.h.clear();this.B&&(this.B.release(),this.B=null);this.l&&(this.l.disconnect(),this.l=null)};i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t}));Dl(this,n>this.i.length);return!0};i.isTextVisible=function(){return this.j};i.setTextVisibility=function(e){this.j=e};function Cl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Ml(e,t,n,i,r){var a=!1,o=[],s=[];t=c(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;r.push(u);var l=e.h.get(u),d=u.startTime<=i&&u.endTime>i,h=l?l.Rg:null;l&&(o.push(l.Qe),l.wd&&o.push(l.wd),d||(a=!0,e.h.delete(u),l=null));d&&(s.push(u),l?Cl(e,h)||(a=!0):(Rl(e,u,r),l=e.h.get(u),h=l.Rg,a=!0));0<u.nestedCues.length&&h&&Ml(e,u.nestedCues,h,i,r);r.pop()}if(a){i=c(o);for(r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}));s=c(s);for(u=s.next();!u.done;u=s.next())i=e.h.get(u.value),i.wd?(n.appendChild(i.wd),i.wd.appendChild(i.Qe)):n.appendChild(i.Qe)}}function Dl(e,t){if(e.g){var n=e.F.currentTime;if(!e.j||(void 0===t?0:t)){t=c(e.s.values());for(var i=t.next();!i.done;i=t.next())kl(i.value);kl(e.g);e.h.clear();e.s.clear()}if(e.j){t=new Map;i=c(e.h.keys());for(var r=i.next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));Ml(e,e.i,e.g,n,[])}}}function Rl(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br");i=!i&&0<t.nestedCues.length;var a=Sl(r);"br"!=r&&Pl(e,a,t,n,i);n=null;if(t.region&&t.region.id)if(n=t.region,r=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==Bt?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Bt?"%":"px"),e.s.has(r))n=e.s.get(r);else{var o=Sl("span"),s=n.heightUnits==Bt?"%":"px",u=n.widthUnits==Bt?"%":"px",l=n.viewportAnchorUnits==Bt?"%":"px";o.id="shaka-text-region---"+r;o.classList.add("shaka-text-region");o.style.height=n.height+s;o.style.width=n.width+u;o.style.position="absolute";o.style.top=n.viewportAnchorY+l;o.style.left=n.viewportAnchorX+l;o.style.display="flex";o.style.flexDirection="column";o.style.alignItems="center";o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end";e.s.set(r,o);n=o}r=a;i&&(r=Sl("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",a.appendChild(r));e.h.set(t,{Qe:a,Rg:r,wd:n})}function Ll(e){var t=e.direction,n=e.positionAlign;e=e.textAlign;return n!==xt?n:"left"===e||"start"===e&&t===_t||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===_t?"line-right":"center"}function Pl(e,t,n,i,r){var a=t.style,o=0==n.nestedCues.length,s=1<i.length;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,(function(e){return"".repeat(e.length)}));a.webkitTextStrokeColor=n.textStrokeColor;a.webkitTextStrokeWidth=n.textStrokeWidth;a.color=n.color;a.direction=n.direction;a.opacity=n.opacity;a.paddingLeft=Nl(n.linePadding,n,e.m);a.paddingRight=Nl(n.linePadding,n,e.m);a.textShadow=n.textShadow;if(n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=Sl("span"),t.appendChild(l);n.border&&(l.style.border=n.border);r||((t=Ol(i,(function(e){return e.backgroundColor})))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"));u&&(l.textContent=u)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end");o||(a.margin="0");a.fontFamily=n.fontFamily;a.fontWeight=n.fontWeight.toString();a.fontStyle=n.fontStyle;a.letterSpacing=n.letterSpacing;a.fontSize=Nl(n.fontSize,n,e.m);null!=n.line&&(e=n.lineInterpretation,0==n.line&&e==Mt&&(e=1),1==e&&(a.position="absolute",n.writingMode==Ct?(a.width="100%",n.lineAlign==Dt?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==Dt?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==Dt?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))));a.lineHeight=n.lineHeight;null!=n.position&&(n.writingMode==Ct?a.paddingLeft=n.position:a.paddingTop=n.position);e=Ll(n);"line-left"==e?a.cssFloat="left":"line-right"==e&&(a.cssFloat="right");a.textAlign=n.textAlign;a.textDecoration=n.textDecoration.join(" ");a.writingMode=n.writingMode;"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode);n.size&&(n.writingMode==Ct?a.width=n.size+"%":a.height=n.size+"%")}function Nl(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function Ol(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}q("shaka.text.UITextDisplayer",_l);_l.prototype.setTextVisibility=_l.prototype.setTextVisibility;_l.prototype.isTextVisible=_l.prototype.isTextVisible;_l.prototype.remove=_l.prototype.remove;_l.prototype.destroy=_l.prototype.destroy;_l.prototype.append=_l.prototype.append;function Ul(e,t){function n(e){for(var n=e,i=c(t),r=i.next();!r.done;r=i.next())r=r.value,r.end&&r.start<e&&(n+=r.end-r.start);e=Math.floor(n/3600);i=Math.floor(n/60%60);r=Math.floor(n%60);n=Math.floor(1e3*n%1e3);return(10>e?"0":"")+e+":"+(10>i?"0":"")+i+":"+(10>r?"0":"")+r+"."+(100>n?10>n?"00":"0":"")+n}var i=wl(e,[]);e="WEBVTT\n\n";i=c(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case At:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}q("shaka.text.WebVttGenerator",(function(){}));function jl(e,t){this.h=e;this.g=t;this.j="";this.s=void 0;this.i=!1;this.m=!0;this.l=!1}jl.prototype.configure=function(e){this.g=e};function Bl(e,t,n){try{if(!e.g.enabled)return t;var i=Fl(e);e:{switch(n.toLowerCase()){case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":var r=Ql;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":r=Wl;break e}r=void 0}i.ot=r;i.su=!0;var a=zl(i);return Xl(t,a)}catch(e){return $("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function Fl(t){t.j||(t.j=t.g.sessionId||e.crypto.randomUUID());return{v:1,sf:t.s,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Vl(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,Fl(e));n.pr=e.h.Rb();var r=n.ot===Jl||n.ot===Ql;e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1);null==n.su&&(n.su=e.m);if(i)e=Kl(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=zl(n);a&&(t.uris=t.uris.map((function(e){return Xl(e,a)})))}}}function Gl(e){if(0===e.type)return $l;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Ql:Jl;if("audio"==t)return Yl;if("text"==t)return"application/mp4"===e.mimeType?ec:Zl}}function Hl(e,t){t=e.h.Bb()[t];if(!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}function ql(e,t){var n=e.h.Va();if(!n.length)return NaN;e=n[0];n=c(n);for(var i=n.next();!i.done;i=n.next())i=i.value,"variant"===i.type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Jl:return e.videoBandwidth||NaN;case Yl:return e.audioBandwidth||NaN;default:return e.bandwidth}}function zl(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort();o=c(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(i(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var l=a[s];l&&(u=l(u));l=typeof u;var d=void 0;d="string"===l&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===l?s:"symbol"===l?s+"="+u.description:s+"="+u;r.push(d)}}return r.join(",")}function Kl(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=c(t);for(var o=t.next();!o.done;o=t.next())o=o.value,r[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=zl(r[e]))&&(n["CMCD-"+i[e]]=a);return n}function Xl(e,t){if(!t||e.includes("offline:"))return e;e=new de(e);e.g.set("CMCD",t);return e.toString()}var Wl="m",Yl="a",Jl="v",Ql="av",$l="i",Zl="c",ec="tt";q("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Jj:"s",OTHER:"o"});function tc(){}function nc(e,t,n,i,r){var a=r in i,o=!0,s;for(s in t){var u=r+"."+s,l=a?i[r]:n[s];a||s in n?void 0===t[s]?void 0===l||a?delete e[s]:e[s]=$i(l):l.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=$i(l)),u=nc(e[s],t[s],l,i,u),o=o&&u):typeof t[s]!=typeof l||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=l.constructor?(J("Invalid config, wrong type for "+u),o=!1):("function"==typeof n[s]&&n[s].length!=t[s].length&&Q("Unexpected number of arguments for "+u),e[s]=t[s]):(J("Invalid config, unrecognized key "+u),o=!1)}return o}function ic(e,t){for(var n={},i=n,r=0,a=0;;){r=e.indexOf(".",r);if(0>r)break;if(0==r||"\\"!=e[r-1])a=e.substring(a,r).replace(/\\\./g,"."),i[a]={},i=i[a],a=r+1;r+=1}i[e.substring(a).replace(/\\\./g,".")]=t;return n}function rc(e,t){return e&&t}q("shaka.util.ConfigUtils",tc);tc.convertToConfigObject=ic;tc.mergeConfigObjects=nc;function ac(){}function oc(e){e=kr(e);return new de(e).mb}function sc(e,t,n){function i(e){dt(a).setUint32(o,e.byteLength,!0);o+=4;a.set(ct(e),o);o+=e.byteLength}if(!n||!n.byteLength)throw new Se(2,6,6015);var r;"string"==typeof t?r=Cr(t,!0):r=t;e=kr(e);e=Cr(e,!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;i(e);i(r);i(n);return a}function uc(e,t,n){if("skd"!==t)return e;t=n.serverCertificate;n=kr(e).split("skd://").pop();return sc(e,n,t)}function lc(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}q("shaka.util.FairPlayUtils",ac);ac.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Sr(t.data)}catch(e){return}e=!1;n=n.trim();"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0);i.CkcMessage&&(n=i.CkcMessage,e=!0);i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=lt(Xr(n)))}};ac.expressplayFairPlayRequest=function(e,t){lc(e,t)};ac.conaxFairPlayRequest=function(e,t){lc(e,t)};ac.ezdrmFairPlayRequest=function(e,t){lc(e,t)};ac.verimatrixFairPlayRequest=function(e,t){2===e&&(e=ct(t.body),e=Kr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=_r("spc="+e))};ac.expressplayInitDataTransform=function(e,t,n){return uc(e,t,n)};ac.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate;i=kr(t).split("skd://").pop().split("?").shift();i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=new Uint16Array(r);for(var a=0,o=i.length;a<o;a++)r[a]=i.charCodeAt(a);return sc(t,r,n)};ac.ezdrmInitDataTransform=function(e,t,n){if("skd"!==t)return e;t=n.serverCertificate;n=kr(e).split(";").pop();return sc(e,n,t)};ac.verimatrixInitDataTransform=function(e,t,n){return uc(e,t,n)};ac.initDataTransform=sc;ac.defaultGetContentId=oc;ac.isFairPlaySupported=function(){var e;return O((function(t){if(1==t.g)return e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4);if(2!=t.g)return t.return(!0);k(t);return t.return(!1)}))};function cc(){}function dc(){var t=Infinity;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:Hi(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,i){e.shakaMediaKeysPolyfill&&"skd"==n&&(n=i.serverCertificate,i=oc(t),t=sc(t,i,n));return t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:vn(),minHdcpVersion:""},i={retryParameters:Hi(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return rc([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:xn("Tizen 3")||xn("Tizen 2")||bn()||Tn()?!1:!0,ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(e){return rc([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},r={retryParameters:Hi(),failureCallback:function(e){return rc([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};if(xn("Web0S")||yn()||xn("CrKey"))r.stallSkip=0;var a={trackSelectionCallback:function(e){return O((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return O((function(n){if(1==n.g)return navigator.storage&&navigator.storage.estimate?E(n,navigator.storage.estimate(),3):n.return(!0);t=n.h;return n.return(t.usage+e<.95*t.quota)}))},progressCallback:function(e,t){return rc([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:n,manifest:i,streaming:r,mediaSource:{sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:a,abrFactory:function(){return new yi},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:t,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};a.trackSelectionCallback=function(e){return O((function(t){return t.return(fc(e,o.preferredAudioLanguage))}))};return o}function hc(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return nc(e,t,n||dc(),i,"")}function fc(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Ke(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return Ve(e.language)==r})));0==i.length&&(i=n.filter((function(e){return e.primary})));0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height})));t=[];i.length&&(n=Math.floor(i.length/2),i.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(i[n]));e=c(e);for(i=e.next();!i.done;i=e.next())i=i.value,i.type!=Pe&&"image"!=i.type||t.push(i);return t}q("shaka.util.PlayerConfiguration",cc);cc.mergeConfigObjects=hc;cc.createDefault=dc;function pc(){this.g=null;this.h=[]}function gc(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp;e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function mc(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);e=c(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function vc(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=c(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));e.g&&n.push(t(e.g));return n}function yc(){this.i=this.h=null;this.g=[]}function bc(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function wc(){this.C=this.F=this.I=this.G=this.B=this.j=this.H=this.m=this.i=this.O=this.P=this.J=this.K=this.L=this.l=this.s=NaN;this.g=new pc;this.h=new yc}function Tc(t,n){ae.call(this);var i=this;this.l=zd;this.ce=this.h=null;this.Z=!1;this.re=new gr;this.xb=new gr;this.s=new gr;this.vb=this.i=this.ue=this.K=this.j=this.ea=this.L=this.Uf=this.V=this.xa=this.O=this.ge=this.J=this.hb=this.F=this.I=this.m=this.H=null;this.nd=!1;this.Lf=this.B=null;this.Tf=1e9;this.g=od(this);this.Sf={width:Infinity,height:Infinity};this.C=null;this.Ea=new Ri(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel);this.fb=this.g.preferredTextLanguage;this.kd=this.g.preferredTextRole;this.ed=this.g.preferForcedSubs;this.Pb=[];this.qd=null;n&&n(this);this.V=Jc(this);this.H=qc(this);this.H.Bf(this.g.streaming.forceHTTPS);this.G=null;Qd&&(this.G=Qd());this.re.o(e,"online",(function(){_d(i);i.uf()}));this.P={name:"detach"};this.X={name:"attach"};this.$={name:"unload"};this.Le={name:"manifest-parser"};this.Rf={name:"manifest"};this.gb={name:"media-source"};this.Pf={name:"drm-engine"};this.Y={name:"load"};this.Me={name:"src-equals-drm-engine"};this.ib={name:"src-equals"};var r=new Map;r.set(this.X,(function(e,t){return Yi(kc(i,e,t))}));r.set(this.P,(function(e){e.mediaElement&&(i.xb.Ub(),e.mediaElement=null);i.G&&i.G.release();i.h=null;e=Promise.resolve();return Yi(e)}));r.set(this.$,(function(e){return Yi(_c(i,e))}));r.set(this.gb,(function(e){e=Cc(i,e);return Yi(e)}));r.set(this.Le,(function(e,t){e=Mc(i,e,t);return Yi(e)}));r.set(this.Rf,(function(e){return Dc(i,e)}));r.set(this.Pf,(function(e){e=Rc(i,e);return Yi(e)}));r.set(this.Y,(function(e,t){return Yi(Lc(i,e,t))}));r.set(this.Me,(function(e,t){e=Pc(i,e,t);return Yi(e)}));r.set(this.ib,(function(e,t){return Nc(i,e,t)}));this.ya=new hl(this.P,{Fh:function(e,t,n,r){var a=null;e==i.P&&(a=n==i.P?i.P:i.X);e==i.X&&(a=n==i.P||t.mediaElement!=r.mediaElement?i.P:n==i.X?i.X:n==i.gb||n==i.Y?i.gb:n==i.ib?i.Me:null);e==i.gb&&(a=n==i.Y&&t.mediaElement==r.mediaElement?i.Le:i.$);e==i.Le&&(a=Vd(i.Y,i.Rf,i.$,n,t,r));e==i.Rf&&(a=Vd(i.Y,i.Pf,i.$,n,t,r));e==i.Pf&&(a=Vd(i.Y,i.Y,i.$,n,t,r));e==i.Me&&(a=n==i.ib&&t.mediaElement==r.mediaElement?i.ib:i.$);if(e==i.Y||e==i.ib)a=i.$;e==i.$&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.X:i.P);return a},ih:function(e,t,n){i.dispatchEvent(Ac("onstatechange",(new Map).set("state",e.name)));return r.get(e)(t,n)},handleError:function(e){return O((function(t){return 1==t.g?E(t,_c(i,e),2):t.return(e.mediaElement?i.X:i.P)}))},di:function(e){i.dispatchEvent(Ac("onstateidle",(new Map).set("state",e.name)))}});this.ke=new fn((function(){return yd(i)}));t&&this.$c(t,!0)}y(Tc,ae);function Ec(e){null!=e.L&&(e.L.release(),e.L=null)}function xc(e,t){if(t.lcevc.enabled){var n=e.Va();n&&n[0]&&n[0].videoMimeType==$d.ts&&(mn()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Q("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled."));Ec(e);null==e.L&&(e.L=new rs(e.h,e.Uf,t.lcevc),e.I&&(e.I.L=e.L))}else Ec(e)}function Ac(e,t){return new K(e,t)}i=Tc.prototype;i.destroy=function(){var e=this,t;return O((function(n){switch(n.g){case 1:if(e.l==qd)return n.return();Ec(e);e.l=qd;t=pl(e.ya,(function(){return{node:e.P,payload:Gd(),ec:!1}}));return E(n,new Promise((function(e){t.Gc=function(){};t.le=function(){e()};t.nc=function(){e()};t.onError=function(){e()};t.oe=function(){e()}})),2);case 2:return E(n,e.ya.destroy(),3);case 3:e.re&&(e.re.release(),e.re=null);e.xb&&(e.xb.release(),e.xb=null);e.s&&(e.s.release(),e.s=null);e.Lf=null;e.g=null;e.C=null;e.ce=null;e.V=null;if(!e.H){n.D(4);break}return E(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.B&&(e.B.release(),e.B=null),ae.prototype.release.call(e),x(n)}}))};function Sc(){e.Promise||Q("A Promise implementation or polyfill is required");if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||xn("Trident/"))return!1;var t=En();return t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)?!1:pn()?!0:gn("application/x-mpegurl")}i.$c=function(e,t){t=void 0===t?!0:t;if(this.l==qd)return Promise.reject(Fd());var n=Gd();n.mediaElement=e;pn()||(t=!1);var i=t?this.gb:this.X;e=pl(this.ya,(function(){return{node:i,payload:n,ec:!1}}));e.Gc=function(){};return Hd(e)};i.Yf=function(e){this.Uf=e};i.detach=function(){var e=this;if(this.l==qd)return Promise.reject(Fd());var t=pl(this.ya,(function(){return{node:e.P,payload:Gd(),ec:!1}}));t.Gc=function(){};return Hd(t)};i.Mf=function(e){var t=this;e=void 0===e?!0:e;if(this.l==qd)return Promise.reject(Fd());this.nd=!1;pn()||(e=!1);Ec(this);var n=Gd(),i=pl(this.ya,(function(i){var r=i.mediaElement&&e?t.gb:i.mediaElement?t.X:t.P;n.mediaElement=i.mediaElement;return{node:r,payload:n,ec:!1}}));i.Gc=function(){};return Hd(i)};i.Hi=function(e){this.qd=e};i.load=function(e,t,n){var i=this;this.qd=null;this.nd=!1;if(this.l==qd)return Promise.reject(Fd());this.dispatchEvent(Ac("loading"));var r=Gd();r.uri=e;r.ye=Date.now()/1e3;n&&(r.mimeType=n);void 0!==t&&(r.startTime=t);var a=Ic(this,r)?this.ib:this.Y,o=pl(this.ya,(function(e){if(null==e.mediaElement)return null;r.mediaElement=e.mediaElement;return{node:a,payload:r,ec:!0}}));this.C=new wc;o.Gc=function(){};return new Promise((function(e,t){o.oe=function(){return t(new Se(2,7,7002))};o.le=function(){e();i.dispatchEvent(Ac("loaded"))};o.nc=function(){return t(Fd())};o.onError=function(e){return t(e)}}))};function Ic(e,t){if(!pn())return!0;var n=t.mimeType,i=t.uri||"";n||(n=ho(i),n=$d[n]);if(n){if(""==(t.mediaElement||An()).canPlayType(n))return!1;if(!pn()||!(n in fo||ho(i)in po)||("application/x-mpegurl"===n||"application/vnd.apple.mpegurl"===n)&&e.g.streaming.preferNativeHls)return!0;if(wn())return e.g.streaming.useNativeHlsOnSafari}return!1}function kc(e,t,n){null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.xb.o(t.mediaElement,"error",(function(){var t=Dd(e);t&&Cd(e,t)})));e.h=t.mediaElement;return Promise.resolve()}function _c(e,t){var n,i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:return e.l!=qd&&(e.l=zd),n=e.Pb.map((function(e){return e()})),e.Pb=[],E(h,Promise.all(n),2);case 2:e.dispatchEvent(Ac("unloading"));t.mimeType=null;t.startTime=null;t.uri=null;e.xa&&(e.xa.release(),e.xa=null);t.mediaElement&&e.s.Ub();e.ke.stop();e.hb&&(e.hb.release(),e.hb=null);e.ge&&(e.ge.stop(),e.ge=null);if(!e.K){h.D(3);break}return E(h,e.K.stop(),4);case 4:e.K=null,e.ue=null;case 3:if(!e.B){h.D(5);break}return E(h,e.B.stop(),5);case 5:if(!e.j){h.D(7);break}return E(h,e.j.destroy(),8);case 8:e.j=null;case 7:e.J&&(e.J.release(),e.J=null);e.F&&(e.F.release(),e.F=null);if(!e.I){h.D(9);break}return E(h,e.I.destroy(),10);case 10:e.I=null;case 9:if(e.G)e.G.onAssetUnload();if(!t.mediaElement||!t.mediaElement.src){h.D(11);break}return E(h,new Promise((function(e){return new fn(e).R(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.D(13);break}return E(h,e.m.destroy(),14);case 14:e.m=null;case 13:e.vb=null;e.O=null;if(e.i){i=c(e.i.variants);for(r=i.next();!r.done;r=i.next())for(a=r.value,o=c([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();l=c(e.i.textStreams);for(s=l.next();!s.done;s=l.next())d=s.value,d.segmentIndex&&d.segmentIndex.release()}e.i=null;e.C=new wc;e.Qf=null;fd(e);x(h)}}))}function Cc(e,t){var n,i,r,a,o;return O((function(s){if(1==s.g)return n=e.g.textDisplayFactory,i=n(),e.Qf=n,r=Yc(t.mediaElement,i,(function(t,n,i){Bc(e,t,n,i)}),e.L),r.configure(e.g.mediaSource),a=e.g.manifest,o=a.segmentRelativeVttTiming,r.P=o,E(s,r.I,2);e.I=r;x(s)}))}function Mc(e,t,n){var i,r,a,o;return O((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.H,e.vb=i,a=e,E(s,lo(i,r,e.g.manifest.retryParameters,t.mimeType),2);a.ue=s.h;e.K=e.ue();o=$i(e.g.manifest);n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0);e.K.configure(o);x(s)}))}function Dc(e,t){var n=t.uri;t=e.H;e.xa=new Tu((function(){return e.Aa()}));e.xa.addEventListener("regionadd",(function(t){t=t.region;Md(e,"timelineregionadded",t);if(e.G)e.G.onDashTimedMetadata(t)}));e.ea=null;e.g.streaming.observeQualityChanges&&(e.ea=new vu((function(){return e.Bb()})),e.ea.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position;n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t);e.dispatchEvent(Ac("mediaqualitychanged",n))})));var i={networkingEngine:t,filter:function(t){return ud(e,t)},makeTextStreamsForClosedCaptions:function(t){return sd(e,t)},onTimelineRegionAdded:function(t){var n=e.xa;e:{var i=c(n.g);for(var r=i.next();!r.done;r=i.next())if(r=r.value,r.schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new K("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Cd(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.B&&dd(e,n.keySystem,t)}},r=Date.now()/1e3;return new zi(function(){var t,a,o,s;return O((function(u){if(1==u.g)return t=e,E(u,e.K.start(n,i),2);t.i=u.h;a=Ac("manifestparsed");e.dispatchEvent(a);if(0==e.i.variants.length)throw new Se(2,4,4036);Gc(e.i);o=Date.now()/1e3;s=o-r;e.C.H=s;x(u)}))}(),(function(){return e.K.stop()}))}function Rc(e,t){var n,i;return O((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=Hc(e,{lc:e.H,onError:function(t){Cd(e,t)},me:function(t){Rd(e,t)},onExpirationUpdated:function(t,n){Ld(e,t,n)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&i&&(i=!1,e.C.j=Date.now()/1e3-n,e.L&&(t=e.L,t.g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.g.drm),E(r,Aa(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?E(r,e.m.$c(t.mediaElement),3):E(r,ud(e,e.i),0)}))}function Lc(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T;return O((function(A){switch(A.g){case 1:t.startTime=n.startTime;null!=e.qd&&(t.startTime=e.qd,e.qd=null);i=t.mediaElement;r=t.uri;e.vb=r;e.J=new fu({Wd:function(){return i.playbackRate},Sd:function(){return i.defaultPlaybackRate},Df:function(e){i.playbackRate=e},yg:function(e){i.currentTime+=e}});a=function(){return gd(e)};o=function(){return pd(e)};e.s.o(i,"playing",a);e.s.o(i,"pause",a);e.s.o(i,"ended",a);e.s.o(i,"ratechange",o);xc(e,e.g);s=e.g.abrFactory;e.B&&e.Lf==s||(e.Lf=s,e.B=s(),"function"!=typeof e.B.setMediaElement&&(xi("AbrManager","Please use an AbrManager with setMediaElement function."),e.B.setMediaElement=function(){}),e.B.configure(e.g.abr));e.Ea=new Ri(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel);e.fb=e.g.preferredTextLanguage;e.kd=e.g.preferredTextRole;e.ed=e.g.preferForcedSubs;Pd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.B.init((function(t,n,i){e.j&&t!=e.j.j&&wd(e,t,!0,void 0===n?!1:n,void 0===i?0:i)}));e.B.setMediaElement(i);_n(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes);e.j=Qc(e);e.j.configure(e.g.streaming);e.l=Kd;i.textTracks&&e.s.o(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":Vc(e,t)}}));e.dispatchEvent(Ac("streaming"));u=null;(l=e.j.j)||(u=vd(e)?e.B.chooseVariant():null);d=[];h=l||u;f=c([h.video,h.audio]);for(p=f.next();!p.done;p=f.next())(g=p.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){A.D(2);break}return E(A,Promise.all(d),2);case 2:Pd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.F=zc(e,t.startTime);e.hb=Kc(e,t.ye);m=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal);Xc(e,m);if(l){A.D(4);break}wd(e,u,!0,!1,0);if(!e.g.streaming.startAtSegmentBoundary){A.D(4);break}v=e.F.Jd();return E(A,hd(u,v),6);case 6:y=A.h,e.F.Oe(y);case 4:return e.F.Ne(),b=e.Sb().find((function(e){return e.active})),b||((w=si(e.i.textStreams,e.fb,e.kd,e.ed)[0]||null)&&bc(e.C.h,w,!0),u&&(w?(u.audio&&Ed(e,u.audio,w)&&(e.Z=!0),e.Z&&e.I.C.setTextVisibility(!0),Id(e)):e.Z=!1),w&&(e.g.streaming.alwaysStreamText||e.jc())&&Vu(e.j,w)),E(A,e.j.start(),7);case 7:e.g.abr.enabled&&(e.B.enable(),kd(e)),Kn(e.j?e.j.j:null,e.i),Od(e.i),xd(e),vd(e),e.i.variants.some((function(e){return e.primary})),e.S()&&(e.g.streaming.liveSync||e.i.serviceDescription)&&(T=function(){return md(e)},e.s.o(i,"timeupdate",T)),e.nd=!0,e.s.wa(i,"loadedmetadata",(function(){e.C.m=Date.now()/1e3-n.ye})),x(A)}}))}function Pc(e,t,n){var i,r,a,o,s,u,l;return O((function(c){return 1==c.g?(i=Ne,r=Date.now()/1e3,a=!0,e.m=Hc(e,{lc:e.H,onError:function(t){Cd(e,t)},me:function(t){Rd(e,t)},onExpirationUpdated:function(t,n){Ld(e,t,n)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&a&&(a=!1,e.C.j=Date.now()/1e3-r)}}),e.m.configure(e.g.drm),o=n.uri||"",s=ho(o),u=$d[s],"application/x-mpegurl"==u&&wn()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?en(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Y=!0,E(c,Aa(e.m,[l],[]),2)):E(c,e.m.$c(t.mediaElement),0)}))}function Nc(e,t,n){function i(){return gd(e)}t.uri=n.uri;t.startTime=n.startTime;e.vb=t.uri;var r=t.mediaElement;e.F=new nu(r);var a=!1;e.Pb.push((function(){a=!0}));null!=t.startTime&&e.F.Oe(t.startTime);e.J=new fu({Wd:function(){return r.playbackRate},Sd:function(){return r.defaultPlaybackRate},Df:function(e){r.playbackRate=e},yg:function(e){r.currentTime+=e}});Xc(e,e.g.streaming.rebufferingGoal);e.s.o(r,"playing",i);e.s.o(r,"pause",i);e.s.o(r,"ended",i);e.s.o(r,"ratechange",(function(){return pd(e)}));"none"!=r.preload&&e.s.wa(r,"loadedmetadata",(function(){e.C.m=Date.now()/1e3-n.ye}));r.audioTracks&&(e.s.o(r.audioTracks,"addtrack",(function(){return xd(e)})),e.s.o(r.audioTracks,"removetrack",(function(){return xd(e)})),e.s.o(r.audioTracks,"change",(function(){return xd(e)})));r.textTracks&&(e.s.o(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":jc(e,t);break;case"chapters":Vc(e,t);break;default:xd(e)}})),e.s.o(r.textTracks,"removetrack",(function(){return xd(e)})),e.s.o(r.textTracks,"change",(function(){return xd(e)})));var o=ho(t.uri);r.src=Bl(e.V,t.uri,$d[o]);(yn()||xn("Web0S"))&&r.load();e.l=Xd;e.dispatchEvent(Ac("streaming"));var s=new qi;Xs(r,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.F.Ne();s.resolve()}));Xs(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){var t;return O((function(n){if(1==n.g)return Oc(e),t=Zc(e),t.find((function(e){return"disabled"!=e.mode}))?(0<t.length&&(e.Z=!0),n.D(2)):E(n,new Promise((function(t){e.s.wa(r.textTracks,"change",t);new fn(t).R(1)})),2);if(a)return n.return();Uc(e);x(n)}))}));r.error?s.reject(Dd(e)):"none"==r.preload&&(Q('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve());e.s.wa(r,"error",(function(){s.reject(Dd(e))}));return new zi(s,(function(){s.reject(new Se(2,7,7001));return Promise.resolve()})).qa((function(){e.S()&&e.g.streaming.liveSync&&e.s.o(r,"timeupdate",(function(){return md(e)}));e.nd=!0}))}function Oc(e){var t=e.g.preferredAudioLanguage;""!=t&&e.xf(t,e.g.preferredVariantRole)}function Uc(e){var t=e.g.preferredTextLanguage;""!=t&&e.Eg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function jc(e,t){if("metadata"==t.kind){t.mode="hidden";e.s.o(t,"cuechange",(function(){if(t.activeCues)for(var n=c(t.activeCues),i=n.next();!i.done;i=n.next())if(i=i.value,Fc(e,i.startTime,i.endTime,i.type,i.value),e.G)e.G.onCueMetadataChange(i.value)}));var n=new fn((function(){var t=ed(e);t=c(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"})).Ca().R(.5);e.Pb.push((function(){n.stop()}))}}function Bc(e,t,n,i){t=c(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&r.cueTime&&r.frames){var a=r.cueTime+n,o=i;o&&a>o&&(o=a);for(var s=c(r.frames),u=s.next();!u.done;u=s.next())Fc(e,a,o,"org.id3",u.value);if(e.G)e.G.onHlsTimedMetadata(r,a)}}function Fc(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r);e.dispatchEvent(Ac("metadata",t))}function Vc(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new fn((function(){t.mode="hidden"})).Ca().R(.5);e.Pb.push((function(){n.stop()}))}}function Gc(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function Hc(e,t){return new Ta(t,e.g.drm.updateExpirationTime)}function qc(e){return new nr((function(t,n){e.B&&e.B.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i);e.dispatchEvent(Ac("downloadheadersreceived",t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r);e.dispatchEvent(Ac("downloadfailed",t))}),(function(t,n,i){var r=e.V;i=void 0===i?{}:i;if(r.g.enabled)if("HEAD"===n.method)Vl(r,n);else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var a="d";break e;case 3:case 2:a="h";break e;case 5:a="s";break e}a=void 0}r.s=a}Vl(r,n,{ot:Wl,su:!r.i})}}catch(e){$("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case cr:t=i;try{if(r.g.enabled){var o=t.segment;a=0;o&&(a=o.endTime-o.startTime);var s={d:1e3*a,st:r.h.S()?"l":"v"};s.ot=Gl(t);var u=s.ot===Jl||s.ot===Yl||s.ot===Ql||s.ot===ec,l=t.stream;l&&(u&&(s.bl=Hl(r,l.type)),l.bandwidth&&(s.br=l.bandwidth/1e3));u&&s.ot!==ec&&(s.tb=ql(r,s.ot)/1e3);Vl(r,n,s)}}catch(e){$("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Vl(r,n,{ot:"k"});break;case 4:Vl(r,n,{ot:"o"})}}))}function zc(e,t){return new iu(e.h,e.i,e.g.streaming,t,(function(){e.hb&&mu(e.hb,!0);e.j&&e.j.xd();e.O&&Wc(e)}),(function(t){return e.dispatchEvent(t)}))}function Kc(e,t){t=new Eu(e.xa,e.S()||0<t);t.addEventListener("enter",(function(t){Md(e,"timelineregionenter",t.region)}));t.addEventListener("exit",(function(t){Md(e,"timelineregionexit",t.region)}));t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Md(e,"timelineregionenter",n),Md(e,"timelineregionexit",n))}));var n=new gu(e.h);n.g.add(t);e.ea&&n.g.add(e.ea);return n}function Xc(e,t){e.O=new Ui;e.O.g=Bi;ji(e.O,t,Math.min(.5,t/2));fd(e);e.ge=new fn((function(){Wc(e)})).ha(.25)}function Wc(e){switch(e.l){case Xd:if(e.h.ended)var t=!0;else{var n=Ao(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case Kd:e:if(e.h.ended||ps(e.I))t=!0;else{if(e.i.presentationTimeline.S()){n=e.i.presentationTimeline.cc();var i=Ao(e.h.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Io(e.h.buffered,e.h.currentTime);n=e.O;var r=t,a=n.h.get(n.g);t=n.g;i=r||i>=a?Fi:Bi;n.g=i;t!=i&&fd(e)}function Yc(e,t,n,i){return new ls(e,t,n,i)}function Jc(e){return new jl({getBandwidthEstimate:function(){return e.B?e.B.getBandwidthEstimate():NaN},Bb:function(){return e.Bb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Rb:function(){return e.Rb()},ac:function(){return e.ac()},Va:function(){return e.Va()},S:function(){return e.S()}},e.g.cmcd)}function Qc(e){return new Nu(e.i,{Vd:function(){return e.F?e.F.Jd():0},getBandwidthEstimate:function(){return e.B.getBandwidthEstimate()},W:e.I,lc:e.H,onError:function(t){return Cd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gi:function(){e.K&&e.K.update&&e.K.update()},pf:function(t,n,i){e.F&&e.F.zg();Wc(e);t=(new Map).set("start",t).set("end",n).set("contentType",i);e.dispatchEvent(Ac("segmentappended",t))},ei:function(t,n){(n=n.jf)&&e.ea&&bu(e.ea,n,t)},Zf:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&!i.K&&["audio","video"].includes(t)){n=new Qr(ct(n));var r=0,a=c(n.data);for(t=a.next();!t.done;t=a.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{r=new Uint8Array(r);a=0;n=c(n.data);for(t=n.next();!t.done;t=n.next())t=t.value,r.set(t,a),a+=t.length;Ra(i,"cenc",r);i=i.l}}else i=Promise.resolve();return i},ii:function(t,n,i){Bc(e,t,n,i)},Re:function(t,n){return e.Re(t,n)}})}i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ic(e,t));e.streaming&&"forceTransmuxTS"in e.streaming&&(xi("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS);e.streaming&&"forceTransmux"in e.streaming&&(xi("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux);e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var n=hc(this.g,e,od(this));$c(this);return n};function $c(e){if(e.K){var t=$i(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0);e.K.configure(t)}e.m&&e.m.configure(e.g.drm);if(e.j){e.j.configure(e.g.streaming);try{cd(e,e.i)}catch(t){Cd(e,t)}e.B&&vd(e);t=e.j.j;!t||t.allowedByApplication&&t.allowedByKeySystem||bd(e)}e.H&&e.H.Bf(e.g.streaming.forceHTTPS);if(e.I&&(e.I.configure(e.g.mediaSource),e.I.P=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Qf!=t)){var n=t(),i=e.I,r=i.C;i.C=n;r&&(n.setTextVisibility(r.isTextVisible()),r.destroy());i.g&&(i.g.j=n);e.Qf=t;e.j&&(t=e.j,(n=t.h.get(Pe))&&Gu(t,n.stream,!0,0,!0))}e.B&&(e.B.configure(e.g.abr),e.g.abr.enabled?e.B.enable():e.B.disable(),kd(e));e.O&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),ji(e.O,t,Math.min(.5,t/2)));e.i&&Pd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.G&&e.G.configure(e.g.ads);e.V&&e.V.configure(e.g.cmcd)}i.getConfiguration=function(){var e=od(this);hc(e,this.g,od(this));return e};i.lh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;t=Math.min(this.h.currentTime+t,this.Aa().end);if(e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0};i.ri=function(){for(var e in this.g)delete this.g[e];hc(this.g,od(this),od(this));$c(this)};i.Ve=function(){return this.l};i.Ch=function(){return this.i?this.i.type:null};i.Eh=function(){return this.h};i.ac=function(){return this.H};i.Ue=function(){return this.vb};i.Qd=function(){return this.G?this.G:null};i.S=function(){return this.i?this.i.presentationTimeline.S():this.h&&this.h.src?Infinity==this.h.duration:!1};i.hc=function(){return this.i?this.i.presentationTimeline.hc():!1};i.Cc=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight:!1};i.Aa=function(){if(!this.nd)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Ac(),end:e.Cb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}};i.Rh=function(){this.S()&&(this.h.currentTime=this.Aa().end)};i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""};i.drmInfo=function(){return this.m?this.m.g:null};i.gd=function(){return this.m?this.m.gd():Infinity};i.Te=function(){return this.m?this.m.Te():[]};i.Ud=function(){return this.m?this.m.Ud():{}};i.pd=function(){return this.O?this.O.g==Bi:!1};i.Rb=function(){return this.h?this.J?this.J.i:1:0};i.ze=function(e){0==e?Q("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.J.set(e),this.l==Kd&&(this.B.playbackRateChanged(e),Bu(this.j,1<Math.abs(e))))};i.Pe=function(){var e=this.J.Sd();this.l==Xd&&this.J.set(e);this.l==Kd&&(this.J.set(e),this.B.playbackRateChanged(e),Bu(this.j,!1))};i.Va=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=c(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ri(r)){var a=Qn(r);a.active=r==e;a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0);a.active&&n++;t.push(a)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map((function(e){return ni(e)})):[]};i.Sb=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=c(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=$n(i);r.active=i==e;t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Zc(this).map((function(e){return ti(e)})):[]};i.Td=function(){return this.i?this.i.imageStreams.map((function(e){return Zn(e)})):[]};i.pg=function(e,t){var n=this,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,w,T,x;return O((function(A){if(1==A.g)return n.i?(i=n.i.imageStreams.find((function(t){return t.id==e})))?i.segmentIndex?A.D(3):E(A,i.createSegmentIndex(),3):A.return(null):A.D(2);if(2!=A.g){r=i.segmentIndex.find(t);if(null==r)return A.return(null);a=i.segmentIndex.get(r);o=a.tilesLayout||i.tilesLayout;s=/(\d+)x(\d+)/.exec(o);if(!s)return A.return(null);u=i.width||0;l=i.height||0;c=parseInt(s[1],10);d=parseInt(s[2],10);h=u/c;f=l/d;p=c*d;g=a.j-a.startTime;m=a.G||g/p;v=a.startTime;b=y=0;1<p&&(w=Math.floor((t-a.startTime)/m),v=a.startTime+w*m,y=w%c*h,b=Math.floor(w/c)*f);T=!1;if(x=a.F)T=!0,f=x.height,y=x.positionX,b=x.positionY,h=x.width;return A.return({imageHeight:l,imageWidth:u,height:f,positionX:y,positionY:b,startTime:v,duration:m,uris:a.Oa(),width:h,sprite:T})}return A.return(null)}))};i.yf=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.s&&(bc(this.C.h,t,!1),Vu(this.j,t),Sd(this),this.fb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Zc(this);t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,ei(n)==e.id?n.mode=this.Z?"showing":"hidden":n.mode="disabled";Sd(this)}};i.we=function(e,t,n){t=void 0===t?!1:t;n=void 0===n?0:n;if(this.i&&this.j){this.g.abr.enabled&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&ri(i)&&(wd(this,i,!1,t,n),this.Ea=new Di(i),vd(this))}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=c(t),n=t.next();!n.done;n=t.next())if(n=n.value,ei(n)==e.id){Td(this,n);break}};i.kh=function(){return Bd(this.Va())};i.Kh=function(){return Bd(this.Sb())};i.jh=function(){return Array.from(jd(this.Va()))};i.Jh=function(){return Array.from(jd(this.Sb()))};i.xf=function(e,t,n,i){n=void 0===n?0:n;i=void 0===i?0:i;if(this.i&&this.F){this.Ea=new Ri(e,t||"",n,"","");e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):Infinity:0};t=this.j.j;var r=this.Ea.create(this.i.variants);n=null;r=c(r.values());for(var a=r.next();!a.done;a=r.next())if(a=a.value,!n||e(n,t)>e(a,t))n=a;n?(e=Qn(n),this.we(e,!0,i)):bd(this)}else this.h&&this.h.audioTracks&&(i=si(this.Va(),e,t||"",!1)[0])&&this.we(i)};i.Eg=function(e,t,n){n=void 0===n?!1:n;if(this.i&&this.F){if(this.fb=e,this.kd=t||"",this.ed=n,(e=si(this.i.textStreams,this.fb,this.kd,this.ed)[0]||null)&&e!=this.j.s&&(bc(this.C.h,e,!1),this.g.streaming.alwaysStreamText||this.jc()))Vu(this.j,e),Sd(this)}else(e=si(this.Sb(),e,t||"",n)[0])&&this.yf(e)};i.xi=function(e,t,n){t=void 0===t?!0:t;n=void 0===n?0:n;if(this.i&&this.F){for(var i=null,r=c(this.i.variants),a=r.next();!a.done;a=r.next())if(a=a.value,a.audio.label==e){i=a;break}null!=i&&(this.Ea=new Ri(i.language,"",0,"",e),bd(this,t,n))}else if(this.h&&this.h.audioTracks){n=Array.from(this.h.audioTracks);t=null;n=c(n);for(i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&Td(this,t)}};i.jc=function(){var e=this.Z;return this.I?this.I.C.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Zc(this).some((function(e){return"showing"==e.mode})):e};i.mg=function(){return this.h&&this.h.src&&this.h.textTracks?td(this).map((function(e){return ti(e)})):[]};i.nh=function(e){var t=Ve(e),n=td(this).filter((function(e){return Ve(e.language)==t}));if(!n||!n.length)return[];e=[];var i=new Set;n=c(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=c(r.cues);for(var a=r.next();!a.done;a=r.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text);o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime};i.has(a)||(e.push(o),i.add(a))}}return e};function Zc(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function ed(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"==e.kind}))}function td(e){return Array.from(e.h.textTracks).filter((function(e){return"chapters"==e.kind}))}i.Ff=function(e){e=!!e;if(this.Z!=e){this.Z=e;if(this.l==Kd)this.I.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=si(this.i.textStreams,this.fb,this.kd,this.ed),0<e.length&&(Vu(this.j,e[0]),Sd(this))):ju(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Zc(this);t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}Id(this)}};i.Gh=function(){if(!this.S())return null;var e=this.ya.l,t=0;if(this.F)t=this.F.Jd();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null};i.og=function(){if(!this.S())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null};i.Bb=function(){if(this.l==Kd)return this.I.Bb();var e={total:[],audio:[],video:[],text:[]};this.l==Xd&&(e.total=_o(this.h.buffered));return e};i.getStats=function(){if(this.l!=Kd&&this.l!=Xd)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};gd(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.C;t=Math.round(100*t);n.i=isNaN(n.i)?t:Math.max(n.i,t)}this.F&&(this.C.O=this.F.Vf(),this.C.P=this.F.Wf());if(e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality();t=this.C;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames);t.K=i;this.C.J=Number(n.corruptedVideoFrames)}this.m?(n=this.m,n=n.J?n.J:NaN):n=NaN;this.C.B=n;if(this.l==Kd){if(n=this.j.j)this.C.F=(this.J?this.J.i:1)*n.bandwidth;n&&n.video&&(t=this.C,i=n.video.height||NaN,t.s=n.video.width||NaN,t.l=i);this.S()&&(n=this.og().valueOf()+1e3*this.Aa().end,this.C.G=(Date.now()-n)/1e3);this.i&&this.i.presentationTimeline&&(this.C.I=this.i.presentationTimeline.g);n=this.B.getBandwidthEstimate();this.C.C=n}this.l==Xd&&(n=this.C,t=e.videoHeight||NaN,n.s=e.videoWidth||NaN,n.l=t);var r=this.C;e=r.s;n=r.l;t=r.F;i=r.K;var a=r.L,o=r.J,s=r.P,u=r.O,l=r.C,d=r.i,h=r.m,f=r.H,p=r.j,g=mc(r.g,"playing"),m=mc(r.g,"paused"),v=mc(r.g,"buffering"),y=r.B,b=r.G,w=r.I,T=vc(r.g),E=[];r=c(r.h.g);for(var x=r.next();!x.done;x=r.next())x=x.value,E.push({timestamp:x.timestamp,id:x.id,type:x.type,fromAdaptation:x.fromAdaptation,bandwidth:x.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:d,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:g,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:w,stateHistory:T,switchHistory:E}};i.Wg=function(e,t,n,i,r,a,o){o=void 0===o?!1:o;var s=this,u,l,c,d,h,f,p,g,m,v,y;return O((function(b){switch(b.g){case 1:if(s.l!=Kd&&s.l!=Xd)throw new Se(1,7,7004);if(i){b.D(2);break}return E(b,nd(s,e),3);case 3:i=b.h;case 2:u=[];if(s.G)try{u=s.G.getServerSideCuePoints()}catch(e){}if(s.l!=Xd){b.D(4);break}o&&(n="forced");return E(b,id(s,e,t,n,i,a||"",u),5);case 5:l=s.Sb();if(c=l.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return xd(s),b.return(c);throw new Se(1,2,2012);case 4:d=Ne;h=s.i.presentationTimeline.getDuration();if(Infinity==h)throw new Se(1,4,4033);if(!u.length){b.D(6);break}return E(b,rd(s,e,s.H,s.g.streaming.retryParameters),7);case 7:f=b.h,p=ad(s,f,i,u),g=new Blob([p],{type:"text/vtt"}),e=js(g),i="text/vtt";case 6:m={id:s.Tf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:cu(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:d.na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0};v=Jt(m.mimeType,m.codecs);y=an(v);if(!y)throw new Se(2,2,2014,i);s.i.textStreams.push(m);xd(s);return b.return($n(m))}}))};i.Xg=function(e,t){var n=this,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:if(n.l!=Kd&&n.l!=Xd)throw new Se(1,7,7004);if(n.l==Xd)throw new Se(1,2,2016);if(t){w.D(2);break}return E(w,nd(n,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new Se(1,2,2017,e);i=Ne;r=n.i.presentationTimeline.getDuration();if(Infinity==r)throw new Se(1,4,4045);return E(w,rd(n,e,n.H,n.g.streaming.retryParameters),4);case 4:a=w.h;o=dn[t];if(!o)throw new Se(2,2,2014,t);s=o();u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0};l=ct(a);d=s.parseMedia(l,u);h=[];f={};p=c(d);for(g=p.next();!g.done;f={Pc:f.Pc},g=p.next())m=g.value,f.Pc=Me([e],[m.payload])[0],v=new To(m.startTime,m.endTime,function(e){return function(){return[e.Pc]}}(f),0,null,null,0,0,Infinity),f.Pc.includes("#xywh")&&(y=f.Pc.split("#xywh=")[1].split(","),4===y.length&&v.Lg({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),h.push(v);b={id:n.Tf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new uu(h),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Zc,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0};n.i.imageStreams.push(b);xd(n);return w.return(Zn(b))}}))};i.Vg=function(e,t,n){var i=this,r,a,o,s;return O((function(u){switch(u.g){case 1:if(i.l!=Kd&&i.l!=Xd)throw new Se(1,7,7004);if(n){u.D(2);break}return E(u,nd(i,e),3);case 3:n=u.h;case 2:r=[];if(i.G)try{r=i.G.getServerSideCuePoints()}catch(e){}return E(u,id(i,e,t,"chapters",n,"",r),4);case 4:a=u.h;o=i.mg();s=o.find((function(e){return e.language==t}));if(!s){u.D(5);break}return E(u,new Promise((function(e,t){i.s.wa(a,"load",e);i.s.wa(a,"error",(function(){t(new Se(1,2,2015))}))})),6);case 6:return u.return(s);case 5:throw new Se(1,2,2012)}}))};function nd(e,t){var n,i;return O((function(r){switch(r.g){case 1:n=ho(t);if(i=Zd[n])return r.return(i);A(r,2);return E(r,co(t,e.H,e.g.streaming.retryParameters),4);case 4:i=r.h;I(r,3);break;case 2:k(r);case 3:if(i)return r.return(i);throw new Se(1,2,2011,n)}}))}function id(e,t,n,i,r,a,o){var s,u,l,c;return O((function(d){if(1==d.g)return"text/vtt"!=r||o.length?E(d,rd(e,t,e.H,e.g.streaming.retryParameters),3):d.D(2);2!=d.g&&(s=d.h,u=ad(e,s,r,o),l=new Blob([u],{type:"text/vtt"}),t=js(l),r="text/vtt");c=document.createElement("track");var h=e.V,f=t;try{if(h.g.enabled){var p=Fl(h);p.ot=Zl;p.su=!0;var g=zl(p);var m=Xl(f,g)}else m=f}catch(e){$("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),m=f}c.src=m;c.label=a;c.kind=i;c.srclang=n;e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous");e.h.appendChild(c);return d.return(c)}))}function rd(e,t,n,i){var r,a,o;return O((function(s){if(1==s.g){r=cr;a=rr([t],i);a.method="GET";var u=e.V;try{u.g.enabled&&Vl(u,a,{ot:Zl,su:!0})}catch(e){$("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return E(s,n.request(r,a).promise,2)}o=s.h;return s.return(o.data)}))}function ad(e,t,n,i){var r=dn[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=ct(t),t=n.parseMedia(t,e),Ul(t,i);throw new Se(2,2,2014,n)}i.Cf=function(e,t){this.Sf.width=e;this.Sf.height=t};i.uf=function(e){if(this.l==Kd){var t=this.j;e=void 0===e?.1:e;if(t.l.g)t=!1;else if(t.B)t=!1;else{for(var n=c(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.md||i.Ma||i.ub||(i.md=!1,ul(t,i,e));t=!0}}else t=!1;return t};i.Ah=function(){Q("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.i};i.Bh=function(){return this.ue};function od(e){var t=dc();t.streaming.failureCallback=function(t){if(e.S()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1);null!=n&&(t.severity=1,e.uf(n))}};t.textDisplayFactory=function(){return e.ce?new _l(e.h,e.ce):new Tl(e.h)};return t}i.Gf=function(e){this.ce=e};function sd(e,t){for(var n=new Set,i=c(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,"application/cea-608"!=r.mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);i=c(t.variants);for(r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=c(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new hu,l=r.closedCaptions.get(o);s={id:e.Tf++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:Pe,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1};t.textStreams.push(s);n.add(o)}}function ud(e,t){return O((function(n){if(1==n.g)return E(n,ld(e,t),2);cd(e,t);x(n)}))}function ld(e,t){var n;return O((function(i){if(1==i.g)return n=e.j?e.j.j:null,E(i,jn(n,t),2);Od(t);x(i)}))}function cd(e,t){if(e.l!=qd){for(var n=e.g.restrictions,i=e.Sf,r=!1,a=c(t.variants),o=a.next();!o.done;o=a.next()){o=o.value;var s=o.allowedByApplication;o.allowedByApplication=Un(o,n,i);s!=o.allowedByApplication&&(r=!0)}r&&e.j&&xd(e);if((n=e.m?e.m.g:null)&&e.m.B)for(i=c(t.variants),r=i.next();!r.done;r=i.next())r=r.value,dd(e,n.keySystem,r.video),dd(e,n.keySystem,r.audio);Nd(e,t)}}function dd(e,t,n){if(n){n=c(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=c(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,Ra(e.m,r.initDataType,r.initData)}}}function hd(e,t){var n,i,r,a,o;return O((function(s){if(1==s.g)return n=e.audio,i=e.video,r=function(e,t){var n,i,r;return O((function(a){if(1==a.g)return e?E(a,e.createSegmentIndex(),2):a.return(null);i=(n=e.segmentIndex.$b(t))?n.next().value:null;if(!i)return a.return(null);r=i.startTime;return a.return(r)}))},E(s,r(n,t),2);if(3!=s.g)return a=s.h,E(s,r(i,t),3);o=s.h;return null!=o&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}function fd(e){var t=e.pd();if(e.C&&e.O&&e.F){var n=e.J;n.j=t;pu(n);e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t);gd(e)}t=(new Map).set("buffering",t);e.dispatchEvent(Ac("buffering",t))}function pd(e){var t=e.h.playbackRate;0!=t&&(e.J&&e.J.set(t),t=Ac("ratechange"),e.dispatchEvent(t))}function gd(e){if(e.C&&e.O){var t=e.C.g;e.O.g==Bi?gc(t,"buffering"):e.h.paused?gc(t,"paused"):e.h.ended?gc(t,"ended"):gc(t,"playing")}}function md(e){if(e.S()){var t=e.Aa();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync){var n=e.g.streaming.liveSyncMaxLatency;var i=e.g.streaming.liveSyncPlaybackRate}else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,i=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var r=e.h.playbackRate,a=t.end-e.h.currentTime,o=0;if(e.l==Xd){var s=e.h.buffered;0<s.length&&(o=s.end(s.length-1),o=Math.max(i,o-t.end))}n&&i&&a-o>n?r!=i&&e.ze(i):1!==r&&0!==r&&e.Pe()}}}function vd(e){try{Nd(e,e.i)}catch(t){return Cd(e,t),!1}var t=ai(e.i.variants);t=e.Ea.create(t);e.B.setVariants(Array.from(t.values()));return!0}function yd(e){function t(e){var t="";e.video&&(t+="video:"+e.video.id);e.audio&&(t=t+(t?"&":"")+("audio:"+e.audio.id));return t}for(var n=Date.now()/1e3,i=!1,r=c(e.i.variants),a=r.next();!a.done;a=r.next())a=a.value,0<a.disabledUntilTime&&a.disabledUntilTime<=n&&(a.disabledUntilTime=0,i=!0,ne("Re-enabled variant with "+t(a)));e.i.variants.every((function(e){return 0===e.disabledUntilTime}))&&e.ke.stop();i&&bd(e,!0,void 0,!1,!1)}function bd(e,t,n,i,r){t=void 0===t?!0:t;n=void 0===n?0:n;i=void 0===i?!1:i;r=void 0===r?!0:r;var a;(a=vd(e)?e.B.chooseVariant():null)&&wd(e,a,r,t,n,i)}function wd(e,t,n,i,r,a){a=void 0===a?!1:a;var o=e.j.j;if(t==o)i&&Fu(e.j,t,i,r,!0);else{var s=e.C.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}));Fu(e.j,t,i,r,a,n);i=null;o&&(i=Qn(o));t=Qn(t);n?(n=(new Map).set("oldTrack",i).set("newTrack",t),e.L&&as(e.L,t),n=Ac("adaptation",n),Ud(e,n)):Ad(e,i,t)}}function Td(e,t){var n=Array.from(e.h.audioTracks).find((function(e){return e.enabled}));t.enabled=!0;t.id!==n.id&&(n.enabled=!1);n=ni(n);t=ni(t);Ad(e,n,t)}function Ed(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var i=Ve(e.g.preferredTextLanguage);n=Ve(n.language);if(2==e.g.autoShowText)return je(n,i);if(3==e.g.autoShowText)return e=Ve(t.language),je(n,i)&&!je(e,n);Q("Invalid autoShowText setting!");return!1}function xd(e){var t=Ac("trackschanged");Ud(e,t)}function Ad(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n);e.L&&as(e.L,n);n=Ac("variantchanged",t);Ud(e,n)}function Sd(e){var t=Ac("textchanged");Ud(e,t)}function Id(e){var t=Ac("texttrackvisibility");Ud(e,t)}function kd(e){e.g.abr.enabled||_d(e);var t=(new Map).set("newStatus",e.g.abr.enabled);Ud(e,Ac("abrstatuschanged",t))}function _d(e,t){t=void 0===t?!0:t;if(e.l==Kd){e.ke.stop();for(var n=c(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&vd(e)}}i.Re=function(e,t){if(!this.g.abr.enabled||this.l===qd||!navigator.onLine)return!1;if(this.i.variants.some((function(t){return(t=t[e.type])&&t.id!==e.id?"audio"==e.type?e.language===t.language:!0:!1}))){for(var n=c(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var r=i[e.type];r&&r.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}this.ke.ha(1);t=this.Bb().video.reduce((function(e,t){return e+t.end-t.start}),0);bd(this,!0,t,!0,!1);return!0}return!1};function Cd(e,t){if(e.l!=qd){2===t.severity&&_d(e,!1);var n=Ac("error",(new Map).set("detail",t));e.dispatchEvent(n);n.defaultPrevented&&(t.handled=!0)}}function Md(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement});e.dispatchEvent(Ac(t,n))}function Dd(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var n=e.h.error.msExtendedCode;n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16));return new Se(2,3,3016,t,n,e.h.error.message)}function Rd(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length){n=c(e.i.variants);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=[];a.audio&&o.push(a.audio);a.video&&o.push(a.video);o=c(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;s=a.allowedByKeySystem;if(u.keyIds.size){a.allowedByKeySystem=!0;u=c(u.keyIds);for(var l=u.next();!l.done;l=u.next())l=l.value,l=t[i?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!Yd.includes(l)}s!=a.allowedByKeySystem&&(r=!0)}}}if(!r||vd(e))(t=e.j.j)&&!t.allowedByKeySystem&&bd(e),r&&xd(e)}}function Ld(e,t,n){if(e.K&&e.K.onExpirationUpdated)e.K.onExpirationUpdated(t,n);t=Ac("expirationupdated");e.dispatchEvent(t)}function Pd(e,t,n){0<t&&(e.S()||e.Mg(t));t=e.getDuration();n<t&&(e.S()||e.Ra(n))}function Nd(e,t){e=e.m?e.m.Ud():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var i=!1,r=!1,a=new Set,o=new Set;t=c(t.variants);for(var s=t.next();!s.done;s=t.next()){s=s.value;var u=[];s.audio&&u.push(s.audio);s.video&&u.push(s.video);u=c(u);for(var l=u.next();!l.done;l=u.next())if(l=l.value,l.keyIds.size){l=c(l.keyIds);for(var d=l.next();!d.done;d=l.next()){d=d.value;var h=e[n?"00":d];h?Yd.includes(h)&&o.add(h):a.add(d)}}s.allowedByApplication?s.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)},new Se(2,4,4012,e)}function Od(e){if(!e.variants.some(ri))throw new Se(2,4,4032)}function Ud(e,t){O((function(n){if(1==n.g)return E(n,Promise.resolve(),2);e.l!=qd&&e.dispatchEvent(t);x(n)}))}function jd(e){var t=new Set;e=c(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Ve(n.language)):t.add("und");return t}function Bd(e){var t=new Map,n=new Map;e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",a=[];i.language&&(r=Ve(i.language));"variant"==i.type?a=i.audioRoles:a=i.roles;a&&a.length||(a=[""]);t.has(r)||t.set(r,new Set);a=c(a);for(var o=a.next();!o.done;o=a.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var s=[];t.forEach((function(e,t){e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i));s.push({language:t,role:i,label:r})}}));return s}function Fd(){return new Se(2,7,7e3)}function Vd(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Gd(){return{mediaElement:null,mimeType:null,startTime:null,ye:NaN,uri:null}}function Hd(e){return new Promise((function(t,n){e.nc=function(){return n(Fd())};e.le=function(){return t()};e.onError=function(e){return n(e)};e.oe=function(){return n(Fd())}}))}q("shaka.Player",Tc);Tc.prototype.setVideoContainer=Tc.prototype.Gf;Tc.prototype.getManifestParserFactory=Tc.prototype.Bh;Tc.prototype.getManifest=Tc.prototype.Ah;Tc.prototype.retryStreaming=Tc.prototype.uf;Tc.prototype.setMaxHardwareResolution=Tc.prototype.Cf;Tc.prototype.addChaptersTrack=Tc.prototype.Vg;Tc.prototype.addThumbnailsTrack=Tc.prototype.Xg;Tc.prototype.addTextTrackAsync=Tc.prototype.Wg;Tc.prototype.getStats=Tc.prototype.getStats;Tc.prototype.getBufferedInfo=Tc.prototype.Bb;Tc.prototype.getPresentationStartTimeAsDate=Tc.prototype.og;Tc.prototype.getPlayheadTimeAsDate=Tc.prototype.Gh;Tc.prototype.setTextTrackVisibility=Tc.prototype.Ff;Tc.prototype.getChapters=Tc.prototype.nh;Tc.prototype.getChaptersTracks=Tc.prototype.mg;Tc.prototype.isTextTrackVisible=Tc.prototype.jc;Tc.prototype.selectVariantsByLabel=Tc.prototype.xi;Tc.prototype.selectTextLanguage=Tc.prototype.Eg;Tc.prototype.selectAudioLanguage=Tc.prototype.xf;Tc.prototype.getTextLanguages=Tc.prototype.Jh;Tc.prototype.getAudioLanguages=Tc.prototype.jh;Tc.prototype.getTextLanguagesAndRoles=Tc.prototype.Kh;Tc.prototype.getAudioLanguagesAndRoles=Tc.prototype.kh;Tc.prototype.selectVariantTrack=Tc.prototype.we;Tc.prototype.selectTextTrack=Tc.prototype.yf;Tc.prototype.getThumbnails=Tc.prototype.pg;Tc.prototype.getImageTracks=Tc.prototype.Td;Tc.prototype.getTextTracks=Tc.prototype.Sb;Tc.prototype.getVariantTracks=Tc.prototype.Va;Tc.prototype.cancelTrickPlay=Tc.prototype.Pe;Tc.prototype.trickPlay=Tc.prototype.ze;Tc.prototype.getPlaybackRate=Tc.prototype.Rb;Tc.prototype.isBuffering=Tc.prototype.pd;Tc.prototype.getKeyStatuses=Tc.prototype.Ud;Tc.prototype.getActiveSessionsMetadata=Tc.prototype.Te;Tc.prototype.getExpiration=Tc.prototype.gd;Tc.prototype.drmInfo=Tc.prototype.drmInfo;Tc.prototype.keySystem=Tc.prototype.keySystem;Tc.prototype.goToLive=Tc.prototype.Rh;Tc.prototype.seekRange=Tc.prototype.Aa;Tc.prototype.isAudioOnly=Tc.prototype.Cc;Tc.prototype.isInProgress=Tc.prototype.hc;Tc.prototype.isLive=Tc.prototype.S;Tc.prototype.getAdManager=Tc.prototype.Qd;Tc.prototype.getAssetUri=Tc.prototype.Ue;Tc.prototype.getNetworkingEngine=Tc.prototype.ac;Tc.prototype.getMediaElement=Tc.prototype.Eh;Tc.prototype.getManifestType=Tc.prototype.Ch;Tc.prototype.getLoadMode=Tc.prototype.Ve;Tc.prototype.resetConfiguration=Tc.prototype.ri;Tc.prototype.getBufferFullness=Tc.prototype.lh;Tc.prototype.getConfiguration=Tc.prototype.getConfiguration;Tc.prototype.configure=Tc.prototype.configure;Tc.prototype.load=Tc.prototype.load;Tc.prototype.updateStartTime=Tc.prototype.Hi;Tc.prototype.unload=Tc.prototype.Mf;Tc.prototype.detach=Tc.prototype.detach;Tc.prototype.attachCanvas=Tc.prototype.Yf;Tc.prototype.attach=Tc.prototype.$c;Tc.probeSupport=function(e){e=void 0===e?!0:e;var t,n,i,r,a,o;return O((function(s){if(1==s.g)return t={},e?E(s,Ka(),3):s.D(2);2!=s.g&&(t=s.h);var u={};if(pn()){for(var l in fo)u[l]=!0;for(var h in po)u[h]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};h=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var f=h.next();!f.done;f=h.next())f=f.value,u[f]=pn()?!!fo[f]:gn(f);for(var p in l)u[p]=pn()?!!po[p]:gn(l[p]);n=u;p='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(d(nn));u={};p=c(p);for(l=p.next();!l.done;l=p.next())l=l.value,u[l]=pn()?an(l)?!0:nt(l)||(Ht(l)?!0:!1):gn(l),h=l.split(";")[0],u[h]=u[h]||u[l];i=u;r={manifest:n,media:i,drm:t};a=Jd;for(o in a)r[o]=a[o]();return s.return(r)}))};Tc.isBrowserSupported=Sc;Tc.setAdManagerFactory=function(e){Qd=e};Tc.registerSupportPlugin=function(e,t){Jd[e]=t};Tc.prototype.destroy=Tc.prototype.destroy;var qd=0,zd=1,Kd=2,Xd=3;Tc.LoadMode={DESTROYED:qd,NOT_LOADED:zd,MEDIA_SOURCE:Kd,SRC_EQUALS:Xd};Tc.version="v4.4.3";var Wd=["4","4"];Ii=new function(e){this.g=e;this.i=Ai;this.h=Si}(new Ei(Number(Wd[0]),Number(Wd[1])));var Yd=["output-restricted","internal-error"],Jd={},Qd=null,$d={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Zd={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function eh(){this.h=[];this.j=this.i=this.g=0}function th(e,t,n){var i=this;this.g=e;this.h=t;this.m=n;this.i=!1;this.l=this.h.getVolume();this.j=new gr;this.j.o(this.h,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0}));this.j.o(this.h,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}i=th.prototype;i.getDuration=function(){return this.g.getDuration()};i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()};i.getRemainingTime=function(){return this.h.getRemainingTime()};i.isPaused=function(){return this.i};i.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()};i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};i.canSkipNow=function(){return this.h.getAdSkippableState()};i.skip=function(){return this.h.skip()};i.pause=function(){return this.h.pause()};i.play=function(){return this.h.resume()};i.getVolume=function(){return this.h.getVolume()};i.setVolume=function(e){return this.h.setVolume(e)};i.isMuted=function(){return 0==this.h.getVolume()};i.isLinear=function(){return this.g.isLinear()};i.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen);this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)};i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};i.getTitle=function(){return this.g.getTitle()};i.getDescription=function(){return this.g.getDescription()};i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()};i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};i.getAdId=function(){return this.g.getAdId()};i.getCreativeAdId=function(){return this.g.getCreativeAdId()};i.getAdvertiserName=function(){return this.g.getAdvertiserName()};i.getMediaUrl=function(){return this.g.getMediaUrl()};i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};i.release=function(){this.h=this.g=null};q("shaka.ads.ClientSideAd",th);th.prototype.release=th.prototype.release;th.prototype.getPodIndex=th.prototype.getPodIndex;th.prototype.getTimeOffset=th.prototype.getTimeOffset;th.prototype.getMediaUrl=th.prototype.getMediaUrl;th.prototype.getAdvertiserName=th.prototype.getAdvertiserName;th.prototype.getCreativeAdId=th.prototype.getCreativeAdId;th.prototype.getAdId=th.prototype.getAdId;th.prototype.getVastMediaWidth=th.prototype.getVastMediaWidth;th.prototype.getVastMediaHeight=th.prototype.getVastMediaHeight;th.prototype.getVastMediaBitrate=th.prototype.getVastMediaBitrate;th.prototype.getDescription=th.prototype.getDescription;th.prototype.getTitle=th.prototype.getTitle;th.prototype.getPositionInSequence=th.prototype.getPositionInSequence;th.prototype.getSequenceLength=th.prototype.getSequenceLength;th.prototype.setMuted=th.prototype.setMuted;th.prototype.resize=th.prototype.resize;th.prototype.isLinear=th.prototype.isLinear;th.prototype.isMuted=th.prototype.isMuted;th.prototype.setVolume=th.prototype.setVolume;th.prototype.getVolume=th.prototype.getVolume;th.prototype.play=th.prototype.play;th.prototype.pause=th.prototype.pause;th.prototype.skip=th.prototype.skip;th.prototype.canSkipNow=th.prototype.canSkipNow;th.prototype.getTimeUntilSkippable=th.prototype.getTimeUntilSkippable;th.prototype.isSkippable=th.prototype.isSkippable;th.prototype.isPaused=th.prototype.isPaused;th.prototype.getRemainingTime=th.prototype.getRemainingTime;th.prototype.getMinSuggestedDuration=th.prototype.getMinSuggestedDuration;th.prototype.getDuration=th.prototype.getDuration;function nh(e,t,n,i,r){var a=this;this.s=e;this.i=t;this.F=!1;this.B=this.G=null;this.H=NaN;this.m=r;this.j=null;this.h=new gr;google.ima.settings.setLocale(n);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);e=new google.ima.AdDisplayContainer(this.s,this.i);e.initialize();this.l=new google.ima.AdsLoader(e);this.l.getSettings().setPlayerType("shaka-player");this.l.getSettings().setPlayerVersion("v4.4.3");this.g=null;this.C=i||new google.ima.AdsRenderingSettings;this.h.o(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){rh(a,e)}));this.h.o(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){ih(a,e)}));this.h.o(this.i,"ended",(function(){a.l.contentComplete()}));this.h.wa(this.i,"play",(function(){a.F=!0}))}nh.prototype.configure=function(e){this.G=e};nh.prototype.stop=function(){this.g&&this.g.stop();this.s&&kl(this.s)};nh.prototype.release=function(){this.stop();this.B&&this.B.disconnect();this.h&&this.h.release();this.g&&this.g.destroy();this.l.destroy()};function ih(e,t){t.getError();t=(new Map).set("originalEvent",t);e.m(new K("ad-error",t));uh(e,null);e.m(new K("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function rh(t,n){t.m(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H)));if(t.G.customPlayheadTracker){var i={currentTime:t.i.currentTime};t.g=n.getAdsManager(i,t.C);t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume);t.h.o(t.i,"timeupdate",(function(){t.i.duration&&(i.currentTime=t.i.currentTime)}));t.h.o(t.i,"volumechange",(function(){t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume)}))}else t.g=n.getAdsManager(t.i,t.C);t.m(new K("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[];r=c(r);for(var a=r.next();!a.done;a=r.next())n.push({start:a.value,end:null});t.m(new K("ad-cue-points-changed",(new Map).set("cuepoints",n)))}oh(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,ah(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.o(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ah(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.B=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ah(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.B.observe(t.i)):t.h.o(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ah(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.F?t.g.start():t.h.wa(t.i,"play",(function(){t.F=!0;t.g.start()}))}catch(e){uh(t,null)}}function ah(e){if(document.fullscreenEnabled)return!!document.fullscreenElement;e=e.i;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1}function oh(e){function t(t,n){t=(new Map).set("originalEvent",t);e.m(new K(n,t))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){ih(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){sh(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.STARTED,(function(t){sh(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")}));e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")}));e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")}));e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")}));e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){uh(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){uh(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")}));e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")}));e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}));e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}));e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")}));e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")}));e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")}));e.h.o(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")}));e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")}));e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")}));e.h.o(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")}));e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}function sh(e,t){var n=t.getAd();n?(e.j=new th(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new K("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):Q("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function uh(e,t){e.m(new K("ad-stopped",(new Map).set("originalEvent",t)));e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.i.ended||e.i.play())}function lh(e,t){this.g=e;this.i=null;this.h=t}i=lh.prototype;i.getDuration=function(){return this.i?this.i.duration:-1};i.getMinSuggestedDuration=function(){return this.getDuration()};i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1};i.isPaused=function(){return this.h.paused};i.isSkippable=function(){return this.g.isSkippable()};i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};i.skip=function(){this.h.currentTime+=this.getRemainingTime()};i.pause=function(){return this.h.pause()};i.play=function(){return this.h.play()};i.getVolume=function(){return this.h.volume};i.setVolume=function(e){this.h.volume=e};i.isMuted=function(){return this.h.muted};i.isLinear=function(){return!0};i.resize=function(){};i.setMuted=function(e){this.h.muted=e};i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};i.getTitle=function(){return this.g.getTitle()};i.getDescription=function(){return this.g.getDescription()};i.getVastMediaBitrate=function(){return 0};i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};i.getAdId=function(){return this.g.getAdId()};i.getCreativeAdId=function(){return this.g.getCreativeAdId()};i.getAdvertiserName=function(){return this.g.getAdvertiserName()};i.getMediaUrl=function(){return null};i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};i.release=function(){this.h=this.i=this.g=null};q("shaka.ads.ServerSideAd",lh);lh.prototype.release=lh.prototype.release;lh.prototype.getPodIndex=lh.prototype.getPodIndex;lh.prototype.getTimeOffset=lh.prototype.getTimeOffset;lh.prototype.getMediaUrl=lh.prototype.getMediaUrl;lh.prototype.getAdvertiserName=lh.prototype.getAdvertiserName;lh.prototype.getCreativeAdId=lh.prototype.getCreativeAdId;lh.prototype.getAdId=lh.prototype.getAdId;lh.prototype.getVastMediaWidth=lh.prototype.getVastMediaWidth;lh.prototype.getVastMediaHeight=lh.prototype.getVastMediaHeight;lh.prototype.getVastMediaBitrate=lh.prototype.getVastMediaBitrate;lh.prototype.getDescription=lh.prototype.getDescription;lh.prototype.getTitle=lh.prototype.getTitle;lh.prototype.getPositionInSequence=lh.prototype.getPositionInSequence;lh.prototype.getSequenceLength=lh.prototype.getSequenceLength;lh.prototype.setMuted=lh.prototype.setMuted;lh.prototype.resize=lh.prototype.resize;lh.prototype.isLinear=lh.prototype.isLinear;lh.prototype.isMuted=lh.prototype.isMuted;lh.prototype.setVolume=lh.prototype.setVolume;lh.prototype.getVolume=lh.prototype.getVolume;lh.prototype.play=lh.prototype.play;lh.prototype.pause=lh.prototype.pause;lh.prototype.skip=lh.prototype.skip;lh.prototype.canSkipNow=lh.prototype.canSkipNow;lh.prototype.getTimeUntilSkippable=lh.prototype.getTimeUntilSkippable;lh.prototype.isSkippable=lh.prototype.isSkippable;lh.prototype.isPaused=lh.prototype.isPaused;lh.prototype.getRemainingTime=lh.prototype.getRemainingTime;lh.prototype.getMinSuggestedDuration=lh.prototype.getMinSuggestedDuration;lh.prototype.getDuration=lh.prototype.getDuration;function ch(e,t,n,i){var r=this;this.B=e;this.l=t;this.j=null;this.I=NaN;this.i=i;this.H=!1;this.C=this.m=this.s=null;this.F="";this.G=[];this.h=new gr;e=new google.ima.dai.api.UiSettings;e.setLocale(n);this.g=new google.ima.dai.api.StreamManager(this.l,this.B,e);this.i(new K("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g)));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){dh(r,e)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.F.length?r.j.resolve(r.F):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");r.j=null}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd();r.m=new lh(e,r.l);r.C&&(r.m.i=r.C);r.i(new K("ad-started",(new Map).set("ad",r.m)));r.B.setAttribute("ad-active","true")}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.B.removeAttribute("ad-active");var e=r.l.currentTime;r.s&&r.s>e&&(r.l.currentTime=r.s,r.s=null)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.C=e.getStreamData().adProgressData;r.m&&(r.m.i=r.C)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new K("ad-first-quartile"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new K("ad-midpoint"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new K("ad-third-quartile"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new K("ad-complete"));r.i(new K("ad-stopped"));r.B.removeAttribute("ad-active");r.m=null}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new K("ad-skipped"));r.i(new K("ad-stopped"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];t=c(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.G=e;r.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}ch.prototype.configure=function(){};ch.prototype.stop=function(){this.F="";this.s=null;this.G=[]};ch.prototype.release=function(){this.stop();this.h&&this.h.release()};ch.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data;this.g.onTimedMetadata(t)}};function dh(e,t){e.i(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.I)));t=t.getStreamData().url;e.j.resolve(t);e.j=null;e.H||e.h.o(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.s=t,e.l.currentTime=n.start)}}))}function hh(){ae.call(this);this.g=this.h=null;this.i=new eh;this.l=navigator.language;this.j=null}y(hh,ae);i=hh.prototype;i.setLocale=function(e){this.l=e};i.configure=function(e){this.j=e;this.h&&this.h.configure(this.j);this.g&&this.g.configure(this.j)};i.initClientSide=function(t,n,i){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Se(2,10,1e4);this.h&&this.h.release();this.h=new nh(t,n,this.l,i,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.i.h.push(e.loadTime);break;case"ad-started":r.i.g++;break;case"ad-complete":r.i.i++;break;case"ad-skipped":r.i.j++}r.dispatchEvent(e)}));this.h.configure(this.j)};i.release=function(){this.h&&(this.h.release(),this.h=null);this.g&&(this.g.release(),this.g=null);ae.prototype.release.call(this)};i.onAssetUnload=function(){this.h&&this.h.stop();this.g&&this.g.stop();this.dispatchEvent(new K("ad-stopped"));this.i=new eh};i.requestClientSideAds=function(e){if(!this.h)throw new Se(1,10,10001);var t=this.h;t.g&&t.g.destroy();t.l&&t.l.contentComplete();t.H=Date.now()/1e3;t.l.requestAds(e)};i.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new Se(1,10,10001);var t=this.h;t.C=e;t.g&&t.g.updateAdsRenderingSettings(t.C)};i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Se(2,10,10002);this.g&&this.g.release();this.g=new ch(t,n,this.l,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.i.h.push(e.loadTime);break;case"ad-started":i.i.g++;break;case"ad-complete":i.i.i++;break;case"ad-skipped":i.i.j++}i.dispatchEvent(e)}));this.g.configure(this.j)};i.requestServerSideStream=function(e,t){t=void 0===t?"":t;if(!this.g)throw new Se(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.adTagParameters.mpt="shaka-player";e.adTagParameters.mpv="v4.4.3";n=this.g;n.j?e=Promise.reject(new Se(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new qi,n.g.requestStream(e),n.F=t||"",n.I=Date.now()/1e3,e=n.j);return e};i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Se(1,10,10003);(e.mpt||e.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.mpt="Shaka Player";e.mpv="v4.4.3";this.g.g.replaceAdTagParameters(e)};i.getServerSideCuePoints=function(){if(!this.g)throw new Se(1,10,10003);return this.g.G};i.getStats=function(){var e=this.i;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}};i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}};i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)};i.onCueMetadataChange=function(e){if(this.g)this.g.onCueMetadataChange(e)};q("shaka.ads.AdManager",hh);hh.prototype.onCueMetadataChange=hh.prototype.onCueMetadataChange;hh.prototype.onHlsTimedMetadata=hh.prototype.onHlsTimedMetadata;hh.prototype.onDashTimedMetadata=hh.prototype.onDashTimedMetadata;hh.prototype.getStats=hh.prototype.getStats;hh.prototype.getServerSideCuePoints=hh.prototype.getServerSideCuePoints;hh.prototype.replaceServerSideAdTagParameters=hh.prototype.replaceServerSideAdTagParameters;hh.prototype.requestServerSideStream=hh.prototype.requestServerSideStream;hh.prototype.initServerSide=hh.prototype.initServerSide;hh.prototype.updateClientSideAdsRenderingSettings=hh.prototype.updateClientSideAdsRenderingSettings;hh.prototype.requestClientSideAds=hh.prototype.requestClientSideAds;hh.prototype.onAssetUnload=hh.prototype.onAssetUnload;hh.prototype.release=hh.prototype.release;hh.prototype.initClientSide=hh.prototype.initClientSide;hh.prototype.configure=hh.prototype.configure;hh.prototype.setLocale=hh.prototype.setLocale;hh.ADS_LOADED="ads-loaded";hh.AD_STARTED="ad-started";hh.AD_FIRST_QUARTILE="ad-first-quartile";hh.AD_MIDPOINT="ad-midpoint";hh.AD_THIRD_QUARTILE="ad-third-quartile";hh.AD_COMPLETE="ad-complete";hh.AD_STOPPED="ad-stopped";hh.AD_SKIPPED="ad-skipped";hh.AD_VOLUME_CHANGED="ad-volume-changed";hh.AD_MUTED="ad-muted";hh.AD_PAUSED="ad-paused";hh.AD_RESUMED="ad-resumed";hh.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";hh.CUEPOINTS_CHANGED="ad-cue-points-changed";hh.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";hh.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";hh.AD_CLICKED="ad-clicked";hh.AD_PROGRESS="ad-progress";hh.AD_BUFFERING="ad-buffering";hh.AD_IMPRESSION="ad-impression";hh.AD_DURATION_CHANGED="ad-duration-changed";hh.AD_CLOSED="ad-closed";hh.AD_LOADED="ad-loaded";hh.ALL_ADS_COMPLETED="all-ads-completed";hh.AD_LINEAR_CHANGED="ad-linear-changed";hh.AD_METADATA="ad-metadata";hh.AD_RECOVERABLE_ERROR="ad-recoverable-error";hh.AD_ERROR="ad-error";hh.AD_BREAK_READY="ad-break-ready";hh.AD_INTERACTION="ad-interaction";Qd=function(){return new hh};function fh(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof K){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);e=c(Object.getOwnPropertyNames(t));for(n=e.next();!n.done;n=e.next())i.add(n.value);e={};i=c(i);for(n=i.next();!n.done;n=i.next())n=n.value,e[n]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){i={__type__:"TimeRanges",length:t.length,start:[],end:[]};t=c(_o(t));for(n=t.next();!n.done;n=t.next())n=n.value,e=n.end,i.start.push(n.start),i.end.push(e);t=i}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function ph(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-Infinity;else if("Infinity"==t)n=Infinity;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=gh(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents;t=Error(e.message);for(n in e)t[n]=e[n];n=t}else n=t;return n}))}function gh(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var mh="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),vh="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),yh=["loop","playbackRate"],bh=["pause","play"],wh={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Th={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Eh={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},xh=[["getConfiguration","configure"]],Ah=[["isTextTrackVisible","setTextTrackVisibility"]],Sh="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Ih=["attach","attachCanvas","detach","load","unload"];function kh(e,t,n,i,r,a,o){var s=this;this.I=e;this.O=o;this.j=new fn(t);this.P=n;this.C=!1;this.B=i;this.H=r;this.K=a;this.h=this.m=!1;this.L="";this.s=null;this.F=function(){return Lh(s)};this.G=function(e,t){e=ph(t);switch(e.type){case"event":var n=e.targetName,i=X(e.event);s.B(n,i);break;case"update":n=e.update;for(i in n){e=s.g[i]||{};for(var r in n[i])e[r]=n[i][r]}s.C&&(s.P(),s.C=!1);break;case"asyncComplete":if(i=e.id,r=e.error,e=s.i[i],delete s.i[i],e)if(r){i=new Se(r.severity,r.category,r.code);for(n in r)i[n]=r[n];e.reject(i)}else e.resolve()}};this.g={video:{},player:{}};this.J=0;this.i={};this.l=null;Fh.add(this)}i=kh.prototype;i.destroy=function(){Fh.delete(this);Ph(this);jh&&Rh(this);this.j&&(this.j.stop(),this.j=null);this.H=this.B=null;this.h=this.m=!1;this.G=this.F=this.l=this.i=this.g=this.s=null;return Promise.resolve()};i.sa=function(){return this.h};i.se=function(){return this.L};i.init=function(){if(this.I.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0;this.j.Ca();var t=new chrome.cast.SessionRequest(this.I,[],null,this.O,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=c(Fh),n=t.next();!n.done;n=t.next())Dh(n.value,e)}),(function(e){for(var t=c(Fh),n=t.next();!n.done;n=t.next())n=n.value,Uh="available"==e,n.j.Ca()}),"origin_scoped");chrome.cast.initialize(t,(function(){}),(function(){}));Uh&&this.j.R(Oh);(t=jh)&&t.status!=chrome.cast.SessionStatus.STOPPED?Dh(this,t):jh=null}else e.__onGCastApiAvailable!==Vh&&(Bh=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Vh)};i.zf=function(e){this.s=e;this.h&&Nh(this,{type:"appData",appData:this.s})};i.cast=function(e){var t=this;return O((function(n){if(!t.m)throw new Se(1,8,8e3);if(!Uh)throw new Se(1,8,8001);if(t.h)throw new Se(1,8,8002);t.l=new qi;chrome.cast.requestSession((function(n){return Ch(t,e,n)}),(function(e){return Mh(t,e)}));return E(n,t.l,0)}))};function _h(e){if(e.h){var t=e.K();chrome.cast.requestSession((function(n){return Ch(e,t,n)}),(function(t){return Mh(e,t)}))}}i.xc=function(){if(this.h){Ph(this);if(jh){Rh(this);try{jh.stop((function(){}),(function(){}))}catch(e){}jh=null}Lh(this)}};i.get=function(e,t){var n=this;if("video"==e){if(bh.includes(t))return function(){return n.Cg.apply(n,[e,t].concat(d(U.apply(0,arguments))))}}else if("player"==e){if(Eh[t]&&!this.get("player","isLive")())return function(){};if(Sh.includes(t))return function(){return n.Cg.apply(n,[e,t].concat(d(U.apply(0,arguments))))};if(Ih.includes(t))return function(){return n.ni.apply(n,[e,t].concat(d(U.apply(0,arguments))))};if(wh[t]||Th[t])return function(){return n.g[e][t]}}return this.g[e][t]};i.set=function(e,t,n){this.g[e][t]=n;Nh(this,{type:"set",targetName:e,property:t,value:n})};function Ch(e,t,n){jh=n;n.addUpdateListener(e.F);n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G);Lh(e);Nh(e,{type:"init",initState:t,appData:e.s});e.l.resolve()}function Mh(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Se(2,8,n,t))}i.Cg=function(e,t){Nh(this,{type:"call",targetName:e,methodName:t,args:U.apply(2,arguments)})};i.ni=function(e,t){var n=U.apply(2,arguments),i=new qi,r=this.J.toString();this.J++;this.i[r]=i;try{Nh(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};function Dh(e,t){var n=e.K();e.l=new qi;e.C=!0;Ch(e,n,t)}function Rh(e){var t=jh;t.removeUpdateListener(e.F);t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function Lh(e){var t=jh?"connected"==jh.status:!1;if(e.h&&!t){e.H();for(var n in e.g)e.g[n]={};Ph(e)}e.h=t;e.L=t?jh.receiver.friendlyName:"";e.j.Ca()}function Ph(e){for(var t in e.i){var n=e.i[t];delete e.i[t];n.reject(new Se(1,7,7e3))}}function Nh(e,t){t=fh(t);var n=jh;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Z)}catch(i){throw t=new Se(2,8,8005,i),n=new K("error",(new Map).set("detail",t)),e.B("player",n),e.xc(),t}}var Oh=.02,Uh=!1,jh=null,Bh=null,Fh=new Set;function Vh(t){Bh?e.__onGCastApiAvailable=Bh:delete e.__onGCastApiAvailable;Bh=null;if(t)for(var n=c(Fh),i=n.next();!i.done;i=n.next())i.value.init();"function"===typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Gh(e,t,n,i){i=void 0===i?!1:i;ae.call(this);var r=this;this.i=e;this.h=t;this.m=this.s=this.j=this.B=this.l=null;this.G=n;this.F=i;this.C=new Map;this.g=new kh(n,(function(){return Xh(r)}),(function(){return Wh(r)}),(function(e,t){return $h(r,e,t)}),(function(){return Yh(r)}),(function(){return Kh(r)}),i);Hh(this)}y(Gh,ae);i=Gh.prototype;i.destroy=function(e){e&&this.g.xc();this.m&&(this.m.release(),this.m=null);e=[];this.h&&(e.push(this.h.destroy()),this.h=null);this.g&&(e.push(this.g.destroy()),this.g=null);this.B=this.l=this.i=null;ae.prototype.release.call(this);return Promise.all(e)};i.Tb=function(){return this.l};i.zc=function(){return this.B};i.$f=function(){return this.g.m&&Uh};i.sa=function(){return this.g.sa()};i.se=function(){return this.g.se()};i.cast=function(){var e=this,t;return O((function(n){return 1==n.g?(t=Kh(e),E(n,e.g.cast(t),2)):e.h?E(n,e.h.Mf(),0):n.return()}))};i.zf=function(e){this.g.zf(e)};i.Og=function(){_h(this.g)};i.xc=function(){this.g.xc()};i.dg=function(e,t){t=void 0===t?!1:t;var n=this;return O((function(i){if(1==i.g){if(e==n.G&&t==n.F)return i.return();n.G=e;n.F=t;n.g.xc();return E(i,n.g.destroy(),2)}n.g=null;n.g=new kh(e,(function(){return Xh(n)}),(function(){return Wh(n)}),(function(e,t){return $h(n,e,t)}),(function(){return Yh(n)}),(function(){return Kh(n)}),t);n.g.init();x(i)}))};function Hh(e){e.g.init();e.m=new gr;for(var t=c(mh),n=t.next();!n.done;n=t.next())e.m.o(e.i,n.value,(function(t){e.g.sa()||(t=X(t),e.j.dispatchEvent(t))}));for(var i in W)e.m.o(e.h,W[i],(function(t){e.g.sa()||e.s.dispatchEvent(t)}));e.l={};t={};for(var r in e.i)t.Qc=r,Object.defineProperty(e.l,t.Qc,{configurable:!1,enumerable:!0,get:function(t){return function(){return Jh(e,t.Qc)}}(t),set:function(t){return function(n){var i=t.Qc;e.g.sa()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={Qc:t.Qc};e.B={};zh(e,(function(t){Object.defineProperty(e.B,t,{configurable:!1,enumerable:!0,get:function(){return Qh(e,t)}})}));qh(e);e.j=new ae;e.j.qe=e.l;e.s=new ae;e.s.qe=e.B}function qh(e){var t=new Map;zh(e,(function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.C.set(n,i):e.C.set(i,n)):t.set(i,n)}))}function zh(e,t){function n(e){return"constructor"==e||"function"!=typeof i[e]?!1:!r.has(e)}var i=e.h,r=new Set,a;for(a in i)n(a)&&(r.add(a),t(a,i[a]));e=Object.getPrototypeOf(i);for(a=Object.getPrototypeOf({});e&&e!=a;){for(var o=c(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())s=s.value,n(s)&&(r.add(s),t(s,i[s]));e=Object.getPrototypeOf(e)}}function Kh(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Ue(),startTime:null};e.i.pause();for(var n=c(yh),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];e.i.ended||(t.startTime=e.i.currentTime);n=c(xh);for(i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1];r=e.h[r[0]]();t.player[i]=r}n=c(Ah);for(i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Xh(e){var t=new K("caststatuschanged");e.dispatchEvent(t)}function Wh(e){var t=new K(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Yh(e){for(var t=c(xh),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1];i=e.g.get("player",i[0])();e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended");t=Promise.resolve();var a=e.i.autoplay;i=null;n||(i=e.g.get("video","currentTime"));r&&(e.i.autoplay=!1,t=e.h.load(r,i));var o={};n=c(yh);for(i=n.next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=c(yh),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];t=c(Ah);for(n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1];i=e.g.get("player",i[0])();e.h[n](i)}e.i.autoplay=a;r&&e.i.play()}}),(function(t){t=(new Map).set("detail",t);t=new K("error",t);e.h.dispatchEvent(t)}))}function Jh(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function Qh(e,t){e.C.has(t)&&(t=e.C.get(t));if("addEventListener"==t)return function(t,n,i){return e.s.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.s.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.ac()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Qd()};if("setVideoContainer"==t)return function(t){return e.h.Gf(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){Q(t+"() does not work while casting!");return null};if("attach"==t||"detach"==t)return function(){Q(t+"() does not work while casting!");return Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(wh[t]||Th[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}function $h(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.s.dispatchEvent(n))}q("shaka.cast.CastProxy",Gh);Gh.prototype.changeReceiverId=Gh.prototype.dg;Gh.prototype.forceDisconnect=Gh.prototype.xc;Gh.prototype.suggestDisconnect=Gh.prototype.Og;Gh.prototype.setAppData=Gh.prototype.zf;Gh.prototype.cast=Gh.prototype.cast;Gh.prototype.receiverName=Gh.prototype.se;Gh.prototype.isCasting=Gh.prototype.sa;Gh.prototype.canCast=Gh.prototype.$f;Gh.prototype.getPlayer=Gh.prototype.zc;Gh.prototype.getVideo=Gh.prototype.Tb;Gh.prototype.destroy=Gh.prototype.destroy;function Zh(e,t,n,i){ae.call(this);var r=this;this.g=e;this.h=t;this.j=new gr;this.J={video:e,player:t};this.G=n||function(){};this.K=i||function(e){return e};this.i=null;this.H=!1;this.s=!0;this.m=0;this.F=!1;this.C=!0;this.B=this.l=null;this.I=new fn((function(){of(r)}));ef(this)}y(Zh,ae);i=Zh.prototype;i.isConnected=function(){return this.H};i.Vh=function(){return this.s};i.Bi=function(e){this.i=e};i.dh=function(){this.i=null};i.Ci=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.title=e};i.Ai=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.images=[{url:e}]};i.zi=function(e){this.i||(this.i={});this.i.artist=e;this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};i.destroy=function(){var e=this,t,n;return O((function(i){if(1==i.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.I&&(e.I.stop(),e.I=null),e.g=null,e.J=null,e.G=null,e.H=!1,e.s=!0,e.l=null,e.B=null,ae.prototype.release.call(e),E(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance();n.stop();x(i)}))};function ef(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return tf(e)};t.onSenderDisconnected=function(){return tf(e)};t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&hf(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l);hf(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)};e.B=t.getCastMessageBus("urn:x-cast:com.google.cast.media");e.B.onMessage=function(t){return cf(e,t)};e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2");e.l.onMessage=function(t){return lf(e,t)};t.start();t=c(mh);for(var n=t.next();!n.done;n=t.next())e.j.o(e.g,n.value,(function(t){return af(e,"video",t)}));for(var i in W)e.j.o(e.h,W[i],(function(t){return af(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Cf(3840,2160):e.h.Cf(1920,1080);e.j.o(e.g,"loadeddata",(function(){e.F=!0}));e.j.o(e.h,"loading",(function(){e.s=!1;nf(e)}));e.j.o(e.g,"playing",(function(){e.s=!1;nf(e)}));e.j.o(e.g,"pause",(function(){nf(e)}));e.j.o(e.h,"unloading",(function(){e.s=!0;nf(e)}));e.j.o(e.g,"ended",(function(){new fn((function(){e.g&&e.g.ended&&(e.s=!0,nf(e))})).R(gf)}))}function tf(e){e.m=0;e.C=!0;e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;nf(e)}function nf(e){var t;O((function(n){if(1==n.g)return E(n,Promise.resolve(),2);if(!e.h)return n.return();t=new K("caststatuschanged");e.dispatchEvent(t);sf(e)||ff(e);x(n)}))}function rf(e,t,n){var i,r,a,o,s,u,l,c,d,h;O((function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);e.G(n);a=e.g.autoplay;return t.manifest?(e.g.autoplay=!1,A(f,5),E(f,e.h.load(t.manifest,t.startTime),7)):E(f,Promise.resolve(),3);case 7:I(f,3);break;case 5:return o=k(f),s=(new Map).set("detail",o),u=new K("error",s),e.h&&e.h.dispatchEvent(u),f.return();case 3:if(!e.h)return f.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a;t.manifest&&(e.g.play(),ff(e));x(f)}}))}function af(e,t,n){e.h&&(of(e),hf(e,{type:"event",targetName:t,event:n},e.l))}function of(e){e.I.R(pf);for(var t={video:{},player:{}},n=c(vh),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.S())for(var r in Eh)0==e.m%Eh[r]&&(t.player[r]=e.h[r]());for(var a in wh)0==e.m%wh[a]&&(t.player[a]=e.h[a]());if(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())t.video.volume=n.level,t.video.muted=n.muted;hf(e,{type:"update",update:t},e.l);for(var o in Th)0==e.m%Th[o]&&(t={player:{}},t.player[o]=e.h[o](),hf(e,{type:"update",update:t},e.l));e.F&&(e.m+=1);sf(e)}function sf(e){return e.C&&(e.g.duration||e.h.S())?(uf(e),e.C=!1,!0):!1}function uf(e,t){var n={contentId:e.h.Ue(),streamType:e.h.S()?"LIVE":"BUFFERED",contentType:""};e.h.S()||(n.duration=e.g.duration);e.i&&(n.metadata=e.i);ff(e,void 0===t?0:t,n)}function lf(e,t){var n=ph(t.data);switch(n.type){case"init":e.m=0;e.F=!1;e.C=!0;rf(e,n.initState,n.appData);of(e);break;case"appData":e.G(n.appData);break;case"set":var i=n.targetName,r=n.property;n=n.value;if("video"==i)if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}else if("muted"==r){t.setSystemVolumeMuted(n);break}e.J[i][r]=n;break;case"call":i=e.J[n.targetName];i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName;r=n.methodName;"player"==i&&"load"==r&&(e.m=0,e.F=!1);var a=n.id,o=t.senderId;t=e.J[i];n=t[r].apply(t,n.args);"player"==i&&"load"==r&&(n=n.then((function(){e.C=!0})));n.then((function(){return df(e,o,a,null)}),(function(t){return df(e,o,a,t)}))}}function cf(e,t){var n=ph(t.data);switch(n.type){case"PLAY":e.g.play();ff(e);break;case"PAUSE":e.g.pause();ff(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.g.currentTime=Number(t));i&&"PLAYBACK_START"==i?(e.g.play(),ff(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),ff(e));break;case"STOP":e.h.Mf().then((function(){e.h&&ff(e)}));break;case"GET_STATUS":uf(e,Number(n.requestId));break;case"VOLUME":i=n.volume;t=i.level;i=i.muted;var r=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t));null!=i&&(e.g.muted=i);r==e.g.volume&&a==e.g.muted||ff(e);break;case"LOAD":e.m=0;e.F=!1;e.C=!1;t=n.media;i=n.currentTime;r=e.K(t.contentId);a=n.autoplay||!0;e.G(t.customData);a&&(e.g.autoplay=!0);e.h.load(r,i).then((function(){e.h&&uf(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED");hf(e,{requestId:Number(n.requestId),type:i},e.B)}));break;default:hf(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.B)}}function df(e,t,n,i){e.h&&hf(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function hf(e,t,n,i){e.H&&(e=fh(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function ff(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?mf:e.h.pd()?yf:e.g.paused?bf:vf,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n);hf(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.B)}q("shaka.cast.CastReceiver",Zh);Zh.prototype.destroy=Zh.prototype.destroy;Zh.prototype.setContentArtist=Zh.prototype.zi;Zh.prototype.setContentImage=Zh.prototype.Ai;Zh.prototype.setContentTitle=Zh.prototype.Ci;Zh.prototype.clearContentMetadata=Zh.prototype.dh;Zh.prototype.setContentMetadata=Zh.prototype.Bi;Zh.prototype.isIdle=Zh.prototype.Vh;Zh.prototype.isConnected=Zh.prototype.isConnected;var pf=.5,gf=5,mf="IDLE",vf="PLAYING",yf="BUFFERING",bf="PAUSED";function wf(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=Tf(i,r,s,u,l,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=Ef(i,r),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var m=g.l,v=g.i,y=g.j,b=g.h;if(m!=s||v!=u||y!=l||b!=c)d.payload&&e.nestedCues.push(d),d=Tf(i,r,m,v,y,b),s=m,u=v,l=y,c=b;d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d);a!==o&&(d=Ef(i,r),e.nestedCues.push(d));d=Tf(i,r,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Tf(e,t,n,i,r,a){e=new Tt(e,t,"");n&&e.textDecoration.push("underline");i&&(e.fontStyle="italic");e.color=r;e.backgroundColor=a;return e}function Ef(e,t){e=new Tt(e,t,"");e.lineBreak=!0;return e}function xf(e,t,n,i,r){this.g=e;this.l=t;this.i=n;this.h=i;this.j=r}function Af(e,t){this.i=[];this.g=1;this.h=0;this.C=e;this.B=t;this.j=this.m=!1;this.l="white";this.s="black";If(this)}function Sf(e,t,n){var i="CC"+(e.C<<1|e.B+1),r=new Tt(t,n,"");r.lineInterpretation=1;r.line=e.g/16*100;return wf(r,i,e.i,t,n)}function If(e){Cf(e,0,15);e.g=1}function kf(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Mf:i=Pf.has(n)?Pf.get(n):String.fromCharCode(n);break;case Df:i=Nf.get(n);break;case Rf:e.i[e.g].pop();i=Of.get(n);break;case Lf:e.i[e.g].pop(),i=Uf.get(n)}i&&e.i[e.g].push(new xf(i,e.m,e.j,e.s,e.l))}}function _f(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function Cf(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Mf=0,Df=1,Rf=2,Lf=3,Pf=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Nf=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Of=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Uf=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function jf(e,t){this.h=Gf;this.s=new Af(e,t);this.i=new Af(e,t);this.g=this.j=new Af(e,t);this.l=0;this.m=null}function Bf(e,t,n){e.g=e.i;var i=e.g,r=null;e.h!==qf&&e.h!==zf&&(r=Sf(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Cf(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Cf(n,0,15),i.g=15);e.h=qf;i.h=t;return r}function Ff(e){e.h=Hf;e.g=e.j;e.g.h=0}function Vf(e){$("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");e.g=e.s;e.h=zf}var Gf=0,Hf=1,qf=3,zf=4,Kf="black green blue cyan red yellow magenta black".split(" "),Xf="white green blue cyan red yellow magenta white_italics".split(" ");function Wf(){this.l=!1;this.F=this.H=0;this.G=np;this.i=[];this.g=this.h=this.j=0;this.C=this.s=!1;this.B="white";this.m="black";Yf(this)}function Yf(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Jf())}function Jf(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Qf(e,t){$f(e)&&(e.i[e.h][e.g]=new xf(t,e.C,e.s,e.m,e.B),e.g++)}function $f(e){var t=e.g<e.F&&0<=e.g;return e.h<e.H&&0<=e.h&&t}Wf.prototype.isVisible=function(){return this.l};function Zf(e,t,n){var i=new Tt(e.j,t,"");i.textAlign=e.G===ep?"left":e.G===tp?"right":At;if(n=wf(i,"svc"+n,e.i,e.j,t))e.j=t;return n}var ep=0,tp=1,np=2;function ip(){this.i=[];this.h=null;this.g=0}function rp(e,t){3===t.type?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new ap(e.h)),e.h=null,e.g=0))}function ap(e){this.g=0;this.h=e}ap.prototype.va=function(){return this.g<this.h.length};ap.prototype.ra=function(){return this.g};function op(e){if(!e.va())throw new Se(2,2,3e3);return e.h[e.g++]}ap.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Se(2,2,3e3);this.g+=e};function sp(e){this.i=e;this.h=[null,null,null,null,null,null,null,null];this.g=null}function up(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=op(t).value;t=null;n=c(lp(e,n));for(var r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Zf(r,i,e.i)),Yf(r);return t}if(137===n)for(t=op(t).value,t=c(lp(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(138===n){n=op(t).value;t=null;n=c(lp(e,n));for(r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Zf(r,i,e.i)),r.l=!1;return t}if(139===n){n=op(t).value;t=null;n=c(lp(e,n));for(r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=Zf(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return t=op(t).value,cp(e,t,i);if(143===n)return i=cp(e,255,i),dp(e),i;if(144===n)t.skip(1),i=op(t).value,e.g&&(e.g.s=0<(i&128),e.g.C=0<(i&64));else if(145===n)i=op(t).value,n=op(t).value,t.skip(1),e.g&&(t=hp((n&48)>>4,(n&12)>>2,n&3),e.g.B=hp((i&48)>>4,(i&12)>>2,i&3),e.g.m=t);else if(146===n)i=op(t).value,t=op(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(151===n)t.skip(1),t.skip(1),i=op(t).value,t.skip(1),e.g&&(e.g.G=i&3);else if(152<=n&&159>=n){n=(n&15)-8;r=null!==e.h[n];if(!r){var a=new Wf;a.j=i;e.h[n]=a}i=op(t).value;op(t);op(t);a=op(t).value;var o=op(t).value;t=op(t).value;r&&0===(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.s=!1,t.B="white",t.m="black");t=e.h[n];t.l=0<(i&32);t.H=(a&15)+1;t.F=(o&63)+1;e.g=e.h[n]}}}return null}function lp(e,t){for(var n=[],i=0;8>i;i++)1===(t&1)&&e.h[i]&&n.push(i),t>>=1;return n}function cp(e,t,n){var i=null;t=c(lp(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=Zf(a,n,e.i));e.h[r]=null}return i}function dp(e){e.g=null;e.h=[null,null,null,null,null,null,null,null]}function hp(e,t,n){var i={0:0,1:0,2:1,3:1};e=i[e];t=i[t];n=i[n];return pp[e<<2|t<<1|n]}var fp=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),pp="black blue green cyan red magenta yellow white".split(" ");function gp(){this.h=[];this.g=[];this.i=new ip;this.l=0;this.m=new Map([["CC1",new jf(0,0)],["CC2",new jf(0,1)],["CC3",new jf(1,0)],["CC4",new jf(1,1)]]);this.B=this.s=0;this.j=new Map;this.C=!0;mp(this)}gp.prototype.clear=function(){this.l=0;this.h=[];this.g=[];var e=this.i;e.i=[];e.h=[];e.g=0;mp(this);e=c(this.j.values());for(var t=e.next();!t.done;t=e.next())dp(t.value)};function mp(e){e.s=0;e.B=0;for(var t=c(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=Gf,n.g=n.j,n.m=null,If(n.i),If(n.j),If(n.s);e.C=!0}gp.prototype.extract=function(e,t){if(this.C){for(var n=c(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.C=!1}e=new Dr(e,0);if(181===e.Ia()&&49===e.Za()&&1195456820===e.N()&&3===e.Ia()&&(n=e.Ia(),0!==(n&64)))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.Ia(),a=(r&4)>>2,o=e.Ia(),s=e.Ia();a&&(r&=3,0===r||1===r?this.h.push({pts:t,type:r,Ua:o,yb:s,order:this.h.length}):(this.g.push({pts:t,type:r,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}};gp.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e);this.g.sort(e);for(var n=c(this.h),i=n.next();!i.done;i=n.next())(i=vp(this,i.value))&&t.push(i);n=c(this.g);for(i=n.next();!i.done;i=n.next())rp(this.i,i.value);n=c(this.i.i);for(i=n.next();!i.done;i=n.next())i=yp(this,i.value),t.push.apply(t,d(i));this.i.i=[];this.h=[];this.g=[];return t};function vp(e,t){var n=t.type;if(16===(t.Ua&112)){var i=t.Ua>>3&1;0===n?e.s=i:e.B=i}n=e.m.get("CC"+(n<<1|(n?e.B:e.s)+1));if(255===t.Ua&&255===t.yb||!t.Ua&&!t.yb||!bp(t.Ua)||!bp(t.yb))return 45<=++e.l&&mp(e),null;e.l=0;t.Ua&=127;t.yb&=127;if(!t.Ua&&!t.yb)return null;e=null;if(16===(t.Ua&112))e:{i=t.Ua;e=t.yb;if(n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16===(i&240)&&64===(e&192)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var r=(e&30)>>1;i="white";var a=!1;7>r?i=Xf[r]:7===r&&(a=!0);e=1===(e&1);n.h!==zf&&(r=n.g,n.h===qf&&t!==r.g&&(n=1+t-r.h,_f(r,n,1+r.g-r.h,r.h),Cf(r,0,n-1),Cf(r,t+1,15-t)),r.g=t,r.m=e,r.j=a,r.l=i,r.s="black")}else if(17===(i&247)&&32===(e&240))n.g.m=!1,n.g.j=!1,n.g.l="white",kf(n.g,Mf,32),i=!1,t=Xf[(e&14)>>1],"white_italics"===t&&(t="white",i=!0),n.g.m=1===(e&1),n.g.j=i,n.g.l=t;else if(16===(i&247)&&32===(e&240)||23===(i&247)&&45===(e&255))t="black",0===(i&7)&&(t=Kf[(e&14)>>1]),n.g.s=t;else if(17===(i&247)&&48===(e&240))kf(n.g,Df,e);else if(18===(i&246)&&32===(e&224))kf(n.g,i&1?Lf:Rf,e);else if(20===(i&246)&&32===(e&240)){e=t.pts;i=null;switch(t.yb){case 32:Ff(n);break;case 33:n=n.g;n.i[n.g].pop();break;case 37:i=Bf(n,2,e);break;case 38:i=Bf(n,3,e);break;case 39:i=Bf(n,4,e);break;case 40:kf(n.g,Mf,32);break;case 41:n.h=2;n.g=n.i;n.g.h=0;n.l=e;break;case 42:If(n.s);Vf(n);break;case 43:Vf(n);break;case 44:t=n.i;i=null;n.h!==zf&&(i=Sf(t,n.l,e));Cf(t,0,15);break;case 45:t=n.g;n.h!==qf?i=null:(i=Sf(t,n.l,e),a=t.g-t.h+1,_f(t,a-1,a,t.h),Cf(t,0,a-1),Cf(t,t.g,15-t.g),n.l=e);break;case 46:Cf(n.j,0,15);break;case 47:t=null,n.h!==zf&&(t=Sf(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Ff(n),n.l=e,i=t}e=i;break e}e=null}else i=t.yb,kf(n.g,Mf,t.Ua),kf(n.g,Mf,i);return e}function yp(e,t){var n=[];try{for(;t.va();){var i=op(t).value,r=(i&224)>>5,a=i&31;7===r&&0!=a&&(r=op(t).value&63);if(0!=r){e.j.has(r)||e.j.set(r,new sp(r));for(var o=e.j.get(r),s=t.ra();t.ra()-s<a;){r=t;var u=op(r),l=u.value,c=u.pts;if(16===l){var d=op(r);l=l<<16|d.value}if(0<=l&&31>=l){var h=c;if(o.g){var f=o.g;r=null;switch(l){case 8:!$f(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.F-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:f.isVisible()&&(r=Zf(f,h,o.i));if(f.h+1>=f.H){h=f;for(var p=0,g=1;16>g;g++,p++)h.i[p]=h.i[g];for(g=0;1>g;g++,p++)h.i[p]=Jf()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(r=Zf(f,h,o.i));f.i[f.h]=Jf();f.g=0;break;case 12:f.isVisible()&&(r=Zf(f,h,o.i)),Yf(f),h=f,h.h=0,h.g=0}var m=r}else m=null}else if(128<=l&&159>=l)m=up(o,r,l,c);else{if(4096<=l&&4127>=l)h=l&255,8<=h&&15>=h?r.skip(1):16<=h&&23>=h?r.skip(2):24<=h&&31>=h&&r.skip(3);else if(4224<=l&&4255>=l)h=l&255,128<=h&&135>=h?r.skip(4):136<=h&&143>=h&&r.skip(5);else if(32<=l&&127>=l)r=l,o.g&&(127===r?Qf(o.g,""):Qf(o.g,String.fromCharCode(r)));else if(160<=l&&255>=l)o.g&&Qf(o.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=l&255,o.g)if(fp.has(r)){var v=fp.get(r);Qf(o.g,v)}else Qf(o.g,"_")}else 4256<=l&&4351>=l&&o.g&&(160!=(l&255)?Qf(o.g,"_"):Qf(o.g,"[CC]"));m=null}(r=m)&&n.push(r)}}}}catch(e){if(e instanceof Se&&3e3===e.code)$("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw e}return n}function bp(e){for(var t=0;e;)t^=e&1,e>>=1;return 1===t}q("shaka.cea.CeaDecoder",gp);mt=function(){return new gp};function wp(e){for(var t=[],n=e,i=e=0;i<n.length;)2==e&&3==n[i]?(e=0,n=[].concat(d(n)),n.splice(i,1),n=new Uint8Array(n)):0==n[i]?e++:e=0,i++;e=n;for(i=0;i<e.length;){for(n=0;255==e[i];)n+=255,i++;n+=e[i++];for(var r=0;255==e[i];)r+=255,i++;r+=e[i++];4==n&&t.push(e.subarray(i,i+r));i+=r}return t}function Tp(){this.j=new Map;this.i=this.h=0;this.g=xp}Tp.prototype.init=function(e){function t(e){e=e.name;e in Ip&&(n.g=Ip[e])}var n=this,i=[],r=[];(new Pr).box("moov",Nr).box("mvex",Nr).T("trex",(function(e){var t=e.reader;t.skip(4);t.skip(4);e=t.N();t=t.N();n.h=e;n.i=t})).box("trak",Nr).T("tkhd",(function(e){e=Fo(e.reader,e.version);i.push(e.trackId)})).box("mdia",Nr).T("mdhd",(function(e){e=jo(e.reader,e.version);r.push(e.timescale)})).box("minf",Nr).box("stbl",Nr).T("stsd",Or).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Ur).box("sinf",Nr).box("frma",(function(e){e=Ho(e.reader).Ga;e in Ip&&(n.g=Ip[e])})).parse(e,!0);if(!i.length||!r.length||i.length!=r.length)throw new Se(2,2,2010);this.g==xp&&Q("Unable to determine bitstream format for CEA parsing!");i.forEach((function(e,t){n.j.set(e,r[t])}))};Tp.prototype.parse=function(e){var t=this;if(this.g==xp)return[];var n=[],i=this.h,r=this.i,a=0,o=[],s=null,u=9e4;(new Pr).box("moof",(function(e){a=e.start;o=[];Nr(e)})).box("traf",Nr).T("trun",(function(e){e=Bo(e.reader,e.version,e.flags);o.push(e)})).T("tfhd",(function(e){e=Oo(e.reader,e.flags);i=e.ig||t.h;r=e.hh||t.i;e=e.trackId;t.j.has(e)&&(u=t.j.get(e))})).T("tfdt",(function(e){s=Uo(e.reader,e.version).baseMediaDecodeTime})).box("mdat",(function(e){if(null===s)throw Q("Unable to find base media decode time for CEA captions!"),new Se(2,2,2010);Ep(t,e.reader,s,u,i,r,a-e.start-8,o,n)})).parse(e,!1);return n};function Ep(e,t,n,i,r,a,o,s,u){var l=0,h=a,f=s.map((function(e){return e.Dg}));f=[].concat.apply([],d(f));f.length&&(h=f[0].sampleSize||a);for(t.skip(o+s[0].gh);t.va();){o=t.N();var p=t.Ia(),g=null;g=!1;s=1;switch(e.g){case Ap:g=p&31;g=6==g;break;case Sp:s=2;t.skip(1);g=p>>1&63;g=39==g||40==g;break;default:return}if(g)for(p=0,l<f.length&&(p=f[l].ve||0),p=(n+p)/i,s=c(wp(t.Ib(o-s))),g=s.next();!g.done;g=s.next())u.push({packet:g.value,pts:p});else try{t.skip(o-s)}catch(e){break}h-=o+4;0==h&&(n=l<f.length?n+(f[l].vf||r):n+r,l++,l<f.length?h=f[l].sampleSize||a:h=a)}}q("shaka.cea.Mp4CeaParser",Tp);var xp=0,Ap=1,Sp=2,Ip={avc1:Ap,avc3:Ap,hev1:Sp,hvc1:Sp,dvh1:Sp,dvhe:Sp};gt["video/mp4"]=function(){return new Tp};function kp(){}kp.prototype.init=function(){};kp.prototype.parse=function(e){var t=[];e=ct(e);if(!ts(e))return t;e=(new Zo).parse(e).Ye();e=c(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,6==n.type&&null!=n.time)for(var i=c(wp(n.data)),r=i.next();!r.done;r=i.next())t.push({packet:r.value,pts:n.time});return t};q("shaka.cea.TsCeaParser",kp);gt["video/mp2t"]=function(){return new kp};function _p(e,t,n){var i=Pp(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));o.delete(null);if(1<o.size)throw new Se(2,4,4010);t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.wf?(r=e.init||r,!1):!0})),a.length&&(e=Lp(r,a,n,o),0==e.length&&(e=[De("",r)])));if(i.length&&(t||!a.length))for(e=[],t=c(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,"org.w3.clearkey"!=n&&e.push(De(n,r));if(o=Array.from(o)[0]||null)for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=o;return{hg:o,ek:r,drmInfos:e,lg:!0}}function Cp(e,t,n,i){var r=_p(e,n,i);if(t.lg){e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem;n=0==r.drmInfos.length;if(0==t.drmInfos.length||e&&!n)t.drmInfos=r.drmInfos;t.lg=!1}else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Se(2,4,4008);return r.hg||t.hg}function Mp(e){var t=0,n=dt(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{e=t+6;for(t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);e+=2;var r=n.getUint16(e,!0);e+=2;if(0!=(r&1)||r+e>n.byteLength){n=[];break e}var a=ct(n,e,r);t.push({type:i,value:a});e+=r}n=t}return n}function Dp(e){e=c(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=c(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&"LA_URL"==n.tagName)return n.textContent}return""}function Rp(e){var t=ea(e.node,"https://dashif.org/CPS","Laurl");if(t&&t.textContent)return t.textContent;e=ea(e.node,"urn:microsoft:playready","pro");if(!e)return"";e=Xr(e.textContent);e=Mp(e).filter((function(e){return e.type===Op}))[0];if(!e)return"";e=Ir(e.value,!0);return(e=ya(e,"WRMHEADER"))?Dp(e):""}function Lp(e,t,n,i){var r=[];t=c(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o=n[a.wf];if(o){var s;if(s=ea(a.node,"urn:microsoft:playready","pro")){s=Xr(s.textContent);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:$r(s,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;u=null;if("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.wf)if(u=i,0==u.size)u=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),d=new Uint8Array([]);u=[{initData:$r(d,l,u,1),initDataType:"cenc",keyId:a.keyId}]}s=De(o,a.init||e||s||u);if(o=Up.get(o))s.licenseServerUri=o(a);r.push(s)}}return r}function Pp(e){var t=[];e=c(e);for(var n=e.next();!n.done;n=e.next())(n=Np(n.value))&&t.push(n);return t}function Np(e){var t=e.getAttribute("schemeIdUri"),n=ra(e,"urn:mpeg:cenc:2013","default_KID"),i=ia(e,"urn:mpeg:cenc:2013","pssh").map(oa);if(!t)return null;t=t.toLowerCase();if(n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Se(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:Xr(e),keyId:null}}))}catch(e){throw new Se(2,4,4007)}return{node:e,wf:t,keyId:n,init:0<r.length?r:null}}var Op=1,Up=(new Map).set("com.widevine.alpha",(function(e){var t=ea(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=ea(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""})).set("com.microsoft.playready",Rp).set("com.microsoft.playready.recommendation",Rp).set("com.microsoft.playready.software",Rp).set("com.microsoft.playready.hardware",Rp).set("org.w3.clearkey",(function(e){var t=ea(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=ea(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function jp(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;"RepresentationID"==n&&i&&(i=void 0);"Time"==n&&(a=Math.round(a));switch(r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}i=e.parseInt(i,10)||1;return Array(Math.max(0,i-t.length)+1).join("0")+t}))}function Bp(e,t){var n=Fp(e,t,"timescale"),i=1;n&&(i=fa(n)||1);var r=Fp(e,t,"duration");n=fa(r||"");"image"==e.M.contentType&&(n=ga(r||""));n&&(n/=i);var a=Fp(e,t,"startNumber");r=Number(Fp(e,t,"presentationTimeOffset"))||0;var o=pa(a||"");if(null==a||null==o)o=1;a=Vp(e,t,"SegmentTimeline");t=null;if(a){t=i;e=e.aa.duration||Infinity;a=ta(a,"S");for(var s=[],u=-r,l=0;l<a.length;++l){var c=a[l],d=a[l+1],h=ua(c,"t",pa),f=ua(c,"d",pa);c=ua(c,"r",ha);null!=h&&(h-=r);if(!f)break;h=null!=h?h:u;c=c||0;if(0>c)if(d){d=ua(d,"t",pa);if(null==d)break;else if(h>=d)break;c=Math.ceil((d-h)/f)-1}else{if(Infinity==e)break;else if(h/t>=e)break;c=Math.ceil((e*t-h)/f)-1}0<s.length&&h!=u&&(s[s.length-1].end=h/t);for(d=0;d<=c;++d)u=h+f,s.push({start:h/t,end:u/t,Of:h}),h=u}t=s}return{timescale:i,Ba:n,Kc:o,Jb:r/i||0,Nf:r,timeline:t}}function Fp(e,t,n){return[t(e.M),t(e.oa),t(e.ua)].filter(Ce).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Vp(e,t,n){return[t(e.M),t(e.oa),t(e.ua)].filter(Ce).map((function(e){return Zr(e,n)})).reduce((function(e,t){return e||t}))}function Gp(e,t,n,i,r,a){for(var o=ra(e,"http://www.w3.org/1999/xlink","href"),s=ra(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=c(Array.from(e.attributes)),l=u.next();!l.done;l=u.next())l=l.value,"http://www.w3.org/1999/xlink"==l.namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=a)return Ki(new Se(2,4,4028));if("onLoad"!=s)return Ki(new Se(2,4,4027));var d=Me([i],[o]);return r.request(0,rr(d,t)).qa((function(i){i=ba(i.data,e.tagName);if(!i)return Ki(new Se(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s);e.appendChild(s)}i=c(Array.from(i.attributes));for(s=i.next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return Hp(e,t,n,d[0],r,a+1)}))}function Hp(e,t,n,i,r,a){a=void 0===a?0:a;if(ra(e,"http://www.w3.org/1999/xlink","href")){var o=Gp(e,t,n,i,r,a);n&&(o=o.qa(void 0,(function(){return Hp(e,t,n,i,r,a)})));return o}o=[];for(var s=c(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())u=u.value,u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==ra(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(Hp(u,t,n,i,r,a)));return Ji(o).qa((function(){return e}))}function qp(e,t,n,i,r,a,o){var s,u=(new Pr).T("sidx",(function(e){s=zp(t,i,r,a,o,n,e)}));e&&u.parse(e);if(s)return s;throw new Se(2,3,3004)}function zp(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var u=o.reader.N();if(0==u)throw new Se(2,3,3005);if(0==o.version){var l=o.reader.N();var c=o.reader.N()}else l=o.reader.Ic(),c=o.reader.Ic();o.reader.skip(2);var d=o.reader.Za();e=e+o.size+c;for(c=0;c<d;c++){var h=o.reader.N(),f=(h&2147483648)>>>31;h&=2147483647;var p=o.reader.N();o.reader.skip(4);if(1==f)throw new Se(2,3,3006);s.push(new To(l/u+n,(l+p)/u+n,(function(){return a}),e,e+h-1,t,n,i,r));l+=p;e+=h}o.parser.stop();return s}function Kp(e){this.h=dt(e);this.g=new Dr(this.h,0)}Kp.prototype.va=function(){return this.g.va()};function Xp(e){var t=Wp(e);if(7<t.length)throw new Se(2,3,3002);var n=0;t=c(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Wp(e);e:{i=c(Yp);for(var r=i.next();!r.done;r=i.next())if(st(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.ra();else{if(8==t.length&&t[1]&224)throw new Se(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}t=e.g.ra()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ra();i=dt(e.h,e.g.ra(),t);e.g.skip(t);return new Jp(n,i)}function Wp(e){var t=e.g.ra(),n=e.g.Ia();if(0==n)throw new Se(2,3,3002);n=8-Math.floor(Math.log2(n));e.g.skip(n-1);return ct(e.h,t,n)}var Yp=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Jp(e,t){this.id=e;this.g=t}function Qp(e){if(8<e.g.byteLength)throw new Se(2,3,3002);if(8==e.g.byteLength&&e.g.getUint8(0)&224)throw new Se(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function $p(e,t,n,i,r,a,o,s,u){function l(){return r}var c=[];e=new Kp(e.g);for(var d=null,h=null;e.va();){var f=Xp(e);if(187==f.id){var p=Zp(f);p&&(f=n*p.Gi,p=t+p.mi,null!=d&&c.push(new To(d+o,f+o,l,h,p-1,a,o,s,u)),d=f,h=p)}}null!=d&&c.push(new To(d+o,i+o,l,h,null,a,o,s,u));return c}function Zp(e){var t=new Kp(e.g);e=Xp(t);if(179!=e.id)throw new Se(2,3,3013);e=Qp(e);t=Xp(t);if(183!=t.id)throw new Se(2,3,3012);t=new Kp(t.g);for(var n=0;t.va();){var i=Xp(t);if(241==i.id){n=Qp(i);break}}return{Gi:e,mi:n}}function eg(e,t){t=Vp(e,t,"Initialization");if(!t)return null;var n=e.M.Ta,i=t.getAttribute("sourceURL");i&&(n=Me(e.M.Ta,[i]));i=0;var r=null;if(t=ua(t,"range",da))i=t.start,r=t.end;return new bo((function(){return n}),i,r,sg(e))}function tg(e,t){var n=Number(Fp(e,ig,"presentationTimeOffset"))||0,i=Fp(e,ig,"timescale"),r=1;i&&(r=fa(i)||1);var a=n/r||0,o=eg(e,ig);ag(e,o);var s=Zi(e);return{yc:function(){var e=Vp(s,ig,"RepresentationIndex");var n=s.M.Ta;e&&(e=e.getAttribute("sourceURL"))&&(n=Me(s.M.Ta,[e]));e=rg(s);return ng(s,t,o,n,e.start,e.end,a)}}}function ng(e,t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b,w,T;return O((function(x){if(1==x.g)return s=e.presentationTimeline,u=!e.Qb||!e.aa.Ze,l=e.aa.start,c=e.aa.duration,d=e.M.mimeType.split("/")[1],h=t,f=null,p=[h(i,r,a,!1),"webm"==d?h(n.Oa(),n.Sa,n.za,!0):null],h=null,E(x,Promise.all(p),2);g=x.h;m=g[0];v=g[1]||null;y=null;b=l-o;w=l;T=c?l+c:Infinity;if("mp4"==d)var A=qp(m,r,i,n,b,w,T);else{A=new Kp(v);if(440786851!=Xp(A).id)throw new Se(2,3,3008);var S=Xp(A);if(408125543!=S.id)throw new Se(2,3,3009);A=S.g.byteOffset;S=new Kp(S.g);for(var I=null;S.va();){var k=Xp(S);if(357149030==k.id){I=k;break}}if(!I)throw new Se(2,3,3010);I=new Kp(I.g);k=1e6;for(S=null;I.va();){var _=Xp(I);if(2807729==_.id)k=Qp(_);else if(17545==_.id)if(4==_.g.byteLength)S=_.g.getFloat32(0);else if(8==_.g.byteLength)S=_.g.getFloat64(0);else throw new Se(2,3,3003)}if(null==S)throw new Se(2,3,3011);I=k/1e9;S*=I;k=Xp(new Kp(m));if(475249515!=k.id)throw new Se(2,3,3007);A=$p(k,A,I,S,i,n,b,w,T)}y=A;s.sd(y);f=new uu(y);u&&f.wc(w,T,!0);return x.return(f)}))}function ig(e){return e.yd}function rg(e){var t=Vp(e,ig,"RepresentationIndex");e=Fp(e,ig,"indexRange");e=da(e||"");t&&(e=ua(t,"range",da,e));return e}function ag(e,t){og(e,t);if(!rg(e))throw new Se(2,4,4002)}function og(e,t){var n=e.M.mimeType.split("/")[1];if(e.M.contentType!=Pe&&"mp4"!=n&&"webm"!=n)throw new Se(2,4,4006);if("webm"==n&&!t)throw new Se(2,4,4005)}function sg(e){var t=e.M;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.je,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function ug(e,t){var n=eg(e,lg),i=cg(e);if(!i.Ba&&!i.timeline&&1<i.Fc.length)throw new Se(2,4,4002);if(!i.Ba&&!e.aa.duration&&!i.timeline&&1==i.Fc.length)throw new Se(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Se(2,4,4002);var r=null,a=null;e.ua.id&&e.M.id&&(a=t[e.ua.id+","+e.M.id])&&(r=a.segmentIndex);var o=dg(e.aa.start,e.aa.duration,e.M.Ta,i,n);t=!r;r?r.rd(o,e.presentationTimeline.Db()):r=new uu(o);e.presentationTimeline.sd(o);e.Qb&&e.aa.Ze||r.wc(e.aa.start,e.aa.duration?e.aa.start+e.aa.duration:Infinity,t);a&&(a.segmentIndex=r);return{yc:function(){r&&0!=r.bc()||r.fe(o);return Promise.resolve(r)}}}function lg(e){return e.Vb}function cg(e){var t=hg(e);e=Bp(e,lg);var n=e.Kc;0==n&&(n=1);var i=0;e.Ba?i=e.Ba*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start);return{Ba:e.Ba,startTime:i,Kc:n,Jb:e.Jb,timeline:e.timeline,Fc:t}}function dg(e,t,n,i,r){var a=i.Fc.length;i.timeline&&i.timeline.length!=i.Fc.length&&(a=Math.min(i.timeline.length,i.Fc.length));for(var o=e-i.Jb,s=t?e+t:Infinity,u=[],l=i.startTime,c={},d=0;d<a;c={Yc:c.Yc,Wc:c.Wc},d++){c.Wc=i.Fc[d];var h=void 0;h=null!=i.Ba?l+i.Ba:i.timeline?i.timeline[d].end:l+t;c.Yc=null;u.push(new To(e+l,e+h,function(e){return function(){null==e.Yc&&(e.Yc=Me(n,[e.Wc.ci]));return e.Yc}}(c),c.Wc.start,c.Wc.end,r,o,e,s));l=h}return u}function hg(e){return[e.M.Vb,e.oa.Vb,e.ua.Vb].filter(Ce).map((function(e){return ta(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.sg&&(e.sg=!0);var n=t.getAttribute("media");t=ua(t,"mediaRange",da,{start:0,end:null});return{ci:n,start:t.start,end:t.end}}))}function fg(e,t,n,i,r,a){var o=yg(e),s=gg(e);mg(s);var u=Zi(e);if(s.od)return og(e,o),{yc:function(){var e=jp(s.od,u.M.id,null,u.bandwidth||null,null);e=Me(u.M.Ta,[e]);return ng(u,t,o,e,0,null,s.Jb)}};if(s.Ba)return i||"image"===e.oa.contentType||(e.presentationTimeline.mf(s.Ba),e.presentationTimeline.ie(e.aa.start)),{yc:function(){return vg(u,s,r,o,a)}};var l=null;i=i=null;e.ua.id&&e.M.id&&(i=e.ua.id+","+e.M.id,i=n[i])&&(l=i.segmentIndex);var c=e.aa.start,d=e.aa.duration?c+e.aa.duration:Infinity,h=!(e.Qb&&e.aa.Ze);l?(n=l,wg(n,s,c,d,h),n.ob(e.presentationTimeline.Db())):l=new bg(s,e.M.id,e.bandwidth,e.M.Ta,c,d,o,h);s.timeline&&"image"!==e.oa.contentType&&e.presentationTimeline.Ag(s.timeline,c);i&&e.Qb&&(i.segmentIndex=l);return{yc:function(){l instanceof bg&&0==l.bc()&&wg(l,s,c,d,h);return Promise.resolve(l)}}}function pg(e){return e.zd}function gg(e){var t=Bp(e,pg),n=Fp(e,pg,"media");e=Fp(e,pg,"index");return{Ba:t.Ba,timescale:t.timescale,Kc:t.Kc,Jb:t.Jb,Nf:t.Nf,timeline:t.timeline,kf:n,od:e}}function mg(e){var t=e.od?1:0;t+=e.timeline?1:0;t+=e.Ba?1:0;if(0==t)throw new Se(2,4,4002);1!=t&&(e.od&&(e.timeline=null),e.Ba=null);if(!e.od&&!e.kf)throw new Se(2,4,4002)}function vg(e,t,n,i,r){function a(e){var n=(e-p)*f,r=n+t.Jb,a=n+l;n=a+f;var o=Math.min(n,s());a=new To(a,o,(function(){var t=jp(m,y,e,v,r*g);return Me(b,[t])}),0,null,i,w,l,s());a.j=n;return a}function o(){var e=[Math.max(u.Db(),l),Math.min(u.cc(),s())].map((function(e){return e-l}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=d&&r[d]||h;return e?l+e:Infinity}var u=e.presentationTimeline,l=e.aa.start,d=e.ua.id,h=e.aa.duration,f=t.Ba,p=t.Kc,g=t.timescale,m=t.kf,v=e.bandwidth||null,y=e.M.id,b=e.M.Ta,w=l-t.Jb,T=o();e=e.Qb?Math.max(T[0],T[1]-n+1):T[0];T=T[1];n=[];for(var E=e;E<=T;++E){var x=a(E);n.push(x)}var A=new uu(n);n=u.cc()<s();E=u.S();if(n||E){var S=Math.max(e,T+1);A.Ae(f,(function(){var e=u.Db();A.ob(e);var t=c(o());t.next();t=t.next().value;for(var n=[];S<=t;){var i=a(S);n.push(i);S++}return e>s()&&!n.length?null:n}))}return Promise.resolve(A)}function yg(e){var t=Fp(e,pg,"initialization");if(!t)return null;var n=e.M.id,i=e.bandwidth||null,r=e.M.Ta;return new bo((function(){var e=jp(t,n,null,i,null);return Me(r,[e])}),0,null,sg(e))}function bg(e,t,n,i,r,a,o,s){uu.call(this,[]);this.h=e;this.G=t;this.B=n;this.C=i;this.j=r;this.s=a;this.F=o;s&&Tg(this)}y(bg,uu);i=bg.prototype;i.bc=function(){return this.h?this.h.timeline.length:0};i.release=function(){uu.prototype.release.call(this);this.h=null};i.ob=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length;i+=1)if(n[i].end+this.j<=e)t+=1;else break;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.bc()&&this.release())}};function wg(e,t,n,i,r){if(e.h){n=e.h.timeline;var a=n[n.length-1];t=t.timeline.filter((function(e){return e.start>=a.end}));0<t.length&&e.h.timeline.push.apply(e.h.timeline,d(t));e.s!==i&&(e.s=i)}else e.h=t,e.j=n,e.s=i;r&&Tg(e)}function Tg(e){if(!e.m){for(var t=e.h.timeline;t.length;)if(t[t.length-1].start>=e.s)t.pop();else break;e.ob(e.j);0!==t.length&&Infinity!==e.s&&(t[t.length-1].end=e.s-e.j)}}i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>this.s)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],a=r.start+this.j;r=r.end+this.j;i<n&&(r=t[i+1].start+this.j);if(e>=a&&e<r)return i+this.i}return null};i.get=function(e){var t=this,n=e-this.i;if(0>n||n>=this.bc()||!this.h)return null;var i=this.g[n];if(!i){i=this.h.timeline[n];var r=e+this.h.Kc,a=this.h.Nf+i.Of;i=new To(this.j+i.start,this.j+i.end,(function(){return t.h?Eg(t.h.kf,t.G,r,t.B,a,t.C):[]}),0,null,this.F,this.j-this.h.Jb,this.j,this.s);this.g[n]=i}return i};function Eg(e,t,n,i,r,a){e=jp(e,t,n,i||null,r);return Me(a,[e]).map((function(e){return e.toString()}))}function xg(){this.j=[];this.g=[];this.i=[];this.l=[];this.h=[];this.m=new Set}i=xg.prototype;i.release=function(){for(var e=c(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[];this.i=[];this.l=[];this.h=[];this.j=[]};i.Oh=function(){return this.j};i.We=function(){return this.l.slice()};i.vh=function(){return this.h};i.eg=function(e,t){var n=this,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N;return O((function(O){switch(O.g){case 1:i=Ne;Ag(e);Ig(e);Sg(e);kg(e);if(!t&&1==e.length){r=e[0];n.g=r.audioStreams;n.i=r.videoStreams;n.l=r.textStreams;n.h=r.imageStreams;O.D(2);break}a=-1;for(o=0;o<e.length;o++)s=e[o],n.m.has(s.id)||(n.m.add(s.id),-1==a&&(a=o));if(-1==a)return O.return();u=e.map((function(e){return e.audioStreams}));l=e.map((function(e){return e.videoStreams}));d=e.map((function(e){return e.textStreams}));h=e.map((function(e){return e.imageStreams}));f=c(d);for(p=f.next();!p.done;p=f.next())g=p.value,g.push(Xg(i.na));m=c(h);for(v=m.next();!v.done;v=m.next())y=v.value,y.push(Xg(i.Zc));return E(O,Cg(n.g,u,a,Pg,Og),3);case 3:return E(O,Cg(n.i,l,a,Pg,Og),4);case 4:return E(O,Cg(n.l,d,a,Pg,Og),5);case 5:return E(O,Cg(n.h,h,a,Pg,Og),2);case 2:b=0;w=[];if(n.i.length&&n.g.length)for(_=c(n.g),C=_.next();!C.done;C=_.next())for(M=C.value,D=c(n.i),R=D.next();!R.done;R=D.next())L=R.value,P=Ja(M.drmInfos,L.drmInfos),M.drmInfos.length&&L.drmInfos.length&&!P.length||(N=b++,w.push({id:N,language:M.language,disabledUntilTime:0,primary:M.primary,audio:M,video:L,bandwidth:(M.bandwidth||0)+(L.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(T=n.i.concat(n.g),A=c(T),S=A.next();!S.done;S=A.next())I=S.value,k=b++,w.push({id:k,language:I.language,disabledUntilTime:0,primary:I.primary,audio:I.type==i.Ob?I:null,video:I.type==i.Na?I:null,bandwidth:I.bandwidth||0,drmInfos:I.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=w;x(O)}}))};function Ag(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.audioStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&bt(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.audioStreams=n}}function Sg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.bandwidth==s.bandwidth&&bt(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}function Ig(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.videoStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&bt(r.roles,s.roles)&&xr(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.videoStreams=n}}function kg(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=c(t.imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=c(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}function _g(e){var t,n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x,A,S,I,k,_,C;return O((function(M){switch(M.g){case 1:t=Ne;if(1==e.length)return M.return(e[0]);n=e.map((function(e){return e.filter((function(e){return e.type==t.Ob}))}));i=e.map((function(e){return e.filter((function(e){return e.type==t.Na}))}));r=e.map((function(e){return e.filter((function(e){return e.type==t.na}))}));a=e.map((function(e){return e.filter((function(e){return e.type==t.Zc}))}));o=c(r);for(s=o.next();!s.done;s=o.next())u=s.value,u.push(Kg(t.na));l=c(a);for(d=l.next();!d.done;d=l.next())h=d.value,h.push(Kg(t.Zc));return E(M,Cg([],n,0,Ng,Ug),2);case 2:return f=M.h,E(M,Cg([],i,0,Ng,Ug),3);case 3:return p=M.h,E(M,Cg([],r,0,Ng,Ug),4);case 4:return g=M.h,E(M,Cg([],a,0,Ng,Ug),5);case 5:m=M.h;v=0;if(p.length&&f.length)for(x=c(f),A=x.next();!A.done;A=x.next())for(S=A.value,I=c(p),k=I.next();!k.done;k=I.next())_=k.value,C=v++,_.variantIds.push(C),S.variantIds.push(C);else for(y=p.concat(f),b=c(y),w=b.next();!w.done;w=b.next())T=w.value,T.variantIds=[v++];return M.return(p.concat(f).concat(g).concat(m))}}))}function Cg(e,t,n,i,r){var a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,x,A,S,I,k;return O((function(_){switch(_.g){case 1:a=Ne;o=[];for(s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);u=c(e);l=u.next();case 2:if(l.done){_.D(4);break}d=l.value;return E(_,Mg(d,t,n,r,o),5);case 5:h=_.h;if(!h)throw new Se(2,4,4037);l=u.next();_.D(2);break;case 4:f=c(o);for(p=f.next();!p.done;p=f.next())for(g=p.value,m=c(g),v=m.next();!v.done;v=m.next())y=v.value,(b=Rg(y,t,i,r,o))&&e.push(b);w=c(o);for(p=w.next();!p.done;p=w.next())for(T=p.value,x={},A=c(T),v=A.next();!v.done;x={Nb:x.Nb},v=A.next())if(x.Nb=v.value,S=x.Nb.type==a.na&&!x.Nb.language,I=x.Nb.type==a.Zc&&!x.Nb.tilesLayout,!S&&!I&&(k=e.some(function(e){return function(t){return t.mimeType==e.Nb.mimeType&&Zt(t.codecs)==Zt(e.Nb.codecs)}}(x))))throw new Se(2,4,4037);return _.return(e)}}))}function Mg(e,t,n,i,r){return O((function(a){if(1==a.g)return jg(t,e),e.matchedStreams?e.segmentIndex?E(a,Dg(e,n),2):a.D(2):a.return(!1);Lg(e,n,i,r);return a.return(!0)}))}function Dg(e,t){var n,i,r,a,o,s,u;return O((function(l){if(1==l.g){n=[];i=e.matchedStreams;r=c(i);for(a=r.next();!a.done;a=r.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return E(l,Promise.all(n),2)}if(e.segmentIndex instanceof hu)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);x(l)}))}function Rg(e,t,n,i,r){var a=n(e);jg(t,a);a.createSegmentIndex&&(a.createSegmentIndex=function(){return O((function(e){if(a.segmentIndex)return e.D(0);a.segmentIndex=new hu;return E(e,Dg(a,0),0)}))});if(!a.matchedStreams||!a.matchedStreams.length)return null;Lg(a,0,i,r);return a}function Lg(e,t,n,i){for(var r=e.matchedStreams,a=0;a<r.length;a++)if(a>=t){var o=r[a];n(e,o);var s=!0;"audio"==e.type&&0==He(e.language,o.language)&&(s=!1);s&&i[a].delete(o)}}function Pg(e){var t=Object.assign({},e);t.originalId=null;t.createSegmentIndex=function(){return Promise.resolve()};t.closeSegmentIndex=function(){t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null);if(t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)};t.segmentIndex=null;t.emsgSchemeIdUris=[];t.keyIds=new Set;t.closedCaptions=null;t.trickModeVideo=null;return t}function Ng(e){e=Object.assign({},e);e.keyIds=new Set;e.segments=[];e.variantIds=[];e.closedCaptions=null;return e}function Og(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));e.keyIds=function(e,t){return new Set([].concat(d(e),d(t)))}(e.keyIds,t.keyIds);null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var n=Ja(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new Se(2,4,4038);e.drmInfos=n;e.encrypted=e.encrypted||t.encrypted;if(t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);n=c(t.closedCaptions);for(var i=n.next();!i.done;i=n.next()){var r=c(i.value);i=r.next().value;r=r.next().value;e.closedCaptions.set(i,r)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Pg(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){e.trickModeVideo.segmentIndex=e.segmentIndex.clone();return Promise.resolve()}),Og(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Og(e.trickModeVideo,t)}function Ug(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;n=new Set([].concat(d(e.keyIds),d(n)));e.keyIds=n;e.encrypted=e.encrypted&&t.encrypted;e.segments.push.apply(e.segments,d(t.segments));if(t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=c(t.closedCaptions),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value;i=i.next().value;e.closedCaptions.set(n,i)}}function jg(e,t){var n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){var r=t,a={audio:Bg,video:Bg,text:Fg,image:Vg}[r.type],o={audio:Gg,video:Hg,text:qg,image:zg}[r.type],s=null;i=c(i.value);for(var u=i.next();!u.done;u=i.next())u=u.value,!a(r,u)||s&&!o(r,s,u)||(s=u);r=s;if(!r)return;n.push(r)}t.matchedStreams=n}function Bg(e,t){function n(e){if(!Zg.has(e)){var t=Zt(e);Zg.set(e,t)}return Zg.get(e)}return t.mimeType!=e.mimeType||n(t.codecs)!=n(e.codecs)||e.drmInfos&&!Ya(e.drmInfos,t.drmInfos)?!1:!0}function Fg(e,t){return e.language?t.language?0==He(e.language,t.language)||t.kind!=e.kind?!1:!0:!0:!1}function Vg(e){return e.tilesLayout?!0:!1}function Gg(e,t,n){if(e.id==n.id)return!0;var i=He(e.language,t.language),r=He(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(e.roles.length)return i=t.roles.filter((function(t){return e.roles.includes(t)})),r=n.roles.filter((function(t){return e.roles.includes(t)})),r.length>i.length?!0:r.length<i.length?!1:n.roles.length<t.roles.length;if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;i=Wg(e.channelsCount,t.channelsCount,n.channelsCount);if(i==Jg)return!0;if(i==$g)return!1;i=Wg(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate);return i==Jg?!0:i==$g?!1:e.bandwidth&&Yg(e.bandwidth,t.bandwidth,n.bandwidth)==Jg?!0:!1}function Hg(e,t,n){if(e.id==n.id)return!0;var i=Wg(e.width*e.height,t.width*t.height,n.width*n.height);if(i==Jg)return!0;if(i==$g)return!1;if(e.frameRate){i=Wg(e.frameRate,t.frameRate,n.frameRate);if(i==Jg)return!0;if(i==$g)return!1}return e.bandwidth&&Yg(e.bandwidth,t.bandwidth,n.bandwidth)==Jg?!0:!1}function qg(e,t,n){if(e.id==n.id)return!0;var i=He(e.language,t.language),r=He(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){i=t.roles.filter((function(t){return e.roles.includes(t)}));r=n.roles.filter((function(t){return e.roles.includes(t)}));if(r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs?!1:!0}function zg(e,t,n){return e.id==n.id?!0:Wg(e.width*e.height,t.width*t.height,n.width*n.height)==Jg?!0:!1}function Kg(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Xg(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new uu([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function Wg(e,t,n){if(t==e&&e!=n)return $g;if(n==e&&e!=t)return Jg;if(t>e){if(n<=e||n-e<t-e)return Jg;if(n-e>t-e)return $g}else{if(n>e)return $g;if(e-n<e-t)return Jg;if(e-n>e-t)return $g}return Qg}function Yg(e,t,n){t=Math.abs(e-t);e=Math.abs(e-n);return e<t?Jg:t<e?$g:Qg}q("shaka.util.PeriodCombiner",xg);xg.prototype.combinePeriods=xg.prototype.eg;xg.prototype.getImageStreams=xg.prototype.vh;xg.prototype.getTextStreams=xg.prototype.We;xg.prototype.getVariants=xg.prototype.Oh;var Jg=1,Qg=0,$g=-1,Zg=new Map;function em(){var e=this;this.h=this.g=null;this.B=[];this.i=null;this.J=1;this.l={};this.L={};this.j=new xg;this.G=0;this.I=new Ze(5);this.H=new fn((function(){lm(e)}));this.C=new er;this.F=null;this.K=[];this.m=Infinity;this.s=!1}i=em.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this,i;return O((function(r){if(1==r.g)return n.s=t.isLowLatencyMode(),n.B=[e],n.h=t,E(r,tm(n),2);i=r.h;n.h&&cm(n,i);if(!n.h)throw new Se(2,7,7001);return r.return(n.i)}))};i.stop=function(){for(var e=c(Object.values(this.l)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.j&&this.j.release();this.g=this.h=null;this.B=[];this.i=null;this.l={};this.j=null;null!=this.H&&(this.H.stop(),this.H=null);return this.C.destroy()};i.update=function(){var e=this,t;return O((function(n){if(1==n.g)return A(n,2),E(n,tm(e),4);if(2!=n.g)return I(n,0);t=k(n);if(!e.h||!t)return n.return();e.h.onError(t);x(n)}))};i.onExpirationUpdated=function(){};function tm(e){var t,n,i,r,a,o,s;return O((function(u){if(1==u.g)return t=rr(e.B,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:4}),tr(e.C,r),E(u,r.promise,2);if(3!=u.g){a=u.h;if(!e.h)return u.return(0);a.uri&&!e.B.includes(a.uri)&&e.B.unshift(a.uri);return E(u,nm(e,a.data,a.uri),3)}o=Date.now();s=(o-i)/1e3;e.I.sample(1,s);return u.return(s)}))}function nm(e,t,n){var i,r,a,o,s;return O((function(u){if(1==u.g){i=ba(t,"MPD");if(!i)throw new Se(2,4,4001,n);if(r=e.g.dash.disableXlinkProcessing)return u.return(im(e,i,n));a=e.g.dash.xlinkFailGracefully;o=Hp(i,e.g.retryParameters,a,n,e.h.networkingEngine);tr(e.C,o);return E(u,o.promise,2)}s=u.h;return u.return(im(e,s,n))}))}function im(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N,U,j,B;return O((function(O){switch(O.g){case 1:(i=e.g.dash.manifestPreprocessor)&&i(t);r=[n];a=ta(t,"Location").map(oa).filter(Ce);0<a.length&&(o=Me(r,a),r=e.B=o);s=ta(t,"BaseURL");u=s.map(oa);l=Me(r,u);d=0;s&&s.length&&(d=ua(s[0],"availabilityTimeOffset",ga)||0);h=e.g.dash.ignoreMinBufferTime;f=0;h||(f=ua(t,"minBufferTime",ca)||0);e.G=ua(t,"minimumUpdatePeriod",ca,-1);p=ua(t,"availabilityStartTime",la);g=ua(t,"timeShiftBufferDepth",ca);m=e.g.dash.ignoreSuggestedPresentationDelay;v=null;m||(v=ua(t,"suggestedPresentationDelay",ca));y=e.g.dash.ignoreMaxSegmentDuration;b=null;y||(b=ua(t,"maxSegmentDuration",ca));w=t.getAttribute("type")||"static";if(e.i)for(T=e.i.presentationTimeline,A=c(Object.values(e.l)),S=A.next();!S.done;S=A.next())I=S.value,I.segmentIndex&&I.segmentIndex.ob(T.Db());else k=e.g.defaultPresentationDelay||1.5*f,_=null!=v?v:k,T=new Fs(p,_,e.g.dash.autoCorrectDrift);T.Jc("static"==w);(C=T.S())&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride);null==g&&(g=Infinity);T.xe(g);M=t.getAttribute("profiles")||"";D={Qb:"static"!=w,presentationTimeline:T,ua:null,aa:null,oa:null,M:null,bandwidth:0,sg:!1,vc:d,profiles:M.split(",")};R=rm(e,D,l,t);L=R.duration;P=R.periods;"static"!=w&&R.jg||T.Ra(L||Infinity);e.m&&!e.s&&(N=e.h.isAutoLowLatencyMode())&&(e.h.enableLowLatencyMode(),e.s=e.h.isLowLatencyMode());e.s?T.Fg(e.m):e.m&&Q("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");T.mf(b||1);return E(O,e.j.eg(P,D.Qb),2);case 2:e.s&&(f=0);e.s&&e.m&&(e.G=e.m);if(e.i){e.i.variants=e.j.j;U=e.j.We();0<U.length&&(e.i.textStreams=U);e.i.imageStreams=e.j.h;e.h.filter(e.i);O.D(3);break}var F=T,V=e.j.j,G=e.j.We(),H=e.j.h,q=f||0,z=e.g.dash.sequenceMode;var K=Zr(t,"ServiceDescription");if(K){var X=Zr(K,"Latency");K=Zr(K,"PlaybackRate");X&&X.getAttribute("max")||K?(X=X&&X.getAttribute("max")?parseInt(X.getAttribute("max"),10)/1e3:null,K=K?parseFloat(K.getAttribute("max")):null,X={maxLatency:X,maxPlaybackRate:K}):X=null}else X=null;e.i={presentationTimeline:F,variants:V,textStreams:G,imageStreams:H,offlineSessionIds:[],minBufferTime:q,sequenceMode:z,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:X};if(!T.Qg()){O.D(4);break}j=ta(t,"UTCTiming");return E(O,gm(e,l,j),5);case 5:B=O.h;if(!e.h)return O.return();T.Gg(B);case 4:T.be();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),x(O)}}))}function rm(e,t,n,i){var r=ua(i,"mediaPresentationDuration",ca),a=[],o=0;i=ta(i,"Period");for(var s=0;s<i.length;s++){var u=i[s],l=i[s+1],c=ua(u,"start",ca,o),d=u.id,h=ua(u,"duration",ca),f=null;if(l){var p=ua(l,"start",ca);null!=p&&(f=p-c)}else null!=r&&(f=r-c);null==f&&(f=h);if(!(null!==e.F&&null!==d&&null!==c&&c<e.F)||e.K.includes(d)||s+1==i.length){null!==c&&(null===e.F||c>e.F)&&(e.F=c);o=am(e,t,n,{start:c,duration:f,node:u,Ze:null==f||!l});a.push(o);t.ua.id&&f&&(e.L[t.ua.id]=f);if(null==f){o=null;break}o=c+f}}e.K=a.map((function(e){return e.id}));return null!=r?{periods:a,duration:r,jg:!1}:{periods:a,duration:o,jg:!0}}function am(e,t,n,i){t.ua=dm(i.node,null,n);t.aa=i;t.ua.vc=t.vc;t.ua.id||(t.ua.id="__shaka_period_"+i.start);var r=ta(i.node,"EventStream");n=t.presentationTimeline.Db();r=c(r);for(var a=r.next();!a.done;a=r.next())mm(e,i.start,i.duration,a.value,n);n=ta(i.node,"AdaptationSet").map((function(n){return sm(e,t,n)})).filter(Ce);if(t.Qb){i=[];r=c(n);for(a=r.next();!a.done;a=r.next()){a=c(a.value.pi);for(var o=a.next();!o.done;o=a.next())i.push(o.value)}if(i.length!=new Set(i).size)throw new Se(2,4,4018)}i=n.filter((function(e){return!e.Kf}));n=n.filter((function(e){return e.Kf}));n=c(n);for(r=n.next();!r.done;r=n.next()){r=r.value;a=r.Kf.split(" ");o=c(i);for(var s=o.next();!s.done;s=o.next()){var u=s.value;if(a.includes(u.id)){s={};u=c(u.streams);for(var l=u.next();!l.done;s={Id:s.Id},l=u.next())s.Id=l.value,s.Id.trickModeVideo=r.streams.find(function(e){return function(t){return Zt(e.Id.codecs)==Zt(t.codecs)}}(s))}}}r=e.g.disableAudio?[]:om(i,"audio");o=e.g.disableVideo?[]:om(i,"video");a=e.g.disableText?[]:om(i,Pe);n=e.g.disableThumbnails?[]:om(i,"image");if(!o.length&&!r.length)throw new Se(2,4,4004);i=[];r=c(r);for(s=r.next();!s.done;s=r.next())i.push.apply(i,d(s.value.streams));r=[];o=c(o);for(s=o.next();!s.done;s=o.next())r.push.apply(r,d(s.value.streams));o=[];a=c(a);for(s=a.next();!s.done;s=a.next())o.push.apply(o,d(s.value.streams));a=[];n=c(n);for(s=n.next();!s.done;s=n.next())a.push.apply(a,d(s.value.streams));return{id:t.ua.id,audioStreams:i,videoStreams:r,textStreams:o,imageStreams:a}}function om(e,t){return e.filter((function(e){return e.contentType==t}))}function sm(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.oa=dm(n,t.ua,null);var r=!1,a=ta(n,"Role"),o=a.map((function(e){return e.getAttribute("value")})).filter(Ce),s=void 0,u=t.oa.contentType==Pe;u&&(s="subtitle");a=c(a);for(var l=a.next();!l.done;l=a.next()){l=l.value;var h=l.getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(l=l.getAttribute("value"),l){case"main":r=!0;break;case"caption":case"subtitle":s=l}}var f;h=ta(n,"EssentialProperty");a=null;l=!1;h=c(h);for(var p=h.next();!p.done;p=h.next()){p=p.value;var g=p.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?a=p.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?f=i(parseInt(p.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=g&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=g&&(l=!0)}h=ta(n,"SupplementalProperty");h=c(h);for(p=h.next();!p.done;p=h.next())p=p.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==p.getAttribute("schemeIdUri")&&(f=i(parseInt(p.getAttribute("value"),10)));h=ta(n,"Accessibility");var m=new Map,v;h=c(h);for(p=h.next();!p.done;p=h.next())if(g=p.value,p=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g){g=g.split(";");for(var y=c(g),b=y.next();!b.done;b=y.next()){var w=b.value,T=b=void 0;w.includes("=")?(w=w.split("="),b=w[0].startsWith("CC")?w[0]:"CC"+w[0],T=w[1]||"und"):(b="CC"+p,2==g.length?p+=2:p++,T=w);m.set(b,Ve(T))}}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(g=c(g.split(";")),b=g.next();!b.done;b=g.next())b=b.value,w=y=void 0,b.includes("=")?(b=b.split("="),y="svc"+b[0],w=b[1].split(",")[0].split(":").pop()):(y="svc"+p,p++,w=b),m.set(y,Ve(w));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==p?null!=g&&(o.push(g),"captions"==g&&(s="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==p&&("1"==g?v="visually impaired":"2"==g&&(v="hard of hearing"));if(l)return null;l=ta(n,"ContentProtection");var E=_p(l,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),x=Ve(t.oa.language||"und"),A=n.getAttribute("label");(l=ta(n,"Label"))&&l.length&&(l=l[0],l.textContent&&(A=l.textContent));l=ta(n,"Representation");n=l.map((function(n){if(n=um(e,t,E,s,x,A,r,o,m,n,v))n.hdr=n.hdr||f;return n})).filter((function(e){return!!e}));if(0==n.length){a="image"==t.oa.contentType;if(e.g.dash.ignoreEmptyAdaptationSet||u||a)return null;throw new Se(2,4,4003)}if(!t.oa.contentType||"application"==t.oa.contentType)for(t.oa.contentType=ym(n[0].mimeType,n[0].codecs),u=c(n),h=u.next();!h.done;h=u.next())h.value.type=t.oa.contentType;u=c(n);for(h=u.next();!h.done;h=u.next())for(h=h.value,p=c(E.drmInfos),g=p.next();!g.done;g=p.next())g=g.value,g.keyIds=g.keyIds&&h.keyIds?new Set([].concat(d(g.keyIds),d(h.keyIds))):g.keyIds||h.keyIds;u=l.map((function(e){return e.getAttribute("id")})).filter(Ce);return{id:t.oa.id||"__fake__"+e.J++,contentType:t.oa.contentType,language:x,fk:r,streams:n,drmInfos:E.drmInfos,Kf:a,pi:u}}function um(e,t,n,i,r,a,o,s,u,l,c){t.M=dm(l,t.oa,null);e.m=Math.min(e.m,t.M.vc);if(!fm(t.M))return null;var d=t.aa.start;t.bandwidth=ua(l,"bandwidth",fa)||0;var h=t.M.contentType,f=h==Pe||"application"==h;h="image"==h;try{var p=function(t,n,i,r){return vm(e,t,n,i,r)};if(t.M.yd)var g=tg(t,p);else if(t.M.Vb)g=ug(t,e.l);else if(t.M.zd)g=fg(t,p,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var m=t.M.Ta,v=t.aa.duration||0;g={yc:function(){return Promise.resolve(cu(d,v,m))}}}}catch(e){if((f||h)&&4002==e.code)return null;throw e}p=ta(l,"ContentProtection");p=Cp(p,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI);p=new Set(p?[p]:[]);var y=!1;ta(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(y=!0);var b=!1;f&&(b=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var w;if(h&&((l=ta(l,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(w=l.getAttribute("value")),!w))return null;var T;l=t.M.codecs;t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(T="PQ");l=t.M.id?t.ua.id+","+t.M.id:"";var A=l&&e.l[l]?e.l[l]:{id:e.J++,originalId:t.M.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){A.segmentIndex&&(A.segmentIndex.release(),A.segmentIndex=null)},segmentIndex:null,mimeType:t.M.mimeType,codecs:t.M.codecs,frameRate:t.M.frameRate,pixelAspectRatio:t.M.pixelAspectRatio,bandwidth:t.bandwidth,width:t.M.width,height:t.M.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:r,originalLanguage:t.oa.language,label:a,type:t.oa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.M.emsgSchemeIdUris,roles:s,forced:b,channelsCount:t.M.je,audioSamplingRate:t.M.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:T,tilesLayout:w,matchedStreams:[],accessibilityPurpose:c,external:!1};A.createSegmentIndex=function(){var e;return O((function(t){if(1==t.g){if(A.segmentIndex)return t.D(0);e=A;return E(t,g.yc(),3)}e.segmentIndex=t.h;x(t)}))};l&&t.Qb&&!e.l[l]&&(e.l[l]=A);return A}function lm(e){var t,n;O((function(i){switch(i.g){case 1:return t=0,A(i,2),E(i,tm(e),4);case 4:t=i.h;I(i,3);break;case 2:if(n=k(i),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(n),i.return();n.severity=1;e.h.onError(n)}case 3:if(!e.h)return i.return();cm(e,t);x(i)}}))}function cm(e,t){0>e.G||e.H.R(Math.max(e.G-t,et(e.I)))}function dm(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,je:null,audioSamplingRate:null,vc:0};n=n||t.Ta;var i=ta(e,"BaseURL"),r=i.map(oa),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=ua(e,"frameRate",va)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,d=ta(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice();d=c(d);for(var f=d.next();!f.done;f=d.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);d=ta(e,"AudioChannelConfiguration");d=hm(d)||t.je;f=ua(e,"audioSamplingRate",pa)||t.audioSamplingRate;a||(a=ym(o,s));var p=Zr(e,"SegmentBase"),g=Zr(e,"SegmentTemplate"),m=p?ua(p,"availabilityTimeOffset",ga)||0:0,v=g?ua(g,"availabilityTimeOffset",ga)||0:0;i=i&&i.length?ua(i[0],"availabilityTimeOffset",ga)||0:0;i=t.vc+i+m+v;return{Ta:Me(n,r),yd:p||t.yd,Vb:Zr(e,"SegmentList")||t.Vb,zd:g||t.zd,width:ua(e,"width",pa)||t.width,height:ua(e,"height",pa)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:l,emsgSchemeIdUris:h,id:e.getAttribute("id"),language:e.getAttribute("lang"),je:d,audioSamplingRate:f,vc:i}}function hm(e){e=c(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if(t=n.getAttribute("schemeIdUri"))if(n=n.getAttribute("value"))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":t=parseInt(n,10);if(!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":t=parseInt(n,16);if(!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function fm(e){var t=e.yd?1:0;t+=e.Vb?1:0;t+=e.zd?1:0;if(0==t)return e.contentType==Pe||"application"==e.contentType?!0:!1;1!=t&&(e.yd&&(e.Vb=null),e.zd=null);return!0}function pm(e,t,n,i){var r,a,o,s,u,l;return O((function(c){if(1==c.g)return r=Me(t,[n]),a=rr(r,e.g.retryParameters),a.method=i,o=e.h.networkingEngine.request(4,a),tr(e.C,o),E(c,o.promise,2);s=c.h;if("HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);u=s.headers.date}else u=Sr(s.data);l=Date.parse(u);return isNaN(l)?c.return(0):c.return(l-Date.now())}))}function gm(e,t,n){var i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=c(i),o=a.next();case 2:if(o.done){h.D(4);break}s=o.value;A(h,5);u=s.scheme;l=s.value;switch(u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(l),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Q("NTP UTCTiming scheme is not supported");break;default:Q("Unrecognized scheme in UTCTiming element",u)}h.D(9);break;case 7:return E(h,pm(e,t,l,"HEAD"),10);case 10:return h.return(h.h);case 8:return E(h,pm(e,t,l,"GET"),11);case 11:return h.return(h.h);case 9:I(h,3);break;case 5:k(h);case 3:o=a.next();h.D(2);break;case 4:return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}function mm(e,t,n,i,r){var a=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",s=ua(i,"timescale",pa)||1;i=c(ta(i,"Event"));for(var u=i.next();!u.done;u=i.next()){u=u.value;var l=ua(u,"presentationTime",pa)||0,d=ua(u,"duration",pa)||0;l=l/s+t;d=l+d/s;null!=n&&(l=Math.min(l,t+n),d=Math.min(d,t+n));d<r||(u={schemeIdUri:a,value:o,startTime:l,endTime:d,id:u.getAttribute("id")||"",eventElement:u},e.h.onTimelineRegionAdded(u))}}function vm(e,t,n,i,r){var a,o,s,u,l,c;return O((function(d){if(1==d.g)return a=cr,o=r?0:1,s=Pu(t,n,i,e.g.retryParameters),u=e.h.networkingEngine,l=u.request(a,s,{type:o}),tr(e.C,l),E(d,l.promise,2);c=d.h;return d.return(c.data)}))}function ym(e,t){t=Jt(e,t);return an(t)?Pe:e.split("/")[0]}q("shaka.dash.DashParser",em);po.mpd=function(){return new em};fo["application/dash+xml"]=function(){return new em};fo["video/vnd.mpeg.dash.mpd"]=function(){return new em};function bm(){}q("shaka.dependencies",bm);bm.has=function(e){return Tm.has(e)};bm.add=function(e,t){if(!wm[e])throw Error(e+" is not supported");Tm.set(e,(function(){return t}))};var wm={muxjs:"muxjs",ISOBoxer:"ISOBoxer"};bm.Allowed=wm;var Tm=new Map([["muxjs",function(){return e.muxjs}],["ISOBoxer",function(){return e.ISOBoxer}]]);function Em(e,t){return e.filter((function(e){return e.name==t}))}function xm(e,t){return e.filter((function(e){return Mm(e,"TYPE")==t}))}function Am(e,t){e=Em(e,t);return e.length?e[0]:null}function Sm(e,t,n){n=void 0===n?0:n;return(e=Am(e,t))?Number(e.value):n}function Im(e,t){return Me([e],[t])[0]}function km(e,t,n,i){this.h=e;this.type=t;this.g=n;this.segments=i||null}function _m(e,t,n,i){this.id=e;this.name=t;this.g=n;this.value=void 0===i?null:i}_m.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,n=this.g?this.g.map(e):[];this.value&&n.unshift(this.value);0<n.length&&(t+=":"+n.join(","));return t};_m.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};function Cm(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Mm(e,t){e=e.getAttribute(t);if(!e)throw new Se(2,4,4023,t);return e.value}function Dm(e,t,n,i){i=void 0===i?[]:i;this.g=n;this.l=null;this.j=e;this.m=t;this.h=i}s.Object.defineProperties(Dm.prototype,{i:{configurable:!0,enumerable:!0,get:function(){!this.l&&this.j&&this.m&&(this.l=Im(this.j,this.m),this.m=this.j=null);return this.l||""}}});function Rm(e,t){this.name=e;this.value=t}function Lm(e){this.h=e||"";this.g=0}function Pm(e){Nm(e,/[ \t]+/gm)}function Nm(e,t){t.lastIndex=e.g;t=t.exec(e.h);t=null==t?null:{position:t.index,length:t[0].length,results:t};if(e.g==e.h.length||null==t||t.position!=e.g)return null;e.g+=t.length;return t.results}function Om(e){return e.g==e.h.length?null:(e=Nm(e,/[^ \t\n]*/gm))?e[0]:null}function Um(){this.g=0}function jm(e,t,n){t=Sr(t);t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var i=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Se(2,4,4015);t=0;for(var r=!0,a=c(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else if(o=Bm(e,o),--e.g,Fm.includes(o.name)){t=1;break}else"EXT-X-STREAM-INF"==o.name&&(r=!0);a=[];r=!0;for(o=0;o<i.length;o++){var s=i[o],u=i[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{s=Bm(e,s);if(Vm.includes(s.name)){if(1!=t)throw new Se(2,4,4017);var l=i.splice(o,i.length-o);i=n;r=[];o=[];u=[];s=null;l=c(l);for(var d=l.next();!d.done;d=l.next())d=d.value,/^(#EXT)/.test(d)?(d=Bm(e,d),Fm.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==Cm(d,"TYPE")?u.push(d):"MAP"==Cm(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=d.trim(),s&&o.push(s),r.push(new Dm(i,d,o,u)),o=[],u=[]);u.length&&(s&&o.push(s),r.push(new Dm("","",o,u)));return new km(n,t,a,r)}a.push(s);"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Rm("URI",u)),r=!0)}}return new km(n,t,a)}function Bm(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Se(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Lm(i);var a;(a=Nm(i,/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Nm(i,o);)n.push(new Rm(a[1],a[2]||a[3])),Pm(i)}return new _m(e,t,n,r)}var Fm="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Vm="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Gm(){}function Hm(e){try{var t=qm(e);return Wi({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Ki(e)}}function qm(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Se(2,1,1004,t);n=n.slice(1).join(":").split(",");if(2>n.length)throw new Se(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(","));n=i.split(";");i=n[0];var r=!1;1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop());var a;r?a=Xr(t):a=_r(t);return{data:a,contentType:i}}q("shaka.net.DataUriPlugin",Gm);Gm.parse=Hm;ir("data",Hm);function zm(){var e=this;this.g=this.i=null;this.xa=1;this.B=new Map;this.F=new Map;this.I=new Map;this.I.set("video",new Map);this.I.set("audio",new Map);this.I.set(Pe,new Map);this.I.set("image",new Map);this.ea=new Set;this.h=new Map;this.j=null;this.P="";this.Y=new Um;this.G=-1;this.L=Infinity;this.Ea=!1;this.m=new fn((function(){Nv(e)}));this.$=Gv;this.H=null;this.ma=0;this.l=Infinity;this.X=this.V=this.J=0;this.K=new er;this.O=new Map;this.C=new Map;this.Z=new Map;this.ya=this.s=!1}i=zm.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this,i;return O((function(r){return 1==r.g?(n.i=t,n.s=t.isLowLatencyMode(),E(r,Pv(n,e),2)):3!=r.g?(i=r.h,n.P=i.uri,E(r,Qm(n,i.data,e),3)):r.return(n.H)}))};i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];this.K&&(e.push(this.K.destroy()),this.K=null);this.g=this.i=null;this.ea.clear();this.H=null;this.h.clear();this.F.clear();this.C.clear();this.B.clear();return Promise.all(e)};i.update=function(){var e=this,t,n,i,r,a,o,s,u,l;return O((function(h){if(1==h.g){if(!Ov(e))return h.return();t=[];n=Array.from(e.h.values());e.l=Infinity;i=n.filter((function(e){return e.stream.segmentIndex}));r=c(i);for(a=r.next();!a.done;a=r.next())o=a.value,t.push(Xm(e,o));return E(h,Promise.all(t),2)}pv(e,i.map((function(e){return e.stream})));s=i.some((function(e){return 0==e.ld}));i.length&&!s&&(u=zv,Uv(e,u.Ug),l=i.map((function(e){return e.Gb})),e.j.Ra(Math.min.apply(Math,d(l))),e.i.updateDuration());s&&ev(e);x(h)}))};function Km(e,t){return Ov(e)?e.I.get(t.type):t.ee}function Xm(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M;return O((function(D){if(1==D.g)return n=t.Kd,i=new de(n),r=new xe,t.Nd&&(0<=t.Xa&&r.add("_HLS_msn",String(t.Xa)),0<=t.Ya&&r.add("_HLS_part",String(t.Ya))),t.Od&&r.add("_HLS_skip","YES"),Ae(r),r.dd&&pe(i,r),E(D,Pv(e,i.toString(),!0),2);a=D.h;if(!t.stream.segmentIndex)return D.return();o=jm(e.Y,a.data,a.uri);if(1!=o.type)throw new Se(2,4,4017);s=Em(o.g,"EXT-X-DEFINE");u=tv(e,s);l=t.stream;c=Km(e,t);h=wv(o,l.mimeType);f=h.keyIds;p=h.drmInfos;g=function(e,t){return e.size===t.size&&[].concat(d(e)).every((function(e){return t.has(e)}))};g(l.keyIds,f)||(l.keyIds=f,l.drmInfos=p,e.i.newDrmInfo(l));m=_v(e,o,l.type,l.mimeType,c,u);v=m.segments;y=m.bandwidth;l.bandwidth=y;l.segmentIndex.rd(v,e.j.Db());v.length&&(b=Sm(o.g,"EXT-X-MEDIA-SEQUENCE",0),T=(w=Am(o.g,"EXT-X-SKIP"))?Number(Cm(w,"SKIPPED-SEGMENTS")):0,A=yv(b,v),S=A.Xa,I=A.Ya,t.Xa=S+T,t.Ya=I,k=c.get(b),l.segmentIndex.ob(k));_=v[0];t.kc=_.startTime;C=v[v.length-1];t.Gb=C.endTime;if(M=Am(o.g,"EXT-X-ENDLIST"))t.ld=!0;Ev(e,o);x(D)}))}i.onExpirationUpdated=function(){};function Wm(e,t){for(var n=-1==e.G,i=c(t),r=i.next();!r.done;r=i.next()){r=r.value;var a=r.stream.segmentIndex,o=Km(e,r);if(a=a.g[0]||null){o=c(o);for(var s=o.next();!s.done;s=o.next()){s=c(s.value);var u=s.next().value;if(s.next().value==a.startTime){n&&(e.G=Math.max(e.G,u));r.Se=u;break}}}}if(!(0>e.G))for(t=c(t),r=t.next();!r.done;r=t.next())if(n=r.value,i=n.stream.segmentIndex)if(i.g.splice(0,e.G-n.Se),i=i.g[0]||null)i=-i.startTime,n.stream.segmentIndex.offset(i),Jm(e,n,i)}function Ym(e,t){if(Infinity==e.L){t=c(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.L=Math.min(e.L,i.g))}}t=e.L;if(Infinity!=t)for(i=c(e.h.values()),n=i.next();!n.done;n=i.next()){n=n.value;var r=n.stream.segmentIndex;if(null!=r){var a=r.g[0]||null;if(null==a.g)J("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Bd,"Expect AV sync issues!");else for(Jm(e,n,a.g-t-a.startTime),n=c(r),r=n.next();!r.done;r=n.next())r.value.Hf(t)}}}function Jm(e,t,n){t.kc+=n;t.Gb+=n;e=Km(e,t);t=c(e);for(var i=t.next();!i.done;i=t.next()){var r=c(i.value);i=r.next().value;r=r.next().value;e.set(i,r+n)}}function Qm(e,t,n){var i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,A,S,I,k,_,C,M,D,R,L,P,N,U,j;return O((function(O){switch(O.g){case 1:i=jm(e.Y,t,e.P);r=Em(i.g,"EXT-X-DEFINE");for(var B=c(r),F=B.next();!F.done;F=B.next()){var V=F.value;F=Cm(V,"NAME");V=Cm(V,"VALUE");F&&V&&(e.B.has(F)||e.B.set(F,V))}a=[];o=[];s=[];if(1==i.type)return E(O,$m(e,i),5);u=Em(i.g,"EXT-X-MEDIA");l=Em(i.g,"EXT-X-STREAM-INF");d=Em(i.g,"EXT-X-IMAGE-STREAM-INF");h=Em(i.g,"EXT-X-SESSION-KEY");B=c(l);for(F=B.next();!F.done;F=B.next()){var G=F.value;V=Cm(G,"AUDIO");F=Cm(G,"VIDEO");var H=Cm(G,"SUBTITLES");G=sv(e,G);if(H){var q=Le(Pe,G);e.C.set(H,q);yt(G,q)}V&&(H=Le("audio",G),H||(H=e.g.hls.defaultAudioCodec),e.C.set(V,H));F&&(V=Le("video",G),V||(V=e.g.hls.defaultVideoCodec),e.C.set(F,V))}f=Em(i.g,"EXT-X-SESSION-DATA");p=c(f);for(g=p.next();!g.done;g=p.next())if(m=g.value,v=Cm(m,"DATA-ID"),y=Cm(m,"URI"),b=Cm(m,"LANGUAGE"),w=Cm(m,"VALUE"),T=(new Map).set("id",v),y&&T.set("uri",Im(e.P,y)),b&&T.set("language",b),w&&T.set("value",w),A=new K("sessiondata",T),e.i)e.i.onEvent(A);rv(e,u);B=xm(u,"CLOSED-CAPTIONS");B=c(B);for(F=B.next();!F.done;F=B.next())V=F.value,H=Cm(V,"LANGUAGE"),F=Ve(H||"und"),H||(H=Cm(V,"NAME"))&&(F=H),H=Mm(V,"GROUP-ID"),V=Mm(V,"INSTREAM-ID").replace("SERVICE","svc"),e.O.get(H)||e.O.set(H,new Map),e.O.get(H).set(V,F);a=av(e,l,h);o=nv(e,u);return E(O,iv(e,d),4);case 4:s=O.h;O.D(3);break;case 5:return S=O.h,I=S.type,k=S.mimeType,_=S.codecs,C=S.language,M=S.height,D=S.width,R=S.channelCount,L=S.sampleRate,P=new Map,E(O,vv(e,i,n,n,_,I,C,!0,"Media Playlist",R,P,null,!1,L,!1,k),6);case 6:N=O.h,e.h.set(n,N),"video"==I&&Lv(N.stream,D,M,null,null),a.push({id:0,language:Ve(C||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==I?N.stream:null,video:"video"==I?N.stream:null,bandwidth:N.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new Se(2,7,7001);e.j=new Fs(null,0);e.j.Jc(!0);1==i.type&&(Ov(e)&&(xv(e,i),U=e.l,e.m.R(U)),j=Array.from(e.h.values()),gv(e,j),ev(e));e.H={presentationTimeline:e.j,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null};e.i.makeTextStreamsForClosedCaptions(e.H);x(O)}}))}function $m(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){if(1==w.g){n=e.g.hls.mediaPlaylistFullMimeType;i=n.split(";")[0];r=i.split("/")[0];a=en(n);o={type:r,mimeType:i,codecs:a,language:null,height:null,width:null,channelCount:null,sampleRate:null};if(!t.segments.length)return w.return(o);s=t.segments[0];u=new de(s.i);l=u.La.split(".").pop();if(c=Bv[l])return w.return({type:"audio",mimeType:c,codecs:"",language:null,height:null,width:null,channelCount:null,sampleRate:null});d=[s.i];(h=Av(e,t,s.g,new Map))&&(d=h.Oa());f=cr;p=rr(d,e.g.retryParameters);g=h?0:1;return E(w,jv(e,p,f,{type:g}),2)}m=w.h;(v=m.headers["content-type"])&&(v=v.split(";")[0].toLowerCase());if("ts"==l||"video/mp2t"==v){var T=ct(m.data),x=(new Zo).parse(T);T=x.Rd();x=x.Xe();var A=[],S=!1,I=!1;switch(T.audio){case"aac":A.push("mp4a.40.2");S=!0;break;case"mp3":A.push("mp4a.40.34");S=!0;break;case"ac3":A.push("ac-3");S=!0;break;case"ec3":A.push("ec-3"),S=!0}switch(T.video){case"avc":x.Ga?A.push(x.Ga):A.push("avc1.42E01E");I=!0;break;case"hvc":A.push("hvc1.1.6.L93.90"),I=!0}if(y=A.length?{type:S&&!I?"audio":"video",mimeType:"video/mp2t",codecs:A.join(", "),language:null,height:x.height,width:x.width,channelCount:null,sampleRate:null}:null)return w.return(y)}else if("mp4"==l||"video/mp4"==v||"audio/mp4"==v)if(b=Zm(m))return w.return(b);return w.return(o)}))}function Zm(e){function t(e){return n(e.name)}function n(e){e=e.toLowerCase();switch(e){case"avc1":case"avc3":i.push(e+".42E01E");a=!0;break;case"hev1":case"hvc1":i.push(e+".1.6.L93.90");a=!0;break;case"dvh1":case"dvhe":i.push(e+".05.04");a=!0;break;case"vp09":i.push(e+".00.10.08");a=!0;break;case"av01":i.push(e+".0.01M.08");a=!0;break;case"mp4a":i.push("mp4a.40.2");r=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":i.push(e),r=!0}}var i=[],r=!1,a=!1,o=null,s=null,u=null,l=null,c=null;(new Pr).box("moov",Nr).box("trak",Nr).T("tkhd",(function(e){e=Fo(e.reader,e.version);s=String(e.height);u=String(e.width)})).box("mdia",Nr).T("mdhd",(function(e){o=jo(e.reader,e.version).language})).box("minf",Nr).box("stbl",Nr).T("stsd",Or).box("mp4a",(function(e){var n=e.reader;n.skip(6);n.skip(2);n.skip(8);var i=n.Za();n.skip(2);n.skip(2);n.skip(2);n=n.Za()+n.Za()/65536;l=i;c=n;e.reader.va()?Nr(e):t(e)})).box("esds",(function(e){e=Vo(e.reader);i.push(e.Ga);r=!0})).box("ac-3",t).box("ec-3",t).box("opus",t).box("Opus",t).box("fLaC",t).box("avc1",(function(e){e=Go(e.reader,e.name);i.push(e.Ga);a=!0})).box("avc3",(function(e){e=Go(e.reader,e.name);i.push(e.Ga);a=!0})).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vp09",t).box("av01",t).box("enca",Ur).box("encv",Ur).box("sinf",Nr).box("frma",(function(e){e=Ho(e.reader).Ga;n(e)})).parse(e.data,!0);if(!i.length)return null;e=r&&!a;return{type:e?"audio":"video",mimeType:e?"audio/mp4":"video/mp4",codecs:uv(i).join(", "),language:o,height:s,width:u,channelCount:l,sampleRate:c}}function ev(e){if(Ov(e)){if(e.$==qv){for(var t,n=t=Infinity,i=c(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&"text"!=r.stream.type&&(t=Math.min(t,r.Gb),n=Math.min(n,r.kc));t-=n;e.g.hls.useSafariBehaviorForLive&&(t=e.j.m);isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride);e.j.xe(t)}}else e.j.Ra(fv(e));e.j.be()}function tv(e,t){var n=new Map;t=c(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=Cm(r,"NAME");var a=Cm(r,"VALUE");r=Cm(r,"IMPORT");i&&a&&n.set(i,a);r&&(i=e.B.get(r))&&n.set(r,i)}return n}function nv(e,t){var n=xm(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return lv(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));n=c(n);for(var i=n.next();!i.done;i=n.next()){var r=Mm(i.value,"GROUP-ID");if(i=e.C.get(r))if(r=e.F.get(r)){r=c(r);for(var a=r.next();!a.done;a=r.next())a=a.value,a.stream.codecs=i,a.stream.mimeType=Mv(Pe,i)||Dv(Pe)}}return t.filter((function(e){return e}))}function iv(e,t){var n,i;return O((function(r){if(1==r.g)return n=t.map((function(t){var n,i,r;return O((function(a){if(1==a.g){if(n=e.g.disableThumbnails)return a.return(null);A(a,2);return E(a,cv(e,t),4)}if(2!=a.g)return i=a.h,a.return(i.stream);r=k(a);if(e.g.hls.ignoreImageStreamFailures)return a.return(null);throw r}))})),E(r,Promise.all(n),2);i=r.h;return r.return(i.filter((function(e){return e})))}))}function rv(e,t){t=t.filter((function(e){var t=Cm(e,"URI")||"";return"SUBTITLES"!=Cm(e,"TYPE")&&""!=t}));t=c(t);for(var n=t.next();!n.done;n=t.next())lv(e,n.value)}function av(e,t,n){var i=[],r=new Set;if(0<n.length){n=c(n);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=Mm(a,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=Cm(a,"KEYFORMAT")||"identity",a=(o=Vv[o])?o(a,""):null)){if(a.keyIds){o=c(a.keyIds);for(var s=o.next();!s.done;s=o.next())r.add(s.value)}i.push(a)}}}t=t.map((function(t){var n=Cm(t,"FRAME-RATE"),a=Number(Cm(t,"AVERAGE-BANDWIDTH"))||Number(Mm(t,"BANDWIDTH")),o=Cm(t,"RESOLUTION");o=c(o?o.split("x"):[null,null]);var s=o.next().value,u=o.next().value,l=Cm(t,"VIDEO-RANGE");t=ov(e,t);o=t.audio;t=t.video;for(var d=c(t),h=d.next();!h.done;h=d.next())Lv(h.value.stream,s,u,n,l);n=e.g.disableAudio;if(!o.length||n)o=[null];n=e.g.disableVideo;if(!t.length||n)t=[null];n=[];o=c(o);for(s=o.next();!s.done;s=o.next())for(s=s.value,u=c(t),l=u.next();!l.done;l=u.next()){var f=l.value;if(l=s?s.stream:null)l.drmInfos=i,l.keyIds=r;if(d=f?f.stream:null)d.drmInfos=i,d.keyIds=r;h=s?s.stream.drmInfos:null;var p=f?f.stream.drmInfos:null;f=(f?f.Bd:"")+" - "+(s?s.Bd:"");l&&d&&!Ya(h,p)||e.ea.has(f)||(l={id:e.xa++,language:l?l.language:"und",disabledUntilTime:0,primary:!!l&&l.primary||!!d&&d.primary,audio:l,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(l),e.ea.add(f))}return n})).reduce(ke,[]);return t=t.filter((function(e){return null!=e}))}function ov(e,t){var n=sv(e,t),i=Cm(t,"AUDIO"),r=Cm(t,"VIDEO"),a=i||r;a=a&&e.F.has(a)?e.F.get(a):[];i={audio:i?a:[],video:r?a:[]};r=!1;var o=Mm(t,"URI"),s=i.audio.find((function(e){return e&&e.Bd==o})),u=Le("video",n),l=Le("audio",n);l&&!u?(a="audio",r=0<i.audio.length):!a.length&&l&&u?(a="video",n=[[u,l].join()]):i.audio.length&&s?(a="audio",r=!0):a=i.video.length&&!i.audio.length?"audio":"video";r||(e=dv(e,t,n,a),i[e.stream.type]=[e]);return i}function sv(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec);e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec);e=Cm(t,"CODECS",n.join(",")).split(/\s*,\s*/);return uv(e)}function uv(e){var t=new Set,n=[];e=c(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=tn(i)[0];t.has(r)||(n.push(i),t.add(r))}return n}function lv(e,t){var n=Mm(t,"GROUP-ID"),i="",r=Mm(t,"TYPE").toLowerCase();"subtitles"==r&&(r=Pe);var a=r;a==Pe?i=Cm(t,"CODECS")||"":n&&e.C.has(n)&&(i=e.C.get(n));r=Cv(Mm(t,"URI"),e.B);if(e.h.has(r))return e.h.get(r);var o=Cm(t,"LANGUAGE"),s=Cm(t,"NAME"),u="YES"==Cm(t,"DEFAULT");var l="audio"==a?(l=Cm(t,"CHANNELS"))?parseInt(l.split("/")[0],10):null:null;var c="audio"==a?(c=Cm(t,"CHANNELS"))?c.includes("/JOC"):!1:!1;var d=Cm(t,"CHARACTERISTICS"),h="YES"==Cm(t,"FORCED");"audio"==a?t=(t=Cm(t,"SAMPLE-RATE"))?parseInt(t,10):null:t=null;i=hv(e,r,i,a,o,u,s,l,null,d,h,t,c);e.F.has(n)?e.F.get(n).push(i):e.F.set(n,[i]);if(e.h.has(r))return e.h.get(r);e.h.set(r,i);return i}function cv(e,t){var n,i,r,a,o,s,u,l,c,d;return O((function(h){if(1==h.g){n=Cv(Mm(t,"URI"),e.B);i=Cm(t,"CODECS","jpeg")||"";if(e.h.has(n))return h.return(e.h.get(n));r=Cm(t,"LANGUAGE");a=Cm(t,"NAME");o=Cm(t,"CHARACTERISTICS");s=hv(e,n,i,"image",r,!1,a,null,null,o,!1,null,!1);return e.h.has(n)?h.return(e.h.get(n)):(u=Cm(t,"RESOLUTION"))?E(h,s.stream.createSegmentIndex(),3):h.D(2)}2!=h.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1]));if(d=Cm(t,"BANDWIDTH"))s.stream.bandwidth=Number(d);e.h.set(n,s);return h.return(s)}))}function dv(e,t,n,i){var r=Cv(Mm(t,"URI"),e.B);if(e.h.has(r))return e.h.get(r);t=Cm(t,"CLOSED-CAPTIONS");t="video"==i&&t&&"NONE"!=t?e.O.get(t):null;n=Re(i,n);i=hv(e,r,n,i,null,!1,null,null,t,null,!1,null,!1);if(e.h.has(r))return e.h.get(r);e.h.set(r,i);return i}function hv(e,t,n,i,r,a,o,s,u,l,d,h,f){function p(p){var g,y,b,w,T,A,S,I,k,_,C,M,D,R;return O((function(L){if(1==L.g)return E(L,Pv(e,v.Kd,!0),2);if(3!=L.g){g=L.h;if(p.aborted)return L.return();y=g.uri;b=jm(e.Y,g.data,y);w=Ov(e);return E(L,vv(e,b,t,y,n,i,r,a,o,s,u,l,d,h,f),3)}T=L.h;if(p.aborted)return L.return();A=T.stream;Ov(e)&&!w&&xv(e,b);v.Kd=y;v.kc=T.kc;v.Gb=T.Gb;v.Od=T.Od;v.Nd=T.Nd;v.ld=T.ld;v.ee=T.ee;v.Xa=T.Xa;v.Ya=T.Ya;v.gf=!0;m.segmentIndex=A.segmentIndex;m.encrypted=A.encrypted;m.drmInfos=A.drmInfos;m.keyIds=A.keyIds;m.mimeType=A.mimeType;m.bandwidth=A.bandwidth;m.drmInfos.length&&e.i.newDrmInfo(m);S=Ne;if(i==S.Na||i==S.Ob)for(I=c(e.h.values()),k=I.next();!k.done;k=I.next())_=k.value,_.gf||_.type!=i||(_.stream.mimeType=A.mimeType);i==S.na&&(C=A.segmentIndex.get(0))&&C.h&&(m.mimeType="application/mp4");mv(e)&&(e.Ea?gv(e,[v]):(e.Ea=!0,M=Array.from(e.h.values()),D=M.filter((function(e){return e.stream.segmentIndex})),gv(e,D),ev(e),R=e.l,0<R&&e.m.R(R)));x(L)}))}var g=Im(e.P,t),m=bv(e,n,i,r,a,o,s,u,l,d,h,f),v={stream:m,type:i,Bd:t,Kd:g,kc:0,Gb:0,ee:new Map,Od:!1,Nd:!1,ld:!1,Se:-1,Xa:-1,Ya:-1,gf:!1},y=null,b=new AbortController;m.createSegmentIndex=function(){if(y)return y;b=new AbortController;return y=new Promise((function(e){e(p(b.signal))}))};m.closeSegmentIndex=function(){y&&!m.segmentIndex&&b.abort();m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null);y=null};return v}function fv(e){var t=Infinity;e=c(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Gb));return t}function pv(e,t){var n=[];t=c(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&lu(i.segmentIndex,(function(e){n.push(e)}));e.j.sd(n)}function gv(e,t){if(!Ov(e))for(var n=fv(e),i=c(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.wc(0,n);pv(e,t.map((function(e){return e.stream})));e.g.hls.ignoreManifestProgramDateTime?Wm(e,t):Ym(e,t)}function mv(e){if(!e.H)return!1;var t=[],n=[];e=c(e.H.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return 0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex}))?!1:!0}function vv(e,t,n,i,r,a,o,s,u,l,c,d,h,f,p,g){var m,v,y,b,w,T,x,A,S,I,k,_,C,M,D,R,L,P,N,U,j,B,F;return O((function(O){if(1==O.g){if(1!=t.type)throw new Se(2,4,4017);m=Em(t.g,"EXT-X-DEFINE");v=tv(e,m);var V=Am(t.g,"EXT-X-PLAYLIST-TYPE"),G=Am(t.g,"EXT-X-ENDLIST");G=V&&"VOD"==V.value||G;V=V&&"EVENT"==V.value&&!G;V=!G&&!V;G?Uv(e,Gv):V?Uv(e,qv):Uv(e,Hv);Ov(e)&&Ev(e,t);return g?O.D(2):E(O,Rv(e,a,r,t,v),3)}2!=O.g&&(g=O.h);y=wv(t,g);b=y.drmInfos;w=y.keyIds;T=y.encrypted;x=y.Yg;if(T&&!b.length&&!x)throw new Se(2,4,4026);A=Ov(e)?e.I.get(a):new Map;S=_v(e,t,a,g,A,v);I=S.segments;k=S.bandwidth;Ov(e)&&Ev(e,t);_=I[0].startTime;C=I[I.length-1];M=C.endTime;D=new uu(I);L=(R=Am(t.g,"EXT-X-SERVER-CONTROL"))?null!=R.getAttribute("CAN-SKIP-UNTIL"):!1;P=R?null!=R.getAttribute("CAN-BLOCK-RELOAD"):!1;N=Sm(t.g,"EXT-X-MEDIA-SEQUENCE",0);U=yv(N,I);j=U.Xa;B=U.Ya;F=bv(e,r,a,o,s,u,l,c,d,h,f,p);F.segmentIndex=D;F.encrypted=T;F.drmInfos=b;F.keyIds=w;F.mimeType=g;F.bandwidth=k;return O.return({stream:F,type:a,Bd:n,Kd:i,kc:_,Gb:M,Od:L,Nd:P,ld:!1,Se:-1,Xa:j,Ya:B,ee:A,gf:!1})}))}function yv(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Xa:e,Ya:n};t=t[t.length-1];var i=t.i;if(!t.i.length)return e++,t.s&&(n=0),{Xa:e,Ya:n};n=i.length-1;i[i.length-1].m||(e++,n=0);return{Xa:e,Ya:n}}function bv(e,t,n,i,r,a,o,s,u,l,d,h){var f=Mv(n,t)||Dv(n),p=[];if(u){u=c(u.split(","));for(var g=u.next();!g.done;g=u.next())p.push(g.value)}u=n==Pe?"subtitle":void 0;p.length||"subtitle"!==u||p.push("subtitle");return{id:e.xa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:f,codecs:t,kind:n==Pe?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Ve(i||"und"),originalLanguage:i,label:a,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:o,audioSamplingRate:d,spatialAudio:h,closedCaptions:s,hdr:void 0,tilesLayout:void 0,accessibilityPurpose:null,external:!1}}function wv(e,t){var n=[];if(e.segments){e=c(e.segments);for(var i=e.next();!i.done;i=e.next())i=Em(i.value.g,"EXT-X-KEY"),n.push.apply(n,d(i))}i=e=!1;var r=[],a=new Set;n=c(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=Mm(o,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)i=!0;else if(s=Cm(o,"KEYFORMAT")||"identity",o=(s=Vv[s])?s(o,t):null){if(o.keyIds){s=c(o.keyIds);for(var u=s.next();!u.done;u=s.next())a.add(u.value)}r.push(o)}}return{drmInfos:r,keyIds:a,encrypted:e,Yg:i}}function Tv(t,n,i){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Se(2,4,4042);var r=0,a=Cm(n,"IV","");if(a){var o=Wr(a.substr(2));if(16!=o.byteLength)throw new Se(2,4,4043)}else r=Sm(i.g,"EXT-X-MEDIA-SEQUENCE",0);n=Im(i.h,Mm(n,"URI"));var s=rr([n],t.g.retryParameters),u={method:"AES-128",iv:o,firstMediaSequenceNumber:r,fetchKey:function(){var n,i,r;return O((function(a){if(1==a.g)return E(a,jv(t,s,6),2);if(3!=a.g){n=a.h;if(!n.data||16!=n.data.byteLength)throw new Se(2,4,4044);i={name:"AES-CBC"};r=u;return E(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h;u.fetchKey=void 0;x(a)}))}};return u}function Ev(e,t){var n=Infinity,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var a=Am(i[r].g,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}r--}i=Am(t.g,"EXT-X-TARGETDURATION");if(!i)throw new Se(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value);if(r=Am(t.g,"EXT-X-PART-INF"))e.J=Number(Mm(r,"PART-TARGET"));t=Am(t.g,"EXT-X-SERVER-CONTROL");e.s&&e.J?(e.l=e.ya?5*e.J<=n?Math.min(e.J,e.l):Math.min(n,e.l):Math.min(e.J,e.l),e.X=t?Number(Mm(t,"PART-HOLD-BACK")):0):(e.l=Math.min(n,e.l),n=t?t.getAttribute("HOLD-BACK"):null,e.V=n?Number(n.value):0);e.ma=Math.max(i,e.ma)}function xv(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.X)t=e.X;else if(e.V)t=e.V;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2));t=e.ma*n}e.j.Kg(0);e.j.Hg(t);e.j.Jc(!1)}function Av(e,t,n,i){var r=Am(n,"EXT-X-MAP");if(!r)return null;var a=Mm(r,"URI");a=Cv(Im(t.h,a),i);i=[a,Cm(r,"BYTERANGE","")].join("-");if(!e.Z.has(i)){var o=void 0;n=c(n);for(var s=n.next();!s.done;s=n.next())s=s.value,"EXT-X-KEY"==s.name&&"AES-128"==Mm(s,"METHOD")&&s.id<r.id&&(o=Tv(e,s,t));t=Sv(a,r,o);e.Z.set(i,t)}return e.Z.get(i)}function Sv(e,t,n){var i=0,r=null;if(t=Cm(t,"BYTERANGE"))i=t.split("@"),r=Number(i[0]),i=Number(i[1]),r=i+r-1,n&&(t=r+1-i,t%16&&(r+=16-t%16));return new bo((function(){return[e]}),i,r,null,null,null,n)}function Iv(t,n,i,r,a,o,s,u,l,d){var h=r.g,f=Am(h,"EXTINF"),p=0,g=0,m=null;r.h.length&&!t.s&&Q("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var v=null;if(!t.g.hls.ignoreManifestProgramDateTime){var y=Am(h,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=la(y.value))}var b=Eo;Am(h,"EXT-X-GAP")&&(b=2);if(!f){if(0==r.h.length)throw new Se(2,4,4024,"EXTINF");if(!t.s)return null}var w=[];y=!1;var T=null,E=!1,x=!1;if(t.s&&r.h.length){p=("video/mp4"==l||"audio/mp4"==l)&&e.ReadableStream;l=v;for(var A={},S=0;S<r.h.length;A={Sc:A.Sc,Gd:A.Gd},S++){var I=r.h[S],k=0==S?i:w[w.length-1],_=0==S?a:k.endTime,C=Number(Cm(I,"DURATION"))||t.J;if(C){var M=_+C,D=0,R=null;"EXT-X-PRELOAD-HINT"==I.name?(D=(D=Cm(I,"BYTERANGE-START"))?Number(D):0,(k=Cm(I,"BYTERANGE-LENGTH"))?R=D+Number(k)-1:D&&(R=Number.MAX_SAFE_INTEGER)):(D=Cm(I,"BYTERANGE"),R=c(kv(k,D)),D=R.next().value,R=R.next().value);A.Gd=Cm(I,"URI");if(A.Gd){k=Eo;"YES"==Cm(I,"GAP")&&(k=2,E=!0);A.Sc=null;var L=function(e){return function(){null==e.Sc&&(e.Sc=Im(s,e.Gd));return[e.Sc]}}(A);p&&0<=D&&null!=R&&(T=L,y=!0);_=new To(_,M,L,D,R,n,0,0,Infinity,[],"",null,l,k,d);"EXT-X-PRELOAD-HINT"==I.name&&(_.hf(),x=!0);"YES"!=Cm(I,"INDEPENDENT")&&0<S&&_.xg();w.push(_);l&&(l+=C)}}}}if(f){f=Number(f.value.split(",")[0]);if(0==f)return null;p=a+f}else if(w.length)p=w[w.length-1].endTime;else return null;y&&(E||0!=w[0].Sa?(y=!1,T=null):w=[]);(f=Am(h,"EXT-X-BYTERANGE"))?(m=c(kv(i,f.value)),g=m.next().value,m=m.next().value):w.length&&(g=w[0].Sa,m=w[w.length-1].za);i="";f=null;"image"==u&&(i="1x1",u=Am(h,"EXT-X-TILES"))&&(i=Mm(u,"LAYOUT"),(u=Cm(u,"DURATION"))&&(f=Number(u)));var P=null;n=new To(a,p,(function(){if(T)return T();null==P&&(P=Cv(r.i,o));return P.length?[P]:[]}),g,m,n,0,0,Infinity,w,i,f,v,b,d);y&&(t.ya=!0,n.wg(),x&&n.hf());return n}function kv(e,t){var n=0,i=null;t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.za+1,i=n+t-1);return[n,i]}function _v(e,t,n,i,r,a){var o=t.segments,s=void 0,u=Sm(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=Sm(t.g,"EXT-X-MEDIA-SEQUENCE",0),d=Am(t.g,"EXT-X-SKIP"),h=d?Number(Cm(d,"SKIPPED-SEGMENTS")):0,f=l+h,p=0;Ov(e)&&r.has(f)&&(p=r.get(f));var g=[],m=null;d=[];for(var v=0;v<o.length;v++){var y=o[v],b=0==v?p:m.endTime;f=l+h+v;Am(y.g,"EXT-X-DISCONTINUITY")&&u++;var w=c(y.g);for(var T=w.next();!T.done;T=w.next())T=T.value,"EXT-X-KEY"==T.name&&("AES-128"==Mm(T,"METHOD")?s=Tv(e,T,t):s=void 0);r.set(f,b);w=Av(e,t,y.g,a);!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode());if(b=Iv(e,w,m,y,b,a,t.h,n,i,s))(m=Sm(y.g,"EXT-X-BITRATE"))?d.push({bitrate:m,duration:b.endTime-b.startTime}):d.length&&(m=d.pop(),m.duration+=b.endTime-b.startTime,d.push(m)),m=b,b.l=u,e.g.hls.ignoreManifestProgramDateTime&&null!=e.G&&f<e.G||g.push(b)}t=void 0;d.length&&(t=d.reduce((function(e,t){return e+t.duration}),0),t=Math.round(d.reduce((function(e,t){return e+t.bitrate*t.duration}),0)/t*1e3));if(d=g.some((function(e){return null!=e.g})))for(n={},i=0;i<g.length;n={Oc:n.Oc,Nc:n.Nc,Cd:n.Cd,Lb:n.Lb,Mc:n.Mc},i++)if(n.Lb=g[i],null==n.Lb.g)for(n.Nc=0,n.Oc=i,r=function(e){return function(){var t=g[e.Oc];if(t){if(null!=t.g)return t.g+e.Nc;e.Nc-=t.endTime-t.startTime;e.Oc+=1}return null}}(n),n.Mc=0,n.Cd=i,a=function(e){return function(){var t=g[e.Cd];if(t){t!=e.Lb&&(e.Mc+=t.endTime-t.startTime);if(null!=t.g)return t.g+e.Mc;--e.Cd}return null}}(n);null==n.Lb.g;)n.Lb.g=a(),null==n.Lb.g&&(n.Lb.g=r());if(d)for(n=c(g),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.g,r=c(r.i),a=r.next();!a.done;a=r.next())a=a.value,a.g=i,i+=a.endTime-a.startTime;e=e.L;if(d&&Infinity!=e)for(d=c(g),i=d.next();!i.done;i=d.next())i.value.Hf(e);return{segments:g,bandwidth:t}}function Cv(e,t){if(!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=c(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),a=t.get(r);if(a)e=e.replace(i,a);else throw new Se(2,4,4039,r)}}return e}function Mv(e,t){if(e==Pe){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function Dv(e){return e==Pe?"text/vtt":Fv[e].mp4}function Rv(e,t,n,i,r){var a,o,s,u,l,c,d,h,f,p;return O((function(g){if(1==g.g){a=cr;o=Math.trunc((i.segments.length-1)/2);s=Cv(i.segments[o].i,r);u=new de(s);l=u.La.split(".").pop();c=Fv[t];if((d=c[l])||(d=Bv[l])||(d=Mv(t,n)))return g.return(d);h=rr([s],e.g.retryParameters);h.method="HEAD";return E(g,jv(e,h,a,{type:1}),2)}f=g.h;return(p=f.headers["content-type"])?g.return(p.split(";")[0]):g.return(Dv(t))}))}function Lv(e,t,n,i,r){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0)}function Pv(e,t,n){return jv(e,rr([t],e.g.retryParameters),0,{type:n?2:3})}function Nv(e){var t,n;O((function(i){if(1==i.g){if(!e.i)return i.return();A(i,2);return E(i,e.update(),4)}if(2!=i.g)return Ov(e)&&(t=e.l,e.m.R(t)),I(i,0);n=k(i);if(!e.i)return i.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),i.return();n.severity=1;e.i.onError(n);e.m.R(.1);x(i)}))}function Ov(e){return e.$!=Gv}function Uv(e,t){e.$=t;e.j&&e.j.Jc(!Ov(e));Ov(e)||e.m.stop()}function jv(e,t,n,i){if(!e.K)throw new Se(2,7,7001);t=e.i.networkingEngine.request(n,t,i);tr(e.K,t);return t.promise}q("shaka.hls.HlsParser",zm);var Bv={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Fv={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Vv={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new Se(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new Se(2,4,4041);return De("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Mm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;t=Mm(e,"URI");t=qm(t);t=ct(t.data);t=De("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);if(e=Cm(e,"KEYID"))t.keyIds=new Set([e.toLowerCase().substr(2)]);return t},"com.microsoft.playready":function(e){var t=Mm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;e=Mm(e,"URI");e=qm(e);e=ct(e.data);t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);e=$r(e,t,new Set,0);return De("com.microsoft.playready",[{initDataType:"cenc",initData:e}])},identity:function(e){e=Mm(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?De("org.w3.clearkey",null):null}},Gv="VOD",Hv="EVENT",qv="LIVE",zv={Ug:Gv,Yi:Hv,Sg:qv};po.m3u8=function(){return new zm};fo["application/x-mpegurl"]=function(){return new zm};fo["application/vnd.apple.mpegurl"]=function(){return new zm};function Kv(e){var t=0,n=dt(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{e=t+6;for(t=[];e<n.byteLength-1;){i=n.getUint16(e,!0);e+=2;var r=n.getUint16(e,!0);e+=2;if(0!=(r&1)||r+e>n.byteLength){n=[];break e}var a=ct(n,e,r);t.push({type:i,value:a});e+=r}n=t}return n}function Xv(e){if(e=Wv(e))e:{e=c(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Zr(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function Wv(e){e=Xr(e.textContent);e=Kv(e).filter((function(e){return e.type===Yv}))[0];if(!e)return null;e=Ir(e.value,!0);return(e=ya(e,"WRMHEADER"))?e:null}var Yv=1,Jv=(new Map).set("com.microsoft.playready",Xv).set("com.microsoft.playready.recommendation",Xv).set("com.microsoft.playready.software",Xv).set("com.microsoft.playready.hardware",Xv);function Qv(e){if(!ay){ay=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);vy=ry("ftyp",t,i,t,n);t=ry("dref",yy);by=ry("dinf",t)}this.g=e}Qv.prototype.initSegment=function(){var e=new Uint8Array([]);var t=c(this.g);for(var n=t.next();!n.done;n=t.next()){var i=e;e=n.value;n=ry;var r=e.id+1;var a=e.stream.width||0,o=e.stream.height||0;"audio"==e.type&&(o=a=0);var s=e.duration*e.timescale,u=Math.floor(s/(oy+1));s=Math.floor(s%(oy+1));r=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(ny(r,4)),[0,0,0,0],d(ny(u,4)),d(ny(s,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],d(ny(a,2)),[0,0],d(ny(o,2)),[0,0]));r=ry("tkhd",r);a=ry;u=e.duration*e.timescale;o=Math.floor(u/(oy+1));u=Math.floor(u%(oy+1));s=e.stream.language;s=s.charCodeAt(0)-96<<10|s.charCodeAt(1)-96<<5|s.charCodeAt(2)-96;o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(ny(e.timescale,4)),d(ny(o,4)),d(ny(u,4)),d(ny(s,2)),[0,0]));o=ry("mdhd",o);u=e;s=new Uint8Array([]);switch(u.type){case"video":s=uy;break;case"audio":s=ly}u=ry("hdlr",s);e:{switch(e.type){case"video":e=ry("minf",ry("vmhd",py),by,$v(e));break e;case"audio":e=ry("minf",ry("smhd",gy),by,$v(e));break e}e=new Uint8Array([])}e=a("mdia",o,u,e);n=n("trak",r,e);e=Jr(i,n)}n=this.g[0];t=ry;r=n.duration*n.timescale;i=Math.floor(r/(oy+1));r=Math.floor(r%(oy+1));i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(ny(n.timescale,4)),d(ny(i,4)),d(ny(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));i=ry("mvhd",i);a=new Uint8Array([]);r=c(this.g);for(o=r.next();!o.done;o=r.next())o=new Uint8Array([0,0,0,0].concat(d(ny(o.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),o=ry("trex",o),a=Jr(a,o);r=ry("mvex",a);a=new Uint8Array([]);if(n.encrypted)for(n=c(n.stream.drmInfos),o=n.next();!o.done;o=n.next())if(o=o.value,o.initData)for(o=c(o.initData),u=o.next();!u.done;u=o.next())a=Jr(a,u.value.initData);t=t("moov",i,e,r,a);i=new Uint8Array(vy.byteLength+t.byteLength);i.set(vy);i.set(t,vy.byteLength);return i};function $v(e){var t=ry,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.Da.byteLength)var r=ry("avcC",e.Da);else{r=ry;for(var a=7,o=[],s=[],u=0,l=0,c=0,h=0;h<e.ab.length;h++){var f=iy(e.ab[h]);switch(f[0]&31){case 7:o.push(f);a+=f.length+2;break;case 8:s.push(f),a+=f.length+2}}0<o.length&&(u=o[0][1],c=o[0][2],l=o[0][3]);a=new Uint8Array(a);h=0;a[h++]=1;a[h++]=u;a[h++]=c;a[h++]=l;a[h++]=255;a[h++]=224|o.length;for(u=0;u<o.length;u++)a[h++]=(o[u].length&65280)>>8,a[h++]=o[u].length&255,a.set(o[u],h),h+=o[u].length;a[h++]=s.length;for(o=0;o<s.length;o++)a[h++]=(s[o].length&65280)>>8,a[h++]=s[o].length&255,a.set(s[o],h),h+=s[o].length;r=r("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(ny(n,2)),d(ny(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]));i="avc1";s=new Uint8Array([]);e.encrypted&&(s=ey(e),i="encv");n=ry(i,n,r,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Da.byteLength&&(n=ry("hvcC",e.Da)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(ny(i,2)),d(ny(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",s=new Uint8Array([]),e.encrypted&&(s=ey(e),r="encv"),n=ry(r,i,n,s));break;case"audio":if(e.codecs.includes("mp3"))e=ry(".mp3",Zv(e));else if(e.codecs.includes("ac-3"))n=ry("dac3",e.ia),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=ey(e),i="enca"),e=ry(i,Zv(e),n,r);else if(e.codecs.includes("ec-3"))n=ry("dec3",e.ia),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=ey(e),i="enca"),e=ry(i,Zv(e),n,r);else{if(0<e.ia.byteLength)n=ry("esds",e.ia);else{n=ry;i=e.id+1;r=e.stream.bandwidth||0;s=e.stream.channelsCount||2;u=e.stream.audioSamplingRate||44100;l=Re("audio",e.codecs.split(","));c={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};o=c[u];if("mp4a.40.5"===l||"mp4a.40.29"===l)o=c[2*u];u=parseInt(l.split(".").pop(),10);i=new Uint8Array([0,0,0,0,3,25].concat(d(ny(i,2)),[0,4,17,64,21,0,6,0],d(ny(r,4)),d(ny(r,4)),[5,2,u<<3|o>>>1,o<<7|s<<3,6,1,2]));n=n("esds",i)}i="mp4a";r=new Uint8Array([]);e.encrypted&&(r=ey(e),i="enca");e=ry(i,Zv(e),n,r)}n=e}e=ry("stsd",my,n);return t("stbl",e,ry("stts",cy),ry("stsc",dy),ry("stsz",fy),ry("stco",hy))}function Zv(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(d(ny(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ey(e){var t=ry;var n=e.codecs.substring(0,e.codecs.indexOf("."));for(var i=0,r=0;r<n.length;r+=1)i|=n.charCodeAt(r)<<8*(n.length-r-1);n=new Uint8Array([].concat(d(ny(i,4))));n=ry("frma",n);i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);i=ry("schm",i);r=ry;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=c(e.stream.drmInfos);for(var o=e.next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size){o=c(o.keyIds);for(var s=o.next();!s.done;s=o.next())a=iy(s.value)}e=new Uint8Array([0,0,0,0,0,0,1,8]);a=ry("tenc",e,a);return t("sinf",n,i,r("schi",a))}function ty(e){var t=new Uint8Array([]);e=c(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=ry,r=new Uint8Array([0,0,0,0].concat(d(ny(n.data?n.data.Kb:0,4))));r=ry("mfhd",r);var a;var o=n.data?n.data.$a:[];var s=new Uint8Array(4+o.length);for(a=0;a<o.length;a++){var u=o[a].flags;s[a+4]=u.kb<<4|u.qb<<2|u.pb}o=ry("sdtp",s);var l=o.length+92;s=ry;a=new Uint8Array([0,0,0,58].concat(d(ny(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));a=ry("tfhd",a);u=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(u%(oy+1));u=new Uint8Array([1,0,0,0].concat(d(ny(Math.floor(u/(oy+1)),4)),d(ny(h,4))));u=ry("tfdt",u);var f=l;l=n.data?n.data.$a:[];h=l.length;var p=12+16*h,g=new Uint8Array(p);f+=8+p;g.set(["video"===n.type?1:0,0,15,1].concat(d(ny(h,4)),d(ny(f,4))),0);for(f=0;f<h;f++){var m=l[f];p=ny(m.duration,4);var v=ny(m.size,4),y=m.flags;m=ny(m.zb,4);g.set([].concat(d(p),d(v),[y.Eb<<2|y.kb,y.qb<<6|y.pb<<4|y.Fb,y.jb&61440,y.jb&15],d(m)),12+16*f)}l=ry("trun",g);o=s("traf",a,u,l,o);i=i("moof",r,o);r=n.data?n.data.$a:[];n=new Uint8Array([]);r=c(r);for(o=r.next();!o.done;o=r.next())n=Jr(n,o.value.data);n=ry("mdat",n);t=Jr(t,i,n)}return t}function ny(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function iy(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function ry(e){var t=U.apply(1,arguments),n=sy[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],sy[e]=n);for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;r=new Uint8Array(i);r[0]=i>>24&255;r[1]=i>>16&255;r[2]=i>>8&255;r[3]=i&255;r.set(n,4);n=0;for(i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var ay=!1,oy=Math.pow(2,32)-1,sy={},uy=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ly=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),cy=new Uint8Array([0,0,0,0,0,0,0,0]),dy=new Uint8Array([0,0,0,0,0,0,0,0]),hy=new Uint8Array([0,0,0,0,0,0,0,0]),fy=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),py=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),gy=new Uint8Array([0,0,0,0,0,0,0,0]),my=new Uint8Array([0,0,0,0,0,0,0,1]),vy=new Uint8Array([]),yy=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),by=new Uint8Array([]);function wy(){var e=this;this.h=this.g=null;this.l=[];this.j=null;this.B=1;this.i=null;this.F=new Ze(5);this.s=new fn((function(){Ty(e)}));this.C=new er;this.m=new Map}i=wy.prototype;i.configure=function(e){this.g=e};i.start=function(e,t){var n=this;return O((function(i){if(1==i.g)return n.l=[e],n.h=t,E(i,Ey(n),2);if(!n.h)throw new Se(2,7,7001);return i.return(n.j)}))};function Ty(e){var t;O((function(n){switch(n.g){case 1:return A(n,2),E(n,Ey(e),4);case 4:I(n,3);break;case 2:t=k(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();x(n)}}))}i.stop=function(){this.g=this.h=null;this.l=[];this.j=null;null!=this.s&&(this.s.stop(),this.s=null);this.m.clear();return this.C.destroy()};i.update=function(){var e=this,t;return O((function(n){if(1==n.g)return A(n,2),E(n,Ey(e),4);if(2!=n.g)return I(n,0);t=k(n);if(!e.h||!t)return n.return();e.h.onError(t);x(n)}))};i.onExpirationUpdated=function(){};function Ey(e){var t,n,i,r,a,o,s;return O((function(u){if(1==u.g)return t=rr(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5}),tr(e.C,r),E(u,r.promise,2);a=u.h;if(!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var l=a.uri,h=ba(a.data,"SmoothStreamingMedia");if(!h)throw new Se(2,4,4046,l);(l=e.g.mss.manifestPreprocessor)&&l(h);e.i||(e.i=new Fs(null,0));if(l=ua(h,"IsLive",ma,!1))throw new Se(2,4,4047);e.i.Jc(!l);var f=ua(h,"TimeScale",pa,1e7),p=ua(h,"DVRWindowLength",pa);l&&(0===p||isNaN(p))&&(p=Infinity);var g=ua(h,"CanSeek",ma,!1);0===p&&g&&(p=Infinity);g=null;p&&0<p&&(g=p/f);l&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride);null==g&&(g=Infinity);e.i.xe(g);p=ua(h,"Duration",pa,Infinity);l||e.i.Ra(p/f);l={variants:[],textStreams:[],timescale:f,duration:p/f};g=ta(h,"Protection");var m;f=e.g.mss.keySystemsBySystemId;p=[];g=c(g);for(m=g.next();!m.done;m=g.next())p=p.concat(ta(m.value,"ProtectionHeader"));if(p.length){g=[];for(m=0;m<p.length;m++){var v=p[m],y=v.getAttribute("SystemID").toLowerCase(),b=f[y];if(b){var w=Wv(v);if(w)e:{w=c(w.getElementsByTagName("DATA"));for(var T=w.next();!T.done;T=w.next())if(T=Zr(T.value,"KID")){w=Xr(T.textContent);w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(d(w.slice(8))));w=Yr(w);break e}w=null}else w=null;T=Xr(v.textContent);y=Wr(y.replace(/-/g,""));y=[{initData:$r(T,y,new Set,0),initDataType:"cenc",keyId:w}];y=De(b,y);w&&y.keyIds.add(w);if(b=Jv.get(b))y.licenseServerUri=b(v);g.push(y)}}f=g}else f=[];m=f;g=[];f=[];p=[];h=ta(h,"StreamIndex");h=c(h);for(v=h.next();!v.done;v=h.next()){v=v.value;b=ta(v,"QualityLevel");y=l.timescale;w=l.duration;T=ta(v,"c");for(var A=[],S=0,I=0;I<T.length;++I){var k=T[I],_=T[I+1],C=ua(k,"t",pa),M=ua(k,"d",pa);k=ua(k,"r",ha);if(!M)break;C=null!=C?C:S;k=k||0;if(0>k)if(_){_=ua(_,"t",pa);if(null==_)break;else if(C>=_)break;k=Math.ceil((_-C)/M)-1}else{if(Infinity==w)break;else if(C/y>=w)break;k=Math.ceil((w*y-C)/M)-1}for(_=0;_<=k;++_)S=C+M,A.push({start:C/y,end:S/y,Of:C}),C=S}y=A;b=c(b);for(w=b.next();!w.done;w=b.next())(w=xy(e,v,w.value,y,m,l))&&("audio"!=w.type||e.g.disableAudio?"video"!=w.type||e.g.disableVideo?w.type!=Pe||e.g.disableText||p.push(w):f.push(w):g.push(w))}h=[];g=c(0<g.length?g:[null]);for(m=g.next();!m.done;m=g.next())for(m=m.value,v=c(0<f.length?f:[null]),w=v.next();!w.done;w=v.next())b=h,y=b.push,w=w.value,T=0,m&&m.bandwidth&&0<m.bandwidth&&(T+=m.bandwidth),w&&w.bandwidth&&0<w.bandwidth&&(T+=w.bandwidth),w={id:e.B++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!w&&w.primary,audio:m,video:w,bandwidth:T,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(b,w);l.variants=h;l.textStreams=p;e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.be());Promise.resolve();o=Date.now();s=(o-i)/1e3;e.F.sample(1,s);x(u)}))}function xy(e,t,n,i,r,a){var o=t.getAttribute("Type");if("audio"!==o&&"video"!==o&&"text"!==o)return Q("Ignoring unrecognized type:",o),null;var s=t.getAttribute("Language"),u=e.B++,l=ua(n,"Bitrate",fa),c=ua(n,"MaxWidth",fa),d=ua(n,"MaxHeight",fa),h=ua(n,"Channels",fa),f=ua(n,"SamplingRate",fa),p=a.duration;i.length&&(p=i[i.length-1].end-i[0].start);var g=e.i.getDuration();e.i.Ra(Math.min(p,g));var m={id:u,originalId:t.getAttribute("Name")||String(u),createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:Ve(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if(r=t.getAttribute("Subtype"))(r=Cy[r])&&m.roles.push(r),"main"===r&&(m.primary=!0);r=n.getAttribute("FourCC");if(null===r||""===r)r=t.getAttribute("FourCC");if(!r)if("audio"===o)r="AAC";else if("video"===o)return Q('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!_y.includes(r.toUpperCase()))return Q("Codec not supported:",r),null;n=Ay(n,o,r,m);m.mssPrivateData.codecPrivateData=n;switch(o){case"audio":if(!n)return Q("Quality unsupported without CodecPrivateData",o),null;m.type="audio";m.mimeType="mss/audio/mp4";m.codecs=Sy(r,n);break;case"video":if(!n)return Q("Quality unsupported without CodecPrivateData",o),null;m.type="video";m.mimeType="mss/video/mp4";m.codecs=Iy(n);break;case"text":if(m.type=Pe,m.mimeType="application/mp4","TTML"===r||"DFXP"===r)m.codecs="stpp"}m.createSegmentIndex=function(){if(m.segmentIndex)return Promise.resolve();if(e.m.has(m.id))var n=e.m.get(m.id);else n=[],"video"==m.type&&(n=m.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:m.id,type:m.type,codecs:m.codecs,encrypted:m.encrypted,timescale:m.mssPrivateData.timescale,duration:m.mssPrivateData.duration,ab:n,ia:new Uint8Array([]),Da:new Uint8Array([]),data:null,stream:m},n=new Qv([n]).initSegment(),e.m.set(m.id,n);n=ky(e,new bo((function(){return[]}),0,null,null,void 0,n),m,t,i);m.segmentIndex=new uu(n);return Promise.resolve()};m.closeSegmentIndex=function(){m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null)};return m}function Ay(e,t,n,i){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=i.channelsCount||2;e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};i=r[e];if("AACH"===n)return n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16);n=new Uint8Array(2);n[0]=16|i>>1;n[1]=i<<7|t<<3;t=new Uint16Array(1);t[0]=(n[0]<<8)+n[1];return t[0].toString(16)}function Sy(e,t){var n=0;"AACH"===e&&(n=5);t?0===n&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,"AACH"===e&&(n=5));return"mp4a.40."+n}function Iy(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function ky(e,t,n,i,r){var a=i.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));i=[];var o={};r=c(r);for(var s=r.next();!s.done;o={Xc:o.Xc},s=r.next())o.Xc=s.value,i.push(new To(o.Xc.start,o.Xc.end,function(t){return function(){return Me(e.l,[a.replace("{start time}",String(t.Xc.Of))])}}(o),0,null,t,0,0,n.mssPrivateData.duration));return i}q("shaka.mss.MssParser",wy);var _y="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Cy={CAPT:"main",SUBT:"alternate",DESC:"main"};po.ism=function(){return new wy};fo["application/vnd.ms-sstr+xml"]=function(){return new wy};function My(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=kr(t)}catch(e){}throw new Se(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Dy(){}function Ry(e,t,n,i,r){var a=new By;Tr(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new Uy,s={ag:!1,Pg:!1};e=Ly(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i,r,t.streamDataCallback);e=new zi(e,(function(){s.ag=!0;o.abort();return Promise.resolve()}));if(t=t.retryParameters.timeout){var u=new fn((function(){s.Pg=!0;o.abort()}));u.R(t/1e3);e.finally((function(){u.stop()}))}return e}function Ly(e,t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:return s=Oy,u=jy,h=d=0,f=Date.now(),A(w,2),E(w,s(e,n),4);case 4:l=w.h;a(Py(l.headers));if("HEAD"==n.method){w.D(5);break}p=l.clone().body.getReader();m=(g=l.headers.get("Content-Length"))?parseInt(g,10):0;v=function(e){function t(){var n,i;return O((function(a){switch(a.g){case 1:return A(a,2),E(a,p.read(),4);case 4:n=a.h;I(a,3);break;case 2:return k(a),a.return();case 3:if(n.done){a.D(5);break}d+=n.value.byteLength;if(!o){a.D(5);break}return E(a,o(n.value),5);case 5:i=Date.now();if(100<i-f||n.done)r(i-f,d-h,m-d),h=d,f=i;n.done?e.close():(e.enqueue(n.value),t());x(a)}}))}t()};new u({start:v});return E(w,l.arrayBuffer(),6);case 6:c=w.h;case 5:I(w,3);break;case 2:y=k(w);if(i.ag)throw new Se(1,1,7001,e,t);if(i.Pg)throw new Se(1,1,1003,e,t);throw new Se(1,1,1002,e,y,t);case 3:return b=Py(l.headers),w.return(My(b,c,l.status,e,l.url,t))}}))}function Py(e){var t={};e.forEach((function(e,n){t[n.trim()]=e}));return t}function Ny(){if(e.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(e.Response){if(!new Response("").body)return!1}else return!1;return!(!e.fetch||!e.AbortController)}q("shaka.net.HttpFetchPlugin",Dy);Dy.isSupported=Ny;Dy.parse=Ry;var Oy=e.fetch,Uy=e.AbortController,jy=e.ReadableStream,By=e.Headers;Ny()&&(ir("http",Ry,2,!0),ir("https",Ry,2,!0),ir("blob",Ry,2,!0));function Fy(){}function Vy(e,t,n,i,r){var a=new Hy,o=Date.now(),s=0,u=new Promise((function(u,l){a.open(t.method,e,!0);a.responseType="arraybuffer";a.timeout=t.retryParameters.timeout;a.withCredentials=t.allowCrossSiteCredentials;a.onabort=function(){l(new Se(1,1,7001,e,n))};var c=!1;a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Gy(a);r(e);c=!0}};a.onload=function(){var t=Gy(a),i=a.response;try{var r=My(t,i,a.status,e,a.responseURL,n);u(r)}catch(e){l(e)}};a.onerror=function(t){l(new Se(1,1,1002,e,t,n))};a.ontimeout=function(){l(new Se(1,1,1003,e,n))};a.onprogress=function(e){var t=Date.now();if(100<t-o||e.lengthComputable&&e.loaded==e.total)i(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t};for(var d in t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)}));return new zi(u,(function(){a.abort();return Promise.resolve()}))}function Gy(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};t=c(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}q("shaka.net.HttpXHRPlugin",Fy);Fy.parse=Vy;var Hy=e.XMLHttpRequest;ir("http",Vy,1,!0);ir("https",Vy,1,!0);ir("blob",Vy,1,!0);function qy(e,t,n,i){this.g=e;this.i=t;this.groupId=n;this.h=i}function zy(e){return e.Oa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Sa+":"+e.za}function Ky(e,t){return Pu(e.g.Oa(),e.g.Sa,e.g.za,t.streaming.retryParameters)}function Xy(){this.h=this.j=this.i=0;this.g=new Map;this.l=0}function Wy(e,t){e.i+=t;var n=e.l;e.l++;e.g.set(n,t);return n}Xy.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e);this.j+=n;this.h+=t}};function Yy(e){var t=this;this.s=e;this.j=new Map;this.i=new fr((function(){return Qy(t).catch((function(){}))}));this.h=[];this.m=function(){};this.l=function(){};this.g=new Xy}Yy.prototype.destroy=function(){return this.i.destroy()};function Jy(e,t,n){e.m=t;e.l=n}function Qy(e){var t=e.h.map((function(e){return e()}));e.h=[];return Promise.all(t)}function $y(e,t,n,i,r,a){pr(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,u,l,c,d;return O((function(h){if(1==h.g)return E(h,eb(e,n),2);t=h.h;if(e.i.g)throw new Se(2,9,7001);if(r)for(u in o=ct(t),s=new Qr(o),s.data)l=Number(u),c=s.data[l],d=s.g[l],e.l(c,d);e.g.close(i,t.byteLength);var f=e.g;e.m(0==f.i?0:f.j/f.i,e.g.h);return h.return(a(t))}))}));e.j.set(t,o)}function Zy(e){return O((function(t){return 1==t.g?E(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}function eb(e,t){var n,i,r,a;return O((function(o){if(1==o.g)return n=cr,i=e.s.request(n,t),r=function(){return i.abort()},e.h.push(r),E(o,i.promise,2);a=o.h;yt(e.h,r);return o.return(a.data)}))}function tb(e,t){var n=this;this.i=e;this.h=e.objectStore(t);this.g=new qi;e.onabort=function(e){e.preventDefault();n.g.reject()};e.onerror=function(e){e.preventDefault();n.g.reject()};e.oncomplete=function(){n.g.resolve()}}tb.prototype.abort=function(){var e=this;return O((function(t){if(1==t.g){try{e.i.abort()}catch(e){}A(t,2);return E(t,e.g,4)}if(2!=t.g)return I(t,0);k(t);x(t)}))};function nb(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i;r.onsuccess=function(){var e;return O((function(i){if(1==i.g){if(null==r.result)return n(),i.return();e=r.result;return E(i,t(e.key,e.value,e),2)}e.continue();x(i)}))}}))}tb.prototype.store=function(){return this.h};tb.prototype.promise=function(){return this.g};function ib(e){this.h=e;this.g=[]}ib.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))};function rb(e,t){return ab(e,t,"readwrite")}function ab(e,t,n){n=e.h.transaction([t],n);var i=new tb(n,t);e.g.push(i);i.promise().then((function(){yt(e.g,i)}),(function(){yt(e.g,i)}));return i}function ob(e,t,n){this.h=new ib(e);this.i=t;this.g=n}i=ob.prototype;i.destroy=function(){return this.h.destroy()};i.hasFixedKeySpace=function(){return!0};i.addSegments=function(){return ub(this.i)};i.removeSegments=function(e,t){return lb(this,this.i,e,t)};i.getSegments=function(e){var t=this,n;return O((function(i){if(1==i.g)return E(i,cb(t,t.i,e),2);n=i.h;return i.return(n.map((function(e){return t.fg(e)})))}))};i.addManifests=function(){return ub(this.g)};i.updateManifest=function(){return Promise.reject(new Se(2,9,9016,"Cannot modify values in "+this.g))};function sb(e,t,n){e=rb(e.h,e.g);var i=e.store();i.get(t).onsuccess=function(){i.put(n,t)};return e.promise()}i.updateManifestExpiration=function(e,t){var n=rb(this.h,this.g),i=n.store();i.get(e).onsuccess=function(n){if(n=n.target.result)n.expiration=t,i.put(n,e)};return n.promise()};i.removeManifests=function(e,t){return lb(this,this.g,e,t)};i.getManifests=function(e){var t=this,n;return O((function(i){if(1==i.g)return E(i,cb(t,t.g,e),2);n=i.h;return i.return(Promise.all(n.map((function(e){return t.cd(e)}))))}))};i.getAllManifests=function(){var e=this,t,n;return O((function(i){return 1==i.g?(t=ab(e.h,e.g,"readonly"),n=new Map,E(i,nb(t,(function(t,i){var r;return O((function(a){if(1==a.g)return E(a,e.cd(i),2);r=a.h;n.set(t,r);x(a)}))})),2)):3!=i.g?E(i,t.promise(),3):i.return(n)}))};i.fg=function(e){return e};i.cd=function(e){return Promise.resolve(e)};function ub(e){return Promise.reject(new Se(2,9,9011,"Cannot add new value to "+e))}i.add=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(d){if(1==d.g){i=rb(n.h,e);r=i.store();a=[];o={};s=c(t);for(u=s.next();!u.done;o={Hd:o.Hd},u=s.next())l=u.value,o.Hd=r.add(l),o.Hd.onsuccess=function(e){return function(){a.push(e.Hd.result)}}(o);return E(d,i.promise(),2)}return d.return(a)}))};function lb(e,t,n,i){e=rb(e.h,t);t=e.store();var r={};n=c(n);for(var a=n.next();!a.done;r={Fd:r.Fd},a=n.next())r.Fd=a.value,t.delete(r.Fd).onsuccess=function(e){return function(){return i(e.Fd)}}(r);return e.promise()}function cb(e,t,n){var i,r,a,o,s,u,l;return O((function(d){if(1==d.g){i=ab(e.h,t,"readonly");r=i.store();a={};o=[];s={};u=c(n);for(l=u.next();!l.done;s={Vc:s.Vc,Rc:s.Rc},l=u.next())s.Rc=l.value,s.Vc=r.get(s.Rc),s.Vc.onsuccess=function(e){return function(){void 0==e.Vc.result&&o.push(e.Rc);a[e.Rc]=e.Vc.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new Se(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function db(e){this.g=new ib(e)}db.prototype.destroy=function(){return this.g.destroy()};db.prototype.getAll=function(){var e=this,t,n;return O((function(i){return 1==i.g?(t=ab(e.g,"session-ids","readonly"),n=[],E(i,nb(t,(function(e,t){n.push(t)})),2)):3!=i.g?E(i,t.promise(),3):i.return(n)}))};db.prototype.add=function(e){var t=rb(this.g,"session-ids"),n=t.store();e=c(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()};db.prototype.remove=function(e){var t=this,n;return O((function(i){return 1==i.g?(n=rb(t.g,"session-ids"),E(i,nb(n,(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2)):E(i,n.promise(),0)}))};function hb(){this.g=new Map}hb.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());this.g.clear();return Promise.all(e)};hb.prototype.init=function(){var e=this;wb.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=c(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function fb(e){var t=null;e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{Wa:n,Fa:i},Fa:e})}))}));if(t)return t;throw new Se(2,9,9013,"Could not find a cell that supports add-operations")}function pb(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({Wa:n,Fa:i},e)}))}))}function gb(e,t,n){e=e.g.get(t);if(!e)throw new Se(2,9,9013,"Could not find mechanism with name "+t);t=e.getCells().get(n);if(!t)throw new Se(2,9,9013,"Could not find cell with name "+n);return t}function mb(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}function vb(e){var t=Array.from(e.g.keys());if(!t.length)throw new Se(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function yb(e){var t,n,i;return O((function(r){return 1==r.g?(t=Array.from(e.g.values()),n=0<t.length,n||(i=wb,i.forEach((function(e){(e=e())&&t.push(e)}))),E(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.D(0):E(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}function bb(e,t){wb.set(e,t)}q("shaka.offline.StorageMuxer",hb);hb.unregister=function(e){wb.delete(e)};hb.register=bb;hb.prototype.destroy=hb.prototype.destroy;var wb=new Map;function Tb(){ob.apply(this,arguments)}y(Tb,ob);Tb.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,a;return O((function(o){i=rb(n.h,n.g);r=i.store();a=new qi;r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),a.resolve()):a.reject(new Se(2,9,9012,"Could not find values for "+e))};return E(o,Promise.all([i.promise(),a]),0)}))};Tb.prototype.cd=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.g){t=[];for(n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=Eb(e.periods[n],r),t.push(a);return E(s,_g(t),2)}o=s.h;return s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?Infinity:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))};function Eb(e,t){Sb(e);for(var n=c(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return xb(n,e.startTime,t)}))}function xb(e,t,n){var i=e.initSegmentUri?Ab(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=Ab(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}Tb.prototype.fg=function(e){return{data:e.data}};function Ab(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Se(2,9,9004,"Could not parse uri "+e)}function Sb(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));e=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=c(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];n=c(e);for(i=n.next();!i.done;i=n.next())i.value.variantIds=[];n=0;if(e.length&&!t.length){var r=n++,a=c(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=c(t),i=a.next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(t=c(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=c(e),a=r.next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o);a.variantIds.push(o)}}}function Ib(){ob.apply(this,arguments)}y(Ib,ob);Ib.prototype.cd=function(e){var t,n,i,r,a,o;return O((function(s){if(1==s.g){t=[];for(n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime;r=i-e.periods[n].startTime;for(var u=e.periods[n],l=[],d=c(u.streams),h=d.next();!h.done;h=d.next())h=h.value,0!=h.variantIds.length&&l.push(kb(h,u.startTime,u.startTime+r));a=l;t.push(a)}return E(s,_g(t),2)}o=s.h;return s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?Infinity:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))};function kb(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function _b(){ob.apply(this,arguments)}y(_b,ob);i=_b.prototype;i.hasFixedKeySpace=function(){return!1};i.addSegments=function(e){return this.add(this.i,e)};i.addManifests=function(e){return this.add(this.g,e)};i.updateManifest=function(e,t){return sb(this,e,t)};i.cd=function(e){null==e.expiration&&(e.expiration=Infinity);return Promise.resolve(e)};function Cb(){this.m=this.j=this.i=this.h=this.g=this.l=null}i=Cb.prototype;i.init=function(){var t=this,n=new qi,i=!1,r=new fn((function(){i=!0;n.reject(new Se(2,9,9017))}));r.R(5);var a=e.indexedDB.open("shaka_offline_db",5);a.onsuccess=function(){if(!i){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Tb(e,"segment","manifest"):null;t.g=o;o=e.objectStoreNames;o=o.contains("manifest-v2")&&o.contains("segment-v2")?new Ib(e,"segment-v2","manifest-v2"):null;t.h=o;o=e.objectStoreNames;o=o.contains("manifest-v3")&&o.contains("segment-v3")?new Ib(e,"segment-v3","manifest-v3"):null;t.i=o;o=e.objectStoreNames;o=o.contains("manifest-v5")&&o.contains("segment-v5")?new _b(e,"segment-v5","manifest-v5"):null;t.j=o;e=e.objectStoreNames.contains("session-ids")?new db(e):null;t.m=e;r.stop();n.resolve()}};a.onupgradeneeded=function(){for(var e=a.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})};a.onerror=function(e){i||(n.reject(new Se(2,9,9001,a.error)),r.stop(),e.preventDefault())};return n};i.destroy=function(){var e=this;return O((function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.D(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),x(t)}}))};i.getCells=function(){var e=new Map;this.g&&e.set("v1",this.g);this.h&&e.set("v2",this.h);this.i&&e.set("v3",this.i);this.j&&e.set("v5",this.j);return e};i.getEmeSessionCell=function(){return this.m};i.erase=function(){var e=this;return O((function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return E(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),E(t,Mb(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,E(t,e.init(),0)}}))};function Mb(){var t=new qi,n=e.indexedDB.deleteDatabase("shaka_offline_db");n.onblocked=function(){};n.onsuccess=function(){t.resolve()};n.onerror=function(e){t.reject(new Se(2,9,9001,n.error));e.preventDefault()};return t}bb("idb",(function(){return xn("CrKey")||vn()||!e.indexedDB?null:new Cb}));function Db(e,t,n,i){this.g=e;this.i=t;this.h=n;this.l=i;this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}Db.prototype.Wa=function(){return this.i};Db.prototype.Fa=function(){return this.h};Db.prototype.key=function(){return this.l};Db.prototype.toString=function(){return this.j};function Rb(e){e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e);if(null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new Db(t,n,i,Number(e[4])):null}function Lb(e,t){this.h=e;this.g=t}function Pb(e,t){var n=new Fs(null,0);n.Ra(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=Nb(e,i,r,n);r=t.streams.filter((function(e){return e.type==Pe})).map((function(t){return Ob(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Ob(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=c(i.values()),u=s.next();!u.done;u=s.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function Nb(e,t,n,i){for(var r=new Set,a=c(t),o=a.next();!o.done;o=a.next()){var s=c(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}a=c(n);for(o=a.next();!o.done;o=a.next())for(s=c(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);a=new Map;r=c(r);for(o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});t=c(t);for(r=t.next();!r.done;r=t.next())for(r=r.value,o=Ob(e,r,i),s=c(r.variantIds),r=s.next();!r.done;r=s.next())r=a.get(r.value),r.language=o.language,r.primary=r.primary||o.primary,r.audio=o;n=c(n);for(t=n.next();!t.done;t=n.next())for(r=t.value,t=Ob(e,r,i),o=c(r.variantIds),r=o.next();!r.done;r=o.next())r=a.get(r.value),r.primary=r.primary||t.primary,r.video=t;return a}function Ob(e,t,n){var i=t.segments.map((function(t){return Ub(e,t)}));n.sd(i);return{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new uu(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function Ub(e,t){var n=new Db("segment",e.h,e.g,t.dataKey);return new To(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?jb(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function jb(e,t){var n=new Db("segment",e.h,e.g,t);return new bo((function(){return[n.toString()]}),0,null)}function Bb(){this.g=null}i=Bb.prototype;i.configure=function(){};i.start=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:i=Rb(e);n.g=i;if(null==i||"manifest"!=i.g)throw new Se(2,1,9004,e);r=new hb;S(c);return E(c,r.init(),4);case 4:return E(c,gb(r,i.Wa(),i.Fa()),5);case 5:return a=c.h,E(c,a.getManifests([i.key()]),6);case 6:return o=c.h,s=o[0],u=new Lb(i.Wa(),i.Fa()),l=Pb(u,s),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return _(c),E(c,r.destroy(),7);case 7:C(c,0)}}))};i.stop=function(){return Promise.resolve()};i.update=function(){};i.onExpirationUpdated=function(e,t){var n=this,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return i=n.g,r=new hb,A(c,2,3),E(c,r.init(),5);case 5:return E(c,gb(r,i.Wa(),i.Fa()),6);case 6:return a=c.h,E(c,a.getManifests([i.key()]),7);case 7:o=c.h;s=o[0];u=s.sessionIds.includes(e);l=void 0==s.expiration||s.expiration>t;if(!u||!l){c.D(3);break}return E(c,a.updateManifestExpiration(i.key(),t),3);case 3:return _(c),E(c,r.destroy(),10);case 10:C(c,0);break;case 2:k(c),c.D(3)}}))};fo["application/x-offline-manifest"]=function(){return new Bb};function Fb(){}function Vb(e){var t=Rb(e);t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Wi(e)):e=t&&"segment"==t.g?Gb(t.key(),t):Ki(new Se(2,1,9004,e));return e}function Gb(e,t){var n=new hb;return Wi(void 0).qa((function(){return n.init()})).qa((function(){return gb(n,t.Wa(),t.Fa())})).qa((function(e){return e.getSegments([t.key()])})).qa((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}q("shaka.offline.OfflineScheme",Fb);Fb.plugin=Vb;ir("offline",Vb);function Hb(e,t,n){var i,r,a,o,s,u;return O((function(l){switch(l.g){case 1:i=[];for(var d=[],h=c(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=c(d),m=g.next();!m.done;m=g.next())if(m=m.value,zb(m.info,f)){m.sessionIds.push(f.sessionId);p=!0;break}p||d.push({info:f,sessionIds:[f.sessionId]})}r=c(d);a=r.next();case 2:if(a.done){l.D(4);break}o=a.value;s=qb(e,t,o);return E(l,s,5);case 5:u=l.h;i=i.concat(u);a=r.next();l.D(2);break;case 4:return l.return(i)}}))}function qb(e,t,n){var i,r;return O((function(a){switch(a.g){case 1:return i=new Ta({lc:t,onError:function(){},me:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),i.configure(e),E(a,Sa(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(a,3);break;case 2:return k(a),E(a,i.destroy(),5);case 5:return a.return([]);case 3:return A(a,6),E(a,Ca(i),8);case 8:I(a,7);break;case 6:return k(a),E(a,i.destroy(),9);case 9:return a.return([]);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return O((function(t){if(1==t.g)return A(t,2),E(t,Ma(i,e),4);if(2!=t.g)return r.push(e),I(t,0);k(t);x(t)}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}function zb(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&bt(e.audioCapabilities,t.audioCapabilities,n)&&bt(e.videoCapabilities,t.videoCapabilities,n)}function Kb(e,t,n){var i=t.presentationTimeline.getDuration();t=Wb(t);return{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:Infinity,tracks:t,appMetadata:n,isIncomplete:!1}}function Xb(e,t){var n=Pb(new Lb(e.Wa(),e.Fa()),t),i=t.appMetadata||{};n=Wb(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Wb(e){var t=[],n=ai(e.variants);n=c(n);for(var i=n.next();!i.done;i=n.next())t.push(Qn(i.value));e=c(e.textStreams);for(n=e.next();!n.done;n=e.next())t.push($n(n.value));return t}function Yb(){this.g={}}function Jb(e,t){var n=t.audio,i=t.video;n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth);!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth);if(n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth);e.g[n.id]=r;e.g[i.id]=a}}function Qb(e,t){e.g[t.id]=t.bandwidth||2048}function $b(e,t){e=e.g[t];null==e&&(e=0);return e}function Zb(e){var t=this;if(e&&e.constructor!=Tc)throw new Se(2,9,9008);this.g=this.h=null;e?(this.h=e.g,this.g=e.ac()):(this.h=dc(),this.g=new nr);this.i=[];this.j=[];var n=!e;this.l=new fr((function(){var e,i,r,a,o;return O((function(s){switch(s.g){case 1:return E(s,Promise.all(t.j.map((function(e){return Qy(e)}))),2);case 2:e=function(){};i=[];r=c(t.i);for(a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.D(4);break}return E(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,x(s)}}))}))}function ew(){if(pn())e:{var e=c(wb.values());for(var t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy();e=!0;break e}e=!1}else e=!1;return e}i=Zb.prototype;i.destroy=function(){return this.l.destroy()};i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ic(e,t));return hc(this.h,e)};i.getConfiguration=function(){var e=dc();hc(e,this.h,dc());return e};i.ac=function(){return this.g};i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Yy(this.g);this.j.push(a);t=tw(this,e,t||{},(function(){var t;return O((function(a){if(1==a.g)return E(a,lo(e,i.g,r.manifest.retryParameters,n||null),2);t=a.h;return a.return(t())}))}),r,a);t=new zi(t,(function(){return Qy(a)}));t.finally((function(){yt(i.j,a)}));return Aw(this,t)};function tw(e,t,n,i,r,a){var o,s,u,l,c,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:return Ew(),s=o=null,u=new hb,d=c=l=null,A(w,2,3),E(w,i(),5);case 5:return o=w.h,E(w,mw(e,t,o,r),6);case 6:h=w.h;Tw(e);f=!h.presentationTimeline.S()&&!h.presentationTimeline.hc();if(!f)throw new Se(2,9,9005,t);return E(w,vw(e,h,(function(e){d=d||e}),r),7);case 7:s=w.h;Tw(e);if(d)throw d;return E(w,aw(h,r),8);case 8:return E(w,u.init(),9);case 9:return Tw(e),E(w,fb(u),10);case 10:return l=w.h,Tw(e),p=ow(s,h,t,n,r,a),g=p.$h,m=p.If,E(w,l.Fa.addManifests([g]),11);case 11:v=w.h;Tw(e);c=v[0];Tw(e);if(d)throw d;return E(w,nw(e,m,c,g,a,r,l.Fa,h,s),12);case 12:return Tw(e),y=new Db("manifest",l.path.Wa,l.path.Fa,c),w.return(Xb(y,g));case 3:return _(w),E(w,u.destroy(),13);case 13:if(!o){w.D(14);break}return E(w,o.stop(),14);case 14:if(!s){w.D(16);break}return E(w,s.destroy(),16);case 16:C(w,0);break;case 2:b=k(w);if(null==c){w.D(18);break}return E(w,iw(c),18);case 18:throw d||b}}))}function nw(e,t,n,i,r,a,o,s,u){var l,d,h,f,p,g,m,v,y,b;return O((function(w){switch(w.g){case 1:l={};d=0;h=function(t,h){var f,p,g,m,v,y,b;return O((function(w){if(1==w.g){f={};p=c(t);for(g=p.next();!g.done;f={Xb:f.Xb},g=p.next())f.Xb=g.value,m=Ky(f.Xb,a),v=f.Xb.i,y=f.Xb.h,b=function(t){return function(n){var i,r,a;return O((function(s){if(1==s.g)return E(s,o.addSegments([{data:n}]),2);i=s.h;Tw(e);r=t.Xb.g;a=zy(r);l[a]=i[0];d+=n.byteLength;x(s)}))}}(f),$y(r,f.Xb.groupId,m,v,y,b);return E(w,Zy(r),2)}if(!h)return w.D(0);Tw(e);lw(s,i,u,a);return E(w,o.updateManifest(n,i),0)}))};f=!1;A(w,2);if(!sw(s)||!f||uw(s)){w.D(4);break}return E(w,h(t.filter((function(e){return e.h})),!0),5);case 5:return Tw(e),t=t.filter((function(e){return!e.h})),p=l,g=d,l={},d=0,E(w,rw(o,n,i,p,g,(function(){return Tw(e)})),6);case 6:Tw(e);case 4:if(f){w.D(7);break}return E(w,h(t,!1),8);case 8:return Tw(e),m=l,v=d,l={},d=0,E(w,rw(o,n,i,m,v,(function(){return Tw(e)})),9);case 9:Tw(e);case 7:I(w,0);break;case 2:return y=k(w),b=Object.values(l),E(w,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}function iw(e){var t,n,i,r;return O((function(a){switch(a.g){case 1:return t=new hb,E(a,t.init(),2);case 2:return E(a,fb(t),3);case 3:return n=a.h,i=new Db("manifest",n.path.Wa,n.path.Fa,e),E(a,t.destroy(),4);case 4:return r=new Zb,E(a,r.remove(i.toString()),0)}}))}function rw(e,t,n,i,r,a){var o,s,u,l,d,h,f,p,g,m,v;return O((function(y){switch(y.g){case 1:o=!1;A(y,2);s=!0;u=c(n.streams);for(l=u.next();!l.done;l=u.next())for(d=l.value,h=c(d.segments),f=h.next();!f.done;f=h.next())p=f.value,g=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null,null!=g&&(p.dataKey=g,p.pendingSegmentRefId=void 0),g=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null,null!=g&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);n.size+=r;s&&(n.isIncomplete=!1);return E(y,e.updateManifest(t,n),4);case 4:o=!0;a();I(y,0);break;case 2:return m=k(y),E(y,iw(t),5);case 5:if(o){y.D(6);break}v=Object.values(i);return E(y,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function aw(e,t){var n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T,S,_,C,M,D,R,L,P,N,U;return O((function(O){switch(O.g){case 1:return n={width:Infinity,height:Infinity},On(e,t.restrictions,n),E(O,Bn(e,t.offline.usePersistentLicense),2);case 2:i=[];r=t.preferredAudioChannelCount;a=t.preferredDecodingAttributes;o=t.preferredVideoCodecs;s=t.preferredAudioCodecs;_n(e,o,s,r,a);u=c(e.variants);for(l=u.next();!l.done;l=u.next())d=l.value,i.push(Qn(d));h=c(e.textStreams);for(f=h.next();!f.done;f=h.next())p=f.value,i.push($n(p));g=c(e.imageStreams);for(m=g.next();!m.done;m=g.next())v=m.value,i.push(Zn(v));return E(O,t.offline.trackSelectionCallback(i),3);case 3:y=O.h;b=e.presentationTimeline.getDuration();w=0;T=c(y);for(S=T.next();!S.done;S=T.next())_=S.value,C=_.bandwidth*b/8,w+=C;A(O,4);return E(O,t.offline.downloadSizeCallback(w),6);case 6:M=O.h;if(!M)throw new Se(2,9,9014);I(O,5);break;case 4:D=k(O);if(D instanceof Se)throw D;throw new Se(2,9,9015);case 5:R=new Set;L=new Set;P=new Set;N=c(y);for(S=N.next();!S.done;S=N.next())U=S.value,"variant"==U.type&&R.add(U.id),"text"==U.type&&L.add(U.id),"image"==U.type&&P.add(U.id);e.variants=e.variants.filter((function(e){return R.has(e.id)}));e.textStreams=e.textStreams.filter((function(e){return L.has(e.id)}));e.imageStreams=e.imageStreams.filter((function(e){return P.has(e.id)}));_w(e);x(O)}}))}function ow(e,t,n,i,r,a){var o=Kb(n,t,i),s=r.offline.progressCallback;Jy(a,(function(e,t){o.size=t;s(o,e)}),(function(t,n){u&&r.offline.usePersistentLicense&&l==n&&Ra(e,"cenc",t)}));var u=sw(t)&&!uw(t),l=null;u&&(l=Cw.get(e.g.keySystem));for(var d=new Yb,h=c(t.textStreams),f=h.next();!f.done;f=h.next())d.g[f.value.id]=52;h=c(t.imageStreams);for(f=h.next();!f.done;f=h.next())Qb(d,f.value);f=c(t.variants);for(h=f.next();!h.done;h=f.next())Jb(d,h.value);d=yw(a,d,t,r);a=d.streams;d=d.If;f=e.g;h=r.offline.usePersistentLicense;f&&h&&(f.initData=[]);return{$h:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.gd(),streams:a,sessionIds:h?Pa(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},If:d}}function sw(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function uw(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function lw(e,t,n,i){t.expiration=n.gd();n=Pa(n);t.sessionIds=i.offline.usePersistentLicense?n:[];if(sw(e)&&i.offline.usePersistentLicense&&!n.length)throw new Se(2,9,9007)}i.remove=function(e){return xw(this,cw(this,e))};function cw(e,t){var n,i,r,a,o,s;return O((function(u){switch(u.g){case 1:Ew();n=Rb(t);if(null==n||"manifest"!=n.g)throw new Se(2,9,9004,t);i=n;r=new hb;S(u);return E(u,r.init(),4);case 4:return E(u,gb(r,i.Wa(),i.Fa()),5);case 5:return a=u.h,E(u,a.getManifests([i.key()]),6);case 6:return o=u.h,s=o[0],E(u,Promise.all([hw(e,s,r),fw(a,i,s)]),2);case 2:return _(u),E(u,r.destroy(),8);case 8:C(u,0)}}))}function dw(e,t){for(var n=[],i=c(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Jt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Jt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function hw(e,t,n){return O((function(i){return E(i,Iw(e.g,e.h.drm,n,t),0)}))}function fw(e,t,n){function i(){}var r=Sw(n);Xb(t,n);return Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}i.oi=function(){return xw(this,pw(this))};function pw(e){var t,n,i,r,a,o,s,u,l,d;return O((function(h){switch(h.g){case 1:return Ew(),t=e.g,n=e.h.drm,i=new hb,r=!1,S(h),E(h,i.init(),4);case 4:a=[],mb(i,(function(e){return a.push(e)})),o=c(a),s=o.next();case 5:if(s.done){h.D(2);break}u=s.value;return E(h,u.getAll(),8);case 8:return l=h.h,E(h,Hb(n,t,l),9);case 9:return d=h.h,E(h,u.remove(d),10);case 10:d.length!=l.length&&(r=!0);s=o.next();h.D(5);break;case 2:return _(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}i.list=function(){return xw(this,gw())};function gw(){var e,t,n;return O((function(i){switch(i.g){case 1:return Ew(),e=[],t=new hb,S(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),pb(t,(function(t,i){n=n.then((function(){var n;return O((function(r){if(1==r.g)return E(r,i.getAllManifests(),2);n=r.h;n.forEach((function(n,i){n=Xb(new Db("manifest",t.Wa,t.Fa,i),n);e.push(n)}));x(r)}))}))})),E(i,n,2);case 2:return _(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}}))}function mw(e,t,n,i){var r,a,o,s,u;return O((function(l){if(1==l.g)return r=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(i.manifest),Tw(e),E(l,n.start(t,o),2);if(3!=l.g)return s=l.h,Tw(e),u=kw(s),E(l,Promise.all(oe(u,(function(e){return e.createSegmentIndex()}))),3);Tw(e);if(r)throw r;return l.return(s)}))}function vw(e,t,n,i){var r;return O((function(a){switch(a.g){case 1:return r=new Ta({lc:e.g,onError:n,me:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(i.drm),E(a,xa(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,Ca(r),3);case 3:return E(a,Da(r),4);case 4:return a.return(r)}}))}function yw(e,t,n,i){var r=new Map,a=kw(n),o=new Map;a=c(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=bw(e,t,n,s,i,r);o.set(s.id,u)}e=c(n.variants);for(t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),If:Array.from(r.values())}}function bw(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external},s=r.offline.numberOfParallelDownloads,u=0;ww(i,n.presentationTimeline.Db(),(function(n){var r=zy(n),l=void 0;if(!a.has(r)){var c=n.endTime-n.startTime;c=$b(t,i.id)*c;c=Wy(e.g,c);a.set(r,new qy(n,c,u,!1))}n.h&&(l=zy(n.h),a.has(l)||(c=.5*$b(t,i.id),c=Wy(e.g,c),a.set(l,new qy(n.h,c,u,!0))));o.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:r,dataKey:0});u=(u+1)%s}));return o}function ww(e,t,n){t=e.segmentIndex.find(t);if(null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function Tw(e){if(e.l.g)throw new Se(2,9,7001)}function Ew(){if(!ew())throw new Se(2,9,9e3)}function xw(e,t){return O((function(n){if(1==n.g)return e.i.push(t),S(n),E(n,t,4);if(2!=n.g)return n.return(n.h);_(n);yt(e.i,t);return C(n,0)}))}function Aw(e,t){var n=t.promise;e.i.push(n);return t.finally((function(){yt(e.i,n)}))}function Sw(e){var t=new Set;e=c(e.streams);for(var n=e.next();!n.done;n=e.next()){n=c(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,null!=i.initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function Iw(e,t,n,i){var r,a,o;return O((function(s){if(1==s.g){if(!i.drmInfo)return s.return();r=vb(n);a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:dw(i,!1),videoCapabilities:dw(i,!0)}}));return E(s,Hb(t,e,a),2)}return 3!=s.g?(o=s.h,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}function kw(e){for(var t=new Set,n=c(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);n=c(e.imageStreams);for(i=n.next();!i.done;i=n.next())t.add(i.value);e=c(e.variants);for(n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function _w(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=c(t),i=n.next();!i.done;i=n.next()){i=c(t);for(var r=i.next();!r.done;r=i.next());}t=c(e);for(n=t.next();!n.done;n=t.next())for(n=c(e),i=n.next();!i.done;i=n.next());}q("shaka.offline.Storage",Zb);Zb.deleteAll=function(){var e;return O((function(t){return 1==t.g?(e=new hb,S(t),E(t,yb(e),2)):5!=t.g?(_(t),E(t,e.destroy(),5)):C(t,0)}))};Zb.prototype.list=Zb.prototype.list;Zb.prototype.removeEmeSessions=Zb.prototype.oi;Zb.prototype.remove=Zb.prototype.remove;Zb.prototype.store=Zb.prototype.store;Zb.prototype.getNetworkingEngine=Zb.prototype.ac;Zb.prototype.getConfiguration=Zb.prototype.getConfiguration;Zb.prototype.configure=Zb.prototype.configure;Zb.prototype.destroy=Zb.prototype.destroy;Zb.support=ew;var Cw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Jd.offline=ew;function Mw(){}function Dw(){for(var e=c(Lw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.$g()}catch(e){Q("Error installing polyfill!",e)}}}function Rw(e,t){e={priority:t||0,$g:e};for(t=0;t<Lw.length;t++)if(Lw[t].priority<e.priority){Lw.splice(t,0,e);return}Lw.push(e)}q("shaka.polyfill",Mw);Mw.register=Rw;Mw.installAll=Dw;var Lw=[];function Pw(){this.g=new Ow}function Nw(){e.AbortController||(e.AbortController=Pw,e.AbortSignal=Ow)}Pw.prototype.abort=function(e){var t=this.g;if(!t.h){t.h=!0;t.g=e;void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError"));e=new K("abort");if(t.onabort)t.onabort(e);t.dispatchEvent(e)}};s.Object.defineProperties(Pw.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}});Mw.AbortController=Pw;Pw.install=Nw;function Ow(){ae.call(this);this.h=!1;this.g=void 0;this.onabort=null}y(Ow,ae);s.Object.defineProperties(Ow.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}});Rw(Nw);function Uw(){}function jw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Bw(t.value)}function Bw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}Mw.Aria=Uw;Uw.install=jw;Rw(jw);function Fw(){}function Vw(){hA()}Mw.EncryptionScheme=Fw;Fw.install=Vw;Rw(Vw,-2);function Gw(){}function Hw(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;t=Document.prototype;t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",qw);document.addEventListener("webkitfullscreenerror",qw);document.addEventListener("mozfullscreenchange",qw);document.addEventListener("mozfullscreenerror",qw);document.addEventListener("MSFullscreenChange",qw);document.addEventListener("MSFullscreenError",qw)}}function qw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}Mw.Fullscreen=Gw;Gw.install=Hw;Rw(Hw);function zw(){}function Kw(){var e=!0;if(wn()||xn("PlayStation 5")||Tn()||xn("Web0S")||yn()||xn("CrKey")||xn("PC=EOS")||xn("Hisense")||xn("VIDAA"))e=!1;e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Ww=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Xw)}function Xw(t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,w;return O((function(T){switch(T.g){case 1:n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t};if(!t)return T.return(n);i=t.video;r=t.audio;if("media-source"==t.type){if(!pn())return T.return(n);if(i){if(xn("CrKey"))if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var x=i.contentType;i.width&&i.height&&(x+="; width="+i.width+"; height="+i.height);i.framerate&&(x+="; framerate="+i.framerate);"pq"===i.transferFunction&&(x+="; eotf=smpte2084");a=cast.__platform__.canDisplayType(x)}else a=nt(i.contentType);else yn()?(o=i.contentType,i.width&&i.height&&(o+="; width="+i.width,o+="; height="+i.height),i.framerate&&(o+="; framerate="+i.framerate),i.bitrate&&(o+="; bitrate="+i.bitrate),a=nt(o)):a=nt(i.contentType);if(!a)return T.return(n)}if(r&&(s=r.contentType,u=nt(s),!u))return T.return(n)}else if("file"==t.type){if(i&&(l=i.contentType,c=gn(l),!c)||r&&(d=r.contentType,h=gn(d),!h))return T.return(n)}else return T.return(n);if(!t.keySystemConfiguration)return n.supported=!0,T.return(Promise.resolve(n));f=t.keySystemConfiguration;p=[];g=[];f.audio&&(m={robustness:f.audio.robustness||"",contentType:t.audio.contentType},p.push(m));f.video&&(v={robustness:f.video.robustness||"",contentType:t.video.contentType},g.push(v));y={initDataTypes:[f.initDataType],distinctiveIdentifier:f.distinctiveIdentifier,persistentState:f.persistentState,sessionTypes:f.sessionTypes};p.length&&(y.audioCapabilities=p);g.length&&(y.videoCapabilities=g);b=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem;A(T,3);if(b in Yw){w=Yw[b];T.D(5);break}return E(T,navigator.requestMediaKeySystemAccess(f.keySystem,[y]),6);case 6:w=T.h,Yw[b]=w;case 5:I(T,4);break;case 3:k(T);case 4:w&&(n.supported=!0,n.keySystemAccess=w);case 2:return T.return(n)}}))}Mw.MediaCapabilities=zw;zw.install=Kw;var Ww=null;zw.originalMcap=Ww;var Yw={};zw.memoizedMediaKeySystemAccessRequests_=Yw;Rw(Kw,-1);function Jw(){}function Qw(){var t=En();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?nT():t?12>=t?($w(),Zw()):15>=t&&$w():mn()?eT():(xn("Tizen 2")||xn("Tizen 3")||xn("Tizen 4"))&&tT());e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&iT()}function $w(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,U.apply(0,arguments));t.abort=function(){};return t}}function Zw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function eT(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}function tT(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=tn(t)[0]&&e(t)}}function nT(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);n.shift();return n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}function iT(){var e=MediaSource.isTypeSupported;xn("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; "));return e(t)})}Mw.MediaSource=Jw;Jw.install=Qw;Rw(Qw);function rT(){}function aT(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?oT():void 0!=e.orientation&&sT())}function oT(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()});void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function sT(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary";n.angle=270;break;case 0:n.type="portrait-primary";n.angle=0;break;case 90:n.type="landscape-primary";n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new uT;screen.orientation=n;t();e.addEventListener("orientationchange",(function(){t();var e=new K("change");n.dispatchEvent(e)}))}Mw.Orientation=rT;rT.install=aT;function uT(){ae.call(this);this.type="";this.angle=0}y(uT,ae);uT.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):screen.msLockOrientation?screen.msLockOrientation(e):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0;this.unlock();break;default:n=t(e)}if(n)return Promise.resolve();e=Error("screen.orientation.lock() is not available on this device");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;return Promise.reject(e)};uT.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};Rw(aT);function lT(){}var cT,dT,hT,fT,pT,gT;function mT(e,t){try{var n=new bT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function vT(e){var t=this.mediaKeys;t&&t!=e&&TT(t,null);delete this.mediaKeys;return(this.mediaKeys=e)?TT(e,this):Promise.resolve()}function yT(e){e=ct(e.initData);if(dt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ir(e.subarray(4),!0);e=_r(e);var t=new Event("encrypted");t.initDataType="skd";t.initData=lt(e);this.dispatchEvent(t)}Mw.PatchedMediaKeysApple=lT;lT.uninstall=function(){cT&&(cT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",dT),HTMLMediaElement.prototype.setMediaKeys=hT,e.MediaKeys=fT,e.MediaKeySystemAccess=pT,navigator.requestMediaKeySystemAccess=gT,dT=gT=hT=pT=fT=null,e.shakaMediaKeysPolyfill=!1)};lT.install=function(t){if(e.HTMLVideoElement&&e.WebKitMediaKeys){if(void 0===t?0:t)cT=!0,dT=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),hT=HTMLMediaElement.prototype.setMediaKeys,fT=e.MediaKeys,pT=e.MediaKeySystemAccess,gT=navigator.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=vT;e.MediaKeys=wT;e.MediaKeySystemAccess=bT;navigator.requestMediaKeySystemAccess=mT;e.shakaMediaKeysPolyfill=!0}};function bT(e,t){this.keySystem=e;if(e.startsWith("com.apple.fps"))for(e=c(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=c(n.audioCapabilities),o=a.next();!o.done;o=a.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(n=c(n.videoCapabilities),o=n.next();!o.done;o=n.next())a=o.value,a.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));t=r?t:null}if(t){this.g=t;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}bT.prototype.createMediaKeys=function(){var e=new wT(this.keySystem);return Promise.resolve(e)};bT.prototype.getConfiguration=function(){return this.g};function wT(e){this.h=new WebKitMediaKeys(e);this.g=new gr}wT.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ET(this.h,e)};wT.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function TT(e,t){e.g.Ub();if(!t)return Promise.resolve();e.g.o(t,"webkitneedkey",yT);try{return Xs(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}wT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function ET(e){ae.call(this);this.i=null;this.l=e;this.g=this.h=null;this.j=new gr;this.sessionId="";this.expiration=NaN;this.closed=new qi;this.keyStatuses=new AT}y(ET,ae);i=ET.prototype;i.generateRequest=function(e,t){var n=this;this.h=new qi;try{var i=this.l.createSession("video/mp4",ct(t));this.i=i;this.sessionId=i.sessionId||"";this.j.o(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null);e=(new Map).set("messageType",void 0==n.keyStatuses.dc()?"license-request":"license-renewal").set("message",lt(e.message));e=new K("message",e);n.dispatchEvent(e)}));this.j.o(i,"webkitkeyadded",(function(){n.g&&(xT(n,"usable"),n.g.resolve(),n.g=null)}));this.j.o(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");e.errorCode=n.i.error;if(null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:xT(n,"output-not-allowed");break;default:xT(n,"internal-error")}}));xT(this,"status-pending")}catch(e){this.h.reject(e)}return this.h};i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};i.update=function(e){this.g=new qi;try{this.i.update(ct(e))}catch(e){this.g.reject(e)}return this.g};i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ub()}catch(e){this.closed.reject(e)}return this.closed};i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function xT(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1;n.g=t;t=new K("keystatuseschange");e.dispatchEvent(t)}function AT(){this.size=0;this.g=void 0}i=AT.prototype;i.dc=function(){return this.g};i.forEach=function(e){this.g&&e(this.g,so.value())};i.get=function(e){if(this.has(e))return this.g};i.has=function(e){var t=so.value();return this.g&&st(e,t)?!0:!1};i.entries=function(){};i.keys=function(){};i.values=function(){};function ST(){}function IT(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=kT,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_T,e.MediaKeys=CT,e.MediaKeySystemAccess=MT,e.shakaMediaKeysPolyfill=!0)}function kT(){return Promise.reject(Error("The key system specified is not supported."))}function _T(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Mw.PatchedMediaKeysNop=ST;ST.install=IT;function CT(){throw new TypeError("Illegal constructor.")}CT.prototype.createSession=function(){};CT.prototype.setServerCertificate=function(){};CT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function MT(){this.keySystem="";throw new TypeError("Illegal constructor.")}MT.prototype.getConfiguration=function(){};MT.prototype.createMediaKeys=function(){};Rw(IT,-10);function DT(){}function RT(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)zT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=PT;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=NT;e.MediaKeys=UT;e.MediaKeySystemAccess=OT;e.shakaMediaKeysPolyfill=!0}}function LT(e){var t=zT;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function PT(e,t){try{var n=new OT(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function NT(e){var t=this.mediaKeys;t&&t!=e&&jT(t,null);delete this.mediaKeys;(this.mediaKeys=e)&&jT(e,this);return Promise.resolve()}Mw.PatchedMediaKeysWebkit=DT;DT.install=RT;function OT(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1;var r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");t=c(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=c(a.audioCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),i=!0));if(a.videoCapabilities)for(u=c(a.videoCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,r.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),i=!0));s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g));"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1);if(i){this.h=o;return}}n="Unsupported keySystem";if("org.w3.clearkey"==e||"com.widevine.alpha"==e)n="None of the requested configurations were supported.";e=Error(n);e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}OT.prototype.createMediaKeys=function(){var e=new UT(this.g);return Promise.resolve(e)};OT.prototype.getConfiguration=function(){return this.h};function UT(e){this.l=e;this.h=null;this.g=new gr;this.i=[];this.j=new Map}function jT(e,t){e.h=t;e.g.Ub();var n=zT;t&&(e.g.o(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc";n.initData=lt(t.initData);e.h.dispatchEvent(n)})),e.g.o(t,n+"keymessage",(function(t){var n=BT(e,t.sessionId);n&&(t=(new Map).set("messageType",void 0==n.keyStatuses.dc()?"licenserequest":"licenserenewal").set("message",t.message),t=new K("message",t),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.o(t,n+"keyadded",(function(t){if(t=BT(e,t.sessionId))HT(t,"usable"),t.g&&t.g.resolve(),t.g=null})),e.g.o(t,n+"keyerror",(function(t){var n=BT(e,t.sessionId);n&&n.handleError(t)})))}UT.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");t.src||(t.src="about:blank");e=new FT(t,this.l,e);this.i.push(e);return e};UT.prototype.setServerCertificate=function(){return Promise.resolve(!1)};UT.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function BT(e,t){var n=e.j.get(t);return n?n:(n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null}function FT(e,t,n){ae.call(this);this.j=e;this.m=!1;this.g=this.h=null;this.i=t;this.l=n;this.sessionId="";this.expiration=NaN;this.closed=new qi;this.keyStatuses=new qT}y(FT,ae);i=FT.prototype;i.handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode;t.errorCode=n;!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?HT(this,"output-restricted"):1==t?HT(this,"expired"):HT(this,"internal-error"))};function VT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=ct(_r("LOAD_SESSION|"+n));else{var r=_r("PERSISTENT|");i=Jr(r,t)}else i=ct(t)}catch(e){return Promise.reject(e)}e.h=new qi;var a=LT("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new fn((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).R(.01)}return e.h}function GT(e,t,n){if(e.g)e.g.then((function(){return GT(e,t,n)})).catch((function(){return GT(e,t,n)}));else{e.g=t;if("webkit-org.w3.clearkey"==e.i){var i=Sr(n);var r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null);i=Xr(r.keys[0].k);r=Xr(r.keys[0].kid)}else i=ct(n),r=null;var a=LT("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function HT(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1;n.g=t;t=new K("keystatuseschange");e.dispatchEvent(t)}i.generateRequest=function(e,t){return VT(this,t,null)};i.load=function(e){return"persistent-license"==this.l?VT(this,null,e):Promise.reject(Error("Not a persistent session."))};i.update=function(e){var t=new qi;GT(this,t,e);return t};i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=LT("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}this.closed.resolve();return this.closed};i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()};function qT(){this.size=0;this.g=void 0}i=qT.prototype;i.dc=function(){return this.g};i.forEach=function(e){this.g&&e(this.g,so.value())};i.get=function(e){if(this.has(e))return this.g};i.has=function(e){var t=so.value();return this.g&&st(e,t)?!0:!1};i.entries=function(){};i.keys=function(){};i.values=function(){};var zT="";Rw(RT);function KT(){}function XT(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=YT,Object.defineProperty(t,"disablePictureInPicture",{get:QT,set:$T,enumerable:!0,configurable:!0}),document.exitPictureInPicture=JT,document.addEventListener("webkitpresentationmodechanged",WT,!0))}}function WT(e){e=e.target;if("picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function YT(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function JT(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function QT(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function $T(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Mw.PiPWebkit=KT;KT.install=XT;Rw(XT);function ZT(){}function eE(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=tE))}function tE(){var e=URL.createObjectURL(new Blob),t=e.toString();URL.revokeObjectURL(e);return t.substr(t.lastIndexOf("/")+1)}Mw.RandomUUID=ZT;ZT.install=eE;Rw(eE);function nE(){}function iE(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=rE)}function rE(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}Mw.StorageEstimate=nE;nE.install=iE;Rw(iE);function aE(){}function oE(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:sE})}function sE(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Mw.Symbol=aE;aE.install=oE;Rw(oE);function uE(){}function lE(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);e&&e.catch((function(){}));return e}}}Mw.VideoPlayPromise=uE;uE.install=lE;Rw(lE);function cE(){}function dE(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||bn())&&(t.getVideoPlaybackQuality=hE)}}function hE(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Mw.VideoPlaybackQuality=cE;cE.install=dE;Rw(dE);function fE(){}function pE(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=gE;else if(6==n)t=mE;else{try{var i=!!gE(1,2,"")}catch(e){i=!1}i&&(t=gE)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function gE(t,n,i){return new e.TextTrackCue(t,n,i)}function mE(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}Mw.VTTCue=fE;fE.install=pE;Rw(pE);function vE(){}vE.prototype.parseInit=function(){};vE.prototype.setSequenceMode=function(){};vE.prototype.setManifestType=function(){};vE.prototype.parseMedia=function(e,t){var n=null,i=[];e=Sr(e).split(/\r?\n/);e=c(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=yE.exec(r))){var a=bE.exec(r[1]);a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",","."));r=new Tt(a,t.segmentEnd?t.segmentEnd:a+2,r[2]);n&&(n.endTime=a,i.push(n));n=r}n&&i.push(n);return i};q("shaka.text.LrcTextParser",vE);vE.prototype.parseMedia=vE.prototype.parseMedia;vE.prototype.setManifestType=vE.prototype.setManifestType;vE.prototype.setSequenceMode=vE.prototype.setSequenceMode;vE.prototype.parseInit=vE.prototype.parseInit;var yE=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,bE=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;dn["application/x-subtitle-lrc"]=function(){return new vE};function wE(){}wE.prototype.parseInit=function(){};wE.prototype.setSequenceMode=function(){};wE.prototype.setManifestType=function(){};wE.prototype.parseMedia=function(e,t){var n=Sr(e);e=[];if(""==n)return e;var i=ya(n,"tt");if(!i)throw new Se(2,2,2005,"Failed to parse TTML.");n=i.getElementsByTagName("body")[0];if(!n)return[];var r=aa(i,KE,"frameRate"),a=aa(i,KE,"subFrameRate"),o=aa(i,KE,"frameRateMultiplier"),s=aa(i,KE,"tickRate"),u=aa(i,KE,"cellResolution"),l=i.getAttribute("xml:space")||"default",d=aa(i,XE,"extent");if("default"!=l&&"preserve"!=l)throw new Se(2,2,2005,"Invalid xml:space value: "+l);l="default"==l;r=new LE(r,a,o,s);u=u?(u=/^(\d+) (\d+)$/.exec(u))?{eh:parseInt(u[1],10),rows:parseInt(u[2],10)}:null:null;a=(a=i.getElementsByTagName("metadata")[0])?na(a):[];o=Array.from(i.getElementsByTagName("style"));i=Array.from(i.getElementsByTagName("region"));s=[];for(var h=c(i),f=h.next();!f.done;f=h.next()){var p=f.value;f=new jt;var g=p.getAttribute("xml:id");if(g){f.id=g;var m=null;d&&(m=PE.exec(d)||UE.exec(d));g=m?Number(m[1]):null;m=m?Number(m[2]):null;var v,y;if(v=SE(p,o,"extent"))v=(y=PE.exec(v))||UE.exec(v),null!=v&&(f.width=Number(v[1]),f.height=Number(v[2]),y||(null!=g&&(f.width=100*f.width/g),null!=m&&(f.height=100*f.height/m)),f.widthUnits=y||null!=g?Bt:0,f.heightUnits=y||null!=m?Bt:0);if(p=SE(p,o,"origin"))v=(y=PE.exec(p))||UE.exec(p),null!=v&&(f.viewportAnchorX=Number(v[1]),f.viewportAnchorY=Number(v[2]),y||(null!=m&&(f.viewportAnchorY=100*f.viewportAnchorY/m),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=y||null!=g?Bt:0)}else f=null;f&&s.push(f)}if(ta(n,"p").length)throw new Se(2,2,2001,"<p> can only be inside <div> in TTML");d=c(ta(n,"div"));for(h=d.next();!h.done;h=d.next())if(ta(h.value,"span").length)throw new Se(2,2,2001,"<span> can only be inside <p> in TTML");if(t=TE(n,t,r,a,o,i,s,l,u,null,!1))t.backgroundColor||(t.backgroundColor="transparent"),e.push(t);return e};function TE(e,t,n,i,r,a,o,s,u,l,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var f=document.createElement("span");f.textContent=e.textContent}else f=e;for(var p=null,g=c(WE),m=g.next();!m.done&&!(p=_E(f,"backgroundImage",i,"#",m.value)[0]);m=g.next());if("p"==e.nodeName||p)d=!0;e=d;g="default"==(f.getAttribute("xml:space")||(s?"default":"preserve"));m=Array.from(f.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}));s=[];if(!m)for(var v=c(f.childNodes),y=v.next();!y.done;y=v.next())(y=TE(y.value,t,n,i,r,a,o,g,u,f,d))&&s.push(y);i=null!=l;v=/\S/.test(f.textContent);var b=f.hasAttribute("begin")||f.hasAttribute("end")||f.hasAttribute("dur");if(!(b||v||"br"==f.tagName||0!=s.length||i&&!g))return null;y=ME(f,n);v=y.start;for(y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)y=CE(h,n,v,y),v=y.start,y=y.end,h=h.parentNode;null==v&&(v=0);v+=t.periodStart;y=null==y?Infinity:y+t.periodStart;v=Math.max(v,t.segmentStart);y=Math.min(y,t.segmentEnd);if(!b&&0<s.length)for(v=Infinity,y=0,t=c(s),n=t.next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==f.tagName)return r=new Tt(v,y,""),r.lineBreak=!0,r;t="";m&&(t=f.textContent,g&&(t=t.trim(),t=t.replace(/\s+/g," ")));t=new Tt(v,y,t);t.nestedCues=s;d||(t.isContainer=!0);u&&(t.cellResolution=u);u=_E(f,"region",a,"")[0];if(f.hasAttribute("region")&&u&&u.getAttribute("xml:id")){var w=u.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==w}))[0]}o=u;l&&i&&!f.getAttribute("region")&&!f.getAttribute("style")&&(o=_E(l,"region",a,"")[0]);EE(t,f,o,p,r,e,0==s.length);return t}function EE(e,t,n,i,r,a,o){a=a||o;"rtl"==AE(t,n,r,"direction",a)&&(e.direction="rtl");o=AE(t,n,r,"writingMode",a);"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=_t);(o=AE(t,n,r,"textAlign",!0))?(e.positionAlign=zE[o],e.lineAlign=qE[o],e.textAlign=St[o.toUpperCase()]):e.textAlign=At;if(o=AE(t,n,r,"displayAlign",!0))e.displayAlign=kt[o.toUpperCase()];if(o=AE(t,n,r,"color",a))e.color=o;if(o=AE(t,n,r,"backgroundColor",a))e.backgroundColor=o;if(o=AE(t,n,r,"border",a))e.border=o;if(o=AE(t,n,r,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=AE(t,n,r,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700);o=AE(t,n,r,"wrapOption",a);e.wrapLine=o&&"noWrap"==o?!1:!0;(o=AE(t,n,r,"lineHeight",a))&&o.match(OE)&&(e.lineHeight=o);(o=AE(t,n,r,"fontSize",a))&&(o.match(OE)||o.match(NE))&&(e.fontSize=o);if(o=AE(t,n,r,"fontStyle",a))e.fontStyle=Ut[o.toUpperCase()];if(i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var s=i.getAttribute("encoding");i=i.textContent.trim();"PNG"==o&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)}if(i=AE(t,n,r,"textOutline",a))i=i.split(" "),i[0].match(OE)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(OE)?e.textStrokeWidth=i[0]:e.textStrokeColor="";(i=AE(t,n,r,"letterSpacing",a))&&i.match(OE)&&(e.letterSpacing=i);(i=AE(t,n,r,"linePadding",a))&&i.match(OE)&&(e.linePadding=i);if(a=AE(t,n,r,"opacity",a))e.opacity=parseFloat(a);(n=SE(n,r,"textDecoration"))&&xE(e,n);(t=IE(t,r,"textDecoration"))&&xE(e,t)}function xE(e,t){t=c(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&yt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&yt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&yt(e.textDecoration,"overline")}}function AE(e,t,n,i,r){r=void 0===r?!0:r;return(e=IE(e,n,i))?e:r?SE(t,n,i):null}function SE(e,t,n){if(!e)return null;var i=aa(e,XE,n);return i?i:kE(e,t,n)}function IE(e,t,n){var i=aa(e,XE,n);return i?i:kE(e,t,n)}function kE(e,t,n){e=_E(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=ra(e[r],"urn:ebu:tt:style",n);a||(a=aa(e[r],XE,n));a||(a=IE(e[r],t,n));a&&(i=a)}return i}function _E(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?ra(o,r,t):o.getAttribute(t))&&(o=o.parentNode,o instanceof Element););if(t=e)for(t=c(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=c(n),o=e.next();!o.done;o=e.next())if(o=o.value,i+o.getAttribute("xml:id")==r){a.push(o);break}return a}function CE(e,t,n,i){e=ME(e,t);null==n?n=e.start:null!=e.start&&(n+=e.start);null==i?i=e.end:null!=e.start&&(i+=e.start);return{start:n,end:i}}function ME(e,t){var n=DE(e.getAttribute("begin"),t),i=DE(e.getAttribute("end"),t);e=DE(e.getAttribute("dur"),t);null==i&&null!=e&&(i=n+e);return{start:n,end:i}}function DE(e,t){var n=null;if(jE.test(e)){e=jE.exec(e);n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);a+=(Number(e[5])||0)/t.h;r+=a/t.frameRate;n=r+60*i+3600*n}else if(BE.test(e))n=RE(BE,e);else if(FE.test(e))n=RE(FE,e);else if(VE.test(e))e=VE.exec(e),n=Number(e[1])/t.frameRate;else if(GE.test(e))e=GE.exec(e),n=Number(e[1])/t.g;else if(HE.test(e))n=RE(HE,e);else if(e)throw new Se(2,2,2001,"Could not parse cue time range in TTML");return n}function RE(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}q("shaka.text.TtmlTextParser",wE);wE.prototype.parseMedia=wE.prototype.parseMedia;wE.prototype.setManifestType=wE.prototype.setManifestType;wE.prototype.setSequenceMode=wE.prototype.setSequenceMode;wE.prototype.parseInit=wE.prototype.parseInit;function LE(e,t,n,i){this.frameRate=Number(e)||30;this.h=Number(t)||1;this.g=Number(i);0==this.g&&(this.g=e?this.frameRate*this.h:1);n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var PE=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,NE=/^(\d{1,2}(?:\.\d+)?|100)%$/,OE=/^(\d+px|\d+em|\d*\.?\d+c)$/,UE=/^(\d+)px (\d+)px$/,jE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,BE=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,FE=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,VE=/^(\d*(?:\.\d*)?)f$/,GE=/^(\d*(?:\.\d*)?)t$/,HE=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),qE={left:Dt,center:"center",right:"end",start:Dt,end:"end"},zE={left:"line-left",center:"center",right:"line-right"},KE=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],XE=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],WE=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];dn["application/ttml+xml"]=function(){return new wE};function YE(){this.g=new wE}YE.prototype.parseInit=function(e){var t=!1;(new Pr).box("moov",Nr).box("trak",Nr).box("mdia",Nr).box("minf",Nr).box("stbl",Nr).T("stsd",Or).box("stpp",(function(e){t=!0;e.parser.stop()})).parse(e);if(!t)throw new Se(2,2,2007)};YE.prototype.setSequenceMode=function(){};YE.prototype.setManifestType=function(){};YE.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];(new Pr).box("mdat",jr((function(e){i=!0;r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1);if(!i)throw new Se(2,2,2007);return r};q("shaka.text.Mp4TtmlParser",YE);YE.prototype.parseMedia=YE.prototype.parseMedia;YE.prototype.setManifestType=YE.prototype.setManifestType;YE.prototype.setSequenceMode=YE.prototype.setSequenceMode;YE.prototype.parseInit=YE.prototype.parseInit;dn['application/mp4; codecs="stpp"']=function(){return new YE};dn['application/mp4; codecs="stpp.ttml"']=function(){return new YE};dn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new YE};dn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new YE};function JE(){this.h=!1;this.g="UNKNOWN"}JE.prototype.parseInit=function(){};JE.prototype.setSequenceMode=function(e){this.h=e};JE.prototype.setManifestType=function(e){this.g=e};JE.prototype.parseMedia=function(e,t){e=Sr(e);e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Se(2,2,2e3);e=t.vttOffset;if(n[0].includes("X-TIMESTAMP-MAP")&&this.h){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){e=ix(new Lm(i[1]));if(null==e)throw new Se(2,2,2e3);r=Number(r[1]);for(i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);t=[];r=c(n[0].split("\n"));for(i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Lm(i);var a=new jt;Om(i);Pm(i);for(var o=Om(i);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up");Pm(i);o=Om(i)}t.push(a)}r=new Map;QE(r);i=[];n=c(n.slice(1));for(a=n.next();!a.done;a=n.next()){a=a.value.split("\n");if((1!=a.length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){s=[];o=-1;for(u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));s=c(s);for(o=s.next();!o.done;o=s.next()){var l=o.value;o="global";(u=l[0].match(/\((.*)\)/))&&(o=u.pop());u=l.slice(1,-1);l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";"));(l=r.get(o))||(l=new Tt(0,0,""));for(var d=!1,h=0;h<u.length;h++){var f=/^\s*([^:]+):\s*(.*)/.exec(u[h]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":d=!0;l.backgroundColor=p;break;case"color":d=!0;l.color=p;break;case"font-family":d=!0;l.fontFamily=p;break;case"font-size":d=!0;l.fontSize=p;break;case"font-weight":if(700<=parseInt(p,10)||"bold"==p)d=!0,l.fontWeight=700;break;case"font-style":switch(p){case"normal":d=!0;l.fontStyle=Ot;break;case"italic":d=!0;l.fontStyle="italic";break;case"oblique":d=!0,l.fontStyle="oblique"}break;case"opacity":d=!0;l.opacity=parseFloat(p);break;case"text-shadow":d=!0;l.textShadow=p;break;case"white-space":d=!0,l.wrapLine="noWrap"!=p}}}d&&r.set(o,l)}}d=e;if(1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),o=new Lm(a[0]),u=ix(o),h=Nm(o,/[ \t]+--\x3e[ \t]+/g),l=ix(o),null==u||null==h||null==l)Q("Failed to parse VTT time code. Cue skipped:",s,a),a=null;else{u+=d;l+=d;d=a.slice(1).join("\n").trim();r.has("global")?(a=r.get("global").clone(),a.startTime=u,a.endTime=l,a.payload=""):a=new Tt(u,l,"");$E(d,a,r);Pm(o);for(u=Om(o);u;)tx(a,u,t),Pm(o),u=Om(o);null!=s&&(a.id=s)}a&&i.push(a)}return i};function QE(e){for(var t=c(Object.entries(Lt)),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value;i=i.next().value;var r=new Tt(0,0,"");r.color=i;e.set("."+n,r)}t=c(Object.entries(Pt));for(n=t.next();!n.done;n=t.next())i=c(n.value),n=i.next().value,i=i.next().value,r=new Tt(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function $E(e,t,n){0===n.size&&QE(n);e:{var i=e;e=[];for(var r=-1,a="",o=0;o<i.length;o++)if("/"===i[o]&&0<o&&"<"===i[o-1]){var s=i.indexOf(">",o);if(s<=o){e=i;break e}if((s=i.substring(o+1,s))&&"c"===s){var u=e.pop();u?u===s?(a+="/"+s+">",o+=s.length+1):u.startsWith("c.")?(o+=s.length+1,a+="/"+u+">"):a+=i[o]:a+=i[o]}else a+=i[o]}else"<"===i[o]?(r=o+1,"c"!=i[r]&&(r=-1)):">"===i[o]&&0<r&&(e.push(i.substr(r,o-r)),r=-1),a+=i[o];e=a}i=[];a=-1;for(r=0;r<e.length;r++)"<"===e[r]?a=r+1:">"===e[r]&&0<a&&(a=e.substr(a,r-a),a.match(ax)&&i.push(a),a=-1);i=c(i);for(r=i.next();!r.done;r=i.next())r=r.value,e=e.replace("<"+r+">",'<div time="'+r+'">'),e+="</div>";e:{r=e;a=[];o=-1;i="";e=!1;for(s=0;s<r.length;s++)if("/"===r[s]){u=r.indexOf(">",s);if(-1===u){e=r;break e}if((u=r.substring(s+1,u))&&"v"==u){e=!0;var l=null;a.length&&(l=a[a.length-1]);if(l){if(l===u)i+="/"+u+">";else{if(!l.startsWith("v")){i+=r[s];continue}i+="/"+l+">"}s+=u.length+1}else i+=r[s]}else i+=r[s]}else"<"===r[s]?(o=s+1,"v"!=r[o]&&(o=-1)):">"===r[s]&&0<o&&(a.push(r.substr(o,s-o)),o=-1),i+=r[s];r=c(a);for(a=r.next();!a.done;a=r.next())a=a.value,o=a.replace(" ",".voice-"),i=i.replace("<"+a+">","<"+o+">"),i=i.replace("</"+a+">","</"+o+">"),e||(i+="</"+o+">");e=i}if(r=ya("<span>"+e+"</span>","span")){i=[];r=r.childNodes;if(1==r.length&&(a=r[0],a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE)){t.payload=rx(e);return}e=c(r);for(r=e.next();!r.done;r=e.next())ex(r.value,t,i,n);t.nestedCues=i}else t.payload=rx(e)}function ZE(e,t){return e&&0<e.length?e:t}function ex(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=c(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]';i.has(s)||(s="v[voice="+u+"]")}i.has(s)&&(s=i.get(s))&&(r.backgroundColor=ZE(s.backgroundColor,r.backgroundColor),r.color=ZE(s.color,r.color),r.fontFamily=ZE(s.fontFamily,r.fontFamily),r.fontSize=ZE(s.fontSize,r.fontSize),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.textShadow=s.textShadow,r.wrapLine=s.wrapLine);switch(o){case"br":o=t.clone();o.lineBreak=!0;n.push(o);break;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":if(o=e.getAttribute("color"))r.color=o;break;case"div":if(o=e.getAttribute("time"))if(o=ix(new Lm(o)))r.startTime=o}}if(sa(e))for(a=!0,i=c(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||(a=t.clone(),a.lineBreak=!0,n.push(a)),0<e.length&&(a=r.clone(),a.payload=rx(e),n.push(a)),a=!1;else for(t=c(e.childNodes),e=t.next();!e.done;e=t.next())ex(e.value,r,n,i)}function tx(e,t,n){var i;if(i=/^align:(start|middle|center|end|left|right)$/.exec(t))t=i[1],"middle"==t?e.textAlign=At:e.textAlign=St[t.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(t))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":xt);else if(i=/^region:(.*)$/.exec(t)){if(t=nx(n,i[1]))e.region=t}else if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Rt[n[2].toUpperCase()]);else if(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Mt,e.line=Number(n[1]),n[2]&&(e.lineAlign=Rt[n[2].toUpperCase()])}function nx(e,t){e=e.filter((function(e){return e.id==t}));return e.length?e[0]:null}function ix(e){e=Nm(e,ax);if(null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function rx(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}q("shaka.text.VttTextParser",JE);JE.prototype.parseMedia=JE.prototype.parseMedia;JE.prototype.setManifestType=JE.prototype.setManifestType;JE.prototype.setSequenceMode=JE.prototype.setSequenceMode;JE.prototype.parseInit=JE.prototype.parseInit;var ax=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;dn["text/vtt"]=function(){return new JE};dn['text/vtt; codecs="vtt"']=function(){return new JE};dn['text/vtt; codecs="wvtt"']=function(){return new JE};function ox(){this.g=null}ox.prototype.parseInit=function(e){var t=this,n=!1;(new Pr).box("moov",Nr).box("trak",Nr).box("mdia",Nr).T("mdhd",(function(e){e=jo(e.reader,e.version);t.g=e.timescale})).box("minf",Nr).box("stbl",Nr).T("stsd",Or).box("wvtt",(function(){n=!0})).parse(e);if(!this.g)throw new Se(2,2,2008);if(!n)throw new Se(2,2,2008)};ox.prototype.setSequenceMode=function(){};ox.prototype.setManifestType=function(){};ox.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Se(2,2,2008);var n=0,i=[],r,a=[],o=!1,s=!1,u=!1,l=null;(new Pr).box("moof",Nr).box("traf",Nr).T("tfdt",(function(e){o=!0;n=Uo(e.reader,e.version).baseMediaDecodeTime})).T("tfhd",(function(e){l=Oo(e.reader,e.flags).ig})).T("trun",(function(e){s=!0;i=Bo(e.reader,e.version,e.flags).Dg})).box("mdat",jr((function(e){u=!0;r=e}))).parse(e,!1);if(!u&&!o&&!s)throw new Se(2,2,2008);e=n;for(var d=new Dr(r,0),h=c(i),f=h.next();!f.done;f=h.next()){f=f.value;var p=f.vf||l,g=f.ve?n+f.ve:e;e=g+(p||0);var m=0;do{var v=d.N();m+=v;var y=d.N(),b=null;"vttc"==Fr(y)?8<v&&(b=d.Ib(v-8)):d.skip(v-8);p&&b&&(v=sx(b,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(f.sampleSize&&m<f.sampleSize)}return a.filter(Ce)};function sx(e,t,n){var i,r,a;(new Pr).box("payl",jr((function(e){i=Sr(e)}))).box("iden",jr((function(e){r=Sr(e)}))).box("sttg",jr((function(e){a=Sr(e)}))).parse(e);return i?ux(i,r,a,t,n):null}function ux(e,t,n,i,r){i=new Tt(i,r,"");$E(e,i,new Map);t&&(i.id=t);if(n)for(e=new Lm(n),t=Om(e);t;)tx(i,t,[]),Pm(e),t=Om(e);return i}q("shaka.text.Mp4VttParser",ox);ox.prototype.parseMedia=ox.prototype.parseMedia;ox.prototype.setManifestType=ox.prototype.setManifestType;ox.prototype.setSequenceMode=ox.prototype.setSequenceMode;ox.prototype.parseInit=ox.prototype.parseInit;dn['application/mp4; codecs="wvtt"']=function(){return new ox};function lx(){}lx.prototype.parseInit=function(){};lx.prototype.setSequenceMode=function(){};lx.prototype.setManifestType=function(){};lx.prototype.parseMedia=function(e){var t=Sr(e).replace(/\r+/g,"");t=t.trim();e=[];if(""==t)return e;t=c(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new Lm(n[0]),r=cx(i),a=Nm(i,/,/g);i=cx(i);if(null==r||null==a||null==i)throw new Se(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Tt(r,i,n.slice(1).join("\n").trim()))}return e};function cx(e){e=Nm(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}q("shaka.text.SbvTextParser",lx);lx.prototype.parseMedia=lx.prototype.parseMedia;lx.prototype.setManifestType=lx.prototype.setManifestType;lx.prototype.setSequenceMode=lx.prototype.setSequenceMode;lx.prototype.parseInit=lx.prototype.parseInit;dn["text/x-subviewer"]=function(){return new lx};function dx(){this.g=new JE}dx.prototype.parseInit=function(){};dx.prototype.setSequenceMode=function(){};dx.prototype.setManifestType=function(){};dx.prototype.parseMedia=function(e,t){e=Sr(e);e=hx(e);e=ct(_r(e));return this.g.parseMedia(e,t)};function hx(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,"");e=e.trim();e=c(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}q("shaka.text.SrtTextParser",dx);dx.srt2webvtt=hx;dx.prototype.parseMedia=dx.prototype.parseMedia;dx.prototype.setManifestType=dx.prototype.setManifestType;dx.prototype.setSequenceMode=dx.prototype.setSequenceMode;dx.prototype.parseInit=dx.prototype.parseInit;dn["text/srt"]=function(){return new dx};function fx(){}fx.prototype.parseInit=function(){};fx.prototype.setSequenceMode=function(){};fx.prototype.setManifestType=function(){};fx.prototype.parseMedia=function(e){var t="",n="";e=Sr(e).split(/\r?\n\s*\r?\n/);e=c(e);for(var i=e.next();!i.done;i=e.next()){var r=vx.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[];i=null;t=c(t.split(/\r?\n/));for(var a=t.next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=yx.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(bx);else if("Style"==r){r=a.split(bx);a={};for(var o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}i=[];t=null;r={};n=c(n.split(/\r?\n/));for(a=n.next();!a.done;r={Je:r.Je},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=yx.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(bx);else if("Dialogue"==a){o=o.split(bx);a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];s=mx(a.Start);var u=mx(a.End);o=new Tt(s,u,o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,""));r.Je=a.Style;(a=e.find(function(e){return function(t){return t.Name==e.Je}}(r)))&&px(o,a);i.push(o)}return i};function px(e,t){var n=t.Fontname;n&&(e.fontFamily=n);if(n=t.Fontsize)e.fontSize=n+"px";if(n=t.PrimaryColour)if(n=gx(n))e.color=n;if(n=t.BackColour)if(n=gx(n))e.backgroundColor=n;t.Bold&&(e.fontWeight=700);t.Italic&&(e.fontStyle="italic");t.Underline&&e.textDecoration.push("underline");if(n=t.Spacing)e.letterSpacing=n+"px";if(n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=It;e.textAlign="start";break;case 2:e.displayAlign=It;e.textAlign=At;break;case 3:e.displayAlign=It;e.textAlign="end";break;case 5:e.displayAlign="before";e.textAlign="start";break;case 6:e.displayAlign="before";e.textAlign=At;break;case 7:e.displayAlign="before";e.textAlign="end";break;case 9:e.displayAlign="center";e.textAlign="start";break;case 10:e.displayAlign="center";e.textAlign=At;break;case 11:e.displayAlign="center",e.textAlign="end"}if(t=t.AlphaLevel)e.opacity=parseFloat(t)}function gx(e){e=parseInt(e.replace("&H",""),16);return 0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function mx(e){e=wx.exec(e);return 3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}q("shaka.text.SsaTextParser",fx);fx.prototype.parseMedia=fx.prototype.parseMedia;fx.prototype.setManifestType=fx.prototype.setManifestType;fx.prototype.setSequenceMode=fx.prototype.setSequenceMode;fx.prototype.parseInit=fx.prototype.parseInit;var vx=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,yx=/^\s*([^:]+):\s*(.*)/,bx=/\s*,\s*/,wx=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;dn["text/x-ssa"]=function(){return new fx};function Tx(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Yd:n,U:e}:null}function Ex(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,a=(e[t+2]&1)<<2;a|=(e[t+3]&192)>>>6;return{sampleRate:n[i],channelCount:a,Ga:"mp4a.40."+r}}function xx(e,t){if(t+1<e.length&&255===e[t]&&240===(e[t+1]&246)){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;if(i<=n)return!1;t+=i;return t===e.length||t+1<e.length&&255===e[t]&&240===(e[t+1]&246)}return!1}function Ax(e){this.i=e;this.h=0;this.g=new Map}i=Ax.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]?nt(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(en(t)||"mp4a.40.2")+'"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){for(var r=ct(e),a=No(r),o=a.length;o<r.length&&!xx(r,o);o++);e=1e3*n.endTime;a=Po(a);a.length&&n&&(n=a.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(e=n.data);n=Ex(r,o);if(!n)return Promise.reject(new Se(2,3,3018));t.audioSamplingRate=n.sampleRate;t.channelsCount=n.channelCount;for(a=[];o<r.length;){var s=Tx(r,o);if(!s)return Promise.reject(new Se(2,3,3018));var u=s.Yd+s.U;o+u<=r.length&&a.push({data:r.subarray(o+s.Yd,o+u),size:s.U,duration:1024,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});o+=u}r=n.sampleRate;e=Math.floor(e*r/1e3);i={id:t.id,type:"audio",codecs:n.Ga,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:a},stream:t};e=new Qv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=ty(e);this.h++;t=Jr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.AacTransmuxer",Ax);Ax.prototype.transmux=Ax.prototype.transmux;Ax.prototype.getOrginalMimeType=Ax.prototype.getOrginalMimeType;Ax.prototype.convertCodecs=Ax.prototype.convertCodecs;Ax.prototype.isSupported=Ax.prototype.isSupported;Ax.prototype.destroy=Ax.prototype.destroy;Gt("audio/aac",(function(){return new Ax("audio/aac")}),zt);function Sx(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var a=e[t+6]>>5,o=0;2===a?o+=2:(a&1&&1!==a&&(o+=2),a&4&&(o+=2));o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=e[t+5]&7;e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|a<<3|o<<2|i>>4,i<<4&224]);return{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,ia:e,U:r}}function Ix(e,t){if(11===e[t]&&119===e[t+1]){var n=0,i=5;t+=i;for(var r,a;0<i;){a=e[t];var o=Math.min(i,8),s=8-o;r=4278190080>>>24+s<<s;r=(a&r)>>s;n=n?n<<o|r:r;t+=1;i-=o}if(16>n)return!0}return!1}function kx(e){this.i=e;this.h=0;this.g=new Map}i=kx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]?nt(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=ct(e);for(var r=No(e),a=r.length;a<e.length&&!Ix(e,a);a++);var o=1e3*n.endTime;r=Po(r);r.length&&n&&(n=r.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=n.data);n=0;r=new Uint8Array([]);for(var s=[];a<e.length;){var u=Sx(e,a);if(!u)return Promise.reject(new Se(2,3,3018));t.audioSamplingRate=u.sampleRate;t.channelsCount=u.channelCount;n=u.sampleRate;r=u.ia;s.push({data:e.subarray(a,a+u.U),size:u.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});a+=u.U}e=Math.floor(o*n/1e3);i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,ab:[],ia:r,Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:s},stream:t};e=new Qv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=ty(e);this.h++;t=Jr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Ac3Transmuxer",kx);kx.prototype.transmux=kx.prototype.transmux;kx.prototype.getOrginalMimeType=kx.prototype.getOrginalMimeType;kx.prototype.convertCodecs=kx.prototype.convertCodecs;kx.prototype.isSupported=kx.prototype.isSupported;kx.prototype.destroy=kx.prototype.destroy;Gt("audio/ac3",(function(){return new kx("audio/ac3")}),zt);function _x(e,t){if(t+8>e.length||2935!==(e[t]<<8|e[t+1]<<0))return null;var n=new qo(e.subarray(t+2));Ko(n,2);Ko(n,3);var i=Xo(n,11)+1<<1,r=Xo(n,2);if(3==r){r=Xo(n,2);r=[24e3,22060,16e3][r];var a=3}else r=[48e3,44100,32e3][r],a=Xo(n,2);var o=Xo(n,3),s=Xo(n,1);n=Xo(n,5);if(t+i>e.byteLength)return null;e=Math.floor(i*r/(16*[1,2,3,6][a]));e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|o<<1|s<<0,0]);return{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][o]+s,ia:e,U:i}}function Cx(e){this.i=e;this.h=0;this.g=new Map}i=Cx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]?nt(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=ct(e);for(var r=No(e),a=r.length;a<e.length&&2935!==(e[a]<<8|e[a+1]<<0);a++);var o=1e3*n.endTime;r=Po(r);r.length&&n&&(n=r.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(o=n.data);n=0;r=new Uint8Array([]);for(var s=[];a<e.length;){var u=_x(e,a);if(!u)return Promise.reject(new Se(2,3,3018));t.audioSamplingRate=u.sampleRate;t.channelsCount=u.channelCount;n=u.sampleRate;r=u.ia;s.push({data:e.subarray(a,a+u.U),size:u.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});a+=u.U}e=Math.floor(o*n/1e3);i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,ab:[],ia:r,Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:s},stream:t};e=new Qv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=e.initSegment(),this.g.set(t.id,i));t=ty(e);this.h++;t=Jr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Ec3Transmuxer",Cx);Cx.prototype.transmux=Cx.prototype.transmux;Cx.prototype.getOrginalMimeType=Cx.prototype.getOrginalMimeType;Cx.prototype.convertCodecs=Cx.prototype.convertCodecs;Cx.prototype.isSupported=Cx.prototype.isSupported;Cx.prototype.destroy=Cx.prototype.destroy;Gt("audio/ec3",(function(){return new Cx("audio/ec3")}),zt);function Mx(e){if(!e.length)return null;var t=e.find((function(e){return 7==e.type}));e=e.find((function(e){return 8==e.type}));if(!t||!e)return null;var n=new qo(t.data),i=Xo(n,8);Xo(n,8);Xo(n,8);Yo(n);if(Rx.includes(i)&&(i=Jo(n),3===i&&Ko(n,1),Yo(n),Yo(n),Ko(n,1),1===Xo(n,1))){i=3!==i?8:12;for(var r=0;r<i;r++)1===Xo(n,1)&&(6>r?Qo(n,16):Qo(n,64))}Yo(n);i=Jo(n);if(0===i)Jo(n);else if(1===i)for(Ko(n,1),Yo(n),Yo(n),i=Jo(n),r=0;r<i;r++)Yo(n);Yo(n);Ko(n,1);i=Jo(n);var a=Jo(n),o=Xo(n,1);0===o&&Ko(n,1);Ko(n,1);var s=r=0,u=0,l=0;1===Xo(n,1)&&(r=Jo(n),s=Jo(n),u=Jo(n),l=Jo(n));n=(2-o)*(a+1)*16-2*u-2*l;i=16*(i+1)-2*r-2*s;r=[];t=t.Ab;r.push(t.byteLength>>>8&255);r.push(t.byteLength&255);r=r.concat.apply(r,d(t));t=[];e=e.Ab;t.push(e.byteLength>>>8&255);t.push(e.byteLength&255);t=t.concat.apply(t,d(e));e=new Uint8Array([1,r[3],r[4],r[5],255,225].concat(r,[1],t));return{height:n,width:i,Da:e}}function Dx(e){var t=!1,n=new Uint8Array([]),i=e.find((function(e){return 7==e.type})),r=!1;e=c(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var o=!1;switch(a.type){case 1:o=r=!0;var s=a.data;i&&4<s.length&&(s=$o(new qo(s)),2===s||4===s||7===s||9===s)&&(t=!0);break;case 5:t=o=r=!0;break;case 6:o=!0;break;case 7:o=!0;break;case 8:o=!0;break;case 9:r=o=!0;break;case 12:o=!0;break;default:o=!1}r&&o&&(o=a.Ab.byteLength,s=new Uint8Array(4),s[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=o&255,n=Jr(n,s,a.Ab))}return n.byteLength?{data:n,vg:t}:null}var Rx=[100,110,122,244,44,83,86,118,128,138,139,134];function Lx(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==a){var o=e[t+3]>>6;r=1e3*Nx[14*(3===n?3-i:3===i?3:4)+r-1];a=Ox[3*(3===n?0:2===n?1:2)+a];n=Ux[n][i];var s=jx[i],u=Math.floor(n*r/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);(l=l?parseInt(l[1],10):0)&&87>=l&&2===i&&224e3<=r&&0===o&&(e[t+3]|=128);return{sampleRate:a,channelCount:3===o?1:2,U:u,wi:8*n*s}}return null}function Px(e,t){return 255===e[t]&&224===(e[t+1]&224)&&0!==(e[t+1]&6)}var Nx=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ox=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ux=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],jx=[0,1,1,4];function Bx(e){this.i=e;this.h=0;this.g=new Map}i=Bx.prototype;i.destroy=function(){this.g.clear()};i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]?nt(this.convertCodecs("audio",e)):!1};i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t};i.getOrginalMimeType=function(){return this.i};i.transmux=function(e,t,n,i){e=ct(e);for(n=No(e).length;n<e.length;n++){var r=n;if(r+1<e.length&&Px(e,r)){var a=Lx(e,r),o=4;a&&a.U&&(o=a.U);r+=o;r=r===e.length||r+1<e.length&&Px(e,r)}else r=!1;if(r)break}var s;for(r=[];n<e.length;){a=Lx(e,n);if(!a)return Promise.reject(new Se(2,3,3018));s||(s=a);n+a.U<=e.length&&r.push({data:e.subarray(n,n+a.U),size:a.U,duration:1152,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});n+=a.U}if(!s)return Promise.reject(new Se(2,3,3018));e=9e4*s.wi/s.sampleRate*this.h;i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:i,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:r},stream:t};s=new Qv([i]);this.g.has(t.id)?i=this.g.get(t.id):(i=s.initSegment(),this.g.set(t.id,i));t=ty(s);this.h++;t=Jr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.Mp3Transmuxer",Bx);Bx.prototype.transmux=Bx.prototype.transmux;Bx.prototype.getOrginalMimeType=Bx.prototype.getOrginalMimeType;Bx.prototype.convertCodecs=Bx.prototype.convertCodecs;Bx.prototype.isSupported=Bx.prototype.isSupported;Bx.prototype.destroy=Bx.prototype.destroy;Gt("audio/mpeg",(function(){return new Bx("audio/mpeg")}),zt);function Fx(e){this.h=e;this.g=null}i=Fx.prototype;i.destroy=function(){};i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=en(e).split(","),n=Le("audio",t);t=Le("video",t);return!n||t||"mp3"!=Zt(n)?!1:nt(this.convertCodecs("audio",e))};i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t};i.getOrginalMimeType=function(){return this.h};i.transmux=function(e){this.g?this.g.clearData():this.g=new Zo;e=ct(e);var t=this.g.parse(e);e=t.Rd();if("mp3"!=e.audio||e.video)return Promise.reject(new Se(2,3,3018));e=new Uint8Array([]);t=c(t.Zb());for(var n=t.next();!n.done;n=t.next())if(n=n.value.data)for(var i=0;i<n.length;){var r=Lx(n,i);r?(i+r.U<=n.length&&(e=Jr(e,n.subarray(i,i+r.U))),i+=r.U):i++}return Promise.resolve(e)};q("shaka.transmuxer.MpegTsTransmuxer",Fx);Fx.prototype.transmux=Fx.prototype.transmux;Fx.prototype.getOrginalMimeType=Fx.prototype.getOrginalMimeType;Fx.prototype.convertCodecs=Fx.prototype.convertCodecs;Fx.prototype.isSupported=Fx.prototype.isSupported;Fx.prototype.destroy=Fx.prototype.destroy;Gt("video/mp2t",(function(){return new Fx("video/mp2t")}),Kt);function Vx(e){this.h=e;(this.g=Tm.get("ISOBoxer")())&&Gx(this)}function Gx(e){function t(){this._procFullBox();this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8));this._procField("sample_count","uint",32);this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8);this.flags&2&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16);this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}e.g.addBoxProcessor("saio",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("entry_count","uint",32);this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}));e.g.addBoxProcessor("saiz",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("default_sample_info_size","uint",8);this._procField("sample_count","uint",32);0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}));e.g.addBoxProcessor("senc",t);e.g.addBoxProcessor("uuid",(function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==qx[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))}))}i=Vx.prototype;i.destroy=function(){};i.isSupported=function(e,t){var n=e.startsWith("mss/");if(!this.g||!n)return!1;if(t)return nt(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return nt(t)||nt(e)};i.convertCodecs=function(e,t){return t.replace("mss/","")};i.getOrginalMimeType=function(){return this.h};i.transmux=function(e,t,n){if(!n)return Promise.resolve(ct(e));if(!t.mssPrivateData)return Promise.reject(new Se(2,3,3020));try{var i,r=this.g.parseBuffer(e),a=r.fetch("tfhd");a.track_ID=t.id+1;var o=r.fetch("tfdt"),s=r.fetch("traf");null===o&&(o=this.g.createFullBox("tfdt",s,a),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=r.fetch("sepiff");if(null!==d){d.type="senc";d.usertype=void 0;var h=r.fetch("saio");if(null===h){h=this.g.createFullBox("saio",s);h.version=0;h.flags=0;h.entry_count=1;h.offset=[0];var f=this.g.createFullBox("saiz",s);f.version=0;f.flags=0;f.sample_count=d.sample_count;f.default_sample_info_size=0;f.sample_info_size=[];if(d.flags&2)for(i=0;i<d.sample_count;i+=1)f.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else f.default_sample_info_size=8}}a.flags&=16777214;a.flags|=131072;u.flags|=1;var p=r.fetch("moof");u.data_offset=p.getLength()+8;var g=r.fetch("saio");null!==g&&(g.offset[0]=Hx(p,"traf")+Hx(s,"senc")+16);var m=ct(r.write());return Promise.resolve(m)}catch(e){return e instanceof Se?Promise.reject(e):Promise.reject(new Se(2,3,3022))}};function Hx(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}q("shaka.transmuxer.MssTransmuxer",Vx);Vx.prototype.transmux=Vx.prototype.transmux;Vx.prototype.getOrginalMimeType=Vx.prototype.getOrginalMimeType;Vx.prototype.convertCodecs=Vx.prototype.convertCodecs;Vx.prototype.isSupported=Vx.prototype.isSupported;Vx.prototype.destroy=Vx.prototype.destroy;var qx=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Gt("mss/audio/mp4",(function(){return new Vx("mss/audio/mp4")}),zt);Gt("mss/video/mp4",(function(){return new Vx("mss/video/mp4")}),zt);function zx(e){var t=this;this.m=e;this.j=Tm.get("muxjs")();this.h=this.g=null;this.l=[];this.i=!1;this.j&&(this.g=new this.j.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",(function(e){t.l.push(Jr(e.initSegment,e.data))})),this.g.on("done",(function(){var e=Jr.apply(qr,d(t.l));t.h.resolve(e);t.i=!1})))}i=zx.prototype;i.destroy=function(){this.g&&this.g.dispose();this.g=null};i.isSupported=function(e,t){var n="mp2t"==e.toLowerCase().split(";")[0].split("/")[1];if(!this.j||!n)return!1;if(t)return nt(Kx(t,e));t=Kx("audio",e);e=Kx("video",e);return nt(t)||nt(e)};i.convertCodecs=function(e,t){return"mp2t"==t.toLowerCase().split(";")[0].split("/")[1]?Kx(e,t):t};function Kx(e,t){t=t.replace(/mp2t/i,"mp4");"audio"==e&&(t=t.replace("video","audio"));if(e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",i=e[1],r=Number(e[2]);n=("66"==i?n+"4200":"77"==i?n+"4d00":n+"6400")+(r>>4).toString(16);n+=(r&15).toString(16);t=t.replace(e[0],n)}return t}i.getOrginalMimeType=function(){return this.m};i.transmux=function(e){this.i=!0;this.h=new qi;this.l=[];e=ct(e);this.g.push(e);this.g.flush();this.i&&this.h.reject(new Se(2,3,3018));return this.h};q("shaka.transmuxer.MuxjsTransmuxer",zx);zx.prototype.transmux=zx.prototype.transmux;zx.prototype.getOrginalMimeType=zx.prototype.getOrginalMimeType;zx.prototype.convertCodecs=zx.prototype.convertCodecs;zx.prototype.isSupported=zx.prototype.isSupported;zx.prototype.destroy=zx.prototype.destroy;Gt("video/mp2t",(function(){return new zx("video/mp2t")}),zt);function Xx(e){this.j=e;this.g=0;this.h=new Map;this.i=null}i=Xx.prototype;i.destroy=function(){this.h.clear()};i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=en(e).split(","),i=Le("audio",n);n=Le("video",n);if(i&&n||i&&(i=Zt(i),!Wx.includes(i))||n&&(i=Zt(n),!Yx.includes(i)))return!1;if(t)return nt(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return nt(t)||nt(e)};i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=en(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t};i.getOrginalMimeType=function(){return this.j};i.transmux=function(e,t,n,i,r){this.i?this.i.clearData():this.i=new Zo;e=ct(e);var a=this.i.parse(e);e=[];var o=a.Rd();try{n=null;if("video"==r){switch(o.video){case"avc":for(var s=[],u=null,l=[],d=a.Xd(),h=0;h<d.length;h++){var f=d[h],p=void 0;h+1<d.length&&(p=d[h+1]);var g=a.rf(f,p);l=l.concat(g);var m=Dx(g);m&&(null==u&&(u=f.dts),p=void 0,p=h+1<d.length?(d[h+1].dts||0)-(f.dts||0):(f.dts||0)-(d[h-1].dts||0),s.push({data:m.data,size:m.data.byteLength,duration:p,zb:Math.round((f.pts||0)-(f.dts||0)),flags:{Eb:0,qb:0,pb:0,jb:0,kb:m.vg?2:1,Fb:m.vg?0:1}}))}var v=Mx(l);if(!v||null==u)throw new Se(2,3,3018);t.height=v.height;t.width=v.width;n={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,ab:[],ia:new Uint8Array([]),Da:v.Da,data:{Kb:this.g,baseMediaDecodeTime:u,$a:s},stream:t}}n&&(e.push(n),n=null)}if("audio"==r){switch(o.audio){case"aac":for(var y=[],b,w=null,T=c(a.Zb()),E=T.next();!E.done;E=T.next()){var x=E.value,A=x.data;if(A){a=0;b=Ex(A,a);if(!b)throw new Se(2,3,3018);t.audioSamplingRate=b.sampleRate;t.channelsCount=b.channelCount;null==w&&null!==x.pts&&(w=x.pts);for(;a<A.length;){var S=Tx(A,a);if(S){var I=S.Yd+S.U;a+I<=A.length&&y.push({data:A.subarray(a+S.Yd,a+I),size:S.U,duration:1024,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});a+=I}else a++}}}if(!b||null==w)throw new Se(2,3,3018);var k=b.sampleRate;a=w/9e4*k;n={id:t.id,type:"audio",codecs:b.Ga,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:k,duration:i,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:a,$a:y},stream:t};break;case"ac3":w=[];b=0;y=new Uint8Array([]);k=null;for(var _=c(a.Zb()),C=_.next();!C.done;C=_.next()){var M=C.value,D=M.data;null==k&&null!==M.pts&&(k=M.pts);for(a=0;a<D.length;){var R=Sx(D,a);R?(t.audioSamplingRate=R.sampleRate,t.channelsCount=R.channelCount,b=R.sampleRate,y=R.ia,w.push({data:D.subarray(a,a+R.U),size:R.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),a+=R.U):a++}}if(0==b||0==y.byteLength||null==k)throw new Se(2,3,3018);a=k/9e4*b;n={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:b,duration:i,ab:[],ia:y,Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:a,$a:w},stream:t};break;case"ec3":y=[];b=0;w=new Uint8Array([]);k=null;for(var L=c(a.Zb()),P=L.next();!P.done;P=L.next()){var N=P.value,O=N.data;null==k&&null!==N.pts&&(k=N.pts);for(a=0;a<O.length;){var U=_x(O,a);U?(t.audioSamplingRate=U.sampleRate,t.channelsCount=U.channelCount,b=U.sampleRate,w=U.ia,y.push({data:O.subarray(a,a+U.U),size:U.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),a+=U.U):a++}}if(0==b||0==w.byteLength||null==k)throw new Se(2,3,3018);a=k/9e4*b;n={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:b,duration:i,ab:[],ia:w,Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:a,$a:y},stream:t};break;case"mp3":y=[];var j;w=null;for(var B=c(a.Zb()),F=B.next();!F.done;F=B.next()){var V=F.value,G=V.data;if(G)for(null==w&&null!==V.pts&&(w=V.pts),a=0;a<G.length;){var H=Lx(G,a);H?(j||(j=H),a+H.U<=G.length&&y.push({data:G.subarray(a,a+H.U),size:H.U,duration:1152,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),a+=H.U):a++}}if(!j||null==w)throw new Se(2,3,3018);var q=j.sampleRate;a=w/9e4*q;n={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:q,duration:i,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:a,$a:y},stream:t}}n&&e.push(n)}}catch(e){return Promise.reject(e)}if(!e.length)return Promise.reject(new Se(2,3,3018));e=new Qv(e);this.h.has(t.id)?i=this.h.get(t.id):(i=e.initSegment(),this.h.set(t.id,i));t=ty(e);this.g++;t=Jr(i,t);return Promise.resolve(t)};q("shaka.transmuxer.TsTransmuxer",Xx);Xx.prototype.transmux=Xx.prototype.transmux;Xx.prototype.getOrginalMimeType=Xx.prototype.getOrginalMimeType;Xx.prototype.convertCodecs=Xx.prototype.convertCodecs;Xx.prototype.isSupported=Xx.prototype.isSupported;Xx.prototype.destroy=Xx.prototype.destroy;var Wx=["aac","ac-3","ec-3","mp3"],Yx=["avc"];Gt("video/mp2t",(function(){return new Xx("video/mp2t")}),Xt);function Jx(){}var Qx;function $x(){Qx?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Qx=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Zx):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Zx(e,t){var n=this,i;return O((function(r){if(1==r.g)return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Qx.call(n,e,t),2);i=r.h;if(cA(i))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Qx,r.return(i);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=eA;return r.return(eA.call(n,e,t))}))}function eA(e,t){var n=this,i,r,a,o,s,u,l,d,h,f;return O((function(p){if(1==p.g){console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess');i=lA(e);r=[];a=c(t);for(o=a.next();!o.done;o=a.next())s=o.value,u=tA(s.videoCapabilities,i),l=tA(s.audioCapabilities,i),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||(d=Object.assign({},s),d.videoCapabilities=u,d.audioCapabilities=l,r.push(d));if(!r.length)throw h=Error("Unsupported keySystem or supportedConfigurations."),h.name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return E(p,Qx.call(n,e,r),2)}f=p.h;return p.return(new uA(f,i))}))}function tA(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}q("EmeEncryptionSchemePolyfill",Jx);Jx.install=$x;function nA(){}var iA;function rA(){iA?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(iA=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=aA):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function aA(e){var t=this,n,i,r;return O((function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(a,iA.call(t,e),2);case 2:n=a.h;if(!e.keySystemConfiguration)return a.return(n);if((i=n.keySystemAccess)&&cA(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=iA,a.return(n);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=oA;if(i){a.D(3);break}r=n;return E(a,sA(e),4);case 4:return r.keySystemAccess=a.h,a.return(n);case 3:return a.return(oA.call(t,e))}}))}function oA(e){var t=this,n,i,r,a,o,s,u,l;return O((function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,r=i.keySystem,a=i.audio&&i.audio.encryptionScheme,o=i.video&&i.video.encryptionScheme,n=lA(r),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},a&&a!=n||o&&o!=n)?c.return(s):E(c,iA.call(t,e),2);case 2:u=c.h;if(u.keySystemAccess){u.keySystemAccess=new uA(u.keySystemAccess,n);c.D(3);break}if(!e.keySystemConfiguration){c.D(3);break}l=u;return E(c,sA(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(u)}}))}function sA(e){var t,n;return O((function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],o=[];r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType});r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType});r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes};a.length&&(r.audioCapabilities=a);o.length&&(r.videoCapabilities=o);t=r;return E(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}n=i.h;return i.return(n)}))}q("McEncryptionSchemePolyfill",nA);nA.install=rA;function uA(e,t){this.h=e;this.g=t;this.keySystem=e.keySystem}uA.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=c(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e};uA.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function lA(e){if(e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3"))return"cenc";if(e.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!");return null}function cA(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return(e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&void 0!==e.encryptionScheme?!0:!1}function dA(){}function hA(){$x();rA()}q("EncryptionSchemePolyfills",dA);dA.install=hA;"undefined"!==typeof n&&n.exports&&(n.exports=dA);for(var fA={ach:{u:"Lwo",A:"Acholi"},ady:{u:"",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Ti",A:"Akan"},ar:{u:"",A:"Arabic"},"ar-AR":{u:"",A:"Arabic"},"ar-MA":{u:"",A:"Arabic (Morocco)"},"ar-SA":{u:" ()",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azrbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azrbaycan dili",A:"Azerbaijani"},"be-BY":{u:"",A:"Belarusian"},bg:{u:"",A:"Bulgarian"},"bg-BG":{u:"",A:"Bulgarian"},bn:{u:"",A:"Bengali"},"bn-IN":{u:" ()",A:"Bengali (India)"},"bn-BD":{u:"()",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Catal",A:"Catalan"},"ca-ES":{u:"Catal",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:" (tsalagi)",A:"Cherokee"},cs:{u:"etina",A:"Czech"},"cs-CZ":{u:"etina",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (sterreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbina",A:"Lower Sorbian"},el:{u:"",A:"Greek"},"el-GR":{u:"",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Espaol",A:"Spanish"},"es-AR":{u:"Espaol (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-CL":{u:"Espaol (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Espaol (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Espaol (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Espaol (Espaa)",A:"Spanish (Spain)"},"es-LA":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-NI":{u:"Espaol (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Espaol (Mxico)",A:"Spanish (Mexico)"},"es-US":{u:"Espaol (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Espaol (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"",A:"Persian"},"fa-IR":{u:"",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Froyskt",A:"Faroese"},fr:{u:"Franais",A:"French"},"fr-CA":{u:"Franais (Canada)",A:"French (Canada)"},"fr-FR":{u:"Franais (France)",A:"French (France)"},"fr-BE":{u:"Franais (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Franais (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avae'",A:"Guarani"},"gu-IN":{u:"",A:"Gujarati"},"gx-GR":{u:" ",A:"Classical Greek"},he:{u:"",A:"Hebrew"},"he-IL":{u:"",A:"Hebrew"},hi:{u:"",A:"Hindi"},"hi-IN":{u:"",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbina",A:"Upper Sorbian"},ht:{u:"Kreyl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"slenska",A:"Icelandic"},"is-IS":{u:"slenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"",A:"Japanese"},"ja-JP":{u:"",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"",A:"Georgian"},"kk-KZ":{u:"",A:"Kazakh"},km:{u:"",A:"Khmer"},"km-KH":{u:"",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"",A:"Kannada"},"kn-IN":{u:" (India)",A:"Kannada (India)"},ko:{u:"",A:"Korean"},"ko-KR":{u:" ()",A:"Korean (Korea)"},ku:{u:"Kurd",A:"Kurdish"},"ku-TR":{u:"Kurd",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Ltzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lmbrgs",A:"Limburgish"},lt:{u:"Lietuvi",A:"Lithuanian"},"lt-LT":{u:"Lietuvi",A:"Lithuanian"},lv:{u:"Latvieu",A:"Latvian"},"lv-LV":{u:"Latvieu",A:"Latvian"},mai:{u:", ",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"",A:"Macedonian"},"mk-MK":{u:" ()",A:"Macedonian (Macedonian)"},ml:{u:"",A:"Malayalam"},"ml-IN":{u:"",A:"Malayalam"},"mn-MN":{u:"",A:"Mongolian"},mr:{u:"",A:"Marathi"},"mr-IN":{u:"",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"",A:"Burmese"},nb:{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},ne:{u:"",A:"Nepali"},"ne-NP":{u:"",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (Belgi)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"",A:"Oriya"},pa:{u:"",A:"Punjabi"},"pa-IN":{u:" ( )",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"",A:"Pashto"},pt:{u:"Portugus",A:"Portuguese"},"pt-BR":{u:"Portugus (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Portugus (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Romn",A:"Romanian"},"ro-RO":{u:"Romn",A:"Romanian"},ru:{u:"",A:"Russian"},"ru-RU":{u:"",A:"Russian"},"sa-IN":{u:"",A:"Sanskrit"},"se-NO":{u:"Davvismegiella",A:"Northern Smi"},"si-LK":{u:"",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenina",A:"Slovak"},"sk-SK":{u:"Slovenina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenina",A:"Slovenian"},"sl-SI":{u:"Slovenina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"",A:"Serbian"},"sr-RS":{u:" (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"",A:"Tamil"},"ta-IN":{u:"",A:"Tamil"},te:{u:"",A:"Telugu"},"te-IN":{u:"",A:"Telugu"},tg:{u:" ",A:"Tajik"},"tg-TJ":{u:"",A:"Tajik"},th:{u:"",A:"Thai"},"th-TH":{u:" ()",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Trke",A:"Turkish"},"tr-TR":{u:"Trke",A:"Turkish"},"tt-RU":{u:"",A:"Tatar"},uk:{u:"",A:"Ukrainian"},"uk-UA":{u:"",A:"Ukrainian"},ur:{u:"",A:"Urdu"},"ur-PK":{u:"",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Ting Vit",A:"Vietnamese"},"vi-VN":{u:"Ting Vit",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"",A:"Yiddish"},"yi-DE":{u:" (German)",A:"Yiddish (German)"},zh:{u:"",A:"Chinese"},"zh-HANS":{u:"",A:"Chinese Simplified"},"zh-HANT":{u:"",A:"Chinese Traditional"},"zh-CN":{u:"",A:"Chinese Simplified (China)"},"zh-HK":{u:"",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},pA=c(Object.keys(fA)),gA=pA.next();!gA.done;gA=pA.next()){var mA=gA.value;fA[mA.toLowerCase()]=fA[mA]}function vA(e,t){var n=this;this.parent=e;this.controls=t;this.eventManager=new gr;this.localization=this.controls.ya;this.player=this.controls.zc();this.video=this.controls.Tb();this.adManager=this.player.Qd();this.ad=t.getAd();this.eventManager.o(this.adManager,"ad-started",(function(e){n.ad=e.ad}));this.eventManager.o(this.adManager,"ad-stopped",(function(){n.ad=null}))}vA.prototype.release=function(){this.eventManager.release();this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null};q("shaka.ui.Element",vA);vA.prototype.release=vA.prototype.release;function yA(e){return bA(e,"shaka-back-to-overflow-button")}function bA(e,t){e=e.getElementsByClassName(t);return e.length?e[0]:null}function wA(e){e&&(e=bA(e,"shaka-chosen-item"))&&e.parentElement.focus()}function TA(){var e=Sl("i");e.classList.add("material-icons-round");e.classList.add("shaka-chosen-item");e.textContent="done";e.ariaHidden="true";return e}function EA(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function xA(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60);e=Math.floor(e%60);10>e&&(e="0"+e);e=i+":"+e;t&&(10>i&&(e="0"+e),e=n+":"+e);return e}function AA(e,t){vA.call(this,e,t);var n=this;this.i=Sl("div");this.i.classList.add("shaka-ad-counter");this.parent.appendChild(this.i);this.h=Sl("span");this.h.classList.add("shaka-ad-counter-span");this.i.appendChild(this.h);this.g=new fn((function(){var e=Math.round(n.ad.getRemainingTime()),t=n.ad.getDuration();-1!=e&&-1!=t&&(0<e?(e=xA(t-e,!1)+" / "+xA(t,!1),1<n.ad.getSequenceLength()?n.h.textContent=e:(t=n.localization.resolve("AD_TIME"),n.h.textContent=t.replace("[AD_TIME]",e))):(n.g.stop(),n.h.textContent=""))}));this.eventManager.o(this.localization,"locale-updated",(function(){}));this.eventManager.o(this.localization,"locale-changed",(function(){}));this.eventManager.o(this.adManager,"ad-started",(function(){n.g.Ca();n.g.ha(.5)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){n.g.stop();n.h.textContent=""}));this.ad&&(this.g.Ca(),this.g.ha(.5))}y(AA,vA);AA.prototype.release=function(){this.g.stop();this.g=null;vA.prototype.release.call(this)};q("shaka.ui.AdCounter",AA);function SA(e,t){vA.call(this,e,t);var n=this;this.g=Sl("div");this.g.classList.add("shaka-ad-position");EA(this.g,!1);this.parent.appendChild(this.g);this.h=Sl("span");this.h.classList.add("shaka-ad-position-span");this.g.appendChild(this.h);this.eventManager.o(this.localization,"locale-updated",(function(){n.ad&&IA(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){n.ad&&IA(n)}));this.eventManager.o(this.adManager,"ad-started",(function(){IA(n)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){n.h.textContent="";EA(n.g,!1)}));this.ad&&IA(this)}y(SA,vA);function IA(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t));EA(e.g,!0)}}q("shaka.ui.AdPosition",SA);function kA(e,t){vA.call(this,e,t);var n=this;this.button=Il();this.parent.appendChild(this.button);this.eventManager.o(this.localization,"locale-updated",(function(){n.g()}));this.eventManager.o(this.localization,"locale-changed",(function(){n.g()}));this.eventManager.o(this.video,"play",(function(){n.g();n.h()}));this.eventManager.o(this.video,"pause",(function(){n.g();n.h()}));this.eventManager.o(this.video,"seeking",(function(){n.g();n.h()}));this.eventManager.o(this.adManager,"ad-paused",(function(){n.g();n.h()}));this.eventManager.o(this.adManager,"ad-resumed",(function(){n.g();n.h()}));this.eventManager.o(this.adManager,"ad-started",(function(){n.g();n.h()}));this.eventManager.o(this.button,"click",(function(){n.ad&&n.ad.isLinear()?QA(n.controls):JA(n.controls)}));this.ad&&(this.g(),this.h())}y(kA,vA);kA.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.s.paused&&!e.X;return e};kA.prototype.g=function(){};kA.prototype.h=function(){};q("shaka.ui.PlayButton",kA);function _A(e,t){kA.call(this,e,t);this.button.classList.add("shaka-play-button");this.button.classList.add("shaka-no-propagation");this.h();this.g()}y(_A,kA);_A.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")};_A.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)};q("shaka.ui.BigPlayButton",_A);function CA(t,n){vA.call(this,t,n);var i=this;this.j=this.controls.h;this.h=this.controls.g;this.i=[];this.g=Sl("div");this.g.classList.add("shaka-no-propagation");this.g.classList.add("shaka-context-menu");this.g.classList.add("shaka-hidden");this.h.appendChild(this.g);this.eventManager.o(this.h,"contextmenu",(function(e){if(i.g.classList.contains("shaka-hidden")){e.preventDefault();var t=i.h.getBoundingClientRect();i.g.style.left=e.clientX-t.left+"px";i.g.style.top=e.clientY-t.top+"px";EA(i.g,!0)}else EA(i.g,!1)}));this.eventManager.o(e,"click",(function(){EA(i.g,!1)}));DA(this)}y(CA,vA);CA.prototype.release=function(){this.h=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[];vA.prototype.release.call(this)};function MA(e,t){RA.set(e,t)}function DA(e){for(var t=c(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var i=RA.get(n);i?e.i.push(i.create(e.g,e.controls)):Q("Unrecognized context menu element:",n)}}q("shaka.ui.ContextMenu",CA);CA.registerElement=MA;var RA=new Map;function LA(e,t,n,i){vA.call(this,e,t);var r=this;this.container=Sl("div");this.container.classList.add("shaka-range-container");this.container.classList.add.apply(this.container.classList,d(n));this.h=!1;this.bar=document.createElement("input");this.C=new fn((function(){r.onChangeEnd();r.h=!1}));this.bar.classList.add("shaka-range-element");this.bar.classList.add.apply(this.bar.classList,d(i));this.bar.type="range";this.bar.step="any";this.bar.min="0";this.bar.max="1";this.bar.value="0";this.container.appendChild(this.bar);this.parent.appendChild(this.container);this.eventManager.o(this.bar,"mousedown",(function(){r.controls.ic()&&(r.h=!0,r.onChangeStart())}));this.eventManager.o(this.bar,"touchstart",(function(e){r.controls.ic()&&(r.h=!0,PA(r,e),r.onChangeStart())}));this.eventManager.o(this.bar,"input",(function(){r.onChange()}));this.eventManager.o(this.bar,"touchmove",(function(e){r.h&&(PA(r,e),r.onChange())}));this.eventManager.o(this.bar,"touchend",(function(e){r.h&&(r.h=!1,PA(r,e),r.onChangeEnd())}));this.eventManager.o(this.bar,"touchcancel",(function(e){r.h&&(r.h=!1,PA(r,e),r.onChangeEnd())}));this.eventManager.o(this.bar,"mouseup",(function(){r.h&&(r.h=!1,r.onChangeEnd())}));this.eventManager.o(this.bar,"blur",(function(){r.h&&(r.h=!1,r.onChangeEnd())}));this.eventManager.o(this.bar,"contextmenu",(function(e){e.preventDefault();e.stopPropagation()}))}y(LA,vA);i=LA.prototype;i.release=function(){this.C&&(this.C.stop(),this.C=null);vA.prototype.release.call(this)};i.setRange=function(e,t){this.bar.min=e;this.bar.max=t};i.onChangeStart=function(){};i.onChange=function(){};i.onChangeEnd=function(){};i.changeTo=function(e){this.h||(this.h=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e;this.onChange();this.C.R(.5)};i.getValue=function(){return parseFloat(this.bar.value)};i.setValue=function(e){this.h||(this.bar.value=e)};function PA(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var r=parseFloat(e.bar.max);n=t+(r-t)/i.width*(n.clientX-i.left);n<t?n=t:n>r&&(n=r);e.bar.value=n}q("shaka.ui.RangeElement",LA);LA.prototype.setValue=LA.prototype.setValue;LA.prototype.getValue=LA.prototype.getValue;LA.prototype.changeTo=LA.prototype.changeTo;LA.prototype.onChangeEnd=LA.prototype.onChangeEnd;LA.prototype.onChange=LA.prototype.onChange;LA.prototype.onChangeStart=LA.prototype.onChangeStart;LA.prototype.setRange=LA.prototype.setRange;function NA(e,t){LA.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.B=Sl("div");this.B.classList.add("shaka-ad-markers");this.container.insertBefore(this.B,this.container.childNodes[0]);this.F=this.controls.h;this.l=new fn((function(){var e=n.getValue();n.player.S()||e==n.video.duration&&(e-=.001);n.video.currentTime=e}));this.G=new fn((function(){OA(n)}));this.I=!1;this.i=Sl("div");this.i.id="shaka-player-ui-thumbnail-container";this.g=Sl("img");this.g.id="shaka-player-ui-thumbnail-image";this.g.draggable=!1;this.m=Sl("div");this.m.id="shaka-player-ui-thumbnail-time";this.i.appendChild(this.g);this.i.appendChild(this.m);this.container.appendChild(this.i);this.H=!1;this.j=new fn((function(){GA(n)}));this.s=[];this.eventManager.o(this.localization,"locale-updated",(function(){return BA(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){return BA(n)}));this.eventManager.o(this.adManager,"ad-started",(function(){jA(n)||EA(n.container,!1)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){jA(n)&&EA(n.container,!0)}));this.eventManager.o(this.adManager,"ad-cue-points-changed",(function(e){n.s=e.cuepoints;UA(n)}));this.eventManager.o(this.player,"unloading",(function(){n.s=[];UA(n)}));this.eventManager.o(this.bar,"mousemove",(function(e){if(n.player.Td().length){var t=n.bar.getBoundingClientRect(),i=parseFloat(n.bar.min);e=e.clientX-t.left;FA(n,e,Math.round(i+(parseFloat(n.bar.max)-i)/t.width*e))}else GA(n)}));this.eventManager.o(this.container,"mouseleave",(function(){n.j.stop();n.j.R(.25)}));this.setValue(this.video.currentTime);this.update();BA(this);this.ad&&EA(this.container,!1)}y(NA,LA);i=NA.prototype;i.release=function(){this.l&&(this.l.stop(),this.l=null,this.G.stop(),this.G=null);LA.prototype.release.call(this)};i.onChangeStart=function(){this.I=!this.video.paused;this.controls.Ef(!0);this.video.pause();this.j.stop();this.H=!0};i.onChange=function(){if(this.video.duration)if(this.update(),this.l.R(.125),this.player.Td().length){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),n=this.bar.getBoundingClientRect(),i=Math.round(this.getValue());FA(this,(i-e)/((t-e)/n.width),i)}else GA(this)};i.onChangeEnd=function(){this.l.Ca();this.controls.Ef(!1);this.I&&this.video.play();this.H&&(this.H=!1,this.j.stop(),this.j.R(.25))};i.isShowing=function(){return!this.container.classList.contains("shaka-hidden")};i.update=function(){var e=this.F.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0,a=this.player.Aa(),o=a.end-a.start;this.setRange(a.start,a.end);jA(this)?(EA(this.container,!0),0==n?this.container.style.background=e.base:(n=(Math.max(i,a.start)-a.start)/o||0,r=(Math.min(r,a.end)-a.start)/o||0,t=(Math.min(Math.max(t,a.start),a.end)-a.start)/o||0,this.container.style.background="linear-gradient("+["to right",(this.F.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")")):EA(this.container,!1)};function OA(e){if(e.s.length){for(var t=e.player.Aa(),n=t.end-t.start,i=["to right"],r=[],a=e.F.seekBarColors.adBreaks,o=!1,s=c(e.s),u=s.next();!u.done;u=s.next())if(u=u.value,-1!=u.start||u.end||(o=!0),u.start>=t.start&&u.start<t.end&&!(u.end&&u.end>t.end)){var l=(u.start-t.start)/n||0,d=l+.01;u.end&&(d=(u.end-t.start)/n||0);r.push({start:l,end:d})}t=c(r);for(u=t.next();!u.done;u=t.next())n=u.value,i.push("transparent "+100*n.start+"%"),i.push(a+" "+100*n.start+"%"),i.push(a+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");o&&(i.push("transparent 99%"),i.push(a+" 99%"));e.B.style.background="linear-gradient("+i.join(",")+")"}else e.B.style.background="transparent"}function UA(e){OA(e);var t=e.player.Aa();t=t.end-t.start;e.player.S()&&5<t&&e.G.ha(1)}function jA(e){var t=e.player.Aa();t=t.end-t.start;return e.player.S()&&5>t?!1:null==e.ad||!e.ad.isLinear()}function BA(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function FA(e,t,n){var i,r,a,o,s,u,l,c,d,h;O((function(f){if(1==f.g){i=VA(e);if(!i)return GA(e),f.return();0>n&&(n=0);r=e.player.Aa();a=Math.max(Math.ceil(r.start),Math.min(Math.floor(r.end),n));return E(f,e.player.pg(i.id,a),2)}o=f.h;if(!o||!o.uris.length)return GA(e),f.return();e.player.S()?(s=r.end-n,e.m.textContent=1>s?e.localization.resolve("LIVE"):"-"+HA(s)):e.m.textContent=HA(n);u=e.i.clientWidth;l=Math.floor(9*u/16);e.i.style.height=l+"px";e.i.style.top=-(l- -10)+"px";c=Math.min(e.bar.offsetWidth-u,Math.max(0,t-u/2));e.i.style.left=c+"px";e.i.style.visibility="visible";d=o.uris[0].split("#xywh=")[0];if(d!==e.g.src){try{e.i.removeChild(e.g)}catch(e){}e.g=Sl("img");e.g.id="shaka-player-ui-thumbnail-image";e.g.draggable=!1;e.g.src=d;e.i.insertBefore(e.g,e.i.firstChild)}h=u/o.width;o.imageHeight?e.g.height=o.imageHeight:o.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain");o.imageWidth?e.g.width=o.imageWidth:o.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain");e.g.style.left="-"+h*o.positionX+"px";e.g.style.top="-"+h*o.positionY+"px";e.g.style.transform="scale("+h+")";e.g.style.transformOrigin="left top";l=Math.floor(u*o.height/o.width);e.i.style.height=l+"px";e.i.style.top=-(l- -10)+"px";x(f)}))}function VA(e){var t=e.player.Td();if(!t.length)return null;for(var n={},i=c(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),r=i.next();!r.done;n={Fe:n.Fe,De:n.De},r=i.next())if(n.Fe=r.value,n.De=e.player.getStats().estimatedBandwidth,(r=t.filter(function(e){return function(t){return t.mimeType.toLowerCase()===e.Fe&&t.bandwidth<.01*e.De}}(n)).sort((function(e,t){return t.bandwidth-e.bandwidth})))&&r.length)return r[0];return t[0]}function GA(e){e.i.style.visibility="hidden";e.m.textContent=""}function HA(e){var t=Math.round(e);e=Math.floor(t/3600);var n=Math.floor((t-3600*e)/60);t=t-3600*e-60*n;10>t&&(t="0"+t);return 0<e?(10>n&&(n="0"+n),e+":"+n+":"+t):n+":"+t}q("shaka.ui.SeekBar",NA);function qA(){}qA.prototype.create=function(e,t){return new NA(e,t)};NA.Factory=qA;function zA(e,t,n,i){ae.call(this);var r=this;this.P=!0;this.h=i;this.C=new Gh(n,e,this.h.castReceiverAppId,this.h.castAndroidReceiverCompatible);this.hb=!0;this.s=this.C.Tb();this.B=n;this.F=this.C.zc();this.xa=e;this.j=t;this.fb=this.F.Qd();this.l=this.m=null;this.X=!1;this.G=[];this.Pb=[];this.xb=!1;this.Y=new fn((function(){r.j.style.cursor="none";r.xb=!1;cS(r)}));this.$=new fn((function(){r.g.removeAttribute("shown");r.I.R(2)}));this.I=new fn((function(){for(var e=c(r.G),t=e.next();!t.done;t=e.next())EA(t.value,!1)}));this.Ea=new fn((function(){r.ic()&&gS(r)}));this.J=null;this.H=[];this.ya=yS();this.i=new gr;this.configure(this.h);oS(this);this.ea=new Set;fS(this);this.Ea.ha(.125);this.i.o(this.ya,"locale-changed",(function(e){r.fb.setLocale(e.locales[0])}))}y(zA,ae);i=zA.prototype;i.destroy=function(){var e=this;return O((function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.B){t.D(2);break}return E(t,document.exitPictureInPicture(),2);case 2:e.i&&(e.i.release(),e.i=null);e.Y&&(e.Y.stop(),e.Y=null);e.$&&(e.$.stop(),e.$=null);e.I&&(e.I.stop(),e.I=null);e.Ea&&(e.Ea.stop(),e.Ea=null);KA(e);e.g&&(e.j.removeChild(e.g),e.g=null);if(!e.C){t.D(4);break}return E(t,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.xa){t.D(6);break}return E(t,e.xa.destroy(),7);case 7:e.xa=null;case 6:e.F=null,e.B=null,e.s=null,e.ya=null,e.ea.clear(),ae.prototype.release.call(e),x(t)}}))};function KA(e){for(var t=c(e.H),n=t.next();!n.done;n=t.next())n.value.release();e.H=[]}function XA(e,t){bS.set(e,t)}i.Zg=function(e){this.hb=e;fS(this)};i.Zh=function(){cS(this)};i.configure=function(e){this.h=e;this.C.dg(e.castReceiverAppId,e.castAndroidReceiverCompatible);this.l&&(this.l=null);this.vb&&(this.vb=null);this.gb&&(this.gb=null);this.g?(kl(this.g),KA(this)):($A(this),aS(this));this.j.classList.add("shaka-video-container");this.B.classList.add("shaka-video");eS(this);this.h.addBigPlayButton&&ZA(this);this.h.customContextMenu&&(this.gb=new CA(this.V,this),this.H.push(this.gb));this.Z||nS(this);this.ib=Sl("div");this.ib.classList.add("shaka-server-side-ad-container");this.g.appendChild(this.ib);iS(this);this.G=Array.from(this.j.getElementsByClassName("shaka-settings-menu"));this.G.push.apply(this.G,d(Array.from(this.j.getElementsByClassName("shaka-overflow-menu"))));rS(this);this.Pb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over"));cS(this);e=c(this.j.getElementsByClassName("shaka-no-propagation"));for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=function(e){return e.stopPropagation()};this.i.o(t,"click",n);this.i.o(t,"dblclick",n)}};i.Af=function(e){(this.P=e)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls");cS(this)};i.Ig=function(e){this.B.controls=e;this.B.tabIndex=e?0:-1;e&&this.Af(!1)};i.getAd=function(){return this.m};i.mh=function(){return this.C};i.yh=function(){return this.ya};i.Ph=function(){return this.j};i.Tb=function(){return this.s};i.xh=function(){return this.B};i.zc=function(){return this.F};i.wh=function(){return this.xa};i.rh=function(){return this.g};i.Ih=function(){return this.ib};i.oh=function(){return this.O};i.ph=function(){return this.h};i.Yh=function(){return this.X};i.Ef=function(e){this.X=e};i.Uh=function(){return this.hb};i.ng=function(){return this.l?this.l.getValue():this.s.currentTime};i.Jg=function(e){this.J=e};i.Ld=function(){return this.G.some((function(e){return!e.classList.contains("shaka-hidden")}))};i.Bc=function(){this.I.Ca()};i.$d=function(){return document.fullscreenEnabled||this.B.webkitSupportsFullscreen?!0:!1};i.Dc=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.B;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function WA(e){var t,n,i;return O((function(r){switch(r.g){case 1:A(r,2);if(!document.fullscreenEnabled){t=e.B;t.webkitSupportsFullscreen&&t.webkitEnterFullscreen();r.D(4);break}if(!document.pictureInPictureElement){r.D(5);break}return E(r,document.exitPictureInPicture(),5);case 5:return n=e.h.fullScreenElement,E(r,n.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.h.forceLandscapeOnFullscreen||!screen.orientation){r.D(4);break}A(r,9);return E(r,screen.orientation.lock("landscape"),11);case 11:I(r,4,2);break;case 9:k(r,2);case 4:I(r,0);break;case 2:i=k(r),e.dispatchEvent(new K("error",(new Map).set("detail",i))),x(r)}}))}function YA(e){var t;return O((function(n){if(!document.fullscreenEnabled)return t=e.B,t.webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.D(0);screen.orientation&&screen.orientation.unlock();return E(n,document.exitFullscreen(),0)}))}i.Jf=function(){var e=this;return O((function(t){return e.Dc()?E(t,YA(e),0):E(t,WA(e),0)}))};i.Ng=function(){EA(this.K,!0);EA(this.O,!0);this.g.setAttribute("ad-active","true")};i.qg=function(){EA(this.K,!1);EA(this.O,!1);this.g.removeAttribute("ad-active")};function JA(e){e.P&&e.s.duration&&(e.F.Pe(),e.s.paused&&!e.X?e.s.play():e.s.pause())}function QA(e){e.m&&e.m.isPaused()?e.m.play():e.m&&e.m.pause()}function $A(e){e.g=Sl("div");e.g.classList.add("shaka-controls-container");e.j.appendChild(e.g);e.j.setAttribute("shaka-controls","true");e.i.o(e.g,"touchstart",(function(t){e.s.duration&&(e.ic()?e.J=Date.now():(uS(e,t),t.cancelable&&t.preventDefault()))}),{passive:!1});e.i.o(e.g,"click",(function(){dS(e)}));e.i.o(e.g,"dblclick",(function(){e.h.doubleClickForFullscreen&&e.$d()&&e.Jf()}))}function ZA(e){var t=Sl("div");t.classList.add("shaka-play-button-container");e.g.appendChild(t);e.vb=new _A(t,e);e.H.push(e.vb)}function eS(e){var t=Sl("div");t.classList.add("shaka-scrim-container");e.g.appendChild(t)}function tS(e){e.K=Sl("div");e.K.classList.add("shaka-ad-controls");var t=null!=e.m&&e.m.isLinear();EA(e.K,t);e.L.appendChild(e.K);t=new SA(e.K,e);e.H.push(t);t=new AA(e.K,e);e.H.push(t)}function nS(e){e.Z=Sl("div");e.Z.classList.add("shaka-spinner-container");e.j.appendChild(e.Z);var t=Sl("div");t.classList.add("shaka-spinner");e.Z.appendChild(t);e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("shaka-spinner-svg");e.setAttribute("viewBox","0 0 30 30");t.appendChild(e);t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.classList.add("shaka-spinner-path");t.setAttribute("cx","15");t.setAttribute("cy","15");t.setAttribute("r","14.5");t.setAttribute("fill","none");t.setAttribute("stroke-width","1");t.setAttribute("stroke-miterlimit","10");e.appendChild(t)}function iS(e){e.L=Sl("div");e.L.classList.add("shaka-bottom-controls");e.L.classList.add("shaka-no-propagation");e.g.appendChild(e.L);e.i.o(e.L,"click",(function(t){t.target.closest(".shaka-overflow-button")||e.Bc()}));tS(e);e.V=Sl("div");e.V.classList.add("shaka-controls-button-panel");e.V.classList.add("shaka-show-controls-on-mouse-over");e.h.enableTooltips&&e.V.classList.add("shaka-tooltips-on");e.L.appendChild(e.V);for(var t=c(e.h.controlPanelElements),n=t.next();!n.done;n=t.next())n=n.value,bS.get(n)?(n=bS.get(n).create(e.V,e),e.H.push(n)):Q("Unrecognized control panel element requested:",n)}function rS(e){if(e.h.addSeekBar)e.l=wS.create(e.L,e),e.H.push(e.l);else{e=c(e.G);for(var t=e.next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}}function aS(e){e.O=Sl("div");e.O.classList.add("shaka-client-side-ad-container");EA(e.O,!1);e.i.o(e.O,"click",(function(){dS(e)}));e.j.appendChild(e.O)}function oS(t){t.i.o(t.F,"buffering",(function(){t.P&&EA(t.Z,t.F.pd())}));t.P&&EA(t.Z,t.F.pd());t.i.o(e,"keydown",(function(e){mS(t,e)}));t.i.o(e,"click",(function(){return t.Bc()}));t.i.o(t,"submenuopen",(function(){t.Bc()}));t.i.o(t.s,"play",(function(){cS(t)}));t.i.o(t.s,"pause",(function(){cS(t)}));t.i.o(t.j,"mousemove",(function(e){uS(t,e)}));t.i.o(t.j,"touchmove",(function(e){uS(t,e)}),{passive:!0});t.i.o(t.j,"touchend",(function(e){uS(t,e)}),{passive:!0});t.i.o(t.j,"mouseleave",(function(){t.J||t.Y.Ca()}));t.i.o(t.C,"caststatuschanged",(function(){fS(t)}));t.i.o(t.j,"keydown",(function(e){var n=document.activeElement,i=n&&n.classList?n.classList.contains("shaka-volume-bar"):!1,r=n&&n.classList&&n.classList.contains("shaka-seek-bar");t.g.contains(n)&&uS(t,e);if(t.h.enableKeyboardPlaybackControls){n=t.h.keyboardSeekDistance;var a=t.h.keyboardLargeSeekDistance;switch(e.key){case"ArrowLeft":t.l&&!i&&0<n&&(e.preventDefault(),pS(t,t.l.getValue()-n));break;case"ArrowRight":t.l&&!i&&0<n&&(e.preventDefault(),pS(t,t.l.getValue()+n));break;case"PageDown":t.l&&r&&0<n&&(e.preventDefault(),pS(t,t.l.getValue()-a));break;case"PageUp":t.l&&r&&0<n&&(e.preventDefault(),pS(t,t.l.getValue()+a));break;case"Home":t.l&&pS(t,t.F.Aa().start);break;case"End":t.l&&pS(t,t.F.Aa().end);break;case" ":r&&hS(t)}}}));t.i.o(t.j,"keyup",(function(e){t.ea.delete(e.key)}));t.i.o(t.fb,"ad-started",(function(e){t.m=e.ad;t.Ng()}));t.i.o(t.fb,"ad-stopped",(function(){t.m=null;t.qg()}));screen.orientation&&t.i.o(screen.orientation,"change",(function(){return O((function(e){return E(e,sS(t),0)}))}))}function sS(e){return O((function(t){return e.s&&0!=e.s.readyState&&!e.C.sa()&&e.h.enableFullscreenOnRotation&&e.$d()?screen.orientation.type.includes("landscape")&&!e.Dc()?E(t,WA(e),0):screen.orientation.type.includes("portrait")&&e.Dc()?E(t,YA(e),0):t.D(0):t.return()}))}function uS(e,t){"mousemove"==t.type&&(e.g.classList.remove("shaka-keyboard-navigation"),cS(e));"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.J=Date.now():e.J+1e3<Date.now()&&(e.J=null);e.J&&"mousemove"==t.type||(e.j.style.cursor="",e.xb=!0,e.I.stop(),e.ic()||(gS(e),cS(e)),e.Y.stop(),"touchend"!=t.type&&"keyup"!=t.type&&e.J||e.Y.R(3))}function lS(t){return e.matchMedia("hover: hover").matches?t.Pb.some((function(e){return e.matches(":hover")})):!1}function cS(e){var t=e.m?e.m.isPaused():!1,n=e.s.paused&&!e.X,i=e.g.classList.contains("shaka-keyboard-navigation");t||(!e.m||!e.m.isLinear())&&n||e.xb||i||lS(e)?(gS(e),e.g.setAttribute("shown","true"),e.$.stop()):e.$.R(e.h.fadeDelay)}function dS(e){e.P&&(e.Ld()?e.I.Ca():e.h.singleClickForPlayAndPause&&hS(e))}function hS(e){e.m&&e.m.isLinear()?QA(e):JA(e)}function fS(e){var t=e.C.sa();e.dispatchEvent(new K("caststatuschanged",(new Map).set("newStatus",t)));t?e.g.setAttribute("casting","true"):e.g.removeAttribute("casting")}i.ic=function(){return this.P?null!=this.g.getAttribute("shown")||null!=this.g.getAttribute("casting"):!1};function pS(e,t){e.l.changeTo(t);e.ic()&&gS(e)}function gS(e){if(e.l)if(e.l.setValue(e.s.currentTime),e.l.update(),e.l.isShowing())for(var t=c(e.G),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(t=c(e.G),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new K("timeandseekrangeupdated"))}function mS(t,n){t.ea.add(n.key);var i=t.Ld();"Tab"==n.key&&(t.g.classList.add("shaka-keyboard-navigation"),cS(t),t.i.o(e,"mousedown",(function(){t.i.Lc(e,"mousedown")})));"Escape"==n.key&&t.I.Ca();i&&t.ea.has("Tab")&&vS(t,n)}function vS(e,t){var n=e.G.filter((function(e){return!e.classList.contains("shaka-hidden")}));if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.ea.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}function yS(){var e=new We("en");e.ka("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]]));e.ka("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]]));e.ka("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]]));e.ka("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]]));e.ka("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));e.ka("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));e.ka("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_TIME","Annonce: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]]));e.ka("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]]));e.ka("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));e.ka("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]]));e.ka("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]]));e.ka("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]]));e.ka("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]]));e.ka("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]]));e.ka("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));e.ka("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]]));e.ka("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));e.ka("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]));e.cg(navigator.languages||[]);return e}q("shaka.ui.Controls",zA);zA.prototype.isOpaque=zA.prototype.ic;zA.prototype.hideAdUI=zA.prototype.qg;zA.prototype.showAdUI=zA.prototype.Ng;zA.prototype.toggleFullScreen=zA.prototype.Jf;zA.prototype.isFullScreenEnabled=zA.prototype.Dc;zA.prototype.isFullScreenSupported=zA.prototype.$d;zA.prototype.hideSettingsMenus=zA.prototype.Bc;zA.prototype.anySettingsMenusAreOpen=zA.prototype.Ld;zA.prototype.setLastTouchEventTime=zA.prototype.Jg;zA.prototype.getDisplayTime=zA.prototype.ng;zA.prototype.isCastAllowed=zA.prototype.Uh;zA.prototype.setSeeking=zA.prototype.Ef;zA.prototype.isSeeking=zA.prototype.Yh;zA.prototype.getConfig=zA.prototype.ph;zA.prototype.getClientSideAdContainer=zA.prototype.oh;zA.prototype.getServerSideAdContainer=zA.prototype.Ih;zA.prototype.getControlsContainer=zA.prototype.rh;zA.prototype.getLocalPlayer=zA.prototype.wh;zA.prototype.getPlayer=zA.prototype.zc;zA.prototype.getLocalVideo=zA.prototype.xh;zA.prototype.getVideo=zA.prototype.Tb;zA.prototype.getVideoContainer=zA.prototype.Ph;zA.prototype.getLocalization=zA.prototype.yh;zA.prototype.getCastProxy=zA.prototype.mh;zA.prototype.getAd=zA.prototype.getAd;zA.prototype.setEnabledNativeControls=zA.prototype.Ig;zA.prototype.setEnabledShakaControls=zA.prototype.Af;zA.prototype.configure=zA.prototype.configure;zA.prototype.loadComplete=zA.prototype.Zh;zA.prototype.allowCast=zA.prototype.Zg;zA.registerSeekBar=function(e){wS=e};zA.registerElement=XA;zA.prototype.destroy=zA.prototype.destroy;var bS=new Map,wS=new qA;function TS(e,t){vA.call(this,e,t);var n=this;this.l=this.controls.h;this.j=this.controls.g;this.i=[];this.g=Il();this.g.classList.add("shaka-overflow-menu-button");this.g.classList.add("shaka-no-propagation");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");this.g.textContent="more_vert";this.parent.appendChild(this.g);this.h=Sl("div");this.h.classList.add("shaka-overflow-menu");this.h.classList.add("shaka-no-propagation");this.h.classList.add("shaka-show-controls-on-mouse-over");this.h.classList.add("shaka-hidden");this.j.appendChild(this.h);xS(this);this.eventManager.o(this.localization,"locale-updated",(function(){SS(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){SS(n)}));this.eventManager.o(this.adManager,"ad-started",(function(){n.ad&&n.ad.isLinear()&&EA(n.g,!1)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){EA(n.g,!0)}));this.eventManager.o(this.controls,"submenuopen",(function(){EA(n.h,!1)}));this.eventManager.o(this.h,"touchstart",(function(e){n.controls.Jg(Date.now());e.stopPropagation()}));this.eventManager.o(this.g,"click",(function(){AS(n)}));SS(this);this.ad&&this.ad.isLinear()&&EA(this.g,!1)}y(TS,vA);TS.prototype.release=function(){this.j=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[];vA.prototype.release.call(this)};function ES(e,t){kS.set(e,t)}function xS(e){for(var t=c(e.l.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,kS.get(n)?(n=kS.get(n),e.i.push(n.create(e.h,e.controls))):Q("Unrecognized overflow menu element requested:",n)}function AS(e){if(e.controls.Ld())e.controls.Bc();else{EA(e.h,!0);cS(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};ue(e.h.childNodes,t)&&le(e.h.childNodes,t)[0].focus()}}function SS(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}q("shaka.ui.OverflowMenu",TS);TS.registerElement=ES;function IS(){}IS.prototype.create=function(e,t){return new TS(e,t)};XA("overflow_menu",new IS);var kS=new Map;function _S(t,n){vA.call(this,t,n);var i=this;this.g=Il();this.g.classList.add("shaka-airplay-button");this.g.classList.add("shaka-tooltip");this.g.ariaPressed="false";this.h=Sl("i");this.h.classList.add("material-icons-round");this.h.textContent="airplay";this.g.appendChild(this.h);e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden");t=Sl("label");t.classList.add("shaka-overflow-button-label");t.classList.add("shaka-overflow-menu-only");this.j=Sl("span");t.appendChild(this.j);this.i=Sl("span");this.i.classList.add("shaka-current-selection-span");t.appendChild(this.i);this.g.appendChild(t);this.parent.appendChild(this.g);MS(this);CS(this);this.eventManager.o(this.localization,"locale-updated",(function(){MS(i)}));this.eventManager.o(this.localization,"locale-changed",(function(){MS(i)}));this.eventManager.o(this.g,"click",(function(){i.controls.Tb().webkitShowPlaybackTargetPicker()}));t=this.controls.Tb();this.eventManager.o(t,"webkitplaybacktargetavailabilitychanged",(function(e){var t=i.player.Ve()==Xd;EA(i.g,"available"==e.availability&&t)}));this.eventManager.o(t,"webkitcurrentplaybacktargetiswirelesschanged",(function(){CS(i)}))}y(_S,vA);function CS(e){var t=e.controls.Tb();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function MS(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY");e.j.textContent=e.localization.resolve("AIRPLAY")}q("shaka.ui.AirPlayButton",_S);function DS(){}DS.prototype.create=function(e,t){return new _S(e,t)};ES("airplay",new DS);XA("airplay",new DS);function RS(e,t,n){this.i=e;this.j=t;this.h=LS(this);t.dataset.shakaPlayerContainer="";t.ui=this;this.$e()&&t.classList.add("shaka-mobile");this.g=new zA(e,t,n,this.h);this.configure({});n.controls||e.Gf(t);t.ui=this;n.ui=this}i=RS.prototype;i.destroy=function(){var e=this;return O((function(t){if(1==t.g)return e.g?E(t,e.g.destroy(),2):t.D(2);if(4!=t.g)return e.g=null,e.i?E(t,e.i.destroy(),4):t.D(4);e.i=null;x(t)}))};i.$e=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:wn()&&1<navigator.maxTouchPoints};i.getConfiguration=function(){var e=LS(this);nc(e,this.h,LS(this),{},"");return e};i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ic(e,t));nc(this.h,e,LS(this),{},"");this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast");this.g.configure(this.h);this.g.dispatchEvent(new K("uiupdated"))};i.qh=function(){return this.g};i.Di=function(e){this.g.Af(e)};function LS(t){var n={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:US,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:t.j};e.WebKitPlaybackTargetAvailabilityEvent&&n.overflowMenuButtons.push("airplay");t.$e()&&(n.addBigPlayButton=!0,n.controlPanelElements=n.controlPanelElements.filter((function(e){return"play_pause"!=e&&"volume"!=e})));return n}function PS(){var e,t,n,i,r,a,o,s,u,l,d,h,f,p,g,m,v,y,b,w,T;return O((function(S){switch(S.g){case 1:Dw();if(!Sc())return NS("shaka-ui-load-failed",jS),S.return();e=document.querySelectorAll("[data-shaka-player-container]");t=document.querySelectorAll("[data-shaka-player]");n=document.querySelectorAll("[data-shaka-player-canvas]");if(!t.length&&!e.length){S.D(2);break}if(t.length&&!e.length){i=c(t);for(r=i.next();!r.done;r=i.next())if(a=r.value,!a.ui){o=document.createElement("div");s=a.parentElement;s.replaceChild(o,a);o.appendChild(a);u=null;l=c(n);for(d=l.next();!d.done;d=l.next())if(h=d.value,h.parentElement==o){u=h;break}u||(u=document.createElement("canvas"),u.classList.add("shaka-canvas-container"),o.appendChild(u));OS(o,a,u)}S.D(2);break}f=c(e);p=f.next();case 4:if(p.done){S.D(2);break}g=p.value;if(g.ui){S.D(5);break}m=null;v=c(t);for(r=v.next();!r.done;r=v.next())if(y=r.value,y.parentElement==g){m=y;break}m||(m=document.createElement("video"),m.setAttribute("playsinline",""),g.appendChild(m));b=null;w=c(n);for(d=w.next();!d.done;d=w.next())if(T=d.value,T.parentElement==g){b=T;break}b||(b=document.createElement("canvas"),b.classList.add("shaka-canvas-container"),g.appendChild(b));A(S,7);return E(S,OS(g,m,b),9);case 9:I(S,5);break;case 7:return k(S),NS("shaka-ui-load-failed",BS),S.return();case 5:p=f.next();S.D(4);break;case 2:NS("shaka-ui-loaded"),x(S)}}))}function NS(e,t){var n=null;void 0!=t&&(n={reasonCode:t});e=new CustomEvent(e,{detail:n});document.dispatchEvent(e)}function OS(e,t,n){var i,r,a,o,s,u,l,d,h;return O((function(f){switch(f.g){case 1:i=new Tc(t);r=new RS(i,e,t);i.Yf(n);a="";o=!1;e.dataset&&e.dataset.shakaPlayerCastReceiverId?(a=e.dataset.shakaPlayerCastReceiverId,o="true"===e.dataset.shakaPlayerCastAndroidReceiverCompatible):t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(a=t.dataset.shakaPlayerCastReceiverId,o="true"===t.dataset.shakaPlayerCastAndroidReceiverCompatible);a.length&&r.configure({castReceiverAppId:a,castAndroidReceiverCompatible:o});t.controls&&r.g.Ig(!0);if(s=t.getAttribute("src"))u=document.createElement("source"),u.setAttribute("src",s),t.appendChild(u),t.removeAttribute("src");l=c(t.querySelectorAll("source"));d=l.next();case 2:if(d.done){f.D(0);break}h=d.value;A(f,5);return E(f,r.g.zc().load(h.getAttribute("src")),7);case 7:f.D(0);break;case 5:k(f);case 3:d=l.next(),f.D(2)}}))}q("shaka.ui.Overlay",RS);RS.prototype.setEnabled=RS.prototype.Di;RS.prototype.getControls=RS.prototype.qh;RS.prototype.configure=RS.prototype.configure;RS.prototype.getConfiguration=RS.prototype.getConfiguration;RS.prototype.isMobile=RS.prototype.$e;RS.prototype.destroy=RS.prototype.destroy;var US=0;RS.TrackLabelFormat={LANGUAGE:US,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var jS=0,BS=1;RS.FailReasonCode={NO_BROWSER_SUPPORT:jS,PLAYER_FAILED_TO_LOAD:BS};"complete"==document.readyState?O((function(e){if(1==e.g)return E(e,Promise.resolve(),2);PS();x(e)})):e.addEventListener("load",PS);function FS(e,t,n,i,r,a,o){function s(e,t){return e+": "+t}function u(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var l=e.find((function(e){return 1==e.active})),d=yA(t);kl(t);t.appendChild(d);d=new Map;for(var h=c(e),f=h.next();!f.done;f=h.next())f=f.value,d.has(f.language)||d.set(f.language,new Set),d.get(f.language).add(u(f));d=new Set;l=l?s(l.language,u(l)):"";h={};e=c(e);for(f=e.next();!f.done;h={cb:h.cb},f=e.next()){h.cb=f.value;f=h.cb.language;var p=h.cb.forced,g=a.resolve($e.Tg),m=u(h.cb),v=s(f,m);if(!d.has(v)){d.add(v);var y=Il();y.addEventListener("click",function(e){return function(){n(e.cb)}}(h));var b=Sl("span");y.appendChild(b);b.textContent=VS(f,a);switch(o){case US:p&&(b.textContent+=" ("+g+")");break;case 1:m?b.textContent=m:(Q("Track #"+h.cb.id+" does not have a role, but the UI is configured to only show role."),b.textContent="?");p&&(b.textContent+=" ("+g+")");break;case 2:m&&(b.textContent+=": "+m);p&&(b.textContent+=" ("+g+")");break;case 3:h.cb.label?b.textContent=h.cb.label:(Q("Track #"+h.cb.id+" does not have a label, but the UI is configured to only show labels."),b.textContent="?")}i&&v==l&&(y.appendChild(TA()),b.classList.add("shaka-chosen-item"),y.ariaSelected="true",r.textContent=b.textContent);t.appendChild(y)}}}function VS(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=qe(e);return e in fA?fA[e].u:n in fA?fA[n].u+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function GS(e,t,n){vA.call(this,e,t);var i=this;HS(this,n);qS(this);zS(this);this.eventManager.o(this.button,"click",(function(){i.menu.classList.contains("shaka-hidden")?(i.controls.dispatchEvent(new K("submenuopen")),EA(i.menu,!0),wA(i.menu)):EA(i.menu,!1)}))}y(GS,vA);function HS(e,t){e.button=Il();e.button.classList.add("shaka-overflow-button");e.icon=Sl("i");e.icon.classList.add("material-icons-round");e.icon.textContent=t;e.button.appendChild(e.icon);t=Sl("label");t.classList.add("shaka-overflow-button-label");t.classList.add("shaka-overflow-menu-only");e.nameSpan=Sl("span");t.appendChild(e.nameSpan);e.currentSelection=Sl("span");e.currentSelection.classList.add("shaka-current-selection-span");t.appendChild(e.currentSelection);e.button.appendChild(t);e.parent.appendChild(e.button)}function qS(e){e.menu=Sl("div");e.menu.classList.add("shaka-no-propagation");e.menu.classList.add("shaka-show-controls-on-mouse-over");e.menu.classList.add("shaka-settings-menu");e.menu.classList.add("shaka-hidden");e.backButton=Il();e.backButton.classList.add("shaka-back-to-overflow-button");e.menu.appendChild(e.backButton);e.eventManager.o(e.backButton,"click",(function(){e.controls.Bc()}));var t=Sl("i");t.classList.add("material-icons-round");t.textContent="close";e.backButton.appendChild(t);e.backSpan=Sl("span");e.backButton.appendChild(e.backSpan);e.controls.g.appendChild(e.menu)}function zS(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",(function(){function t(e){return 0==e.classList.contains("shaka-hidden")}EA(e.parent,!0);ue(e.parent.childNodes,t)&&le(e.parent.childNodes,t)[0].focus();cS(e.controls)})))}q("shaka.ui.SettingsMenu",GS);function KS(e,t){GS.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-audio-languages");this.eventManager.o(this.localization,"locale-updated",(function(){WS(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){WS(n)}));this.eventManager.o(this.player,"trackschanged",(function(){var e=0<n.player.Va().length;EA(n.button,e);XS(n)}));this.eventManager.o(this.player,"variantchanged",(function(){XS(n)}));WS(this);XS(this)}y(KS,GS);function XS(e){var t=e.player.Va();FS(t,e.menu,(function(t){e.player.xf(t.language,t.roles[0])}),!0,e.currentSelection,e.localization,e.controls.h.trackLabelFormat);wA(e.menu);e.controls.dispatchEvent(new K("languageselectionupdated"));e.button.setAttribute("shaka-status",e.currentSelection.innerText)}function WS(e){e.backButton.ariaLabel=e.localization.resolve("BACK");e.button.ariaLabel=e.localization.resolve("LANGUAGE");e.nameSpan.textContent=e.localization.resolve("LANGUAGE");e.backSpan.textContent=e.localization.resolve("LANGUAGE")}q("shaka.ui.AudioLanguageSelection",KS);function YS(){}YS.prototype.create=function(e,t){return new KS(e,t)};ES("language",new YS);XA("language",new YS);function JS(e,t){vA.call(this,e,t);var n=this;this.h=this.controls.C;this.g=Il();this.g.classList.add("shaka-cast-button");this.g.classList.add("shaka-tooltip");this.g.ariaPressed="false";this.i=Sl("i");this.i.classList.add("material-icons-round");this.i.textContent="cast";this.g.appendChild(this.i);e=Sl("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.l=Sl("span");e.appendChild(this.l);this.j=Sl("span");this.j.classList.add("shaka-current-selection-span");e.appendChild(this.j);this.g.appendChild(e);this.parent.appendChild(this.g);eI(this);$S(this);this.eventManager.o(this.localization,"locale-updated",(function(){eI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){eI(n)}));this.eventManager.o(this.g,"click",(function(){QS(n)}));this.eventManager.o(this.controls,"caststatuschanged",(function(){$S(n)}))}y(JS,vA);function QS(e){var t;O((function(n){if(1==n.g){if(e.h.sa())return e.h.Og(),n.D(0);A(n,3);e.g.disabled=!0;return E(n,e.h.cast(),5)}if(3!=n.g)return e.g.disabled=!1,I(n,0);t=k(n);e.g.disabled=!1;8004!=t.code&&e.controls.dispatchEvent(new K("error",(new Map).set("detail",t)));x(n)}))}function $S(e){var t=e.h.$f()&&e.controls.hb,n=e.h.sa();EA(e.g,t);e.i.textContent=n?"cast_connected":"cast";t&&(e.g.ariaPressed=n?"true":"false");ZS(e)}function ZS(e){e.j.textContent=e.h.sa()?e.h.se():e.localization.resolve("OFF")}function eI(e){e.g.ariaLabel=e.localization.resolve("CAST");e.l.textContent=e.localization.resolve("CAST");ZS(e)}q("shaka.ui.CastButton",JS);function tI(){}tI.prototype.create=function(e,t){return new JS(e,t)};ES("cast",new tI);XA("cast",new tI);function nI(e,t){vA.call(this,e,t);var n=this;this.g=Il();this.g.classList.add("material-icons-round");this.g.classList.add("shaka-fast-forward-button");this.g.classList.add("shaka-tooltip-status");this.g.setAttribute("shaka-status","1x");this.g.textContent="fast_forward";this.parent.appendChild(this.g);iI(this);this.h=this.controls.h.fastForwardRates;this.eventManager.o(this.localization,"locale-updated",(function(){iI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){iI(n)}));this.eventManager.o(this.g,"click",(function(){if(n.video.duration){var e=n.h.indexOf(n.player.Rb())+1;e=e!=n.h.length?n.h[e]:n.h[0];n.player.ze(e);n.g.setAttribute("shaka-status",e+"x")}}))}y(nI,vA);function iI(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}q("shaka.ui.FastForwardButton",nI);function rI(){}rI.prototype.create=function(e,t){return new nI(e,t)};XA("fast_forward",new rI);function aI(e,t){vA.call(this,e,t);var n=this;this.h=this.controls.B;this.g=Il();this.g.classList.add("shaka-fullscreen-button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");oI(this);this.g.textContent="fullscreen";this.parent.appendChild(this.g);sI(this);this.eventManager.o(this.localization,"locale-updated",(function(){sI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){sI(n)}));this.eventManager.o(this.g,"click",(function(){return O((function(e){return E(e,n.controls.Jf(),0)}))}));this.eventManager.o(document,"fullscreenchange",(function(){n.g.textContent=n.controls.Dc()?"fullscreen_exit":"fullscreen";sI(n)}));this.eventManager.o(this.h,"loadedmetadata",(function(){oI(n)}));this.eventManager.o(this.h,"loadeddata",(function(){oI(n)}))}y(aI,vA);function oI(e){e.controls.$d()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function sI(e){e.g.ariaLabel=e.localization.resolve(e.controls.Dc()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}q("shaka.ui.FullscreenButton",aI);function uI(){}uI.prototype.create=function(e,t){return new aI(e,t)};XA("fullscreen",new uI);function lI(e,t){vA.call(this,e,t);var n=this;this.g=Il();this.g.classList.add("shaka-loop-button");this.g.classList.add("shaka-tooltip");this.i=Sl("i");this.i.classList.add("material-icons-round");this.i.textContent="repeat";this.g.appendChild(this.i);e=Sl("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.j=Sl("span");this.j.textContent=this.localization.resolve("LOOP");e.appendChild(this.j);this.l=Sl("span");this.l.classList.add("shaka-current-selection-span");e.appendChild(this.l);this.g.appendChild(e);cI(this);this.parent.appendChild(this.g);this.eventManager.o(this.localization,"locale-updated",(function(){cI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){cI(n)}));this.eventManager.o(this.g,"click",(function(){n.video.loop=!n.video.loop;n.h.Ca();n.h.ha(1)}));this.m=this.video.loop;this.h=new fn((function(){n.m!=n.video.loop&&(cI(n),n.m=n.video.loop)}));this.h.ha(1)}y(lI,vA);lI.prototype.release=function(){this.h.stop();this.h=null;vA.prototype.release.call(this)};function cI(e){e.j.textContent=e.localization.resolve("LOOP");e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF");e.i.textContent=e.video.loop?"repeat_on":"repeat";e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}q("shaka.ui.LoopButton",lI);function dI(){}dI.prototype.create=function(e,t){return new lI(e,t)};ES("loop",new dI);XA("loop",new dI);MA("loop",new dI);function hI(e,t){vA.call(this,e,t);var n=this;this.g=Il();this.g.classList.add("shaka-mute-button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");this.parent.appendChild(this.g);fI(this);pI(this);this.eventManager.o(this.localization,"locale-updated",(function(){fI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){fI(n)}));this.eventManager.o(this.g,"click",(function(){n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted}));this.eventManager.o(this.video,"volumechange",(function(){fI(n);pI(n)}));this.eventManager.o(this.adManager,"ad-volume-changed",(function(){fI(n);pI(n)}));this.eventManager.o(this.adManager,"ad-muted",(function(){fI(n);pI(n)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){n.ad=null;fI(n);pI(n)}))}y(hI,vA);function fI(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function pI(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}q("shaka.ui.MuteButton",hI);function gI(){}gI.prototype.create=function(e,t){return new hI(e,t)};XA("mute",new gI);function mI(e,t){vA.call(this,e,t);var n=this;this.l=this.controls.B;this.m=this.controls.j;this.g=Il();this.g.classList.add("shaka-pip-button");this.g.classList.add("shaka-tooltip");this.i=Sl("i");this.i.classList.add("material-icons-round");this.i.textContent="picture_in_picture_alt";this.g.appendChild(this.i);e=Sl("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.j=Sl("span");this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE");e.appendChild(this.j);this.h=Sl("span");this.h.classList.add("shaka-current-selection-span");e.appendChild(this.h);this.g.appendChild(e);xI(this);this.parent.appendChild(this.g);vI(this)||EA(this.g,!1);this.eventManager.o(this.localization,"locale-updated",(function(){xI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){xI(n)}));this.eventManager.o(this.g,"click",(function(){yI(n)}));this.eventManager.o(this.l,"enterpictureinpicture",(function(){TI(n)}));this.eventManager.o(this.l,"leavepictureinpicture",(function(){EI(n)}));this.eventManager.o(this.controls,"caststatuschanged",(function(e){e.newStatus?vI(n)&&EA(n.g,!1):vI(n)&&EA(n.g,!0)}));this.eventManager.o(this.player,"trackschanged",(function(){AI(n)}))}y(mI,vA);function vI(t){return"documentPictureInPicture"in e||document.pictureInPictureEnabled&&!t.video.disablePictureInPicture}function yI(t){var n;O((function(i){switch(i.g){case 1:A(i,2);if(!("documentPictureInPicture"in e)){i.D(4);break}return E(i,bI(t),5);case 5:return i.return();case 4:return document.pictureInPictureElement?E(i,document.exitPictureInPicture(),7):(document.fullscreenElement&&document.exitFullscreen(),E(i,t.video.requestPictureInPicture(),7));case 7:I(i,0);break;case 2:n=k(i),t.controls.dispatchEvent(new K("error",(new Map).set("detail",n))),x(i)}}))}function bI(t){var n,i,r,a,o,s;return O((function(u){if(1==u.g){if(e.documentPictureInPicture.window)return e.documentPictureInPicture.window.close(),EI(t),u.return();n=t.m;i=n.getBoundingClientRect();return E(u,e.documentPictureInPicture.requestWindow({width:i.width,height:i.height}),2)}r=u.h;wI(r);a=n.parentNode||document.body;o=t.m.cloneNode(!0);o.style.visibility="hidden";o.style.height=getComputedStyle(n).height;a.appendChild(o);s=document.createElement("style");s.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}");r.document.head.append(s);r.document.body.append(n);TI(t);t.eventManager.wa(r,"pagehide",(function(){o.replaceWith(n)}));x(u)}))}function wI(e){var t=[].concat(d(document.styleSheets)).map((function(t){try{return[].concat(d(t.cssRules)).map((function(e){return e.cssText})).join("")}catch(i){var n=document.createElement("link");n.rel="stylesheet";n.type=t.type;n.media=t.media;n.href=t.href;e.document.head.appendChild(n)}return""})).filter(Boolean).join("\n"),n=document.createElement("style");n.textContent=t;e.document.head.appendChild(n)}function TI(e){e.i.textContent="branding_watermark";e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve("ON")}function EI(e){e.i.textContent="picture_in_picture_alt";e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve("OFF")}function xI(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function AI(e){O((function(t){if(!vI(e))return EA(e.g,!1),t.D(0);if(!e.player||!e.player.Cc())return EA(e.g,!0),t.D(0);EA(e.g,!1);return document.pictureInPictureElement?E(t,document.exitPictureInPicture(),0):t.D(0)}))}q("shaka.ui.PipButton",mI);function SI(){}SI.prototype.create=function(e,t){return new mI(e,t)};ES("picture_in_picture",new SI);XA("picture_in_picture",new SI);MA("picture_in_picture",new SI);function II(e,t){GS.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button");this.menu.classList.add("shaka-playback-rates");this.button.classList.add("shaka-tooltip-status");this.eventManager.o(this.localization,"locale-updated",(function(){kI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){kI(n)}));this.eventManager.o(this.player,"ratechange",(function(){_I(n,n.player.Rb())}));this.g=new Map(this.controls.h.playbackRates.map((function(e){return[e+"x",e]})));kI(this);CI(this);_I(this,this.player.Rb())}y(II,GS);function kI(e){e.backButton.ariaLabel=e.localization.resolve("BACK");e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE");e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE");e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function _I(e,t){var n=bA(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected");i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item");i.removeChild(n)}if(n=Array.from(e.menu.querySelectorAll("span")).find((function(n){return e.g.get(n.textContent)==t})))i=n.parentElement,i.appendChild(TA()),i.ariaSelected="true",n.classList.add("shaka-chosen-item");e.currentSelection.textContent=t+"x";e.button.setAttribute("shaka-status",t+"x")}function CI(e){for(var t={},n=c(e.g.keys()),i=n.next();!i.done;t={Tc:t.Tc},i=n.next()){t.Tc=i.value;i=Il();var r=Sl("span");r.textContent=t.Tc;i.appendChild(r);e.eventManager.o(i,"click",function(t){return function(){e.video.playbackRate=e.g.get(t.Tc);e.video.defaultPlaybackRate=e.g.get(t.Tc)}}(t));e.menu.appendChild(i)}wA(e.menu)}q("shaka.ui.PlaybackRateSelection",II);function MI(){}MI.prototype.create=function(e,t){return new II(e,t)};ES("playback_rate",new MI);XA("playback_rate",new MI);function DI(e,t){vA.call(this,e,t);var n=this;this.g=Il();this.g.classList.add("shaka-current-time");RI(this,"0:00");this.parent.appendChild(this.g);this.eventManager.o(this.g,"click",(function(){n.player.S()&&(n.video.currentTime=n.player.Aa().end)}));this.eventManager.o(this.controls,"timeandseekrangeupdated",(function(){var e=n.controls.X,t=n.controls.ng(),i=n.video.duration,r=n.player.Aa(),a=r.end-r.start;n.player.S()?(t=Math.max(0,Math.floor(r.end-t)),i=3600<=a,1<=t||e?(RI(n,"- "+xA(t,i)),n.g.disabled=!1):(RI(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(e=3600<=i,t=xA(t,e),i&&(t+=" / "+xA(i,e)),RI(n,t),n.g.disabled=!0)}));this.eventManager.o(this.player,"trackschanged",(function(){n.player.S()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}))}y(DI,vA);function RI(e,t){t!=e.g.textContent&&(e.g.textContent=t)}q("shaka.ui.PresentationTimeTracker",DI);function LI(){}LI.prototype.create=function(e,t){return new DI(e,t)};XA("time_and_duration",new LI);function PI(e,t){GS.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-resolutions");this.eventManager.o(this.localization,"locale-updated",(function(){OI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){OI(n)}));this.eventManager.o(this.player,"variantchanged",(function(){NI(n)}));this.eventManager.o(this.player,"trackschanged",(function(){NI(n)}));this.eventManager.o(this.player,"abrstatuschanged",(function(){NI(n)}));NI(this)}y(PI,GS);function NI(e){var t=[];e.player.Ve()!=Xd&&(t=e.player.Va());var n=t.find((function(e){return e.active}));n&&(t=t.filter((function(e){return e.language==n.language&&e.channelsCount==n.channelsCount})));t=t.filter((function(n,i){return(e.player.Cc()?t.findIndex((function(e){return e.bandwidth==n.bandwidth})):t.findIndex((function(e){return e.height==n.height})))==i}));e.player.Cc()?t.sort((function(e,t){return t.bandwidth-e.bandwidth})):t.sort((function(e,t){return t.height-e.height}));var i=yA(e.menu);kl(e.menu);e.menu.appendChild(i);i=e.player.getConfiguration().abr.enabled;for(var r={},a=c(t),o=a.next();!o.done;r={wb:r.wb},o=a.next()){r.wb=o.value;o=Il();o.classList.add("explicit-resolution");e.eventManager.o(o,"click",function(t){return function(){var n=t.wb;e.player.configure({abr:{enabled:!1}});e.player.we(n,e.controls.h.clearBufferOnQualityChange)}}(r));var s=Sl("span");s.textContent=e.player.Cc()?Math.round(r.wb.bandwidth/1e3)+" kbits/s":"PQ"==r.wb.hdr||"HLG"==r.wb.hdr?r.wb.height+"p (HDR)":r.wb.height+"p";o.appendChild(s);i||r.wb!=n||(o.ariaSelected="true",o.appendChild(TA()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent);e.menu.appendChild(o)}r=Il();r.classList.add("shaka-enable-abr-button");e.eventManager.o(r,"click",(function(){e.player.configure({abr:{enabled:!0}});NI(e)}));e.g=Sl("span");e.g.classList.add("shaka-auto-span");e.g.textContent=e.localization.resolve("AUTO_QUALITY");r.appendChild(e.g);i&&(r.ariaSelected="true",r.appendChild(TA()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"));e.button.setAttribute("shaka-status",e.currentSelection.textContent);e.menu.appendChild(r);wA(e.menu);e.controls.dispatchEvent(new K("resolutionselectionupdated"));OI(e)}function OI(e){var t=e.player.Cc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t);e.backButton.ariaLabel=e.localization.resolve(t);e.backSpan.textContent=e.localization.resolve(t);e.nameSpan.textContent=e.localization.resolve(t);e.g.textContent=e.localization.resolve("AUTO_QUALITY");e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}q("shaka.ui.ResolutionSelection",PI);function UI(){}UI.prototype.create=function(e,t){return new PI(e,t)};ES("quality",new UI);XA("quality",new UI);function jI(e,t){vA.call(this,e,t);var n=this;this.g=Il();this.g.classList.add("material-icons-round");this.g.classList.add("shaka-rewind-button");this.g.classList.add("shaka-tooltip-status");this.g.setAttribute("shaka-status",this.localization.resolve("OFF"));this.g.textContent="fast_rewind";this.parent.appendChild(this.g);BI(this);this.h=this.controls.h.rewindRates;this.eventManager.o(this.localization,"locale-updated",(function(){BI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){BI(n)}));this.eventManager.o(this.g,"click",(function(){if(n.video.duration){var e=n.h.indexOf(n.player.Rb())+1;e=e!=n.h.length?n.h[e]:n.h[0];n.player.ze(e);n.g.setAttribute("shaka-status",e+"x")}}))}y(jI,vA);function BI(e){e.g.ariaLabel=e.localization.resolve("REWIND")}q("shaka.ui.RewindButton",jI);function FI(){}FI.prototype.create=function(e,t){return new jI(e,t)};XA("rewind",new FI);function VI(e,t){vA.call(this,e,t);var n=this;this.j=Sl("div");this.j.classList.add("shaka-skip-ad-container");this.parent.appendChild(this.j);this.h=Sl("div");this.h.classList.add("shaka-skip-ad-counter");EA(this.h,!1);this.j.appendChild(this.h);this.g=Il();this.g.classList.add("shaka-skip-ad-button");this.g.disabled=!0;EA(this.g,!1);this.g.classList.add("shaka-no-propagation");this.j.appendChild(this.g);GI(this);this.i=new fn((function(){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),EA(n.h,!1))}));this.eventManager.o(this.localization,"locale-updated",(function(){GI(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){GI(n)}));this.eventManager.o(this.adManager,"ad-started",(function(){HI(n)}));this.eventManager.o(this.adManager,"ad-skip-state-changed",(function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),EA(n.h,!1))}));this.eventManager.o(this.adManager,"ad-stopped",(function(){n.i.stop();n.g.disabled=!0;EA(n.g,!1);EA(n.h,!1)}));this.eventManager.o(this.g,"click",(function(){n.ad.skip()}));this.ad&&HI(this)}y(VI,vA);VI.prototype.release=function(){this.i.stop();this.i=null;vA.prototype.release.call(this)};function GI(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function HI(e){e.ad.isSkippable()&&(EA(e.g,!0),EA(e.h,!0),e.h.textContent="",e.i.Ca(),e.i.ha(.5))}q("shaka.ui.SkipAdButton",VI);function qI(e,t){kA.call(this,e,t);this.button.classList.add("shaka-small-play-button");this.button.classList.add("material-icons-round");this.button.classList.add("shaka-tooltip");this.h();this.g()}y(qI,kA);qI.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"};qI.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}};q("shaka.ui.SmallPlayButton",qI);function zI(){}zI.prototype.create=function(e,t){return new qI(e,t)};XA("play_pause",new zI);function KI(e,t){vA.call(this,e,t);e=Sl("div");e.classList.add("shaka-spacer");e.ariaHidden="true";this.parent.appendChild(e)}y(KI,vA);q("shaka.ui.Spacer",KI);function XI(){}XI.prototype.create=function(e,t){return new KI(e,t)};XA("spacer",new XI);function WI(e,t){function n(e){return xA(s.h[e],!1)+" (m)"}function i(e){return Math.round(s.h[e]/1e3)+" (kbits/s)"}function r(e){return s.h[e].toFixed(2)+" (s)"}function a(e){return s.h[e]+" (frames)"}function o(e){return s.h[e]+" (px)"}vA.call(this,e,t);var s=this;this.i=Il();this.i.classList.add("shaka-statistics-button");this.j=Sl("i");this.j.classList.add("material-icons-round");this.j.textContent="insert_chart_outlined";this.i.appendChild(this.j);e=Sl("label");e.classList.add("shaka-overflow-button-label");this.s=Sl("span");e.appendChild(this.s);this.m=Sl("span");this.m.classList.add("shaka-current-selection-span");e.appendChild(this.m);this.i.appendChild(e);this.parent.appendChild(this.i);this.g=Sl("div");this.g.classList.add("shaka-no-propagation");this.g.classList.add("shaka-show-controls-on-mouse-over");this.g.classList.add("shaka-statistics-container");this.g.classList.add("shaka-hidden");this.controls.g.appendChild(this.g);this.F=[];this.G=["stateHistory","switchHistory"];this.h=this.player.getStats();this.B={};this.C={width:o,height:o,completionPercent:function(e){return s.h[e]+" (%)"},bufferingTime:r,drmTimeSeconds:r,licenseTime:r,liveLatency:r,loadLatency:r,manifestTimeSeconds:r,estimatedBandwidth:i,streamBandwidth:i,maxSegmentDuration:n,pauseTime:n,playTime:n,corruptedFrames:a,decodedFrames:a,droppedFrames:a,stallsDetected:function(e){return s.h[e]+" (stalls)"},gapsJumped:function(e){return s.h[e]+" (gaps)"}};this.l=new fn((function(){s.h=s.player.getStats();for(var e=c(s.F),t=e.next();!t.done;t=e.next())t=t.value,s.B[t].textContent=s.C[t](t)}));YI(this);JI(this);this.eventManager.o(this.localization,"locale-updated",(function(){YI(s)}));this.eventManager.o(this.localization,"locale-changed",(function(){YI(s)}));this.eventManager.o(this.i,"click",(function(){EA(s.parent,!1);s.g.classList.contains("shaka-hidden")?(s.j.textContent="insert_chart",s.l.ha(.1),EA(s.g,!0)):(s.j.textContent="insert_chart_outlined",s.l.stop(),EA(s.g,!1));YI(s)}))}y(WI,vA);function YI(e){e.s.textContent=e.localization.resolve("STATISTICS");e.i.ariaLabel=e.localization.resolve("STATISTICS");e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function JI(e){for(var t=c(e.controls.h.statisticsList),n=t.next();!n.done;n=t.next())if(n=n.value,n in e.h&&!e.G.includes(n)){var i=e.g,r=i.appendChild,a=e,o=Sl("div"),s=Sl("label");s.textContent=n+":";o.appendChild(s);s=Sl("span");s.textContent=a.C[n](n);o.appendChild(s);a.B[n]=s;r.call(i,o);e.F.push(n)}else Q("Unrecognized statistic element:",n)}WI.prototype.release=function(){this.l.stop();this.l=null;vA.prototype.release.call(this)};q("shaka.ui.StatisticsButton",WI);function QI(){}QI.prototype.create=function(e,t){return new WI(e,t)};ES("statistics",new QI);MA("statistics",new QI);function $I(e,t){GS.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-text-languages");this.player&&this.player.jc()?this.button.ariaPressed="true":this.button.ariaPressed="false";ZI(this);this.eventManager.o(this.localization,"locale-updated",(function(){ik(n);tk(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){ik(n);tk(n)}));this.eventManager.o(this.player,"texttrackvisibility",(function(){ek(n);tk(n)}));this.eventManager.o(this.player,"textchanged",(function(){tk(n)}));this.eventManager.o(this.player,"trackschanged",(function(){rk(n)}));ek(this);ik(this);tk(this);rk(this)}y($I,GS);function ZI(e){var t=Il();t.ariaSelected="true";e.menu.appendChild(t);t.appendChild(TA());e.g=Sl("span");e.g.classList.add("shaka-auto-span");t.appendChild(e.g)}function ek(e){e.player.jc()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false");e.controls.dispatchEvent(new K("captionselectionupdated"))}function tk(e){var t=e.player.Sb();FS(t,e.menu,(function(t){return nk(e,t)}),e.player.jc(),e.currentSelection,e.localization,e.controls.h.trackLabelFormat);t=Il();t.classList.add("shaka-turn-captions-off-button");e.eventManager.o(t,"click",(function(){e.player.Ff(!1);tk(e)}));t.appendChild(e.g);e.menu.appendChild(t);e.player.jc()||(t.ariaSelected="true",t.appendChild(TA()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF"));e.button.setAttribute("shaka-status",e.currentSelection.textContent);wA(e.menu);e.controls.dispatchEvent(new K("captionselectionupdated"))}function nk(e,t){return O((function(n){e.player.yf(t);return E(n,e.player.Ff(!0),0)}))}function ik(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS");e.backButton.ariaLabel=e.localization.resolve("BACK");e.nameSpan.textContent=e.localization.resolve("CAPTIONS");e.backSpan.textContent=e.localization.resolve("CAPTIONS");e.g.textContent=e.localization.resolve("OFF")}function rk(e){var t=0<e.player.Sb().length;EA(e.button,t);tk(e)}q("shaka.ui.TextSelection",$I);function ak(){}ak.prototype.create=function(e,t){return new $I(e,t)};ES("captions",new ak);XA("captions",new ak);function ok(e,t){LA.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.g=this.controls.h;this.eventManager.o(this.video,"volumechange",(function(){return sk(n)}));this.eventManager.o(this.adManager,"ad-volume-changed",(function(){return uk(n)}));this.eventManager.o(this.adManager,"ad-muted",(function(){return uk(n)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){return sk(n)}));this.eventManager.o(this.localization,"locale-updated",(function(){return ck(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){return ck(n)}));sk(this);ck(this);if(this.ad)this.onChange()}y(ok,LA);ok.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume?!0:!1)};function sk(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume);lk(e)}function uk(e){var t=e.ad.getVolume();e.setValue(t);lk(e)}function lk(e){var t=e.g.volumeBarColors,n=["to right"];n.push(t.level+100*e.getValue()+"%");n.push(t.base+100*e.getValue()+"%");n.push(t.base+"100%");e.container.style.background="linear-gradient("+n.join(",")+")"}function ck(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}q("shaka.ui.VolumeBar",ok);function dk(){}dk.prototype.create=function(e,t){return new ok(e,t)};XA("volume",new dk)}).call(i,n,n,undefined);if(true)for(var r in i.shaka)t[r]=i.shaka[r];else{}})()}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/ua-parser-js/src/ua-parser.js":function(e,t,n){var i;(function(r,a){"use strict";var o="0.7.24",s="",u="?",l="function",c="undefined",d="object",h="string",f="major",p="model",g="name",m="type",v="vendor",y="version",b="architecture",w="console",T="mobile",E="tablet",x="smarttv",A="wearable",S="embedded";var I={extend:function(e,t){var n={};for(var i in e){if(t[i]&&t[i].length%2===0){n[i]=t[i].concat(e[i])}else{n[i]=e[i]}}return n},has:function(e,t){if(typeof e==="string"){return t.toLowerCase().indexOf(e.toLowerCase())!==-1}else{return false}},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===h?e.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}};var k={rgx:function(e,t){var n=0,i,r,o,s,u,c;while(n<t.length&&!u){var h=t[n],f=t[n+1];i=r=0;while(i<h.length&&!u){u=h[i++].exec(e);if(!!u){for(o=0;o<f.length;o++){c=u[++r];s=f[o];if(typeof s===d&&s.length>0){if(s.length==2){if(typeof s[1]==l){this[s[0]]=s[1].call(this,c)}else{this[s[0]]=s[1]}}else if(s.length==3){if(typeof s[1]===l&&!(s[1].exec&&s[1].test)){this[s[0]]=c?s[1].call(this,c,s[2]):a}else{this[s[0]]=c?c.replace(s[1],s[2]):a}}else if(s.length==4){this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):a}}else{this[s]=c?c:a}}}}n+=2}},str:function(e,t){for(var n in t){if(typeof t[n]===d&&t[n].length>0){for(var i=0;i<t[n].length;i++){if(I.has(t[n][i],e)){return n===u?a:n}}}else if(I.has(t[n],e)){return n===u?a:n}}return e}};var _={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}};var C={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,y],[/(opios)[\/\s]+([\w\.]+)/i],[[g,"Opera Mini"],y],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],y],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[g,y],[/(konqueror)\/([\w\.]+)/i],[[g,"Konqueror"],y],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[g,"IE"],y],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[g,"Edge"],y],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],y],[/(Avast)\/([\w\.]+)/i],[[g,"Avast Secure Browser"],y],[/(AVG)\/([\w\.]+)/i],[[g,"AVG Secure Browser"],y],[/(puffin)\/([\w\.]+)/i],[[g,"Puffin"],y],[/(focus)\/([\w\.]+)/i],[[g,"Firefox Focus"],y],[/(opt)\/([\w\.]+)/i],[[g,"Opera Touch"],y],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],y],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],y],[/(windowswechat qbcore)\/([\w\.]+)/i],[[g,"WeChat(Win) Desktop"],y],[/(micromessenger)\/([\w\.]+)/i],[[g,"WeChat"],y],[/(brave)\/([\w\.]+)/i],[[g,"Brave"],y],[/(whale)\/([\w\.]+)/i],[[g,"Whale"],y],[/(qqbrowserlite)\/([\w\.]+)/i],[g,y],[/(QQ)\/([\d\.]+)/i],[g,y],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[g,y],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[g,y],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[g,y],[/(MetaSr)[\/\s]?([\w\.]+)/i],[g],[/(LBBROWSER)/i],[g],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[y,[g,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[y,[g,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[g,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[g,y],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[y,[g,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[g,/(.+)/,"$1 WebView"],y],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[g,/(.+(?:g|us))(.+)/,"$1 $2"],y],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[y,[g,"Android Browser"]],[/(coc_coc_browser)\/([\w\.]+)/i],[[g,"Coc Coc"],y],[/(sailfishbrowser)\/([\w\.]+)/i],[[g,"Sailfish Browser"],y],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[g,y],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],y],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[g,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],y],[/(coast)\/([\w\.]+)/i],[[g,"Opera Coast"],y],[/fxios\/([\w\.-]+)/i],[y,[g,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[y,[g,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[y,g],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[g,"GSA"],y],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[y,k.str,_.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[g,y],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],y],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,I.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[b,/ower/,"",I.lowerize]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[b,I.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[p,v,[m,E]],[/applecoremedia\/[\w\.]+ \((ipad)/],[p,[v,"Apple"],[m,E]],[/(apple\s{0,1}tv)/i],[[p,"Apple TV"],[v,"Apple"],[m,x]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,p,[m,E]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[p,[v,"Amazon"],[m,E]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[p,k.str,_.device.amazon.model],[v,"Amazon"],[m,T]],[/android.+aft([\w])(\sbuild\/|\))/i],[p,[v,"Amazon"],[m,x]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[p,v,[m,T]],[/\((ip[honed|\s\w*]+);/i],[p,[v,"Apple"],[m,T]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,p,[m,T]],[/\(bb10;\s(\w+)/i],[p,[v,"BlackBerry"],[m,T]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[p,[v,"Asus"],[m,E]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[p,"Xperia Tablet"],[m,E]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[v,"Sony"],[m,T]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,p,[m,w]],[/android.+;\s(shield)\sbuild/i],[p,[v,"Nvidia"],[m,w]],[/(playstation\s[34portablevi]+)/i],[p,[v,"Sony"],[m,w]],[/(sprint\s(\w+))/i],[[v,k.str,_.device.sprint.vendor],[p,k.str,_.device.sprint.model],[m,T]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[v,[p,/_/g," "],[m,T]],[/(nexus\s9)/i],[p,[v,"HTC"],[m,E]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[p,[v,"Huawei"],[m,T]],[/android.+(bah2?-a?[lw]\d{2})/i],[p,[v,"Huawei"],[m,E]],[/(microsoft);\s(lumia[\s\w]+)/i],[v,p,[m,T]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[p,[v,"Microsoft"],[m,w]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[v,"Microsoft"],[m,T]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[p,[v,"Motorola"],[m,T]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[p,[v,"Motorola"],[m,E]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[v,I.trim],[p,I.trim],[m,x]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[v,"Samsung"],[m,x]],[/\(dtv[\);].+(aquos)/i],[p,[v,"Sharp"],[m,x]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|SM-P587|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],p,[m,E]],[/smart-tv.+(samsung)/i],[v,[m,x],p],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[v,"Samsung"],p,[m,T]],[/sie-(\w*)/i],[p,[v,"Siemens"],[m,T]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[v,"Nokia"],p,[m,T]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[p,[v,"Acer"],[m,E]],[/android.+([vl]k\-?\d{3})\s+build/i],[p,[v,"LG"],[m,E]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],p,[m,E]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[v,"LG"],p,[m,x]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[p,[v,"LG"],[m,T]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[v,p,[m,E]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[p,[v,"Lenovo"],[m,E]],[/(lenovo)[_\s-]?([\w-]+)/i],[v,p,[m,T]],[/linux;.+((jolla));/i],[v,p,[m,T]],[/((pebble))app\/[\d\.]+\s/i],[v,p,[m,A]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[v,p,[m,T]],[/crkey/i],[[p,"Chromecast"],[v,"Google"],[m,x]],[/android.+;\s(glass)\s\d/i],[p,[v,"Google"],[m,A]],[/android.+;\s(pixel c)[\s)]/i],[p,[v,"Google"],[m,E]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[p,[v,"Google"],[m,T]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[p,/_/g," "],[v,"Xiaomi"],[m,T]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[p,/_/g," "],[v,"Xiaomi"],[m,E]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[p,[v,"Meizu"],[m,T]],[/(mz)-([\w-]{2,})/i],[[v,"Meizu"],p,[m,T]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[p,[v,"OnePlus"],[m,T]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[p,[v,"RCA"],[m,E]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[p,[v,"Dell"],[m,E]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[p,[v,"Verizon"],[m,E]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(\S(?:.*\S)?)\s+build/i],[[v,"Barnes & Noble"],p,[m,E]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[p,[v,"NuVision"],[m,E]],[/android.+;\s(k88)\sbuild/i],[p,[v,"ZTE"],[m,E]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[p,[v,"Swiss"],[m,T]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[p,[v,"Swiss"],[m,E]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[p,[v,"Zeki"],[m,E]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[v,"Dragon Touch"],p,[m,E]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[p,[v,"Insignia"],[m,E]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[p,[v,"NextBook"],[m,E]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[v,"Voice"],p,[m,T]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[v,"LvTel"],p,[m,T]],[/android.+;\s(PH-1)\s/i],[p,[v,"Essential"],[m,T]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[p,[v,"Envizen"],[m,E]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[v,p,[m,E]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[p,[v,"MachSpeed"],[m,E]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[v,p,[m,E]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[p,[v,"Rotor"],[m,E]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[v,p,[m,E]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[p,[m,T]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[p,[m,E]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[m,I.lowerize],v,p],[/[\s\/\(](smart-?tv)[;\)]/i],[[m,x]],[/(android[\w\.\s\-]{0,9});.+build/i],[p,[v,"Generic"]],[/(phone)/i],[[m,T]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[y,[g,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,y],[/rv\:([\w\.]{1,9}).+(gecko)/i],[y,g]],os:[[/(xbox);\s+xbox\s([^\);]+)/i,/microsoft\s(windows)\s(vista|xp)/i],[g,y],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[y,k.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[y,k.str,_.os.windows.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],y],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[g,y],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[g,"Symbian"],y],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],y],[/crkey\/([\d\.]+)/i],[y,[g,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[g,y],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],y],[/(sunos)\s?([\w\.\d]*)/i],[[g,"Solaris"],y],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[g,y],[/(haiku)\s(\w+)/i],[g,y],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[y,/_/g,"."],[g,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[y,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[g,y]]};var M=function(e,t){if(typeof e==="object"){t=e;e=a}if(!(this instanceof M)){return new M(e,t).getResult()}var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:s);var i=t?I.extend(C,t):C;this.getBrowser=function(){var e={name:a,version:a};k.rgx.call(e,n,i.browser);e.major=I.major(e.version);return e};this.getCPU=function(){var e={architecture:a};k.rgx.call(e,n,i.cpu);return e};this.getDevice=function(){var e={vendor:a,model:a,type:a};k.rgx.call(e,n,i.device);return e};this.getEngine=function(){var e={name:a,version:a};k.rgx.call(e,n,i.engine);return e};this.getOS=function(){var e={name:a,version:a};k.rgx.call(e,n,i.os);return e};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return n};this.setUA=function(e){n=e;return this};return this};M.VERSION=o;M.BROWSER={NAME:g,MAJOR:f,VERSION:y};M.CPU={ARCHITECTURE:b};M.DEVICE={MODEL:p,VENDOR:v,TYPE:m,CONSOLE:w,MOBILE:T,SMARTTV:x,TABLET:E,WEARABLE:A,EMBEDDED:S};M.ENGINE={NAME:g,VERSION:y};M.OS={NAME:g,VERSION:y};if(typeof t!==c){if(typeof e!==c&&e.exports){t=e.exports=M}t.UAParser=M}else{if(true){!(i=function(){return M}.call(t,n,t,e),i!==a&&(e.exports=i))}else{}}var D=r&&(r.jQuery||r.Zepto);if(D&&!D.ua){var R=new M;D.ua=R.getResult();D.ua.get=function(){return R.getUA()};D.ua.set=function(e){R.setUA(e);var t=R.getResult();for(var n in t){D.ua[n]=t[n]}}}})(typeof window==="object"?window:this)},"./node_modules/webvtt-parser/parser.js":function(e,t,n){(function(){var e={direction:"horizontal",snapToLines:true,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center"};var n=function(t){if(!t){t={"&amp":"&","&lt":"<","&gt":">","&lrm":"","&rlm":"","&nbsp":""}}this.entities=t;this.parse=function(n,a){n=n.replace(/\0/g,"");var o=/\r\n|\r|\n/,s=Date.now(),u=0,l=n.split(o),c=false,d=[],h=[],f=[];function p(e,t){f.push({message:e,line:u+1,col:t})}var g=l[u],m=g.length,v="WEBVTT",y=0,b=v.length;if(g[0]==="\ufeff"){y=1;b+=1}if(m<b||g.indexOf(v)!==0+y||m>b&&g[b]!==" "&&g[b]!=="\t"){p('No valid signature. (File needs to start with "WEBVTT".)')}u++;while(l[u]!=""&&l[u]!=undefined){p("No blank line after the signature.");if(l[u].indexOf("--\x3e")!=-1){c=true;break}u++}while(l[u]!=undefined){var w;while(!c&&l[u]==""){u++}if(!c&&l[u]==undefined)break;w=Object.assign({},e,{id:"",startTime:0,endTime:0,pauseOnExit:false,direction:"horizontal",snapToLines:true,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center",text:"",tree:null});var T=true;if(l[u].indexOf("--\x3e")==-1){w.id=l[u];if(/^NOTE($|[ \t])/.test(w.id)){u++;while(l[u]!=""&&l[u]!=undefined){if(l[u].indexOf("--\x3e")!=-1)p("Cannot have timestamp in a comment.");u++}continue}if(/^STYLE($|[ \t])/.test(w.id)){var E=[];var x=false;u++;while(l[u]!=""&&l[u]!=undefined){if(l[u].indexOf("--\x3e")!=-1){p("Cannot have timestamp in a style block.");x=true}E.push(l[u]);u++}if(h.length){p("Style blocks cannot appear after the first cue.");continue}if(!x){d.push(E.join("\n"))}continue}u++;if(l[u]==""||l[u]==undefined){p("Cue identifier cannot be standalone.");continue}if(l[u].indexOf("--\x3e")==-1){T=false;p("Cue identifier needs to be followed by timestamp.");continue}}c=false;var A=new i(l[u],p);var S=0;if(h.length>0){S=h[h.length-1].startTime}if(T&&!A.parse(w,S)){w=null;u++;while(l[u]!=""&&l[u]!=undefined){if(l[u].indexOf("--\x3e")!=-1){c=true;break}u++}continue}u++;while(l[u]!=""&&l[u]!=undefined){if(l[u].indexOf("--\x3e")!=-1){p("Blank line missing before cue.");c=true;break}if(w.text!="")w.text+="\n";w.text+=l[u];u++}var I=new r(w.text,p,a,t);w.tree=I.parse(w.startTime,w.endTime);h.push(w)}h.sort((function(e,t){if(e.startTime<t.startTime)return-1;if(e.startTime>t.startTime)return 1;if(e.endTime>t.endTime)return-1;if(e.endTime<t.endTime)return 1;return 0}));return{cues:h,errors:f,time:Date.now()-s,styles:d}}};var i=function(e,t){var n=/[\u0020\t\f]/,i=/[^\u0020\t\f]/,e=e,r=0,a=function(e){t(e,r+1)},o=true;function s(t){while(e[r]!=undefined&&t.test(e[r])){r++}}function u(t){var n="";while(e[r]!=undefined&&t.test(e[r])){n+=e[r];r++}return n}function l(){var t="minutes",n,i,o,s;if(e[r]==undefined){a("No timestamp found.");return}if(!/\d/.test(e[r])){a("Timestamp must start with a character in the range 0-9.");return}n=u(/\d/);if(n.length>2||parseInt(n,10)>59){t="hours"}if(e[r]!=":"){a("No time unit separator found.");return}r++;i=u(/\d/);if(i.length!=2){a("Must be exactly two digits.");return}if(t=="hours"||e[r]==":"){if(e[r]!=":"){a("No seconds found or minutes is greater than 59.");return}r++;o=u(/\d/);if(o.length!=2){a("Must be exactly two digits.");return}}else{if(n.length!=2){a("Must be exactly two digits.");return}o=i;i=n;n="0"}if(e[r]!="."){a('No decimal separator (".") found.');return}r++;s=u(/\d/);if(s.length!=3){a("Milliseconds must be given in three digits.");return}if(parseInt(i,10)>59){a("You cannot have more than 59 minutes.");return}if(parseInt(o,10)>59){a("You cannot have more than 59 seconds.");return}return parseInt(n,10)*60*60+parseInt(i,10)*60+parseInt(o,10)+parseInt(s,10)/1e3}function c(e,t){var i=e.split(n),r=[];for(var o=0;o<i.length;o++){if(i[o]=="")continue;var s=i[o].indexOf(":"),u=i[o].slice(0,s),l=i[o].slice(s+1);if(r.indexOf(u)!=-1){a("Duplicate setting.")}r.push(u);if(l==""){a("No value for setting defined.");return}if(u=="vertical"){if(l!="rl"&&l!="lr"){a("Writing direction can only be set to 'rl' or 'rl'.");continue}t.direction=l}else if(u=="line"){if(/,/.test(l)){var c=l.split(",");l=c[0];var d=c[1]}if(!/^[-\d](\d*)(\.\d+)?%?$/.test(l)){a("Line position takes a number or percentage.");continue}if(l.indexOf("-",1)!=-1){a("Line position can only have '-' at the start.");continue}if(l.indexOf("%")!=-1&&l.indexOf("%")!=l.length-1){a("Line position can only have '%' at the end.");continue}if(l[0]=="-"&&l[l.length-1]=="%"){a("Line position cannot be a negative percentage.");continue}var h=l;var f=false;if(l[l.length-1]=="%"){f=true;h=l.slice(0,l.length-1);if(parseInt(l,10)>100){a("Line position cannot be >100%.");continue}}if(h===""||isNaN(h)||!isFinite(h)){a("Line position needs to be a number");continue}if(d!==undefined){if(!["start","center","end"].includes(d)){a("Line alignment needs to be one of start, center or end");continue}t.lineAlign=d}t.snapToLines=!f;t.linePosition=parseFloat(h);if(parseFloat(h).toString()!==h){t.nonSerializable=true}}else if(u=="position"){if(/,/.test(l)){var c=l.split(",");l=c[0];var p=c[1]}if(l[l.length-1]!="%"){a("Text position must be a percentage.");continue}if(parseInt(l,10)>100||parseInt(l,10)<0){a("Text position needs to be between 0 and 100%.");continue}h=l.slice(0,l.length-1);if(h===""||isNaN(h)||!isFinite(h)){a("Line position needs to be a number");continue}if(p!==undefined){if(!["line-left","center","line-right"].includes(p)){a("Position alignment needs to be one of line-left, center or line-right");continue}t.positionAlign=p}t.textPosition=parseFloat(h)}else if(u=="size"){if(l[l.length-1]!="%"){a("Size must be a percentage.");continue}if(parseInt(l,10)>100){a("Size cannot be >100%.");continue}var g=l.slice(0,l.length-1);if(g===undefined||g===""||isNaN(g)){a("Size needs to be a number");g=100;continue}else{g=parseFloat(g);if(g<0||g>100){a("Size needs to be between 0 and 100%.");continue}}t.size=g}else if(u=="align"){var m=["start","center","end","left","right"];if(m.indexOf(l)==-1){a("Alignment can only be set to one of "+m.join(", ")+".");continue}t.alignment=l}else{a("Invalid setting.")}}}this.parse=function(t,u){s(n);t.startTime=l();if(t.startTime==undefined){return}if(t.startTime<u){a("Start timestamp is not greater than or equal to start timestamp of previous cue.")}if(i.test(e[r])){a("Timestamp not separated from '--\x3e' by whitespace.")}s(n);if(e[r]!="-"){a("No valid timestamp separator found.");return}r++;if(e[r]!="-"){a("No valid timestamp separator found.");return}r++;if(e[r]!=">"){a("No valid timestamp separator found.");return}r++;if(i.test(e[r])){a("'--\x3e' not separated from timestamp by whitespace.")}s(n);t.endTime=l();if(t.endTime==undefined){return}if(t.endTime<=t.startTime){a("End timestamp is not greater than start timestamp.")}if(i.test(e[r])){o=false}s(n);c(e.substring(r),t);return true};this.parseTimestamp=function(){var t=l();if(e[r]!=undefined){a("Timestamp must not have trailing characters.");return}return t}};var r=function(e,t,n,r){this.entities=r;var a=this;var e=e,o=0,s=function(e){if(n=="metadata")return;t(e,o+1)};this.parse=function(t,r){function a(e){const t={...e};if(e.children){t.children=e.children.map(a)}if(t.parent){delete t.parent}return t}var l={children:[]},c=l,d=[];function h(e){c.children.push({type:"object",name:e[1],classes:e[2],children:[],parent:c});c=c.children[c.children.length-1]}function f(e){var t=c;while(t){if(t.name==e)return true;t=t.parent}return}while(e[o]!=undefined){var p=u();if(p[0]=="text"){c.children.push({type:"text",value:p[1],parent:c})}else if(p[0]=="start tag"){if(n=="chapters")s("Start tags not allowed in chapter title text.");var g=p[1];if(g!="v"&&g!="lang"&&p[3]!=""){s("Only <v> and <lang> can have an annotation.")}if(g=="c"||g=="i"||g=="b"||g=="u"||g=="ruby"){h(p)}else if(g=="rt"&&c.name=="ruby"){h(p)}else if(g=="v"){if(f("v")){s("<v> cannot be nested inside itself.")}h(p);c.value=p[3];if(!p[3]){s("<v> requires an annotation.")}}else if(g=="lang"){h(p);c.value=p[3]}else{s("Incorrect start tag.")}}else if(p[0]=="end tag"){if(n=="chapters")s("End tags not allowed in chapter title text.");if(p[1]==c.name){c=c.parent}else if(p[1]=="ruby"&&c.name=="rt"){c=c.parent.parent}else{s("Incorrect end tag.")}}else if(p[0]=="timestamp"){if(n=="chapters")s("Timestamp not allowed in chapter title text.");var m=new i(p[1],s),v=m.parseTimestamp();if(v!=undefined){if(v<=t||v>=r){s("Timestamp must be between start timestamp and end timestamp.")}if(d.length>0&&d[d.length-1]>=v){s("Timestamp must be greater than any previous timestamp.")}c.children.push({type:"timestamp",value:v,parent:c});d.push(v)}}}while(c.parent){if(c.name!="v"){s("Required end tag missing.")}c=c.parent}return a(l)};function u(){var t="data",n="",i="",u=[];while(e[o-1]!=undefined||o==0){var l=e[o];if(t=="data"){if(l=="&"){i=l;t="escape"}else if(l=="<"&&n==""){t="tag"}else if(l=="<"||l==undefined){return["text",n]}else{n+=l}}else if(t=="escape"){if(l=="<"||l==undefined){s("Incorrect escape.");let e;if(e=i.match(/^&#([0-9]+)$/)){n+=String.fromCharCode(e[1])}else{if(a.entities[i]){n+=a.entities[i]}else{n+=i}}return["text",n]}else if(l=="&"){s("Incorrect escape.");n+=i;i=l}else if(/[a-z#0-9]/i.test(l)){i+=l}else if(l==";"){let e;if(e=i.match(/^&#(x?[0-9]+)$/)){n+=String.fromCharCode("0"+e[1])}else if(a.entities[i+l]){n+=a.entities[i+l]}else if(e=Object.keys(r).find((e=>i.startsWith(e)))){n+=a.entities[e]+i.slice(e.length)+l}else{s("Incorrect escape.");n+=i+";"}t="data"}else{s("Incorrect escape.");n+=i+l;t="data"}}else if(t=="tag"){if(l=="\t"||l=="\n"||l=="\f"||l==" "){t="start tag annotation"}else if(l=="."){t="start tag class"}else if(l=="/"){t="end tag"}else if(/\d/.test(l)){n=l;t="timestamp tag"}else if(l==">"||l==undefined){if(l==">"){o++}return["start tag","",[],""]}else{n=l;t="start tag"}}else if(t=="start tag"){if(l=="\t"||l=="\f"||l==" "){t="start tag annotation"}else if(l=="\n"){i=l;t="start tag annotation"}else if(l=="."){t="start tag class"}else if(l==">"||l==undefined){if(l==">"){o++}return["start tag",n,[],""]}else{n+=l}}else if(t=="start tag class"){if(l=="\t"||l=="\f"||l==" "){if(i){u.push(i)}i="";t="start tag annotation"}else if(l=="\n"){if(i){u.push(i)}i=l;t="start tag annotation"}else if(l=="."){if(i){u.push(i)}i=""}else if(l==">"||l==undefined){if(l==">"){o++}if(i){u.push(i)}return["start tag",n,u,""]}else{i+=l}}else if(t=="start tag annotation"){if(l==">"||l==undefined){if(l==">"){o++}i=i.split(/[\u0020\t\f\r\n]+/).filter((function(e){if(e)return true})).join(" ");return["start tag",n,u,i]}else{i+=l}}else if(t=="end tag"){if(l==">"||l==undefined){if(l==">"){o++}return["end tag",n]}else{n+=l}}else if(t=="timestamp tag"){if(l==">"||l==undefined){if(l==">"){o++}return["timestamp",n]}else{n+=l}}else{s("Never happens.")}o++}}};var a=function(){function t(e){const t=("00"+(e-Math.floor(e)).toFixed(3)*1e3).slice(-3);let n=0,i=0,r=0;if(e>=3600){n=Math.floor(e/3600)}i=Math.floor((e-3600*n)/60);r=Math.floor(e-3600*n-60*i);return(n?n+":":"")+(""+i).padStart(2,"0")+":"+(""+r).padStart(2,"0")+"."+t}function n(t){var n="";const i=Object.keys(e).filter((n=>t[n]!==e[n]));if(i.includes("direction")){n+=" vertical:"+t.direction}if(i.includes("alignment")){n+=" align:"+t.alignment}if(i.includes("size")){n+=" size:"+t.size+"%"}if(i.includes("lineAlign")||i.includes("linePosition")){n+=" line:"+t.linePosition+(t.snapToLines?"":"%")+(t.lineAlign&&t.lineAlign!=e.lineAlign?","+t.lineAlign:"")}if(i.includes("textPosition")||i.includes("positionAlign")){n+=" position:"+t.textPosition+"%"+(t.positionAlign&&t.positionAlign!==e.positionAlign?","+t.positionAlign:"")}return n}function i(e){var n="";for(var r=0;r<e.length;r++){var a=e[r];if(a.type=="text"){n+=a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else if(a.type=="object"){n+="<"+a.name;if(a.classes){for(var o=0;o<a.classes.length;o++){n+="."+a.classes[o]}}if(a.value){n+=" "+a.value}n+=">";if(a.children)n+=i(a.children);n+="</"+a.name+">"}else if(a.type=="timestamp"){n+="<"+t(a.value)+">"}else{n+="<"+a.value+">"}}return n}function r(e){return(e.id!==undefined?e.id+"\n":"")+t(e.startTime)+" --\x3e "+t(e.endTime)+n(e)+"\n"+i(e.tree.children)+"\n\n"}function a(e){return"STYLE\n"+e+"\n\n"}this.serialize=function(e,t){var n="WEBVTT\n\n";if(t){for(var i=0;i<t.length;i++){n+=a(t[i])}}for(var i=0;i<e.length;i++){n+=r(e[i])}return n}};function o(e){e.WebVTTParser=n;e.WebVTTCueTimingsAndSettingsParser=i;e.WebVTTCueTextParser=r;e.WebVTTSerializer=a}if(typeof window!=="undefined")o(window);if(true)o(t)})()}}]);
//# sourceMappingURL=vendors~course-preview-udlite-app.443d3207d8a478ee808e.js.map